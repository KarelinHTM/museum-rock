(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function t(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=t(r);fetch(r.href,s)}})();/**
* @vue/shared v3.4.25
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function h_(n,e){const t=new Set(n.split(","));return e?i=>t.has(i.toLowerCase()):i=>t.has(i)}const st={},Eo=[],Yn=()=>{},kA=()=>!1,uh=n=>n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&(n.charCodeAt(2)>122||n.charCodeAt(2)<97),d_=n=>n.startsWith("onUpdate:"),$t=Object.assign,f_=(n,e)=>{const t=n.indexOf(e);t>-1&&n.splice(t,1)},NA=Object.prototype.hasOwnProperty,De=(n,e)=>NA.call(n,e),ge=Array.isArray,So=n=>hh(n)==="[object Map]",Iw=n=>hh(n)==="[object Set]",we=n=>typeof n=="function",Nt=n=>typeof n=="string",Qs=n=>typeof n=="symbol",ut=n=>n!==null&&typeof n=="object",Cw=n=>(ut(n)||we(n))&&we(n.then)&&we(n.catch),Aw=Object.prototype.toString,hh=n=>Aw.call(n),MA=n=>hh(n).slice(8,-1),xw=n=>hh(n)==="[object Object]",p_=n=>Nt(n)&&n!=="NaN"&&n[0]!=="-"&&""+parseInt(n,10)===n,nl=h_(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),dh=n=>{const e=Object.create(null);return t=>e[t]||(e[t]=n(t))},DA=/-(\w)/g,$i=dh(n=>n.replace(DA,(e,t)=>t?t.toUpperCase():"")),LA=/\B([A-Z])/g,fa=dh(n=>n.replace(LA,"-$1").toLowerCase()),fh=dh(n=>n.charAt(0).toUpperCase()+n.slice(1)),hd=dh(n=>n?`on${fh(n)}`:""),Hr=(n,e)=>!Object.is(n,e),eu=(n,e)=>{for(let t=0;t<n.length;t++)n[t](e)},Rw=(n,e,t)=>{Object.defineProperty(n,e,{configurable:!0,enumerable:!1,value:t})},Ef=n=>{const e=parseFloat(n);return isNaN(e)?n:e};let Lm;const Pw=()=>Lm||(Lm=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function __(n){if(ge(n)){const e={};for(let t=0;t<n.length;t++){const i=n[t],r=Nt(i)?$A(i):__(i);if(r)for(const s in r)e[s]=r[s]}return e}else if(Nt(n)||ut(n))return n}const VA=/;(?![^(]*\))/g,FA=/:([^]+)/,UA=/\/\*[^]*?\*\//g;function $A(n){const e={};return n.replace(UA,"").split(VA).forEach(t=>{if(t){const i=t.split(FA);i.length>1&&(e[i[0].trim()]=i[1].trim())}}),e}function pi(n){let e="";if(Nt(n))e=n;else if(ge(n))for(let t=0;t<n.length;t++){const i=pi(n[t]);i&&(e+=i+" ")}else if(ut(n))for(const t in n)n[t]&&(e+=t+" ");return e.trim()}const BA="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",zA=h_(BA);function Ow(n){return!!n||n===""}const Zn=n=>Nt(n)?n:n==null?"":ge(n)||ut(n)&&(n.toString===Aw||!we(n.toString))?JSON.stringify(n,kw,2):String(n),kw=(n,e)=>e&&e.__v_isRef?kw(n,e.value):So(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((t,[i,r],s)=>(t[dd(i,s)+" =>"]=r,t),{})}:Iw(e)?{[`Set(${e.size})`]:[...e.values()].map(t=>dd(t))}:Qs(e)?dd(e):ut(e)&&!ge(e)&&!xw(e)?String(e):e,dd=(n,e="")=>{var t;return Qs(n)?`Symbol(${(t=n.description)!=null?t:e})`:n};/**
* @vue/reactivity v3.4.25
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let oi;class jA{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this.parent=oi,!e&&oi&&(this.index=(oi.scopes||(oi.scopes=[])).push(this)-1)}get active(){return this._active}run(e){if(this._active){const t=oi;try{return oi=this,e()}finally{oi=t}}}on(){oi=this}off(){oi=this.parent}stop(e){if(this._active){let t,i;for(t=0,i=this.effects.length;t<i;t++)this.effects[t].stop();for(t=0,i=this.cleanups.length;t<i;t++)this.cleanups[t]();if(this.scopes)for(t=0,i=this.scopes.length;t<i;t++)this.scopes[t].stop(!0);if(!this.detached&&this.parent&&!e){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.parent=void 0,this._active=!1}}}function GA(n,e=oi){e&&e.active&&e.effects.push(n)}function qA(){return oi}let Is;class g_{constructor(e,t,i,r){this.fn=e,this.trigger=t,this.scheduler=i,this.active=!0,this.deps=[],this._dirtyLevel=4,this._trackId=0,this._runnings=0,this._shouldSchedule=!1,this._depsLength=0,GA(this,r)}get dirty(){if(this._dirtyLevel===2||this._dirtyLevel===3){this._dirtyLevel=1,Zr();for(let e=0;e<this._depsLength;e++){const t=this.deps[e];if(t.computed&&(HA(t.computed),this._dirtyLevel>=4))break}this._dirtyLevel===1&&(this._dirtyLevel=0),es()}return this._dirtyLevel>=4}set dirty(e){this._dirtyLevel=e?4:0}run(){if(this._dirtyLevel=0,!this.active)return this.fn();let e=Ur,t=Is;try{return Ur=!0,Is=this,this._runnings++,Vm(this),this.fn()}finally{Fm(this),this._runnings--,Is=t,Ur=e}}stop(){var e;this.active&&(Vm(this),Fm(this),(e=this.onStop)==null||e.call(this),this.active=!1)}}function HA(n){return n.value}function Vm(n){n._trackId++,n._depsLength=0}function Fm(n){if(n.deps.length>n._depsLength){for(let e=n._depsLength;e<n.deps.length;e++)Nw(n.deps[e],n);n.deps.length=n._depsLength}}function Nw(n,e){const t=n.get(e);t!==void 0&&e._trackId!==t&&(n.delete(e),n.size===0&&n.cleanup())}let Ur=!0,Sf=0;const Mw=[];function Zr(){Mw.push(Ur),Ur=!1}function es(){const n=Mw.pop();Ur=n===void 0?!0:n}function m_(){Sf++}function y_(){for(Sf--;!Sf&&bf.length;)bf.shift()()}function Dw(n,e,t){if(e.get(n)!==n._trackId){e.set(n,n._trackId);const i=n.deps[n._depsLength];i!==e?(i&&Nw(i,n),n.deps[n._depsLength++]=e):n._depsLength++}}const bf=[];function Lw(n,e,t){m_();for(const i of n.keys()){let r;i._dirtyLevel<e&&(r??(r=n.get(i)===i._trackId))&&(i._shouldSchedule||(i._shouldSchedule=i._dirtyLevel===0),i._dirtyLevel=e),i._shouldSchedule&&(r??(r=n.get(i)===i._trackId))&&(i.trigger(),(!i._runnings||i.allowRecurse)&&i._dirtyLevel!==2&&(i._shouldSchedule=!1,i.scheduler&&bf.push(i.scheduler)))}y_()}const Vw=(n,e)=>{const t=new Map;return t.cleanup=n,t.computed=e,t},If=new WeakMap,Cs=Symbol(""),Cf=Symbol("");function bn(n,e,t){if(Ur&&Is){let i=If.get(n);i||If.set(n,i=new Map);let r=i.get(t);r||i.set(t,r=Vw(()=>i.delete(t))),Dw(Is,r)}}function ar(n,e,t,i,r,s){const o=If.get(n);if(!o)return;let a=[];if(e==="clear")a=[...o.values()];else if(t==="length"&&ge(n)){const l=Number(i);o.forEach((c,u)=>{(u==="length"||!Qs(u)&&u>=l)&&a.push(c)})}else switch(t!==void 0&&a.push(o.get(t)),e){case"add":ge(n)?p_(t)&&a.push(o.get("length")):(a.push(o.get(Cs)),So(n)&&a.push(o.get(Cf)));break;case"delete":ge(n)||(a.push(o.get(Cs)),So(n)&&a.push(o.get(Cf)));break;case"set":So(n)&&a.push(o.get(Cs));break}m_();for(const l of a)l&&Lw(l,4);y_()}const WA=h_("__proto__,__v_isRef,__isVue"),Fw=new Set(Object.getOwnPropertyNames(Symbol).filter(n=>n!=="arguments"&&n!=="caller").map(n=>Symbol[n]).filter(Qs)),Um=KA();function KA(){const n={};return["includes","indexOf","lastIndexOf"].forEach(e=>{n[e]=function(...t){const i=qe(this);for(let s=0,o=this.length;s<o;s++)bn(i,"get",s+"");const r=i[e](...t);return r===-1||r===!1?i[e](...t.map(qe)):r}}),["push","pop","shift","unshift","splice"].forEach(e=>{n[e]=function(...t){Zr(),m_();const i=qe(this)[e].apply(this,t);return y_(),es(),i}}),n}function YA(n){Qs(n)||(n=String(n));const e=qe(this);return bn(e,"has",n),e.hasOwnProperty(n)}class Uw{constructor(e=!1,t=!1){this._isReadonly=e,this._isShallow=t}get(e,t,i){const r=this._isReadonly,s=this._isShallow;if(t==="__v_isReactive")return!r;if(t==="__v_isReadonly")return r;if(t==="__v_isShallow")return s;if(t==="__v_raw")return i===(r?s?l1:jw:s?zw:Bw).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(i)?e:void 0;const o=ge(e);if(!r){if(o&&De(Um,t))return Reflect.get(Um,t,i);if(t==="hasOwnProperty")return YA}const a=Reflect.get(e,t,i);return(Qs(t)?Fw.has(t):WA(t))||(r||bn(e,"get",t),s)?a:In(a)?o&&p_(t)?a:a.value:ut(a)?r?qw(a):sc(a):a}}class $w extends Uw{constructor(e=!1){super(!1,e)}set(e,t,i,r){let s=e[t];if(!this._isShallow){const l=Il(s);if(!vu(i)&&!Il(i)&&(s=qe(s),i=qe(i)),!ge(e)&&In(s)&&!In(i))return l?!1:(s.value=i,!0)}const o=ge(e)&&p_(t)?Number(t)<e.length:De(e,t),a=Reflect.set(e,t,i,r);return e===qe(r)&&(o?Hr(i,s)&&ar(e,"set",t,i):ar(e,"add",t,i)),a}deleteProperty(e,t){const i=De(e,t);e[t];const r=Reflect.deleteProperty(e,t);return r&&i&&ar(e,"delete",t,void 0),r}has(e,t){const i=Reflect.has(e,t);return(!Qs(t)||!Fw.has(t))&&bn(e,"has",t),i}ownKeys(e){return bn(e,"iterate",ge(e)?"length":Cs),Reflect.ownKeys(e)}}class XA extends Uw{constructor(e=!1){super(!0,e)}set(e,t){return!0}deleteProperty(e,t){return!0}}const QA=new $w,JA=new XA,ZA=new $w(!0);const v_=n=>n,ph=n=>Reflect.getPrototypeOf(n);function Pc(n,e,t=!1,i=!1){n=n.__v_raw;const r=qe(n),s=qe(e);t||(Hr(e,s)&&bn(r,"get",e),bn(r,"get",s));const{has:o}=ph(r),a=i?v_:t?E_:Cl;if(o.call(r,e))return a(n.get(e));if(o.call(r,s))return a(n.get(s));n!==r&&n.get(e)}function Oc(n,e=!1){const t=this.__v_raw,i=qe(t),r=qe(n);return e||(Hr(n,r)&&bn(i,"has",n),bn(i,"has",r)),n===r?t.has(n):t.has(n)||t.has(r)}function kc(n,e=!1){return n=n.__v_raw,!e&&bn(qe(n),"iterate",Cs),Reflect.get(n,"size",n)}function $m(n){n=qe(n);const e=qe(this);return ph(e).has.call(e,n)||(e.add(n),ar(e,"add",n,n)),this}function Bm(n,e){e=qe(e);const t=qe(this),{has:i,get:r}=ph(t);let s=i.call(t,n);s||(n=qe(n),s=i.call(t,n));const o=r.call(t,n);return t.set(n,e),s?Hr(e,o)&&ar(t,"set",n,e):ar(t,"add",n,e),this}function zm(n){const e=qe(this),{has:t,get:i}=ph(e);let r=t.call(e,n);r||(n=qe(n),r=t.call(e,n)),i&&i.call(e,n);const s=e.delete(n);return r&&ar(e,"delete",n,void 0),s}function jm(){const n=qe(this),e=n.size!==0,t=n.clear();return e&&ar(n,"clear",void 0,void 0),t}function Nc(n,e){return function(i,r){const s=this,o=s.__v_raw,a=qe(o),l=e?v_:n?E_:Cl;return!n&&bn(a,"iterate",Cs),o.forEach((c,u)=>i.call(r,l(c),l(u),s))}}function Mc(n,e,t){return function(...i){const r=this.__v_raw,s=qe(r),o=So(s),a=n==="entries"||n===Symbol.iterator&&o,l=n==="keys"&&o,c=r[n](...i),u=t?v_:e?E_:Cl;return!e&&bn(s,"iterate",l?Cf:Cs),{next(){const{value:h,done:f}=c.next();return f?{value:h,done:f}:{value:a?[u(h[0]),u(h[1])]:u(h),done:f}},[Symbol.iterator](){return this}}}}function Tr(n){return function(...e){return n==="delete"?!1:n==="clear"?void 0:this}}function e1(){const n={get(s){return Pc(this,s)},get size(){return kc(this)},has:Oc,add:$m,set:Bm,delete:zm,clear:jm,forEach:Nc(!1,!1)},e={get(s){return Pc(this,s,!1,!0)},get size(){return kc(this)},has:Oc,add:$m,set:Bm,delete:zm,clear:jm,forEach:Nc(!1,!0)},t={get(s){return Pc(this,s,!0)},get size(){return kc(this,!0)},has(s){return Oc.call(this,s,!0)},add:Tr("add"),set:Tr("set"),delete:Tr("delete"),clear:Tr("clear"),forEach:Nc(!0,!1)},i={get(s){return Pc(this,s,!0,!0)},get size(){return kc(this,!0)},has(s){return Oc.call(this,s,!0)},add:Tr("add"),set:Tr("set"),delete:Tr("delete"),clear:Tr("clear"),forEach:Nc(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(s=>{n[s]=Mc(s,!1,!1),t[s]=Mc(s,!0,!1),e[s]=Mc(s,!1,!0),i[s]=Mc(s,!0,!0)}),[n,t,e,i]}const[t1,n1,i1,r1]=e1();function w_(n,e){const t=e?n?r1:i1:n?n1:t1;return(i,r,s)=>r==="__v_isReactive"?!n:r==="__v_isReadonly"?n:r==="__v_raw"?i:Reflect.get(De(t,r)&&r in i?t:i,r,s)}const s1={get:w_(!1,!1)},o1={get:w_(!1,!0)},a1={get:w_(!0,!1)};const Bw=new WeakMap,zw=new WeakMap,jw=new WeakMap,l1=new WeakMap;function c1(n){switch(n){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function u1(n){return n.__v_skip||!Object.isExtensible(n)?0:c1(MA(n))}function sc(n){return Il(n)?n:T_(n,!1,QA,s1,Bw)}function Gw(n){return T_(n,!1,ZA,o1,zw)}function qw(n){return T_(n,!0,JA,a1,jw)}function T_(n,e,t,i,r){if(!ut(n)||n.__v_raw&&!(e&&n.__v_isReactive))return n;const s=r.get(n);if(s)return s;const o=u1(n);if(o===0)return n;const a=new Proxy(n,o===2?i:t);return r.set(n,a),a}function il(n){return Il(n)?il(n.__v_raw):!!(n&&n.__v_isReactive)}function Il(n){return!!(n&&n.__v_isReadonly)}function vu(n){return!!(n&&n.__v_isShallow)}function Hw(n){return n?!!n.__v_raw:!1}function qe(n){const e=n&&n.__v_raw;return e?qe(e):n}function h1(n){return Object.isExtensible(n)&&Rw(n,"__v_skip",!0),n}const Cl=n=>ut(n)?sc(n):n,E_=n=>ut(n)?qw(n):n;class Ww{constructor(e,t,i,r){this.getter=e,this._setter=t,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this.effect=new g_(()=>e(this._value),()=>tu(this,this.effect._dirtyLevel===2?2:3)),this.effect.computed=this,this.effect.active=this._cacheable=!r,this.__v_isReadonly=i}get value(){const e=qe(this);return(!e._cacheable||e.effect.dirty)&&Hr(e._value,e._value=e.effect.run())&&tu(e,4),Kw(e),e.effect._dirtyLevel>=2&&tu(e,2),e._value}set value(e){this._setter(e)}get _dirty(){return this.effect.dirty}set _dirty(e){this.effect.dirty=e}}function d1(n,e,t=!1){let i,r;const s=we(n);return s?(i=n,r=Yn):(i=n.get,r=n.set),new Ww(i,r,s||!r,t)}function Kw(n){var e;Ur&&Is&&(n=qe(n),Dw(Is,(e=n.dep)!=null?e:n.dep=Vw(()=>n.dep=void 0,n instanceof Ww?n:void 0)))}function tu(n,e=4,t){n=qe(n);const i=n.dep;i&&Lw(i,e)}function In(n){return!!(n&&n.__v_isRef===!0)}function Zt(n){return Yw(n,!1)}function f1(n){return Yw(n,!0)}function Yw(n,e){return In(n)?n:new p1(n,e)}class p1{constructor(e,t){this.__v_isShallow=t,this.dep=void 0,this.__v_isRef=!0,this._rawValue=t?e:qe(e),this._value=t?e:Cl(e)}get value(){return Kw(this),this._value}set value(e){const t=this.__v_isShallow||vu(e)||Il(e);e=t?e:qe(e),Hr(e,this._rawValue)&&(this._rawValue=e,this._value=t?e:Cl(e),tu(this,4))}}function bo(n){return In(n)?n.value:n}const _1={get:(n,e,t)=>bo(Reflect.get(n,e,t)),set:(n,e,t,i)=>{const r=n[e];return In(r)&&!In(t)?(r.value=t,!0):Reflect.set(n,e,t,i)}};function Xw(n){return il(n)?n:new Proxy(n,_1)}/**
* @vue/runtime-core v3.4.25
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function $r(n,e,t,i){try{return i?n(...i):n()}catch(r){_h(r,e,t)}}function _i(n,e,t,i){if(we(n)){const r=$r(n,e,t,i);return r&&Cw(r)&&r.catch(s=>{_h(s,e,t)}),r}if(ge(n)){const r=[];for(let s=0;s<n.length;s++)r.push(_i(n[s],e,t,i));return r}}function _h(n,e,t,i=!0){const r=e?e.vnode:null;if(e){let s=e.parent;const o=e.proxy,a=`https://vuejs.org/error-reference/#runtime-${t}`;for(;s;){const c=s.ec;if(c){for(let u=0;u<c.length;u++)if(c[u](n,o,a)===!1)return}s=s.parent}const l=e.appContext.config.errorHandler;if(l){Zr(),$r(l,null,10,[n,o,a]),es();return}}g1(n,t,r,i)}function g1(n,e,t,i=!0){console.error(n)}let Al=!1,Af=!1;const sn=[];let Ri=0;const Io=[];let Cr=null,gs=0;const Qw=Promise.resolve();let S_=null;function b_(n){const e=S_||Qw;return n?e.then(this?n.bind(this):n):e}function m1(n){let e=Ri+1,t=sn.length;for(;e<t;){const i=e+t>>>1,r=sn[i],s=xl(r);s<n||s===n&&r.pre?e=i+1:t=i}return e}function I_(n){(!sn.length||!sn.includes(n,Al&&n.allowRecurse?Ri+1:Ri))&&(n.id==null?sn.push(n):sn.splice(m1(n.id),0,n),Jw())}function Jw(){!Al&&!Af&&(Af=!0,S_=Qw.then(eT))}function y1(n){const e=sn.indexOf(n);e>Ri&&sn.splice(e,1)}function v1(n){ge(n)?Io.push(...n):(!Cr||!Cr.includes(n,n.allowRecurse?gs+1:gs))&&Io.push(n),Jw()}function Gm(n,e,t=Al?Ri+1:0){for(;t<sn.length;t++){const i=sn[t];if(i&&i.pre){if(n&&i.id!==n.uid)continue;sn.splice(t,1),t--,i()}}}function Zw(n){if(Io.length){const e=[...new Set(Io)].sort((t,i)=>xl(t)-xl(i));if(Io.length=0,Cr){Cr.push(...e);return}for(Cr=e,gs=0;gs<Cr.length;gs++)Cr[gs]();Cr=null,gs=0}}const xl=n=>n.id==null?1/0:n.id,w1=(n,e)=>{const t=xl(n)-xl(e);if(t===0){if(n.pre&&!e.pre)return-1;if(e.pre&&!n.pre)return 1}return t};function eT(n){Af=!1,Al=!0,sn.sort(w1);try{for(Ri=0;Ri<sn.length;Ri++){const e=sn[Ri];e&&e.active!==!1&&$r(e,null,14)}}finally{Ri=0,sn.length=0,Zw(),Al=!1,S_=null,(sn.length||Io.length)&&eT()}}function T1(n,e,...t){if(n.isUnmounted)return;const i=n.vnode.props||st;let r=t;const s=e.startsWith("update:"),o=s&&e.slice(7);if(o&&o in i){const u=`${o==="modelValue"?"model":o}Modifiers`,{number:h,trim:f}=i[u]||st;f&&(r=t.map(d=>Nt(d)?d.trim():d)),h&&(r=t.map(Ef))}let a,l=i[a=hd(e)]||i[a=hd($i(e))];!l&&s&&(l=i[a=hd(fa(e))]),l&&_i(l,n,6,r);const c=i[a+"Once"];if(c){if(!n.emitted)n.emitted={};else if(n.emitted[a])return;n.emitted[a]=!0,_i(c,n,6,r)}}function tT(n,e,t=!1){const i=e.emitsCache,r=i.get(n);if(r!==void 0)return r;const s=n.emits;let o={},a=!1;if(!we(n)){const l=c=>{const u=tT(c,e,!0);u&&(a=!0,$t(o,u))};!t&&e.mixins.length&&e.mixins.forEach(l),n.extends&&l(n.extends),n.mixins&&n.mixins.forEach(l)}return!s&&!a?(ut(n)&&i.set(n,null),null):(ge(s)?s.forEach(l=>o[l]=null):$t(o,s),ut(n)&&i.set(n,o),o)}function gh(n,e){return!n||!uh(e)?!1:(e=e.slice(2).replace(/Once$/,""),De(n,e[0].toLowerCase()+e.slice(1))||De(n,fa(e))||De(n,e))}let vn=null,mh=null;function wu(n){const e=vn;return vn=n,mh=n&&n.type.__scopeId||null,e}function qi(n){mh=n}function Hi(){mh=null}function ci(n,e=vn,t){if(!e||n._n)return n;const i=(...r)=>{i._d&&ny(-1);const s=wu(e);let o;try{o=n(...r)}finally{wu(s),i._d&&ny(1)}return o};return i._n=!0,i._c=!0,i._d=!0,i}function fd(n){const{type:e,vnode:t,proxy:i,withProxy:r,propsOptions:[s],slots:o,attrs:a,emit:l,render:c,renderCache:u,props:h,data:f,setupState:d,ctx:_,inheritAttrs:p}=n,g=wu(n);let m,T;try{if(t.shapeFlag&4){const S=r||i,E=S;m=xi(c.call(E,S,u,h,d,f,_)),T=a}else{const S=e;m=xi(S.length>1?S(h,{attrs:a,slots:o,emit:l}):S(h,null)),T=e.props?a:E1(a)}}catch(S){ol.length=0,_h(S,n,1),m=$e(Fs)}let w=m;if(T&&p!==!1){const S=Object.keys(T),{shapeFlag:E}=w;S.length&&E&7&&(s&&S.some(d_)&&(T=S1(T,s)),w=Go(w,T))}return t.dirs&&(w=Go(w),w.dirs=w.dirs?w.dirs.concat(t.dirs):t.dirs),t.transition&&(w.transition=t.transition),m=w,wu(g),m}const E1=n=>{let e;for(const t in n)(t==="class"||t==="style"||uh(t))&&((e||(e={}))[t]=n[t]);return e},S1=(n,e)=>{const t={};for(const i in n)(!d_(i)||!(i.slice(9)in e))&&(t[i]=n[i]);return t};function b1(n,e,t){const{props:i,children:r,component:s}=n,{props:o,children:a,patchFlag:l}=e,c=s.emitsOptions;if(e.dirs||e.transition)return!0;if(t&&l>=0){if(l&1024)return!0;if(l&16)return i?qm(i,o,c):!!o;if(l&8){const u=e.dynamicProps;for(let h=0;h<u.length;h++){const f=u[h];if(o[f]!==i[f]&&!gh(c,f))return!0}}}else return(r||a)&&(!a||!a.$stable)?!0:i===o?!1:i?o?qm(i,o,c):!0:!!o;return!1}function qm(n,e,t){const i=Object.keys(e);if(i.length!==Object.keys(n).length)return!0;for(let r=0;r<i.length;r++){const s=i[r];if(e[s]!==n[s]&&!gh(t,s))return!0}return!1}function I1({vnode:n,parent:e},t){for(;e;){const i=e.subTree;if(i.suspense&&i.suspense.activeBranch===n&&(i.el=n.el),i===n)(n=e.vnode).el=t,e=e.parent;else break}}const nT="components";function it(n,e){return A1(nT,n,!0,e)||n}const C1=Symbol.for("v-ndc");function A1(n,e,t=!0,i=!1){const r=vn||on;if(r){const s=r.type;if(n===nT){const a=gx(s,!1);if(a&&(a===e||a===$i(e)||a===fh($i(e))))return s}const o=Hm(r[n]||s[n],e)||Hm(r.appContext[n],e);return!o&&i?s:o}}function Hm(n,e){return n&&(n[e]||n[$i(e)]||n[fh($i(e))])}const x1=n=>n.__isSuspense;function R1(n,e){e&&e.pendingBranch?ge(n)?e.effects.push(...n):e.effects.push(n):v1(n)}const P1=Symbol.for("v-scx"),O1=()=>lr(P1),Dc={};function As(n,e,t){return iT(n,e,t)}function iT(n,e,{immediate:t,deep:i,flush:r,once:s,onTrack:o,onTrigger:a}=st){if(e&&s){const I=e;e=(...P)=>{I(...P),E()}}const l=on,c=I=>i===!0?I:ys(I,i===!1?1:void 0);let u,h=!1,f=!1;if(In(n)?(u=()=>n.value,h=vu(n)):il(n)?(u=()=>c(n),h=!0):ge(n)?(f=!0,h=n.some(I=>il(I)||vu(I)),u=()=>n.map(I=>{if(In(I))return I.value;if(il(I))return c(I);if(we(I))return $r(I,l,2)})):we(n)?e?u=()=>$r(n,l,2):u=()=>(d&&d(),_i(n,l,3,[_])):u=Yn,e&&i){const I=u;u=()=>ys(I())}let d,_=I=>{d=w.onStop=()=>{$r(I,l,4),d=w.onStop=void 0}},p;if(wh)if(_=Yn,e?t&&_i(e,l,3,[u(),f?[]:void 0,_]):u(),r==="sync"){const I=O1();p=I.__watcherHandles||(I.__watcherHandles=[])}else return Yn;let g=f?new Array(n.length).fill(Dc):Dc;const m=()=>{if(!(!w.active||!w.dirty))if(e){const I=w.run();(i||h||(f?I.some((P,x)=>Hr(P,g[x])):Hr(I,g)))&&(d&&d(),_i(e,l,3,[I,g===Dc?void 0:f&&g[0]===Dc?[]:g,_]),g=I)}else w.run()};m.allowRecurse=!!e;let T;r==="sync"?T=m:r==="post"?T=()=>yn(m,l&&l.suspense):(m.pre=!0,l&&(m.id=l.uid),T=()=>I_(m));const w=new g_(u,Yn,T),S=qA(),E=()=>{w.stop(),S&&f_(S.effects,w)};return e?t?m():g=w.run():r==="post"?yn(w.run.bind(w),l&&l.suspense):w.run(),p&&p.push(E),E}function k1(n,e,t){const i=this.proxy,r=Nt(n)?n.includes(".")?rT(i,n):()=>i[n]:n.bind(i,i);let s;we(e)?s=e:(s=e.handler,t=e);const o=oc(this),a=iT(r,s.bind(i),t);return o(),a}function rT(n,e){const t=e.split(".");return()=>{let i=n;for(let r=0;r<t.length&&i;r++)i=i[t[r]];return i}}function ys(n,e,t=0,i){if(!ut(n)||n.__v_skip)return n;if(e&&e>0){if(t>=e)return n;t++}if(i=i||new Set,i.has(n))return n;if(i.add(n),In(n))ys(n.value,e,t,i);else if(ge(n))for(let r=0;r<n.length;r++)ys(n[r],e,t,i);else if(Iw(n)||So(n))n.forEach(r=>{ys(r,e,t,i)});else if(xw(n))for(const r in n)ys(n[r],e,t,i);return n}function Wm(n,e){if(vn===null)return n;const t=Th(vn)||vn.proxy,i=n.dirs||(n.dirs=[]);for(let r=0;r<e.length;r++){let[s,o,a,l=st]=e[r];s&&(we(s)&&(s={mounted:s,updated:s}),s.deep&&ys(o),i.push({dir:s,instance:t,value:o,oldValue:void 0,arg:a,modifiers:l}))}return n}function as(n,e,t,i){const r=n.dirs,s=e&&e.dirs;for(let o=0;o<r.length;o++){const a=r[o];s&&(a.oldValue=s[o].value);let l=a.dir[i];l&&(Zr(),_i(l,t,8,[n.el,a,n,e]),es())}}/*! #__NO_SIDE_EFFECTS__ */function sT(n,e){return we(n)?$t({name:n.name},e,{setup:n}):n}const nu=n=>!!n.type.__asyncLoader,oT=n=>n.type.__isKeepAlive;function N1(n,e){aT(n,"a",e)}function M1(n,e){aT(n,"da",e)}function aT(n,e,t=on){const i=n.__wdc||(n.__wdc=()=>{let r=t;for(;r;){if(r.isDeactivated)return;r=r.parent}return n()});if(yh(e,i,t),t){let r=t.parent;for(;r&&r.parent;)oT(r.parent.vnode)&&D1(i,e,t,r),r=r.parent}}function D1(n,e,t,i){const r=yh(e,n,i,!0);cT(()=>{f_(i[e],r)},t)}function yh(n,e,t=on,i=!1){if(t){const r=t[n]||(t[n]=[]),s=e.__weh||(e.__weh=(...o)=>{if(t.isUnmounted)return;Zr();const a=oc(t),l=_i(e,t,n,o);return a(),es(),l});return i?r.unshift(s):r.push(s),s}}const pr=n=>(e,t=on)=>(!wh||n==="sp")&&yh(n,(...i)=>e(...i),t),L1=pr("bm"),C_=pr("m"),lT=pr("bu"),A_=pr("u"),x_=pr("bum"),cT=pr("um"),V1=pr("sp"),F1=pr("rtg"),U1=pr("rtc");function $1(n,e=on){yh("ec",n,e)}function pa(n,e,t,i){let r;const s=t&&t[i];if(ge(n)||Nt(n)){r=new Array(n.length);for(let o=0,a=n.length;o<a;o++)r[o]=e(n[o],o,void 0,s&&s[o])}else if(typeof n=="number"){r=new Array(n);for(let o=0;o<n;o++)r[o]=e(o+1,o,void 0,s&&s[o])}else if(ut(n))if(n[Symbol.iterator])r=Array.from(n,(o,a)=>e(o,a,void 0,s&&s[a]));else{const o=Object.keys(n);r=new Array(o.length);for(let a=0,l=o.length;a<l;a++){const c=o[a];r[a]=e(n[c],c,a,s&&s[a])}}else r=[];return t&&(t[i]=r),r}const xf=n=>n?IT(n)?Th(n)||n.proxy:xf(n.parent):null,rl=$t(Object.create(null),{$:n=>n,$el:n=>n.vnode.el,$data:n=>n.data,$props:n=>n.props,$attrs:n=>n.attrs,$slots:n=>n.slots,$refs:n=>n.refs,$parent:n=>xf(n.parent),$root:n=>xf(n.root),$emit:n=>n.emit,$options:n=>R_(n),$forceUpdate:n=>n.f||(n.f=()=>{n.effect.dirty=!0,I_(n.update)}),$nextTick:n=>n.n||(n.n=b_.bind(n.proxy)),$watch:n=>k1.bind(n)}),pd=(n,e)=>n!==st&&!n.__isScriptSetup&&De(n,e),B1={get({_:n},e){if(e==="__v_skip")return!0;const{ctx:t,setupState:i,data:r,props:s,accessCache:o,type:a,appContext:l}=n;let c;if(e[0]!=="$"){const d=o[e];if(d!==void 0)switch(d){case 1:return i[e];case 2:return r[e];case 4:return t[e];case 3:return s[e]}else{if(pd(i,e))return o[e]=1,i[e];if(r!==st&&De(r,e))return o[e]=2,r[e];if((c=n.propsOptions[0])&&De(c,e))return o[e]=3,s[e];if(t!==st&&De(t,e))return o[e]=4,t[e];Rf&&(o[e]=0)}}const u=rl[e];let h,f;if(u)return e==="$attrs"&&bn(n.attrs,"get",""),u(n);if((h=a.__cssModules)&&(h=h[e]))return h;if(t!==st&&De(t,e))return o[e]=4,t[e];if(f=l.config.globalProperties,De(f,e))return f[e]},set({_:n},e,t){const{data:i,setupState:r,ctx:s}=n;return pd(r,e)?(r[e]=t,!0):i!==st&&De(i,e)?(i[e]=t,!0):De(n.props,e)||e[0]==="$"&&e.slice(1)in n?!1:(s[e]=t,!0)},has({_:{data:n,setupState:e,accessCache:t,ctx:i,appContext:r,propsOptions:s}},o){let a;return!!t[o]||n!==st&&De(n,o)||pd(e,o)||(a=s[0])&&De(a,o)||De(i,o)||De(rl,o)||De(r.config.globalProperties,o)},defineProperty(n,e,t){return t.get!=null?n._.accessCache[e]=0:De(t,"value")&&this.set(n,e,t.value,null),Reflect.defineProperty(n,e,t)}};function Km(n){return ge(n)?n.reduce((e,t)=>(e[t]=null,e),{}):n}let Rf=!0;function z1(n){const e=R_(n),t=n.proxy,i=n.ctx;Rf=!1,e.beforeCreate&&Ym(e.beforeCreate,n,"bc");const{data:r,computed:s,methods:o,watch:a,provide:l,inject:c,created:u,beforeMount:h,mounted:f,beforeUpdate:d,updated:_,activated:p,deactivated:g,beforeDestroy:m,beforeUnmount:T,destroyed:w,unmounted:S,render:E,renderTracked:I,renderTriggered:P,errorCaptured:x,serverPrefetch:A,expose:k,inheritAttrs:D,components:W,directives:N,filters:de}=e;if(c&&j1(c,i,null),o)for(const Z in o){const he=o[Z];we(he)&&(i[Z]=he.bind(t))}if(r){const Z=r.call(t,t);ut(Z)&&(n.data=sc(Z))}if(Rf=!0,s)for(const Z in s){const he=s[Z],St=we(he)?he.bind(t,t):we(he.get)?he.get.bind(t,t):Yn,bt=!we(he)&&we(he.set)?he.set.bind(t):Yn,Se=Wn({get:St,set:bt});Object.defineProperty(i,Z,{enumerable:!0,configurable:!0,get:()=>Se.value,set:_e=>Se.value=_e})}if(a)for(const Z in a)uT(a[Z],i,t,Z);if(l){const Z=we(l)?l.call(t):l;Reflect.ownKeys(Z).forEach(he=>{Co(he,Z[he])})}u&&Ym(u,n,"c");function ne(Z,he){ge(he)?he.forEach(St=>Z(St.bind(t))):he&&Z(he.bind(t))}if(ne(L1,h),ne(C_,f),ne(lT,d),ne(A_,_),ne(N1,p),ne(M1,g),ne($1,x),ne(U1,I),ne(F1,P),ne(x_,T),ne(cT,S),ne(V1,A),ge(k))if(k.length){const Z=n.exposed||(n.exposed={});k.forEach(he=>{Object.defineProperty(Z,he,{get:()=>t[he],set:St=>t[he]=St})})}else n.exposed||(n.exposed={});E&&n.render===Yn&&(n.render=E),D!=null&&(n.inheritAttrs=D),W&&(n.components=W),N&&(n.directives=N)}function j1(n,e,t=Yn){ge(n)&&(n=Pf(n));for(const i in n){const r=n[i];let s;ut(r)?"default"in r?s=lr(r.from||i,r.default,!0):s=lr(r.from||i):s=lr(r),In(s)?Object.defineProperty(e,i,{enumerable:!0,configurable:!0,get:()=>s.value,set:o=>s.value=o}):e[i]=s}}function Ym(n,e,t){_i(ge(n)?n.map(i=>i.bind(e.proxy)):n.bind(e.proxy),e,t)}function uT(n,e,t,i){const r=i.includes(".")?rT(t,i):()=>t[i];if(Nt(n)){const s=e[n];we(s)&&As(r,s)}else if(we(n))As(r,n.bind(t));else if(ut(n))if(ge(n))n.forEach(s=>uT(s,e,t,i));else{const s=we(n.handler)?n.handler.bind(t):e[n.handler];we(s)&&As(r,s,n)}}function R_(n){const e=n.type,{mixins:t,extends:i}=e,{mixins:r,optionsCache:s,config:{optionMergeStrategies:o}}=n.appContext,a=s.get(e);let l;return a?l=a:!r.length&&!t&&!i?l=e:(l={},r.length&&r.forEach(c=>Tu(l,c,o,!0)),Tu(l,e,o)),ut(e)&&s.set(e,l),l}function Tu(n,e,t,i=!1){const{mixins:r,extends:s}=e;s&&Tu(n,s,t,!0),r&&r.forEach(o=>Tu(n,o,t,!0));for(const o in e)if(!(i&&o==="expose")){const a=G1[o]||t&&t[o];n[o]=a?a(n[o],e[o]):e[o]}return n}const G1={data:Xm,props:Qm,emits:Qm,methods:Ba,computed:Ba,beforeCreate:_n,created:_n,beforeMount:_n,mounted:_n,beforeUpdate:_n,updated:_n,beforeDestroy:_n,beforeUnmount:_n,destroyed:_n,unmounted:_n,activated:_n,deactivated:_n,errorCaptured:_n,serverPrefetch:_n,components:Ba,directives:Ba,watch:H1,provide:Xm,inject:q1};function Xm(n,e){return e?n?function(){return $t(we(n)?n.call(this,this):n,we(e)?e.call(this,this):e)}:e:n}function q1(n,e){return Ba(Pf(n),Pf(e))}function Pf(n){if(ge(n)){const e={};for(let t=0;t<n.length;t++)e[n[t]]=n[t];return e}return n}function _n(n,e){return n?[...new Set([].concat(n,e))]:e}function Ba(n,e){return n?$t(Object.create(null),n,e):e}function Qm(n,e){return n?ge(n)&&ge(e)?[...new Set([...n,...e])]:$t(Object.create(null),Km(n),Km(e??{})):e}function H1(n,e){if(!n)return e;if(!e)return n;const t=$t(Object.create(null),n);for(const i in e)t[i]=_n(n[i],e[i]);return t}function hT(){return{app:null,config:{isNativeTag:kA,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let W1=0;function K1(n,e){return function(i,r=null){we(i)||(i=$t({},i)),r!=null&&!ut(r)&&(r=null);const s=hT(),o=new WeakSet;let a=!1;const l=s.app={_uid:W1++,_component:i,_props:r,_container:null,_context:s,_instance:null,version:yx,get config(){return s.config},set config(c){},use(c,...u){return o.has(c)||(c&&we(c.install)?(o.add(c),c.install(l,...u)):we(c)&&(o.add(c),c(l,...u))),l},mixin(c){return s.mixins.includes(c)||s.mixins.push(c),l},component(c,u){return u?(s.components[c]=u,l):s.components[c]},directive(c,u){return u?(s.directives[c]=u,l):s.directives[c]},mount(c,u,h){if(!a){const f=$e(i,r);return f.appContext=s,h===!0?h="svg":h===!1&&(h=void 0),u&&e?e(f,c):n(f,c,h),a=!0,l._container=c,c.__vue_app__=l,Th(f.component)||f.component.proxy}},unmount(){a&&(n(null,l._container),delete l._container.__vue_app__)},provide(c,u){return s.provides[c]=u,l},runWithContext(c){const u=sl;sl=l;try{return c()}finally{sl=u}}};return l}}let sl=null;function Co(n,e){if(on){let t=on.provides;const i=on.parent&&on.parent.provides;i===t&&(t=on.provides=Object.create(i)),t[n]=e}}function lr(n,e,t=!1){const i=on||vn;if(i||sl){const r=i?i.parent==null?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides:sl._context.provides;if(r&&n in r)return r[n];if(arguments.length>1)return t&&we(e)?e.call(i&&i.proxy):e}}const dT={},fT=()=>Object.create(dT),pT=n=>Object.getPrototypeOf(n)===dT;function Y1(n,e,t,i=!1){const r={},s=fT();n.propsDefaults=Object.create(null),_T(n,e,r,s);for(const o in n.propsOptions[0])o in r||(r[o]=void 0);t?n.props=i?r:Gw(r):n.type.props?n.props=r:n.props=s,n.attrs=s}function X1(n,e,t,i){const{props:r,attrs:s,vnode:{patchFlag:o}}=n,a=qe(r),[l]=n.propsOptions;let c=!1;if((i||o>0)&&!(o&16)){if(o&8){const u=n.vnode.dynamicProps;for(let h=0;h<u.length;h++){let f=u[h];if(gh(n.emitsOptions,f))continue;const d=e[f];if(l)if(De(s,f))d!==s[f]&&(s[f]=d,c=!0);else{const _=$i(f);r[_]=Of(l,a,_,d,n,!1)}else d!==s[f]&&(s[f]=d,c=!0)}}}else{_T(n,e,r,s)&&(c=!0);let u;for(const h in a)(!e||!De(e,h)&&((u=fa(h))===h||!De(e,u)))&&(l?t&&(t[h]!==void 0||t[u]!==void 0)&&(r[h]=Of(l,a,h,void 0,n,!0)):delete r[h]);if(s!==a)for(const h in s)(!e||!De(e,h))&&(delete s[h],c=!0)}c&&ar(n.attrs,"set","")}function _T(n,e,t,i){const[r,s]=n.propsOptions;let o=!1,a;if(e)for(let l in e){if(nl(l))continue;const c=e[l];let u;r&&De(r,u=$i(l))?!s||!s.includes(u)?t[u]=c:(a||(a={}))[u]=c:gh(n.emitsOptions,l)||(!(l in i)||c!==i[l])&&(i[l]=c,o=!0)}if(s){const l=qe(t),c=a||st;for(let u=0;u<s.length;u++){const h=s[u];t[h]=Of(r,l,h,c[h],n,!De(c,h))}}return o}function Of(n,e,t,i,r,s){const o=n[t];if(o!=null){const a=De(o,"default");if(a&&i===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&we(l)){const{propsDefaults:c}=r;if(t in c)i=c[t];else{const u=oc(r);i=c[t]=l.call(null,e),u()}}else i=l}o[0]&&(s&&!a?i=!1:o[1]&&(i===""||i===fa(t))&&(i=!0))}return i}function gT(n,e,t=!1){const i=e.propsCache,r=i.get(n);if(r)return r;const s=n.props,o={},a=[];let l=!1;if(!we(n)){const u=h=>{l=!0;const[f,d]=gT(h,e,!0);$t(o,f),d&&a.push(...d)};!t&&e.mixins.length&&e.mixins.forEach(u),n.extends&&u(n.extends),n.mixins&&n.mixins.forEach(u)}if(!s&&!l)return ut(n)&&i.set(n,Eo),Eo;if(ge(s))for(let u=0;u<s.length;u++){const h=$i(s[u]);Jm(h)&&(o[h]=st)}else if(s)for(const u in s){const h=$i(u);if(Jm(h)){const f=s[u],d=o[h]=ge(f)||we(f)?{type:f}:$t({},f);if(d){const _=ty(Boolean,d.type),p=ty(String,d.type);d[0]=_>-1,d[1]=p<0||_<p,(_>-1||De(d,"default"))&&a.push(h)}}}const c=[o,a];return ut(n)&&i.set(n,c),c}function Jm(n){return n[0]!=="$"&&!nl(n)}function Zm(n){return n===null?"null":typeof n=="function"?n.name||"":typeof n=="object"&&n.constructor&&n.constructor.name||""}function ey(n,e){return Zm(n)===Zm(e)}function ty(n,e){return ge(e)?e.findIndex(t=>ey(t,n)):we(e)&&ey(e,n)?0:-1}const mT=n=>n[0]==="_"||n==="$stable",P_=n=>ge(n)?n.map(xi):[xi(n)],Q1=(n,e,t)=>{if(e._n)return e;const i=ci((...r)=>P_(e(...r)),t);return i._c=!1,i},yT=(n,e,t)=>{const i=n._ctx;for(const r in n){if(mT(r))continue;const s=n[r];if(we(s))e[r]=Q1(r,s,i);else if(s!=null){const o=P_(s);e[r]=()=>o}}},vT=(n,e)=>{const t=P_(e);n.slots.default=()=>t},J1=(n,e)=>{const t=n.slots=fT();if(n.vnode.shapeFlag&32){const i=e._;i?($t(t,e),Rw(t,"_",i)):yT(e,t)}else e&&vT(n,e)},Z1=(n,e,t)=>{const{vnode:i,slots:r}=n;let s=!0,o=st;if(i.shapeFlag&32){const a=e._;a?t&&a===1?s=!1:($t(r,e),!t&&a===1&&delete r._):(s=!e.$stable,yT(e,r)),o=e}else e&&(vT(n,e),o={default:1});if(s)for(const a in r)!mT(a)&&o[a]==null&&delete r[a]};function kf(n,e,t,i,r=!1){if(ge(n)){n.forEach((f,d)=>kf(f,e&&(ge(e)?e[d]:e),t,i,r));return}if(nu(i)&&!r)return;const s=i.shapeFlag&4?Th(i.component)||i.component.proxy:i.el,o=r?null:s,{i:a,r:l}=n,c=e&&e.r,u=a.refs===st?a.refs={}:a.refs,h=a.setupState;if(c!=null&&c!==l&&(Nt(c)?(u[c]=null,De(h,c)&&(h[c]=null)):In(c)&&(c.value=null)),we(l))$r(l,a,12,[o,u]);else{const f=Nt(l),d=In(l);if(f||d){const _=()=>{if(n.f){const p=f?De(h,l)?h[l]:u[l]:l.value;r?ge(p)&&f_(p,s):ge(p)?p.includes(s)||p.push(s):f?(u[l]=[s],De(h,l)&&(h[l]=u[l])):(l.value=[s],n.k&&(u[n.k]=l.value))}else f?(u[l]=o,De(h,l)&&(h[l]=o)):d&&(l.value=o,n.k&&(u[n.k]=o))};o?(_.id=-1,yn(_,t)):_()}}}const yn=R1;function ex(n){return tx(n)}function tx(n,e){const t=Pw();t.__VUE__=!0;const{insert:i,remove:r,patchProp:s,createElement:o,createText:a,createComment:l,setText:c,setElementText:u,parentNode:h,nextSibling:f,setScopeId:d=Yn,insertStaticContent:_}=n,p=(y,v,C,L=null,O=null,$=null,Y=void 0,z=null,H=!!v.dynamicChildren)=>{if(y===v)return;y&&!Pa(y,v)&&(L=M(y),_e(y,O,$,!0),y=null),v.patchFlag===-2&&(H=!1,v.dynamicChildren=null);const{type:V,ref:ee,shapeFlag:ae}=v;switch(V){case vh:g(y,v,C,L);break;case Fs:m(y,v,C,L);break;case iu:y==null&&T(v,C,L,Y);break;case Lt:W(y,v,C,L,O,$,Y,z,H);break;default:ae&1?E(y,v,C,L,O,$,Y,z,H):ae&6?N(y,v,C,L,O,$,Y,z,H):(ae&64||ae&128)&&V.process(y,v,C,L,O,$,Y,z,H,te)}ee!=null&&O&&kf(ee,y&&y.ref,$,v||y,!v)},g=(y,v,C,L)=>{if(y==null)i(v.el=a(v.children),C,L);else{const O=v.el=y.el;v.children!==y.children&&c(O,v.children)}},m=(y,v,C,L)=>{y==null?i(v.el=l(v.children||""),C,L):v.el=y.el},T=(y,v,C,L)=>{[y.el,y.anchor]=_(y.children,v,C,L,y.el,y.anchor)},w=({el:y,anchor:v},C,L)=>{let O;for(;y&&y!==v;)O=f(y),i(y,C,L),y=O;i(v,C,L)},S=({el:y,anchor:v})=>{let C;for(;y&&y!==v;)C=f(y),r(y),y=C;r(v)},E=(y,v,C,L,O,$,Y,z,H)=>{v.type==="svg"?Y="svg":v.type==="math"&&(Y="mathml"),y==null?I(v,C,L,O,$,Y,z,H):A(y,v,O,$,Y,z,H)},I=(y,v,C,L,O,$,Y,z)=>{let H,V;const{props:ee,shapeFlag:ae,transition:oe,dirs:le}=y;if(H=y.el=o(y.type,$,ee&&ee.is,ee),ae&8?u(H,y.children):ae&16&&x(y.children,H,null,L,O,_d(y,$),Y,z),le&&as(y,null,L,"created"),P(H,y,y.scopeId,Y,L),ee){for(const Ue in ee)Ue!=="value"&&!nl(Ue)&&s(H,Ue,null,ee[Ue],$,y.children,L,O,We);"value"in ee&&s(H,"value",null,ee.value,$),(V=ee.onVnodeBeforeMount)&&Ci(V,L,y)}le&&as(y,null,L,"beforeMount");const ye=nx(O,oe);ye&&oe.beforeEnter(H),i(H,v,C),((V=ee&&ee.onVnodeMounted)||ye||le)&&yn(()=>{V&&Ci(V,L,y),ye&&oe.enter(H),le&&as(y,null,L,"mounted")},O)},P=(y,v,C,L,O)=>{if(C&&d(y,C),L)for(let $=0;$<L.length;$++)d(y,L[$]);if(O){let $=O.subTree;if(v===$){const Y=O.vnode;P(y,Y,Y.scopeId,Y.slotScopeIds,O.parent)}}},x=(y,v,C,L,O,$,Y,z,H=0)=>{for(let V=H;V<y.length;V++){const ee=y[V]=z?Ar(y[V]):xi(y[V]);p(null,ee,v,C,L,O,$,Y,z)}},A=(y,v,C,L,O,$,Y)=>{const z=v.el=y.el;let{patchFlag:H,dynamicChildren:V,dirs:ee}=v;H|=y.patchFlag&16;const ae=y.props||st,oe=v.props||st;let le;if(C&&ls(C,!1),(le=oe.onVnodeBeforeUpdate)&&Ci(le,C,v,y),ee&&as(v,y,C,"beforeUpdate"),C&&ls(C,!0),V?k(y.dynamicChildren,V,z,C,L,_d(v,O),$):Y||he(y,v,z,null,C,L,_d(v,O),$,!1),H>0){if(H&16)D(z,v,ae,oe,C,L,O);else if(H&2&&ae.class!==oe.class&&s(z,"class",null,oe.class,O),H&4&&s(z,"style",ae.style,oe.style,O),H&8){const ye=v.dynamicProps;for(let Ue=0;Ue<ye.length;Ue++){const tt=ye[Ue],_t=ae[tt],xn=oe[tt];(xn!==_t||tt==="value")&&s(z,tt,_t,xn,O,y.children,C,L,We)}}H&1&&y.children!==v.children&&u(z,v.children)}else!Y&&V==null&&D(z,v,ae,oe,C,L,O);((le=oe.onVnodeUpdated)||ee)&&yn(()=>{le&&Ci(le,C,v,y),ee&&as(v,y,C,"updated")},L)},k=(y,v,C,L,O,$,Y)=>{for(let z=0;z<v.length;z++){const H=y[z],V=v[z],ee=H.el&&(H.type===Lt||!Pa(H,V)||H.shapeFlag&70)?h(H.el):C;p(H,V,ee,null,L,O,$,Y,!0)}},D=(y,v,C,L,O,$,Y)=>{if(C!==L){if(C!==st)for(const z in C)!nl(z)&&!(z in L)&&s(y,z,C[z],null,Y,v.children,O,$,We);for(const z in L){if(nl(z))continue;const H=L[z],V=C[z];H!==V&&z!=="value"&&s(y,z,V,H,Y,v.children,O,$,We)}"value"in L&&s(y,"value",C.value,L.value,Y)}},W=(y,v,C,L,O,$,Y,z,H)=>{const V=v.el=y?y.el:a(""),ee=v.anchor=y?y.anchor:a("");let{patchFlag:ae,dynamicChildren:oe,slotScopeIds:le}=v;le&&(z=z?z.concat(le):le),y==null?(i(V,C,L),i(ee,C,L),x(v.children||[],C,ee,O,$,Y,z,H)):ae>0&&ae&64&&oe&&y.dynamicChildren?(k(y.dynamicChildren,oe,C,O,$,Y,z),(v.key!=null||O&&v===O.subTree)&&wT(y,v,!0)):he(y,v,C,ee,O,$,Y,z,H)},N=(y,v,C,L,O,$,Y,z,H)=>{v.slotScopeIds=z,y==null?v.shapeFlag&512?O.ctx.activate(v,C,L,Y,H):de(v,C,L,O,$,Y,H):fe(y,v,H)},de=(y,v,C,L,O,$,Y)=>{const z=y.component=hx(y,L,O);if(oT(y)&&(z.ctx.renderer=te),dx(z),z.asyncDep){if(O&&O.registerDep(z,ne),!y.el){const H=z.subTree=$e(Fs);m(null,H,v,C)}}else ne(z,y,v,C,O,$,Y)},fe=(y,v,C)=>{const L=v.component=y.component;if(b1(y,v,C))if(L.asyncDep&&!L.asyncResolved){Z(L,v,C);return}else L.next=v,y1(L.update),L.effect.dirty=!0,L.update();else v.el=y.el,L.vnode=v},ne=(y,v,C,L,O,$,Y)=>{const z=()=>{if(y.isMounted){let{next:ee,bu:ae,u:oe,parent:le,vnode:ye}=y;{const mr=TT(y);if(mr){ee&&(ee.el=ye.el,Z(y,ee,Y)),mr.asyncDep.then(()=>{y.isUnmounted||z()});return}}let Ue=ee,tt;ls(y,!1),ee?(ee.el=ye.el,Z(y,ee,Y)):ee=ye,ae&&eu(ae),(tt=ee.props&&ee.props.onVnodeBeforeUpdate)&&Ci(tt,le,ee,ye),ls(y,!0);const _t=fd(y),xn=y.subTree;y.subTree=_t,p(xn,_t,h(xn.el),M(xn),y,O,$),ee.el=_t.el,Ue===null&&I1(y,_t.el),oe&&yn(oe,O),(tt=ee.props&&ee.props.onVnodeUpdated)&&yn(()=>Ci(tt,le,ee,ye),O)}else{let ee;const{el:ae,props:oe}=v,{bm:le,m:ye,parent:Ue}=y,tt=nu(v);if(ls(y,!1),le&&eu(le),!tt&&(ee=oe&&oe.onVnodeBeforeMount)&&Ci(ee,Ue,v),ls(y,!0),ae&&Fe){const _t=()=>{y.subTree=fd(y),Fe(ae,y.subTree,y,O,null)};tt?v.type.__asyncLoader().then(()=>!y.isUnmounted&&_t()):_t()}else{const _t=y.subTree=fd(y);p(null,_t,C,L,y,O,$),v.el=_t.el}if(ye&&yn(ye,O),!tt&&(ee=oe&&oe.onVnodeMounted)){const _t=v;yn(()=>Ci(ee,Ue,_t),O)}(v.shapeFlag&256||Ue&&nu(Ue.vnode)&&Ue.vnode.shapeFlag&256)&&y.a&&yn(y.a,O),y.isMounted=!0,v=C=L=null}},H=y.effect=new g_(z,Yn,()=>I_(V),y.scope),V=y.update=()=>{H.dirty&&H.run()};V.id=y.uid,ls(y,!0),V()},Z=(y,v,C)=>{v.component=y;const L=y.vnode.props;y.vnode=v,y.next=null,X1(y,v.props,L,C),Z1(y,v.children,C),Zr(),Gm(y),es()},he=(y,v,C,L,O,$,Y,z,H=!1)=>{const V=y&&y.children,ee=y?y.shapeFlag:0,ae=v.children,{patchFlag:oe,shapeFlag:le}=v;if(oe>0){if(oe&128){bt(V,ae,C,L,O,$,Y,z,H);return}else if(oe&256){St(V,ae,C,L,O,$,Y,z,H);return}}le&8?(ee&16&&We(V,O,$),ae!==V&&u(C,ae)):ee&16?le&16?bt(V,ae,C,L,O,$,Y,z,H):We(V,O,$,!0):(ee&8&&u(C,""),le&16&&x(ae,C,L,O,$,Y,z,H))},St=(y,v,C,L,O,$,Y,z,H)=>{y=y||Eo,v=v||Eo;const V=y.length,ee=v.length,ae=Math.min(V,ee);let oe;for(oe=0;oe<ae;oe++){const le=v[oe]=H?Ar(v[oe]):xi(v[oe]);p(y[oe],le,C,null,O,$,Y,z,H)}V>ee?We(y,O,$,!0,!1,ae):x(v,C,L,O,$,Y,z,H,ae)},bt=(y,v,C,L,O,$,Y,z,H)=>{let V=0;const ee=v.length;let ae=y.length-1,oe=ee-1;for(;V<=ae&&V<=oe;){const le=y[V],ye=v[V]=H?Ar(v[V]):xi(v[V]);if(Pa(le,ye))p(le,ye,C,null,O,$,Y,z,H);else break;V++}for(;V<=ae&&V<=oe;){const le=y[ae],ye=v[oe]=H?Ar(v[oe]):xi(v[oe]);if(Pa(le,ye))p(le,ye,C,null,O,$,Y,z,H);else break;ae--,oe--}if(V>ae){if(V<=oe){const le=oe+1,ye=le<ee?v[le].el:L;for(;V<=oe;)p(null,v[V]=H?Ar(v[V]):xi(v[V]),C,ye,O,$,Y,z,H),V++}}else if(V>oe)for(;V<=ae;)_e(y[V],O,$,!0),V++;else{const le=V,ye=V,Ue=new Map;for(V=ye;V<=oe;V++){const Ot=v[V]=H?Ar(v[V]):xi(v[V]);Ot.key!=null&&Ue.set(Ot.key,V)}let tt,_t=0;const xn=oe-ye+1;let mr=!1,io=0;const yr=new Array(xn);for(V=0;V<xn;V++)yr[V]=0;for(V=le;V<=ae;V++){const Ot=y[V];if(_t>=xn){_e(Ot,O,$,!0);continue}let zn;if(Ot.key!=null)zn=Ue.get(Ot.key);else for(tt=ye;tt<=oe;tt++)if(yr[tt-ye]===0&&Pa(Ot,v[tt])){zn=tt;break}zn===void 0?_e(Ot,O,$,!0):(yr[zn-ye]=V+1,zn>=io?io=zn:mr=!0,p(Ot,v[zn],C,null,O,$,Y,z,H),_t++)}const ss=mr?ix(yr):Eo;for(tt=ss.length-1,V=xn-1;V>=0;V--){const Ot=ye+V,zn=v[Ot],vr=Ot+1<ee?v[Ot+1].el:L;yr[V]===0?p(null,zn,C,vr,O,$,Y,z,H):mr&&(tt<0||V!==ss[tt]?Se(zn,C,vr,2):tt--)}}},Se=(y,v,C,L,O=null)=>{const{el:$,type:Y,transition:z,children:H,shapeFlag:V}=y;if(V&6){Se(y.component.subTree,v,C,L);return}if(V&128){y.suspense.move(v,C,L);return}if(V&64){Y.move(y,v,C,te);return}if(Y===Lt){i($,v,C);for(let ae=0;ae<H.length;ae++)Se(H[ae],v,C,L);i(y.anchor,v,C);return}if(Y===iu){w(y,v,C);return}if(L!==2&&V&1&&z)if(L===0)z.beforeEnter($),i($,v,C),yn(()=>z.enter($),O);else{const{leave:ae,delayLeave:oe,afterLeave:le}=z,ye=()=>i($,v,C),Ue=()=>{ae($,()=>{ye(),le&&le()})};oe?oe($,ye,Ue):Ue()}else i($,v,C)},_e=(y,v,C,L=!1,O=!1)=>{const{type:$,props:Y,ref:z,children:H,dynamicChildren:V,shapeFlag:ee,patchFlag:ae,dirs:oe}=y;if(z!=null&&kf(z,null,C,y,!0),ee&256){v.ctx.deactivate(y);return}const le=ee&1&&oe,ye=!nu(y);let Ue;if(ye&&(Ue=Y&&Y.onVnodeBeforeUnmount)&&Ci(Ue,v,y),ee&6)Gt(y.component,C,L);else{if(ee&128){y.suspense.unmount(C,L);return}le&&as(y,null,v,"beforeUnmount"),ee&64?y.type.remove(y,v,C,O,te,L):V&&($!==Lt||ae>0&&ae&64)?We(V,v,C,!1,!0):($===Lt&&ae&384||!O&&ee&16)&&We(H,v,C),L&&He(y)}(ye&&(Ue=Y&&Y.onVnodeUnmounted)||le)&&yn(()=>{Ue&&Ci(Ue,v,y),le&&as(y,null,v,"unmounted")},C)},He=y=>{const{type:v,el:C,anchor:L,transition:O}=y;if(v===Lt){Ce(C,L);return}if(v===iu){S(y);return}const $=()=>{r(C),O&&!O.persisted&&O.afterLeave&&O.afterLeave()};if(y.shapeFlag&1&&O&&!O.persisted){const{leave:Y,delayLeave:z}=O,H=()=>Y(C,$);z?z(y.el,$,H):H()}else $()},Ce=(y,v)=>{let C;for(;y!==v;)C=f(y),r(y),y=C;r(v)},Gt=(y,v,C)=>{const{bum:L,scope:O,update:$,subTree:Y,um:z}=y;L&&eu(L),O.stop(),$&&($.active=!1,_e(Y,y,v,C)),z&&yn(z,v),yn(()=>{y.isUnmounted=!0},v),v&&v.pendingBranch&&!v.isUnmounted&&y.asyncDep&&!y.asyncResolved&&y.suspenseId===v.pendingId&&(v.deps--,v.deps===0&&v.resolve())},We=(y,v,C,L=!1,O=!1,$=0)=>{for(let Y=$;Y<y.length;Y++)_e(y[Y],v,C,L,O)},M=y=>y.shapeFlag&6?M(y.component.subTree):y.shapeFlag&128?y.suspense.next():f(y.anchor||y.el);let q=!1;const K=(y,v,C)=>{y==null?v._vnode&&_e(v._vnode,null,null,!0):p(v._vnode||null,y,v,null,null,null,C),q||(q=!0,Gm(),Zw(),q=!1),v._vnode=y},te={p,um:_e,m:Se,r:He,mt:de,mc:x,pc:he,pbc:k,n:M,o:n};let be,Fe;return e&&([be,Fe]=e(te)),{render:K,hydrate:be,createApp:K1(K,be)}}function _d({type:n,props:e},t){return t==="svg"&&n==="foreignObject"||t==="mathml"&&n==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:t}function ls({effect:n,update:e},t){n.allowRecurse=e.allowRecurse=t}function nx(n,e){return(!n||n&&!n.pendingBranch)&&e&&!e.persisted}function wT(n,e,t=!1){const i=n.children,r=e.children;if(ge(i)&&ge(r))for(let s=0;s<i.length;s++){const o=i[s];let a=r[s];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=r[s]=Ar(r[s]),a.el=o.el),t||wT(o,a)),a.type===vh&&(a.el=o.el)}}function ix(n){const e=n.slice(),t=[0];let i,r,s,o,a;const l=n.length;for(i=0;i<l;i++){const c=n[i];if(c!==0){if(r=t[t.length-1],n[r]<c){e[i]=r,t.push(i);continue}for(s=0,o=t.length-1;s<o;)a=s+o>>1,n[t[a]]<c?s=a+1:o=a;c<n[t[s]]&&(s>0&&(e[i]=t[s-1]),t[s]=i)}}for(s=t.length,o=t[s-1];s-- >0;)t[s]=o,o=e[o];return t}function TT(n){const e=n.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:TT(e)}const rx=n=>n.__isTeleport,Lt=Symbol.for("v-fgt"),vh=Symbol.for("v-txt"),Fs=Symbol.for("v-cmt"),iu=Symbol.for("v-stc"),ol=[];let ui=null;function Te(n=!1){ol.push(ui=n?null:[])}function sx(){ol.pop(),ui=ol[ol.length-1]||null}let Rl=1;function ny(n){Rl+=n}function ET(n){return n.dynamicChildren=Rl>0?ui||Eo:null,sx(),Rl>0&&ui&&ui.push(n),n}function Ge(n,e,t,i,r,s){return ET(j(n,e,t,i,r,s,!0))}function ei(n,e,t,i,r){return ET($e(n,e,t,i,r,!0))}function Nf(n){return n?n.__v_isVNode===!0:!1}function Pa(n,e){return n.type===e.type&&n.key===e.key}const ST=({key:n})=>n??null,ru=({ref:n,ref_key:e,ref_for:t})=>(typeof n=="number"&&(n=""+n),n!=null?Nt(n)||In(n)||we(n)?{i:vn,r:n,k:e,f:!!t}:n:null);function j(n,e=null,t=null,i=0,r=null,s=n===Lt?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:n,props:e,key:e&&ST(e),ref:e&&ru(e),scopeId:mh,slotScopeIds:null,children:t,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:i,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:vn};return a?(O_(l,t),s&128&&n.normalize(l)):t&&(l.shapeFlag|=Nt(t)?8:16),Rl>0&&!o&&ui&&(l.patchFlag>0||s&6)&&l.patchFlag!==32&&ui.push(l),l}const $e=ox;function ox(n,e=null,t=null,i=0,r=null,s=!1){if((!n||n===C1)&&(n=Fs),Nf(n)){const a=Go(n,e,!0);return t&&O_(a,t),Rl>0&&!s&&ui&&(a.shapeFlag&6?ui[ui.indexOf(n)]=a:ui.push(a)),a.patchFlag|=-2,a}if(mx(n)&&(n=n.__vccOpts),e){e=ax(e);let{class:a,style:l}=e;a&&!Nt(a)&&(e.class=pi(a)),ut(l)&&(Hw(l)&&!ge(l)&&(l=$t({},l)),e.style=__(l))}const o=Nt(n)?1:x1(n)?128:rx(n)?64:ut(n)?4:we(n)?2:0;return j(n,e,t,i,r,o,s,!0)}function ax(n){return n?Hw(n)||pT(n)?$t({},n):n:null}function Go(n,e,t=!1){const{props:i,ref:r,patchFlag:s,children:o}=n,a=e?lx(i||{},e):i;return{__v_isVNode:!0,__v_skip:!0,type:n.type,props:a,key:a&&ST(a),ref:e&&e.ref?t&&r?ge(r)?r.concat(ru(e)):[r,ru(e)]:ru(e):r,scopeId:n.scopeId,slotScopeIds:n.slotScopeIds,children:o,target:n.target,targetAnchor:n.targetAnchor,staticCount:n.staticCount,shapeFlag:n.shapeFlag,patchFlag:e&&n.type!==Lt?s===-1?16:s|16:s,dynamicProps:n.dynamicProps,dynamicChildren:n.dynamicChildren,appContext:n.appContext,dirs:n.dirs,transition:n.transition,component:n.component,suspense:n.suspense,ssContent:n.ssContent&&Go(n.ssContent),ssFallback:n.ssFallback&&Go(n.ssFallback),el:n.el,anchor:n.anchor,ctx:n.ctx,ce:n.ce}}function qo(n=" ",e=0){return $e(vh,null,n,e)}function bT(n,e){const t=$e(iu,null,n);return t.staticCount=e,t}function Ho(n="",e=!1){return e?(Te(),ei(Fs,null,n)):$e(Fs,null,n)}function xi(n){return n==null||typeof n=="boolean"?$e(Fs):ge(n)?$e(Lt,null,n.slice()):typeof n=="object"?Ar(n):$e(vh,null,String(n))}function Ar(n){return n.el===null&&n.patchFlag!==-1||n.memo?n:Go(n)}function O_(n,e){let t=0;const{shapeFlag:i}=n;if(e==null)e=null;else if(ge(e))t=16;else if(typeof e=="object")if(i&65){const r=e.default;r&&(r._c&&(r._d=!1),O_(n,r()),r._c&&(r._d=!0));return}else{t=32;const r=e._;!r&&!pT(e)?e._ctx=vn:r===3&&vn&&(vn.slots._===1?e._=1:(e._=2,n.patchFlag|=1024))}else we(e)?(e={default:e,_ctx:vn},t=32):(e=String(e),i&64?(t=16,e=[qo(e)]):t=8);n.children=e,n.shapeFlag|=t}function lx(...n){const e={};for(let t=0;t<n.length;t++){const i=n[t];for(const r in i)if(r==="class")e.class!==i.class&&(e.class=pi([e.class,i.class]));else if(r==="style")e.style=__([e.style,i.style]);else if(uh(r)){const s=e[r],o=i[r];o&&s!==o&&!(ge(s)&&s.includes(o))&&(e[r]=s?[].concat(s,o):o)}else r!==""&&(e[r]=i[r])}return e}function Ci(n,e,t,i=null){_i(n,e,7,[t,i])}const cx=hT();let ux=0;function hx(n,e,t){const i=n.type,r=(e?e.appContext:n.appContext)||cx,s={uid:ux++,vnode:n,type:i,parent:e,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,scope:new jA(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(r.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:gT(i,r),emitsOptions:tT(i,r),emit:null,emitted:null,propsDefaults:st,inheritAttrs:i.inheritAttrs,ctx:st,data:st,props:st,attrs:st,slots:st,refs:st,setupState:st,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:t,suspenseId:t?t.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=e?e.root:s,s.emit=T1.bind(null,s),n.ce&&n.ce(s),s}let on=null,Eu,Mf;{const n=Pw(),e=(t,i)=>{let r;return(r=n[t])||(r=n[t]=[]),r.push(i),s=>{r.length>1?r.forEach(o=>o(s)):r[0](s)}};Eu=e("__VUE_INSTANCE_SETTERS__",t=>on=t),Mf=e("__VUE_SSR_SETTERS__",t=>wh=t)}const oc=n=>{const e=on;return Eu(n),n.scope.on(),()=>{n.scope.off(),Eu(e)}},iy=()=>{on&&on.scope.off(),Eu(null)};function IT(n){return n.vnode.shapeFlag&4}let wh=!1;function dx(n,e=!1){e&&Mf(e);const{props:t,children:i}=n.vnode,r=IT(n);Y1(n,t,r,e),J1(n,i);const s=r?fx(n,e):void 0;return e&&Mf(!1),s}function fx(n,e){const t=n.type;n.accessCache=Object.create(null),n.proxy=new Proxy(n.ctx,B1);const{setup:i}=t;if(i){const r=n.setupContext=i.length>1?_x(n):null,s=oc(n);Zr();const o=$r(i,n,0,[n.props,r]);if(es(),s(),Cw(o)){if(o.then(iy,iy),e)return o.then(a=>{ry(n,a,e)}).catch(a=>{_h(a,n,0)});n.asyncDep=o}else ry(n,o,e)}else CT(n,e)}function ry(n,e,t){we(e)?n.type.__ssrInlineRender?n.ssrRender=e:n.render=e:ut(e)&&(n.setupState=Xw(e)),CT(n,t)}let sy;function CT(n,e,t){const i=n.type;if(!n.render){if(!e&&sy&&!i.render){const r=i.template||R_(n).template;if(r){const{isCustomElement:s,compilerOptions:o}=n.appContext.config,{delimiters:a,compilerOptions:l}=i,c=$t($t({isCustomElement:s,delimiters:a},o),l);i.render=sy(r,c)}}n.render=i.render||Yn}{const r=oc(n);Zr();try{z1(n)}finally{es(),r()}}}const px={get(n,e){return bn(n,"get",""),n[e]}};function _x(n){const e=t=>{n.exposed=t||{}};return{attrs:new Proxy(n.attrs,px),slots:n.slots,emit:n.emit,expose:e}}function Th(n){if(n.exposed)return n.exposeProxy||(n.exposeProxy=new Proxy(Xw(h1(n.exposed)),{get(e,t){if(t in e)return e[t];if(t in rl)return rl[t](n)},has(e,t){return t in e||t in rl}}))}function gx(n,e=!0){return we(n)?n.displayName||n.name:n.name||e&&n.__name}function mx(n){return we(n)&&"__vccOpts"in n}const Wn=(n,e)=>d1(n,e,wh);function kn(n,e,t){const i=arguments.length;return i===2?ut(e)&&!ge(e)?Nf(e)?$e(n,null,[e]):$e(n,e):$e(n,null,e):(i>3?t=Array.prototype.slice.call(arguments,2):i===3&&Nf(t)&&(t=[t]),$e(n,e,t))}const yx="3.4.25";/**
* @vue/runtime-dom v3.4.25
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const vx="http://www.w3.org/2000/svg",wx="http://www.w3.org/1998/Math/MathML",xr=typeof document<"u"?document:null,oy=xr&&xr.createElement("template"),Tx={insert:(n,e,t)=>{e.insertBefore(n,t||null)},remove:n=>{const e=n.parentNode;e&&e.removeChild(n)},createElement:(n,e,t,i)=>{const r=e==="svg"?xr.createElementNS(vx,n):e==="mathml"?xr.createElementNS(wx,n):xr.createElement(n,t?{is:t}:void 0);return n==="select"&&i&&i.multiple!=null&&r.setAttribute("multiple",i.multiple),r},createText:n=>xr.createTextNode(n),createComment:n=>xr.createComment(n),setText:(n,e)=>{n.nodeValue=e},setElementText:(n,e)=>{n.textContent=e},parentNode:n=>n.parentNode,nextSibling:n=>n.nextSibling,querySelector:n=>xr.querySelector(n),setScopeId(n,e){n.setAttribute(e,"")},insertStaticContent(n,e,t,i,r,s){const o=t?t.previousSibling:e.lastChild;if(r&&(r===s||r.nextSibling))for(;e.insertBefore(r.cloneNode(!0),t),!(r===s||!(r=r.nextSibling)););else{oy.innerHTML=i==="svg"?`<svg>${n}</svg>`:i==="mathml"?`<math>${n}</math>`:n;const a=oy.content;if(i==="svg"||i==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}e.insertBefore(a,t)}return[o?o.nextSibling:e.firstChild,t?t.previousSibling:e.lastChild]}},Ex=Symbol("_vtc");function Sx(n,e,t){const i=n[Ex];i&&(e=(e?[e,...i]:[...i]).join(" ")),e==null?n.removeAttribute("class"):t?n.setAttribute("class",e):n.className=e}const ay=Symbol("_vod"),bx=Symbol("_vsh"),Ix=Symbol(""),Cx=/(^|;)\s*display\s*:/;function Ax(n,e,t){const i=n.style,r=Nt(t);let s=!1;if(t&&!r){if(e)if(Nt(e))for(const o of e.split(";")){const a=o.slice(0,o.indexOf(":")).trim();t[a]==null&&su(i,a,"")}else for(const o in e)t[o]==null&&su(i,o,"");for(const o in t)o==="display"&&(s=!0),su(i,o,t[o])}else if(r){if(e!==t){const o=i[Ix];o&&(t+=";"+o),i.cssText=t,s=Cx.test(t)}}else e&&n.removeAttribute("style");ay in n&&(n[ay]=s?i.display:"",n[bx]&&(i.display="none"))}const ly=/\s*!important$/;function su(n,e,t){if(ge(t))t.forEach(i=>su(n,e,i));else if(t==null&&(t=""),e.startsWith("--"))n.setProperty(e,t);else{const i=xx(n,e);ly.test(t)?n.setProperty(fa(i),t.replace(ly,""),"important"):n[i]=t}}const cy=["Webkit","Moz","ms"],gd={};function xx(n,e){const t=gd[e];if(t)return t;let i=$i(e);if(i!=="filter"&&i in n)return gd[e]=i;i=fh(i);for(let r=0;r<cy.length;r++){const s=cy[r]+i;if(s in n)return gd[e]=s}return e}const uy="http://www.w3.org/1999/xlink";function Rx(n,e,t,i,r){if(i&&e.startsWith("xlink:"))t==null?n.removeAttributeNS(uy,e.slice(6,e.length)):n.setAttributeNS(uy,e,t);else{const s=zA(e);t==null||s&&!Ow(t)?n.removeAttribute(e):n.setAttribute(e,s?"":t)}}function Px(n,e,t,i,r,s,o){if(e==="innerHTML"||e==="textContent"){i&&o(i,r,s),n[e]=t??"";return}const a=n.tagName;if(e==="value"&&a!=="PROGRESS"&&!a.includes("-")){const c=a==="OPTION"?n.getAttribute("value")||"":n.value,u=t??"";(c!==u||!("_value"in n))&&(n.value=u),t==null&&n.removeAttribute(e),n._value=t;return}let l=!1;if(t===""||t==null){const c=typeof n[e];c==="boolean"?t=Ow(t):t==null&&c==="string"?(t="",l=!0):c==="number"&&(t=0,l=!0)}try{n[e]=t}catch{}l&&n.removeAttribute(e)}function ho(n,e,t,i){n.addEventListener(e,t,i)}function Ox(n,e,t,i){n.removeEventListener(e,t,i)}const hy=Symbol("_vei");function kx(n,e,t,i,r=null){const s=n[hy]||(n[hy]={}),o=s[e];if(i&&o)o.value=i;else{const[a,l]=Nx(e);if(i){const c=s[e]=Lx(i,r);ho(n,a,c,l)}else o&&(Ox(n,a,o,l),s[e]=void 0)}}const dy=/(?:Once|Passive|Capture)$/;function Nx(n){let e;if(dy.test(n)){e={};let i;for(;i=n.match(dy);)n=n.slice(0,n.length-i[0].length),e[i[0].toLowerCase()]=!0}return[n[2]===":"?n.slice(3):fa(n.slice(2)),e]}let md=0;const Mx=Promise.resolve(),Dx=()=>md||(Mx.then(()=>md=0),md=Date.now());function Lx(n,e){const t=i=>{if(!i._vts)i._vts=Date.now();else if(i._vts<=t.attached)return;_i(Vx(i,t.value),e,5,[i])};return t.value=n,t.attached=Dx(),t}function Vx(n,e){if(ge(e)){const t=n.stopImmediatePropagation;return n.stopImmediatePropagation=()=>{t.call(n),n._stopped=!0},e.map(i=>r=>!r._stopped&&i&&i(r))}else return e}const fy=n=>n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&n.charCodeAt(2)>96&&n.charCodeAt(2)<123,Fx=(n,e,t,i,r,s,o,a,l)=>{const c=r==="svg";e==="class"?Sx(n,i,c):e==="style"?Ax(n,t,i):uh(e)?d_(e)||kx(n,e,t,i,o):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):Ux(n,e,i,c))?Px(n,e,i,s,o,a,l):(e==="true-value"?n._trueValue=i:e==="false-value"&&(n._falseValue=i),Rx(n,e,i,c))};function Ux(n,e,t,i){if(i)return!!(e==="innerHTML"||e==="textContent"||e in n&&fy(e)&&we(t));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&n.tagName==="INPUT"||e==="type"&&n.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const r=n.tagName;if(r==="IMG"||r==="VIDEO"||r==="CANVAS"||r==="SOURCE")return!1}return fy(e)&&Nt(t)?!1:e in n}const py=n=>{const e=n.props["onUpdate:modelValue"]||!1;return ge(e)?t=>eu(e,t):e};function $x(n){n.target.composing=!0}function _y(n){const e=n.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const yd=Symbol("_assign"),gy={created(n,{modifiers:{lazy:e,trim:t,number:i}},r){n[yd]=py(r);const s=i||r.props&&r.props.type==="number";ho(n,e?"change":"input",o=>{if(o.target.composing)return;let a=n.value;t&&(a=a.trim()),s&&(a=Ef(a)),n[yd](a)}),t&&ho(n,"change",()=>{n.value=n.value.trim()}),e||(ho(n,"compositionstart",$x),ho(n,"compositionend",_y),ho(n,"change",_y))},mounted(n,{value:e}){n.value=e??""},beforeUpdate(n,{value:e,modifiers:{lazy:t,trim:i,number:r}},s){if(n[yd]=py(s),n.composing)return;const o=(r||n.type==="number")&&!/^0\d/.test(n.value)?Ef(n.value):n.value,a=e??"";o!==a&&(document.activeElement===n&&n.type!=="range"&&(t||i&&n.value.trim()===a)||(n.value=a))}},Bx=["ctrl","shift","alt","meta"],zx={stop:n=>n.stopPropagation(),prevent:n=>n.preventDefault(),self:n=>n.target!==n.currentTarget,ctrl:n=>!n.ctrlKey,shift:n=>!n.shiftKey,alt:n=>!n.altKey,meta:n=>!n.metaKey,left:n=>"button"in n&&n.button!==0,middle:n=>"button"in n&&n.button!==1,right:n=>"button"in n&&n.button!==2,exact:(n,e)=>Bx.some(t=>n[`${t}Key`]&&!e.includes(t))},jx=(n,e)=>{const t=n._withMods||(n._withMods={}),i=e.join(".");return t[i]||(t[i]=(r,...s)=>{for(let o=0;o<e.length;o++){const a=zx[e[o]];if(a&&a(r,e))return}return n(r,...s)})},Gx=$t({patchProp:Fx},Tx);let my;function qx(){return my||(my=ex(Gx))}const Hx=(...n)=>{const e=qx().createApp(...n),{mount:t}=e;return e.mount=i=>{const r=Kx(i);if(!r)return;const s=e._component;!we(s)&&!s.render&&!s.template&&(s.template=r.innerHTML),r.innerHTML="";const o=t(r,!1,Wx(r));return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),o},e};function Wx(n){if(n instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&n instanceof MathMLElement)return"mathml"}function Kx(n){return Nt(n)?document.querySelector(n):n}var yy={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AT={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X=function(n,e){if(!n)throw _a(e)},_a=function(n){return new Error("Firebase Database ("+AT.SDK_VERSION+") INTERNAL ASSERT FAILED: "+n)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xT=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let r=n.charCodeAt(i);r<128?e[t++]=r:r<2048?(e[t++]=r>>6|192,e[t++]=r&63|128):(r&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=r>>18|240,e[t++]=r>>12&63|128,e[t++]=r>>6&63|128,e[t++]=r&63|128):(e[t++]=r>>12|224,e[t++]=r>>6&63|128,e[t++]=r&63|128)}return e},Yx=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const r=n[t++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const s=n[t++];e[i++]=String.fromCharCode((r&31)<<6|s&63)}else if(r>239&&r<365){const s=n[t++],o=n[t++],a=n[t++],l=((r&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[i++]=String.fromCharCode(55296+(l>>10)),e[i++]=String.fromCharCode(56320+(l&1023))}else{const s=n[t++],o=n[t++];e[i++]=String.fromCharCode((r&15)<<12|(s&63)<<6|o&63)}}return e.join("")},Eh={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<n.length;r+=3){const s=n[r],o=r+1<n.length,a=o?n[r+1]:0,l=r+2<n.length,c=l?n[r+2]:0,u=s>>2,h=(s&3)<<4|a>>4;let f=(a&15)<<2|c>>6,d=c&63;l||(d=64,o||(f=64)),i.push(t[u],t[h],t[f],t[d])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(xT(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):Yx(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<n.length;){const s=t[n.charAt(r++)],a=r<n.length?t[n.charAt(r)]:0;++r;const c=r<n.length?t[n.charAt(r)]:64;++r;const h=r<n.length?t[n.charAt(r)]:64;if(++r,s==null||a==null||c==null||h==null)throw new Xx;const f=s<<2|a>>4;if(i.push(f),c!==64){const d=a<<4&240|c>>2;if(i.push(d),h!==64){const _=c<<6&192|h;i.push(_)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class Xx extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const RT=function(n){const e=xT(n);return Eh.encodeByteArray(e,!0)},Su=function(n){return RT(n).replace(/\./g,"")},bu=function(n){try{return Eh.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qx(n){return PT(void 0,n)}function PT(n,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const t=e;return new Date(t.getTime());case Object:n===void 0&&(n={});break;case Array:n=[];break;default:return e}for(const t in e)!e.hasOwnProperty(t)||!Jx(t)||(n[t]=PT(n[t],e[t]));return n}function Jx(n){return n!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zx(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eR=()=>Zx().__FIREBASE_DEFAULTS__,tR=()=>{if(typeof process>"u"||typeof yy>"u")return;const n=yy.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},nR=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&bu(n[1]);return e&&JSON.parse(e)},Sh=()=>{try{return eR()||tR()||nR()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},iR=n=>{var e,t;return(t=(e=Sh())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},OT=n=>{const e=iR(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},kT=()=>{var n;return(n=Sh())===null||n===void 0?void 0:n.config},rR=n=>{var e;return(e=Sh())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pl{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NT(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",r=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Su(JSON.stringify(t)),Su(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yi(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function k_(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(yi())}function sR(){var n;const e=(n=Sh())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function oR(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function MT(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function DT(){return AT.NODE_ADMIN===!0}function aR(){return!sR()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function LT(){try{return typeof indexedDB=="object"}catch{return!1}}function lR(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},r.onupgradeneeded=()=>{t=!1},r.onerror=()=>{var s;e(((s=r.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cR="FirebaseError";class _r extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=cR,Object.setPrototypeOf(this,_r.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ga.prototype.create)}}class ga{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},r=`${this.service}/${e}`,s=this.errors[e],o=s?uR(s,i):"Error",a=`${this.serviceName}: ${o} (${r}).`;return new _r(r,a,i)}}function uR(n,e){return n.replace(hR,(t,i)=>{const r=e[i];return r!=null?String(r):`<${i}?>`})}const hR=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ol(n){return JSON.parse(n)}function Kt(n){return JSON.stringify(n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VT=function(n){let e={},t={},i={},r="";try{const s=n.split(".");e=Ol(bu(s[0])||""),t=Ol(bu(s[1])||""),r=s[2],i=t.d||{},delete t.d}catch{}return{header:e,claims:t,data:i,signature:r}},dR=function(n){const e=VT(n),t=e.claims;return!!t&&typeof t=="object"&&t.hasOwnProperty("iat")},fR=function(n){const e=VT(n).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gr(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function Wo(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]}function vy(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Iu(n,e,t){const i={};for(const r in n)Object.prototype.hasOwnProperty.call(n,r)&&(i[r]=e.call(t,n[r],r,n));return i}function Df(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const r of t){if(!i.includes(r))return!1;const s=n[r],o=e[r];if(wy(s)&&wy(o)){if(!Df(s,o))return!1}else if(s!==o)return!1}for(const r of i)if(!t.includes(r))return!1;return!0}function wy(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N_(n){const e=[];for(const[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pR{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const i=this.W_;if(typeof e=="string")for(let h=0;h<16;h++)i[h]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let h=0;h<16;h++)i[h]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let h=16;h<80;h++){const f=i[h-3]^i[h-8]^i[h-14]^i[h-16];i[h]=(f<<1|f>>>31)&4294967295}let r=this.chain_[0],s=this.chain_[1],o=this.chain_[2],a=this.chain_[3],l=this.chain_[4],c,u;for(let h=0;h<80;h++){h<40?h<20?(c=a^s&(o^a),u=1518500249):(c=s^o^a,u=1859775393):h<60?(c=s&o|a&(s|o),u=2400959708):(c=s^o^a,u=3395469782);const f=(r<<5|r>>>27)+c+l+u+i[h]&4294967295;l=a,a=o,o=(s<<30|s>>>2)&4294967295,s=r,r=f}this.chain_[0]=this.chain_[0]+r&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295}update(e,t){if(e==null)return;t===void 0&&(t=e.length);const i=t-this.blockSize;let r=0;const s=this.buf_;let o=this.inbuf_;for(;r<t;){if(o===0)for(;r<=i;)this.compress_(e,r),r+=this.blockSize;if(typeof e=="string"){for(;r<t;)if(s[o]=e.charCodeAt(r),++o,++r,o===this.blockSize){this.compress_(s),o=0;break}}else for(;r<t;)if(s[o]=e[r],++o,++r,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=t}digest(){const e=[];let t=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let r=this.blockSize-1;r>=56;r--)this.buf_[r]=t&255,t/=256;this.compress_(this.buf_);let i=0;for(let r=0;r<5;r++)for(let s=24;s>=0;s-=8)e[i]=this.chain_[r]>>s&255,++i;return e}}function _R(n,e){const t=new gR(n,e);return t.subscribe.bind(t)}class gR{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let r;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");mR(e,["next","error","complete"])?r=e:r={next:e,error:t,complete:i},r.next===void 0&&(r.next=vd),r.error===void 0&&(r.error=vd),r.complete===void 0&&(r.complete=vd);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function mR(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function vd(){}function yR(n,e){return`${n} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vR=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let r=n.charCodeAt(i);if(r>=55296&&r<=56319){const s=r-55296;i++,X(i<n.length,"Surrogate pair missing trail surrogate.");const o=n.charCodeAt(i)-56320;r=65536+(s<<10)+o}r<128?e[t++]=r:r<2048?(e[t++]=r>>6|192,e[t++]=r&63|128):r<65536?(e[t++]=r>>12|224,e[t++]=r>>6&63|128,e[t++]=r&63|128):(e[t++]=r>>18|240,e[t++]=r>>12&63|128,e[t++]=r>>6&63|128,e[t++]=r&63|128)}return e},bh=function(n){let e=0;for(let t=0;t<n.length;t++){const i=n.charCodeAt(t);i<128?e++:i<2048?e+=2:i>=55296&&i<=56319?(e+=4,t++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vi(n){return n&&n._delegate?n._delegate:n}class wi{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wR{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new Pl;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:t});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(ER(e))try{this.getOrInitializeService({instanceIdentifier:fs})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(t);try{const s=this.getOrInitializeService({instanceIdentifier:r});i.resolve(s)}catch{}}}}clearInstance(e=fs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=fs){return this.instances.has(e)}getOptions(e=fs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);i===a&&o.resolve(r)}return r}onInit(e,t){var i;const r=this.normalizeInstanceIdentifier(t),s=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;s.add(e),this.onInitCallbacks.set(r,s);const o=this.instances.get(r);return o&&e(o,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const r of i)try{r(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:TR(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=fs){return this.component?this.component.multipleInstances?e:fs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function TR(n){return n===fs?void 0:n}function ER(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SR{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new wR(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ae;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Ae||(Ae={}));const bR={debug:Ae.DEBUG,verbose:Ae.VERBOSE,info:Ae.INFO,warn:Ae.WARN,error:Ae.ERROR,silent:Ae.SILENT},IR=Ae.INFO,CR={[Ae.DEBUG]:"log",[Ae.VERBOSE]:"log",[Ae.INFO]:"info",[Ae.WARN]:"warn",[Ae.ERROR]:"error"},AR=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),r=CR[e];if(r)console[r](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class ac{constructor(e){this.name=e,this._logLevel=IR,this._logHandler=AR,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ae))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?bR[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ae.DEBUG,...e),this._logHandler(this,Ae.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ae.VERBOSE,...e),this._logHandler(this,Ae.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ae.INFO,...e),this._logHandler(this,Ae.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ae.WARN,...e),this._logHandler(this,Ae.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ae.ERROR,...e),this._logHandler(this,Ae.ERROR,...e)}}const xR=(n,e)=>e.some(t=>n instanceof t);let Ty,Ey;function RR(){return Ty||(Ty=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function PR(){return Ey||(Ey=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const FT=new WeakMap,Lf=new WeakMap,UT=new WeakMap,wd=new WeakMap,M_=new WeakMap;function OR(n){const e=new Promise((t,i)=>{const r=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{t(Br(n.result)),r()},o=()=>{i(n.error),r()};n.addEventListener("success",s),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&FT.set(t,n)}).catch(()=>{}),M_.set(e,n),e}function kR(n){if(Lf.has(n))return;const e=new Promise((t,i)=>{const r=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{t(),r()},o=()=>{i(n.error||new DOMException("AbortError","AbortError")),r()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});Lf.set(n,e)}let Vf={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Lf.get(n);if(e==="objectStoreNames")return n.objectStoreNames||UT.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Br(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function NR(n){Vf=n(Vf)}function MR(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call(Td(this),e,...t);return UT.set(i,e.sort?e.sort():[e]),Br(i)}:PR().includes(n)?function(...e){return n.apply(Td(this),e),Br(FT.get(this))}:function(...e){return Br(n.apply(Td(this),e))}}function DR(n){return typeof n=="function"?MR(n):(n instanceof IDBTransaction&&kR(n),xR(n,RR())?new Proxy(n,Vf):n)}function Br(n){if(n instanceof IDBRequest)return OR(n);if(wd.has(n))return wd.get(n);const e=DR(n);return e!==n&&(wd.set(n,e),M_.set(e,n)),e}const Td=n=>M_.get(n);function LR(n,e,{blocked:t,upgrade:i,blocking:r,terminated:s}={}){const o=indexedDB.open(n,e),a=Br(o);return i&&o.addEventListener("upgradeneeded",l=>{i(Br(o.result),l.oldVersion,l.newVersion,Br(o.transaction),l)}),t&&o.addEventListener("blocked",l=>t(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),r&&l.addEventListener("versionchange",c=>r(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const VR=["get","getKey","getAll","getAllKeys","count"],FR=["put","add","delete","clear"],Ed=new Map;function Sy(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Ed.get(e))return Ed.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,r=FR.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(r||VR.includes(t)))return;const s=async function(o,...a){const l=this.transaction(o,r?"readwrite":"readonly");let c=l.store;return i&&(c=c.index(a.shift())),(await Promise.all([c[t](...a),r&&l.done]))[0]};return Ed.set(e,s),s}NR(n=>({...n,get:(e,t,i)=>Sy(e,t)||n.get(e,t,i),has:(e,t)=>!!Sy(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UR{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if($R(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function $R(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Ff="@firebase/app",by="0.10.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Us=new ac("@firebase/app"),BR="@firebase/app-compat",zR="@firebase/analytics-compat",jR="@firebase/analytics",GR="@firebase/app-check-compat",qR="@firebase/app-check",HR="@firebase/auth",WR="@firebase/auth-compat",KR="@firebase/database",YR="@firebase/database-compat",XR="@firebase/functions",QR="@firebase/functions-compat",JR="@firebase/installations",ZR="@firebase/installations-compat",eP="@firebase/messaging",tP="@firebase/messaging-compat",nP="@firebase/performance",iP="@firebase/performance-compat",rP="@firebase/remote-config",sP="@firebase/remote-config-compat",oP="@firebase/storage",aP="@firebase/storage-compat",lP="@firebase/firestore",cP="@firebase/firestore-compat",uP="firebase",hP="10.11.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uf="[DEFAULT]",dP={[Ff]:"fire-core",[BR]:"fire-core-compat",[jR]:"fire-analytics",[zR]:"fire-analytics-compat",[qR]:"fire-app-check",[GR]:"fire-app-check-compat",[HR]:"fire-auth",[WR]:"fire-auth-compat",[KR]:"fire-rtdb",[YR]:"fire-rtdb-compat",[XR]:"fire-fn",[QR]:"fire-fn-compat",[JR]:"fire-iid",[ZR]:"fire-iid-compat",[eP]:"fire-fcm",[tP]:"fire-fcm-compat",[nP]:"fire-perf",[iP]:"fire-perf-compat",[rP]:"fire-rc",[sP]:"fire-rc-compat",[oP]:"fire-gcs",[aP]:"fire-gcs-compat",[lP]:"fire-fst",[cP]:"fire-fst-compat","fire-js":"fire-js",[uP]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cu=new Map,fP=new Map,$f=new Map;function Iy(n,e){try{n.container.addComponent(e)}catch(t){Us.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Bi(n){const e=n.name;if($f.has(e))return Us.debug(`There were multiple attempts to register component ${e}.`),!1;$f.set(e,n);for(const t of Cu.values())Iy(t,n);for(const t of fP.values())Iy(t,n);return!0}function $T(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function za(n){return n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pP={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},zr=new ga("app","Firebase",pP);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _P{constructor(e,t,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new wi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw zr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ma=hP;function BT(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const i=Object.assign({name:Uf,automaticDataCollectionEnabled:!1},e),r=i.name;if(typeof r!="string"||!r)throw zr.create("bad-app-name",{appName:String(r)});if(t||(t=kT()),!t)throw zr.create("no-options");const s=Cu.get(r);if(s){if(Df(t,s.options)&&Df(i,s.config))return s;throw zr.create("duplicate-app",{appName:r})}const o=new SR(r);for(const l of $f.values())o.addComponent(l);const a=new _P(t,i,o);return Cu.set(r,a),a}function zT(n=Uf){const e=Cu.get(n);if(!e&&n===Uf&&kT())return BT();if(!e)throw zr.create("no-app",{appName:n});return e}function Ln(n,e,t){var i;let r=(i=dP[n])!==null&&i!==void 0?i:n;t&&(r+=`-${t}`);const s=r.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${r}" with version "${e}":`];s&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Us.warn(a.join(" "));return}Bi(new wi(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gP="firebase-heartbeat-database",mP=1,kl="firebase-heartbeat-store";let Sd=null;function jT(){return Sd||(Sd=LR(gP,mP,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(kl)}catch(t){console.warn(t)}}}}).catch(n=>{throw zr.create("idb-open",{originalErrorMessage:n.message})})),Sd}async function yP(n){try{const t=(await jT()).transaction(kl),i=await t.objectStore(kl).get(GT(n));return await t.done,i}catch(e){if(e instanceof _r)Us.warn(e.message);else{const t=zr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Us.warn(t.message)}}}async function Cy(n,e){try{const i=(await jT()).transaction(kl,"readwrite");await i.objectStore(kl).put(e,GT(n)),await i.done}catch(t){if(t instanceof _r)Us.warn(t.message);else{const i=zr.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Us.warn(i.message)}}}function GT(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vP=1024,wP=30*24*60*60*1e3;class TP{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new SP(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Ay();if(!(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:r}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=wP}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Ay(),{heartbeatsToSend:i,unsentEntries:r}=EP(this._heartbeatsCache.heartbeats),s=Su(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}}function Ay(){return new Date().toISOString().substring(0,10)}function EP(n,e=vP){const t=[];let i=n.slice();for(const r of n){const s=t.find(o=>o.agent===r.agent);if(s){if(s.dates.push(r.date),xy(t)>e){s.dates.pop();break}}else if(t.push({agent:r.agent,dates:[r.date]}),xy(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class SP{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return LT()?lR().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await yP(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const r=await this.read();return Cy(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const r=await this.read();return Cy(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function xy(n){return Su(JSON.stringify({version:2,heartbeats:n})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bP(n){Bi(new wi("platform-logger",e=>new UR(e),"PRIVATE")),Bi(new wi("heartbeat",e=>new TP(e),"PRIVATE")),Ln(Ff,by,n),Ln(Ff,by,"esm2017"),Ln("fire-js","")}bP("");function qT(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(t[i[r]]=n[i[r]]);return t}function HT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const IP=HT,WT=new ga("auth","Firebase",HT());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Au=new ac("@firebase/auth");function CP(n,...e){Au.logLevel<=Ae.WARN&&Au.warn(`Auth (${ma}): ${n}`,...e)}function ou(n,...e){Au.logLevel<=Ae.ERROR&&Au.error(`Auth (${ma}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ry(n,...e){throw D_(n,...e)}function KT(n,...e){return D_(n,...e)}function YT(n,e,t){const i=Object.assign(Object.assign({},IP()),{[e]:t});return new ga("auth","Firebase",i).create(e,{appName:n.name})}function au(n){return YT(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function D_(n,...e){if(typeof n!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return WT.create(n,...e)}function Be(n,e,...t){if(!n)throw D_(e,...t)}function al(n){const e="INTERNAL ASSERTION FAILED: "+n;throw ou(e),new Error(e)}function xu(n,e){n||al(e)}function AP(){return Py()==="http:"||Py()==="https:"}function Py(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xP(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(AP()||oR()||"connection"in navigator)?navigator.onLine:!0}function RP(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lc{constructor(e,t){this.shortDelay=e,this.longDelay=t,xu(t>e,"Short delay should be less than long delay!"),this.isMobile=k_()||MT()}get(){return xP()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PP(n,e){xu(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XT{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;al("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;al("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;al("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OP={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kP=new lc(3e4,6e4);function QT(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function Ih(n,e,t,i,r={}){return JT(n,r,async()=>{let s={},o={};i&&(e==="GET"?o=i:s={body:JSON.stringify(i)});const a=N_(Object.assign({key:n.config.apiKey},o)).slice(1),l=await n._getAdditionalHeaders();return l["Content-Type"]="application/json",n.languageCode&&(l["X-Firebase-Locale"]=n.languageCode),XT.fetch()(ZT(n,n.config.apiHost,t,a),Object.assign({method:e,headers:l,referrerPolicy:"no-referrer"},s))})}async function JT(n,e,t){n._canInitEmulator=!1;const i=Object.assign(Object.assign({},OP),e);try{const r=new NP(n),s=await Promise.race([t(),r.promise]);r.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw Lc(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Lc(n,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Lc(n,"email-already-in-use",o);if(l==="USER_DISABLED")throw Lc(n,"user-disabled",o);const u=i[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw YT(n,u,c);Ry(n,u)}}catch(r){if(r instanceof _r)throw r;Ry(n,"network-request-failed",{message:String(r)})}}function ZT(n,e,t,i){const r=`${e}${t}?${i}`;return n.config.emulator?PP(n.config,r):`${n.config.apiScheme}://${r}`}class NP{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(KT(this.auth,"network-request-failed")),kP.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Lc(n,e,t){const i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const r=KT(n,e,i);return r.customData._tokenResponse=t,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MP(n,e){return Ih(n,"POST","/v1/accounts:delete",e)}async function eE(n,e){return Ih(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ll(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function DP(n,e=!1){const t=vi(n),i=await t.getIdToken(e),r=tE(i);Be(r&&r.exp&&r.auth_time&&r.iat,t.auth,"internal-error");const s=typeof r.firebase=="object"?r.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:r,token:i,authTime:ll(bd(r.auth_time)),issuedAtTime:ll(bd(r.iat)),expirationTime:ll(bd(r.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function bd(n){return Number(n)*1e3}function tE(n){const[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return ou("JWT malformed, contained fewer than 3 sections"),null;try{const r=bu(t);return r?JSON.parse(r):(ou("Failed to decode base64 JWT payload"),null)}catch(r){return ou("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function Oy(n){const e=tE(n);return Be(e,"internal-error"),Be(typeof e.exp<"u","internal-error"),Be(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bf(n,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof _r&&LP(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function LP({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VP{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const r=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zf{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=ll(this.lastLoginAt),this.creationTime=ll(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ru(n){var e;const t=n.auth,i=await n.getIdToken(),r=await Bf(n,eE(t,{idToken:i}));Be(r==null?void 0:r.users.length,t,"internal-error");const s=r.users[0];n._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?nE(s.providerUserInfo):[],a=UP(n.providerData,o),l=n.isAnonymous,c=!(n.email&&s.passwordHash)&&!(a!=null&&a.length),u=l?c:!1,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new zf(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(n,h)}async function FP(n){const e=vi(n);await Ru(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function UP(n,e){return[...n.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function nE(n){return n.map(e=>{var{providerId:t}=e,i=qT(e,["providerId"]);return{providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $P(n,e){const t=await JT(n,{},async()=>{const i=N_({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:s}=n.config,o=ZT(n,r,"/v1/token",`key=${s}`),a=await n._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",XT.fetch()(o,{method:"POST",headers:a,body:i})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function BP(n,e){return Ih(n,"POST","/v2/accounts:revokeToken",QT(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ao{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Be(e.idToken,"internal-error"),Be(typeof e.idToken<"u","internal-error"),Be(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Oy(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Be(e.length!==0,"internal-error");const t=Oy(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Be(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:r,expiresIn:s}=await $P(e,t);this.updateTokensAndExpiration(i,r,Number(s))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:r,expirationTime:s}=t,o=new Ao;return i&&(Be(typeof i=="string","internal-error",{appName:e}),o.refreshToken=i),r&&(Be(typeof r=="string","internal-error",{appName:e}),o.accessToken=r),s&&(Be(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ao,this.toJSON())}_performRefresh(){return al("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Er(n,e){Be(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Or{constructor(e){var{uid:t,auth:i,stsTokenManager:r}=e,s=qT(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new VP(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new zf(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await Bf(this,this.stsTokenManager.getToken(this.auth,e));return Be(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return DP(this,e)}reload(){return FP(this)}_assign(e){this!==e&&(Be(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Or(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Be(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await Ru(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(za(this.auth.app))return Promise.reject(au(this.auth));const e=await this.getIdToken();return await Bf(this,MP(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var i,r,s,o,a,l,c,u;const h=(i=t.displayName)!==null&&i!==void 0?i:void 0,f=(r=t.email)!==null&&r!==void 0?r:void 0,d=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,_=(o=t.photoURL)!==null&&o!==void 0?o:void 0,p=(a=t.tenantId)!==null&&a!==void 0?a:void 0,g=(l=t._redirectEventId)!==null&&l!==void 0?l:void 0,m=(c=t.createdAt)!==null&&c!==void 0?c:void 0,T=(u=t.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:w,emailVerified:S,isAnonymous:E,providerData:I,stsTokenManager:P}=t;Be(w&&P,e,"internal-error");const x=Ao.fromJSON(this.name,P);Be(typeof w=="string",e,"internal-error"),Er(h,e.name),Er(f,e.name),Be(typeof S=="boolean",e,"internal-error"),Be(typeof E=="boolean",e,"internal-error"),Er(d,e.name),Er(_,e.name),Er(p,e.name),Er(g,e.name),Er(m,e.name),Er(T,e.name);const A=new Or({uid:w,auth:e,email:f,emailVerified:S,displayName:h,isAnonymous:E,photoURL:_,phoneNumber:d,tenantId:p,stsTokenManager:x,createdAt:m,lastLoginAt:T});return I&&Array.isArray(I)&&(A.providerData=I.map(k=>Object.assign({},k))),g&&(A._redirectEventId=g),A}static async _fromIdTokenResponse(e,t,i=!1){const r=new Ao;r.updateFromServerResponse(t);const s=new Or({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:i});return await Ru(s),s}static async _fromGetAccountInfoResponse(e,t,i){const r=t.users[0];Be(r.localId!==void 0,"internal-error");const s=r.providerUserInfo!==void 0?nE(r.providerUserInfo):[],o=!(r.email&&r.passwordHash)&&!(s!=null&&s.length),a=new Ao;a.updateFromIdToken(i);const l=new Or({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:s,metadata:new zf(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ky=new Map;function vs(n){xu(n instanceof Function,"Expected a class definition");let e=ky.get(n);return e?(xu(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,ky.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}iE.type="NONE";const Ny=iE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Id(n,e,t){return`firebase:${n}:${e}:${t}`}class xo{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:r,name:s}=this.auth;this.fullUserKey=Id(this.userKey,r.apiKey,s),this.fullPersistenceKey=Id("persistence",r.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Or._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new xo(vs(Ny),e,i);const r=(await Promise.all(t.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=r[0]||vs(Ny);const o=Id(i,e.config.apiKey,e.name);let a=null;for(const c of t)try{const u=await c._get(o);if(u){const h=Or._fromJSON(e,u);c!==s&&(a=h),s=c;break}}catch{}const l=r.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new xo(s,e,i):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(t.map(async c=>{if(c!==s)try{await c._remove(o)}catch{}})),new xo(s,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function My(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(qP(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(zP(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(WP(e))return"Blackberry";if(KP(e))return"Webos";if(jP(e))return"Safari";if((e.includes("chrome/")||GP(e))&&!e.includes("edge/"))return"Chrome";if(HP(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function zP(n=yi()){return/firefox\//i.test(n)}function jP(n=yi()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function GP(n=yi()){return/crios\//i.test(n)}function qP(n=yi()){return/iemobile/i.test(n)}function HP(n=yi()){return/android/i.test(n)}function WP(n=yi()){return/blackberry/i.test(n)}function KP(n=yi()){return/webos/i.test(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rE(n,e=[]){let t;switch(n){case"Browser":t=My(yi());break;case"Worker":t=`${My(yi())}-${n}`;break;default:t=n}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${ma}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YP{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});i.onAbort=t,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const r of t)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XP(n,e={}){return Ih(n,"GET","/v2/passwordPolicy",QT(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QP=6;class JP{constructor(e){var t,i,r,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=o.minPasswordLength)!==null&&t!==void 0?t:QP,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(r=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&r!==void 0?r:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,i,r,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(t=l.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),l.isValid&&(l.isValid=(i=l.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(r=l.containsLowercaseLetter)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,r,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZP{constructor(e,t,i,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Dy(this),this.idTokenSubscription=new Dy(this),this.beforeStateQueue=new YP(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=WT,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=vs(t)),this._initializationPromise=this.queue(async()=>{var i,r;if(!this._deleted&&(this.persistenceManager=await xo.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((r=this.currentUser)===null||r===void 0?void 0:r.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await eE(this,{idToken:e}),i=await Or._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(za(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let r=i,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=r==null?void 0:r._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(r=l.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Be(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Ru(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=RP()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(za(this.app))return Promise.reject(au(this));const t=e?vi(e):null;return t&&Be(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Be(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return za(this.app)?Promise.reject(au(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return za(this.app)?Promise.reject(au(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(vs(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await XP(this),t=new JP(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new ga("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await BP(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&vs(e)||this._popupRedirectResolver;Be(t,this,"argument-error"),this.redirectPersistenceManager=await xo.create(this,[vs(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,r){if(this._deleted)return()=>{};const s=typeof t=="function"?t:t.next.bind(t);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Be(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof t=="function"){const l=e.addObserver(t,i,r);return()=>{o=!0,l()}}else{const l=e.addObserver(t);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Be(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=rE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(t["X-Firebase-Client"]=i);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&CP(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function eO(n){return vi(n)}class Dy{constructor(e){this.auth=e,this.observer=null,this.addObserver=_R(t=>this.observer=t)}get next(){return Be(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function tO(n,e){const t=(e==null?void 0:e.persistence)||[],i=(Array.isArray(t)?t:[t]).map(vs);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}new lc(3e4,6e4);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new lc(2e3,1e4);/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new lc(3e4,6e4);/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new lc(5e3,15e3);var Ly="@firebase/auth",Vy="1.7.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nO{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Be(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iO(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function rO(n){Bi(new wi("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=i.options;Be(o&&!o.includes(":"),"invalid-api-key",{appName:i.name});const l={apiKey:o,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:rE(n)},c=new ZP(i,r,s,l);return tO(c,t),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),Bi(new wi("auth-internal",e=>{const t=eO(e.getProvider("auth").getImmediate());return(i=>new nO(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ln(Ly,Vy,iO(n)),Ln(Ly,Vy,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sO=5*60;rR("authIdTokenMaxAge");rO("Browser");/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oO=new Map,aO={activated:!1,tokenObservers:[]};function Ti(n){return oO.get(n)||Object.assign({},aO)}const Fy={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lO{constructor(e,t,i,r,s){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=i,this.lowerBound=r,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=r,r>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(e){this.stop();try{this.pending=new Pl,this.pending.promise.catch(t=>{}),await cO(this.getNextRun(e)),this.pending.resolve(),await this.pending.promise,this.pending=new Pl,this.pending.promise.catch(t=>{}),await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}function cO(n){return new Promise(e=>{setTimeout(e,n)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uO={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},Pu=new ga("appCheck","AppCheck",uO);function sE(n){if(!Ti(n).activated)throw Pu.create("use-before-activation",{appName:n.name})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hO="firebase-app-check-database",dO=1,jf="firebase-app-check-store";let Vc=null;function fO(){return Vc||(Vc=new Promise((n,e)=>{try{const t=indexedDB.open(hO,dO);t.onsuccess=i=>{n(i.target.result)},t.onerror=i=>{var r;e(Pu.create("storage-open",{originalErrorMessage:(r=i.target.error)===null||r===void 0?void 0:r.message}))},t.onupgradeneeded=i=>{const r=i.target.result;switch(i.oldVersion){case 0:r.createObjectStore(jf,{keyPath:"compositeKey"})}}}catch(t){e(Pu.create("storage-open",{originalErrorMessage:t==null?void 0:t.message}))}}),Vc)}function pO(n,e){return _O(gO(n),e)}async function _O(n,e){const i=(await fO()).transaction(jf,"readwrite"),s=i.objectStore(jf).put({compositeKey:n,value:e});return new Promise((o,a)=>{s.onsuccess=l=>{o()},i.onerror=l=>{var c;a(Pu.create("storage-set",{originalErrorMessage:(c=l.target.error)===null||c===void 0?void 0:c.message}))}})}function gO(n){return`${n.options.appId}-${n.name}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gf=new ac("@firebase/app-check");function Uy(n,e){return LT()?pO(n,e).catch(t=>{Gf.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mO={error:"UNKNOWN_ERROR"};function yO(n){return Eh.encodeString(JSON.stringify(n),!1)}async function qf(n,e=!1){const t=n.app;sE(t);const i=Ti(t);let r=i.token,s;if(r&&!ja(r)&&(i.token=void 0,r=void 0),!r){const l=await i.cachedTokenPromise;l&&(ja(l)?r=l:await Uy(t,void 0))}if(!e&&r&&ja(r))return{token:r.token};let o=!1;try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),o=!0),r=await Ti(t).exchangeTokenPromise}catch(l){l.code==="appCheck/throttled"?Gf.warn(l.message):Gf.error(l),s=l}let a;return r?s?ja(r)?a={token:r.token,internalError:s}:a=By(s):(a={token:r.token},i.token=r,await Uy(t,r)):a=By(s),o&&EO(t,a),a}async function vO(n){const e=n.app;sE(e);const{provider:t}=Ti(e);{const{token:i}=await t.getToken();return{token:i}}}function wO(n,e,t,i){const{app:r}=n,s=Ti(r),o={next:t,error:i,type:e};if(s.tokenObservers=[...s.tokenObservers,o],s.token&&ja(s.token)){const a=s.token;Promise.resolve().then(()=>{t({token:a.token}),$y(n)}).catch(()=>{})}s.cachedTokenPromise.then(()=>$y(n))}function oE(n,e){const t=Ti(n),i=t.tokenObservers.filter(r=>r.next!==e);i.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=i}function $y(n){const{app:e}=n,t=Ti(e);let i=t.tokenRefresher;i||(i=TO(n),t.tokenRefresher=i),!i.isRunning()&&t.isTokenAutoRefreshEnabled&&i.start()}function TO(n){const{app:e}=n;return new lO(async()=>{const t=Ti(e);let i;if(t.token?i=await qf(n,!0):i=await qf(n),i.error)throw i.error;if(i.internalError)throw i.internalError},()=>!0,()=>{const t=Ti(e);if(t.token){let i=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5;const r=t.token.expireTimeMillis-5*60*1e3;return i=Math.min(i,r),Math.max(0,i-Date.now())}else return 0},Fy.RETRIAL_MIN_WAIT,Fy.RETRIAL_MAX_WAIT)}function EO(n,e){const t=Ti(n).tokenObservers;for(const i of t)try{i.type==="EXTERNAL"&&e.error!=null?i.error(e.error):i.next(e)}catch{}}function ja(n){return n.expireTimeMillis-Date.now()>0}function By(n){return{token:yO(mO),error:n}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SO{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Ti(this.app);for(const t of e)oE(this.app,t.next);return Promise.resolve()}}function bO(n,e){return new SO(n,e)}function IO(n){return{getToken:e=>qf(n,e),getLimitedUseToken:()=>vO(n),addTokenListener:e=>wO(n,"INTERNAL",e),removeTokenListener:e=>oE(n.app,e)}}const CO="@firebase/app-check",AO="0.8.3",xO="app-check",zy="app-check-internal";function RO(){Bi(new wi(xO,n=>{const e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return bO(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(zy).initialize()})),Bi(new wi(zy,n=>{const e=n.getProvider("app-check").getImmediate();return IO(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Ln(CO,AO)}RO();var PO="firebase",OO="10.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ln(PO,OO,"app");const kO=Symbol("firebaseApp");var jy={};const Gy="@firebase/database",qy="1.0.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let aE="";function NO(n){aE=n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MO{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){t==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Kt(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return t==null?null:Ol(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DO{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){t==null?delete this.cache_[e]:this.cache_[e]=t}get(e){return gr(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lE=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new MO(e)}}catch{}return new DO},ws=lE("localStorage"),Hf=lE("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ro=new ac("@firebase/database"),LO=function(){let n=1;return function(){return n++}}(),cE=function(n){const e=vR(n),t=new pR;t.update(e);const i=t.digest();return Eh.encodeByteArray(i)},cc=function(...n){let e="";for(let t=0;t<n.length;t++){const i=n[t];Array.isArray(i)||i&&typeof i=="object"&&typeof i.length=="number"?e+=cc.apply(null,i):typeof i=="object"?e+=Kt(i):e+=i,e+=" "}return e};let xs=null,Hy=!0;const VO=function(n,e){X(!e||n===!0||n===!1,"Can't turn on custom loggers persistently."),n===!0?(Ro.logLevel=Ae.VERBOSE,xs=Ro.log.bind(Ro),e&&Hf.set("logging_enabled",!0)):typeof n=="function"?xs=n:(xs=null,Hf.remove("logging_enabled"))},tn=function(...n){if(Hy===!0&&(Hy=!1,xs===null&&Hf.get("logging_enabled")===!0&&VO(!0)),xs){const e=cc.apply(null,n);xs(e)}},uc=function(n){return function(...e){tn(n,...e)}},Wf=function(...n){const e="FIREBASE INTERNAL ERROR: "+cc(...n);Ro.error(e)},$s=function(...n){const e=`FIREBASE FATAL ERROR: ${cc(...n)}`;throw Ro.error(e),new Error(e)},Vn=function(...n){const e="FIREBASE WARNING: "+cc(...n);Ro.warn(e)},FO=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Vn("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},uE=function(n){return typeof n=="number"&&(n!==n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},UO=function(n){if(document.readyState==="complete")n();else{let e=!1;const t=function(){if(!document.body){setTimeout(t,Math.floor(10));return}e||(e=!0,n())};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&t()}),window.attachEvent("onload",t))}},Ko="[MIN_NAME]",Bs="[MAX_NAME]",ya=function(n,e){if(n===e)return 0;if(n===Ko||e===Bs)return-1;if(e===Ko||n===Bs)return 1;{const t=Wy(n),i=Wy(e);return t!==null?i!==null?t-i===0?n.length-e.length:t-i:-1:i!==null?1:n<e?-1:1}},$O=function(n,e){return n===e?0:n<e?-1:1},Oa=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+Kt(e))},L_=function(n){if(typeof n!="object"||n===null)return Kt(n);const e=[];for(const i in n)e.push(i);e.sort();let t="{";for(let i=0;i<e.length;i++)i!==0&&(t+=","),t+=Kt(e[i]),t+=":",t+=L_(n[e[i]]);return t+="}",t},hE=function(n,e){const t=n.length;if(t<=e)return[n];const i=[];for(let r=0;r<t;r+=e)r+e>t?i.push(n.substring(r,t)):i.push(n.substring(r,r+e));return i};function ti(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const dE=function(n){X(!uE(n),"Invalid JSON number");const e=11,t=52,i=(1<<e-1)-1;let r,s,o,a,l;n===0?(s=0,o=0,r=1/n===-1/0?1:0):(r=n<0,n=Math.abs(n),n>=Math.pow(2,1-i)?(a=Math.min(Math.floor(Math.log(n)/Math.LN2),i),s=a+i,o=Math.round(n*Math.pow(2,t-a)-Math.pow(2,t))):(s=0,o=Math.round(n/Math.pow(2,1-i-t))));const c=[];for(l=t;l;l-=1)c.push(o%2?1:0),o=Math.floor(o/2);for(l=e;l;l-=1)c.push(s%2?1:0),s=Math.floor(s/2);c.push(r?1:0),c.reverse();const u=c.join("");let h="";for(l=0;l<64;l+=8){let f=parseInt(u.substr(l,8),2).toString(16);f.length===1&&(f="0"+f),h=h+f}return h.toLowerCase()},BO=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},zO=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"},jO=new RegExp("^-?(0*)\\d{1,10}$"),GO=-2147483648,qO=2147483647,Wy=function(n){if(jO.test(n)){const e=Number(n);if(e>=GO&&e<=qO)return e}return null},hc=function(n){try{n()}catch(e){setTimeout(()=>{const t=e.stack||"";throw Vn("Exception was thrown by user callback.",t),e},Math.floor(0))}},HO=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},cl=function(n,e){const t=setTimeout(n,e);return typeof t=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):typeof t=="object"&&t.unref&&t.unref(),t};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WO{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t==null?void 0:t.getImmediate({optional:!0}),this.appCheck||t==null||t.get().then(i=>this.appCheck=i)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,i)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,i):t(null)},0)})}addTokenChangeListener(e){var t;(t=this.appCheckProvider)===null||t===void 0||t.get().then(i=>i.addTokenListener(e))}notifyForInvalidToken(){Vn(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KO{constructor(e,t,i){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(r=>this.auth_=r)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&t.code==="auth/token-not-initialized"?(tn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,i)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,i):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Vn(e)}}class Kf{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}Kf.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V_="5",fE="v",pE="s",_E="r",gE="f",mE=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,yE="ls",vE="p",Yf="ac",wE="websocket",TE="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YO{constructor(e,t,i,r,s=!1,o="",a=!1,l=!1){this.secure=t,this.namespace=i,this.webSocketOnly=r,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=l,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=ws.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&ws.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${t}`}}function XO(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams}function EE(n,e,t){X(typeof e=="string","typeof type must == string"),X(typeof t=="object","typeof params must == object");let i;if(e===wE)i=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else if(e===TE)i=(n.secure?"https://":"http://")+n.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);XO(n)&&(t.ns=n.namespace);const r=[];return ti(t,(s,o)=>{r.push(s+"="+o)}),i+r.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QO{constructor(){this.counters_={}}incrementCounter(e,t=1){gr(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return Qx(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cd={},Ad={};function F_(n){const e=n.toString();return Cd[e]||(Cd[e]=new QO),Cd[e]}function JO(n,e){const t=n.toString();return Ad[t]||(Ad[t]=e()),Ad[t]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZO{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let r=0;r<i.length;++r)i[r]&&hc(()=>{this.onMessage_(i[r])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ky="start",ek="close",tk="pLPCommand",nk="pRTLPCB",SE="id",bE="pw",IE="ser",ik="cb",rk="seg",sk="ts",ok="d",ak="dframe",CE=1870,AE=30,lk=CE-AE,ck=25e3,uk=3e4;class mo{constructor(e,t,i,r,s,o,a){this.connId=e,this.repoInfo=t,this.applicationId=i,this.appCheckToken=r,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=uc(e),this.stats_=F_(t),this.urlFn=l=>(this.appCheckToken&&(l[Yf]=this.appCheckToken),EE(t,TE,l))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new ZO(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(uk)),UO(()=>{if(this.isClosed_)return;this.scriptTagHolder=new U_((...s)=>{const[o,a,l,c,u]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===Ky)this.id=a,this.password=l;else if(o===ek)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{const[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const i={};i[Ky]="t",i[IE]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(i[ik]=this.scriptTagHolder.uniqueCallbackIdentifier),i[fE]=V_,this.transportSessionId&&(i[pE]=this.transportSessionId),this.lastSessionId&&(i[yE]=this.lastSessionId),this.applicationId&&(i[vE]=this.applicationId),this.appCheckToken&&(i[Yf]=this.appCheckToken),typeof location<"u"&&location.hostname&&mE.test(location.hostname)&&(i[_E]=gE);const r=this.urlFn(i);this.log_("Connecting via long-poll to "+r),this.scriptTagHolder.addTag(r,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){mo.forceAllow_=!0}static forceDisallow(){mo.forceDisallow_=!0}static isAvailable(){return mo.forceAllow_?!0:!mo.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!BO()&&!zO()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=Kt(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const i=RT(t),r=hE(i,lk);for(let s=0;s<r.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[s]),this.curSegmentNum++}addDisconnectPingFrame(e,t){this.myDisconnFrame=document.createElement("iframe");const i={};i[ak]="t",i[SE]=e,i[bE]=t,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=Kt(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class U_{constructor(e,t,i,r){this.onDisconnect=i,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=LO(),window[tk+this.uniqueCallbackIdentifier]=e,window[nk+this.uniqueCallbackIdentifier]=t,this.myIFrame=U_.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){tn("frame writing exception"),a.stack&&tn(a.stack),tn(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||tn("No IE domain setting required")}catch{const i=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[SE]=this.myID,e[bE]=this.myPW,e[IE]=this.currentSerial;let t=this.urlFn(e),i="",r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+AE+i.length<=CE;){const o=this.pendingSegs.shift();i=i+"&"+rk+r+"="+o.seg+"&"+sk+r+"="+o.ts+"&"+ok+r+"="+o.d,r++}return t=t+i,this.addLongPollTag_(t,this.currentSerial),!0}else return!1}enqueueSegment(e,t,i){this.pendingSegs.push({seg:e,ts:t,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const i=()=>{this.outstandingRequests.delete(t),this.newRequest_()},r=setTimeout(i,Math.floor(ck)),s=()=>{clearTimeout(r),i()};this.addTag(e,s)}addTag(e,t){setTimeout(()=>{try{if(!this.sendNewPolls)return;const i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=e,i.onload=i.onreadystatechange=function(){const r=i.readyState;(!r||r==="loaded"||r==="complete")&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),t())},i.onerror=()=>{tn("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hk=16384,dk=45e3;let Ou=null;typeof MozWebSocket<"u"?Ou=MozWebSocket:typeof WebSocket<"u"&&(Ou=WebSocket);class li{constructor(e,t,i,r,s,o,a){this.connId=e,this.applicationId=i,this.appCheckToken=r,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=uc(this.connId),this.stats_=F_(t),this.connURL=li.connectionURL_(t,o,a,r,i),this.nodeAdmin=t.nodeAdmin}static connectionURL_(e,t,i,r,s){const o={};return o[fE]=V_,typeof location<"u"&&location.hostname&&mE.test(location.hostname)&&(o[_E]=gE),t&&(o[pE]=t),i&&(o[yE]=i),r&&(o[Yf]=r),s&&(o[vE]=s),EE(e,wE,o)}open(e,t){this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,ws.set("previous_websocket_failure",!0);try{let i;DT(),this.mySock=new Ou(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const r=i.message||i.data;r&&this.log_(r),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const r=i.message||i.data;r&&this.log_(r),this.onClosed_()}}start(){}static forceDisallow(){li.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const t=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(t);i&&i.length>1&&parseFloat(i[1])<4.4&&(e=!0)}return!e&&Ou!==null&&!li.forceDisallow_}static previouslyFailed(){return ws.isInMemoryStorage||ws.get("previous_websocket_failure")===!0}markConnectionHealthy(){ws.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const t=this.frames.join("");this.frames=null;const i=Ol(t);this.onMessage(i)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(X(this.frames===null,"We already have a frame buffer"),e.length<=6){const t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(t);else{const i=this.extractFrameCount_(t);i!==null&&this.appendFrame_(i)}}send(e){this.resetKeepAlive();const t=Kt(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const i=hE(t,hk);i.length>1&&this.sendString_(String(i.length));for(let r=0;r<i.length;r++)this.sendString_(i[r])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(dk))}sendString_(e){try{this.mySock.send(e)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}li.responsesRequiredToBeHealthy=2;li.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nl{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[mo,li]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const t=li&&li.isAvailable();let i=t&&!li.previouslyFailed();if(e.webSocketOnly&&(t||Vn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[li];else{const r=this.transports_=[];for(const s of Nl.ALL_TRANSPORTS)s&&s.isAvailable()&&r.push(s);Nl.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Nl.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fk=6e4,pk=5e3,_k=10*1024,gk=100*1024,xd="t",Yy="d",mk="s",Xy="r",yk="e",Qy="o",Jy="a",Zy="n",ev="p",vk="h";class wk{constructor(e,t,i,r,s,o,a,l,c,u){this.id=e,this.repoInfo_=t,this.applicationId_=i,this.appCheckToken_=r,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=l,this.onKill_=c,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=uc("c:"+this.id+":"),this.transportManager_=new Nl(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,i)},Math.floor(0));const r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=cl(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>gk?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>_k?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){const t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(xd in e){const t=e[xd];t===Jy?this.upgradeIfSecondaryHealthy_():t===Xy?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):t===Qy&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=Oa("t",e),i=Oa("d",e);if(t==="c")this.onSecondaryControl_(i);else if(t==="d")this.pendingDataMessages.push(i);else throw new Error("Unknown protocol layer: "+t)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:ev,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:Jy,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:Zy,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=Oa("t",e),i=Oa("d",e);t==="c"?this.onControl_(i):t==="d"&&this.onDataMessage_(i)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=Oa(xd,e);if(Yy in e){const i=e[Yy];if(t===vk){const r=Object.assign({},i);this.repoInfo_.isUsingEmulator&&(r.h=this.repoInfo_.host),this.onHandshake_(r)}else if(t===Zy){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else t===mk?this.onConnectionShutdown_(i):t===Xy?this.onReset_(i):t===yk?Wf("Server Error: "+i):t===Qy?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Wf("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,i=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),V_!==i&&Vn("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,i),cl(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(fk))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):cl(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(pk))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:ev,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(ws.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xE{put(e,t,i,r){}merge(e,t,i,r){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,i){}onDisconnectMerge(e,t,i){}onDisconnectCancel(e,t){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RE{constructor(e){this.allowedEvents_=e,this.listeners_={},X(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const i=[...this.listeners_[e]];for(let r=0;r<i.length;r++)i[r].callback.apply(i[r].context,t)}}on(e,t,i){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:i});const r=this.getInitialEvent(e);r&&t.apply(i,r)}off(e,t,i){this.validateEventType_(e);const r=this.listeners_[e]||[];for(let s=0;s<r.length;s++)if(r[s].callback===t&&(!i||i===r[s].context)){r.splice(s,1);return}}validateEventType_(e){X(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ku extends RE{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!k_()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new ku}getInitialEvent(e){return X(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tv=32,nv=768;class lt{constructor(e,t){if(t===void 0){this.pieces_=e.split("/");let i=0;for(let r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[i]=this.pieces_[r],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)this.pieces_[t]!==""&&(e+="/"+this.pieces_[t]);return e||"/"}}function Je(){return new lt("")}function Ne(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Wr(n){return n.pieces_.length-n.pieceNum_}function ot(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new lt(n.pieces_,e)}function PE(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function Tk(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)n.pieces_[t]!==""&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}function OE(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function kE(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new lt(e,0)}function Ft(n,e){const t=[];for(let i=n.pieceNum_;i<n.pieces_.length;i++)t.push(n.pieces_[i]);if(e instanceof lt)for(let i=e.pieceNum_;i<e.pieces_.length;i++)t.push(e.pieces_[i]);else{const i=e.split("/");for(let r=0;r<i.length;r++)i[r].length>0&&t.push(i[r])}return new lt(t,0)}function Re(n){return n.pieceNum_>=n.pieces_.length}function Xn(n,e){const t=Ne(n),i=Ne(e);if(t===null)return e;if(t===i)return Xn(ot(n),ot(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function NE(n,e){if(Wr(n)!==Wr(e))return!1;for(let t=n.pieceNum_,i=e.pieceNum_;t<=n.pieces_.length;t++,i++)if(n.pieces_[t]!==e.pieces_[i])return!1;return!0}function hi(n,e){let t=n.pieceNum_,i=e.pieceNum_;if(Wr(n)>Wr(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[i])return!1;++t,++i}return!0}class Ek{constructor(e,t){this.errorPrefix_=t,this.parts_=OE(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=bh(this.parts_[i]);ME(this)}}function Sk(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=bh(e),ME(n)}function bk(n){const e=n.parts_.pop();n.byteLength_-=bh(e),n.parts_.length>0&&(n.byteLength_-=1)}function ME(n){if(n.byteLength_>nv)throw new Error(n.errorPrefix_+"has a key path longer than "+nv+" bytes ("+n.byteLength_+").");if(n.parts_.length>tv)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+tv+") or object contains a cycle "+ps(n))}function ps(n){return n.parts_.length===0?"":"in property '"+n.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $_ extends RE{constructor(){super(["visible"]);let e,t;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const i=!document[e];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}static getInstance(){return new $_}getInitialEvent(e){return X(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ka=1e3,Ik=60*5*1e3,iv=30*1e3,Ck=1.3,Ak=3e4,xk="server_kill",rv=3;class cr extends xE{constructor(e,t,i,r,s,o,a,l){if(super(),this.repoInfo_=e,this.applicationId_=t,this.onDataUpdate_=i,this.onConnectStatus_=r,this.onServerInfoUpdate_=s,this.authTokenProvider_=o,this.appCheckTokenProvider_=a,this.authOverride_=l,this.id=cr.nextPersistentConnectionId_++,this.log_=uc("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=ka,this.maxReconnectDelay_=Ik,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!DT())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");$_.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&ku.getInstance().on("online",this.onOnline_,this)}sendRequest(e,t,i){const r=++this.requestNumber_,s={r,a:e,b:t};this.log_(Kt(s)),X(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),i&&(this.requestCBHash_[r]=i)}get(e){this.initConnection_();const t=new Pl,r={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:o=>{const a=o.d;o.s==="ok"?t.resolve(a):t.reject(a)}};this.outstandingGets_.push(r),this.outstandingGetCount_++;const s=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(s),t.promise}listen(e,t,i,r){this.initConnection_();const s=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+s),this.listens.has(o)||this.listens.set(o,new Map),X(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),X(!this.listens.get(o).has(s),"listen() called twice for same path/queryId.");const a={onComplete:r,hashFn:t,query:e,tag:i};this.listens.get(o).set(s,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const t=this.outstandingGets_[e];this.sendRequest("g",t.request,i=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),t.onComplete&&t.onComplete(i)})}sendListen_(e){const t=e.query,i=t._path.toString(),r=t._queryIdentifier;this.log_("Listen on "+i+" for "+r);const s={p:i},o="q";e.tag&&(s.q=t._queryObject,s.t=e.tag),s.h=e.hashFn(),this.sendRequest(o,s,a=>{const l=a.d,c=a.s;cr.warnOnListenWarnings_(l,t),(this.listens.get(i)&&this.listens.get(i).get(r))===e&&(this.log_("listen response",a),c!=="ok"&&this.removeListen_(i,r),e.onComplete&&e.onComplete(c,l))})}static warnOnListenWarnings_(e,t){if(e&&typeof e=="object"&&gr(e,"w")){const i=Wo(e,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const r='".indexOn": "'+t._queryParams.getIndex().toString()+'"',s=t._path.toString();Vn(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${r} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||fR(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=iv)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,t=dR(e)?"auth":"gauth",i={cred:e};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(t,i,r=>{const s=r.s,o=r.d||"error";this.authToken_===e&&(s==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const t=e.s,i=e.d||"error";t==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(t,i)})}unlisten(e,t){const i=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+i+" "+r),X(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,r)&&this.connected_&&this.sendUnlisten_(i,r,e._queryObject,t)}sendUnlisten_(e,t,i,r){this.log_("Unlisten on "+e+" for "+t);const s={p:e},o="n";r&&(s.q=i,s.t=r),this.sendRequest(o,s)}onDisconnectPut(e,t,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:i})}onDisconnectMerge(e,t,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:i})}onDisconnectCancel(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}sendOnDisconnect_(e,t,i,r){const s={p:t,d:i};this.log_("onDisconnect "+e,s),this.sendRequest(e,s,o=>{r&&setTimeout(()=>{r(o.s,o.d)},Math.floor(0))})}put(e,t,i,r){this.putInternal("p",e,t,i,r)}merge(e,t,i,r){this.putInternal("m",e,t,i,r)}putInternal(e,t,i,r,s){this.initConnection_();const o={p:t,d:i};s!==void 0&&(o.h=s),this.outstandingPuts_.push({action:e,request:o,onComplete:r}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+t)}sendPut_(e){const t=this.outstandingPuts_[e].action,i=this.outstandingPuts_[e].request,r=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(t,i,s=>{this.log_(t+" response",s),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),r&&r(s.s,s.d)})}reportStats(e){if(this.connected_){const t={c:e};this.log_("reportStats",t),this.sendRequest("s",t,i=>{if(i.s!=="ok"){const s=i.d;this.log_("reportStats","Error sending stats: "+s)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+Kt(e));const t=e.r,i=this.requestCBHash_[t];i&&(delete this.requestCBHash_[t],i(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,t){this.log_("handleServerMessage",e,t),e==="d"?this.onDataUpdate_(t.p,t.d,!1,t.t):e==="m"?this.onDataUpdate_(t.p,t.d,!0,t.t):e==="c"?this.onListenRevoked_(t.p,t.q):e==="ac"?this.onAuthRevoked_(t.s,t.d):e==="apc"?this.onAppCheckRevoked_(t.s,t.d):e==="sd"?this.onSecurityDebugPacket_(t):Wf("Unrecognized action received from server: "+Kt(e)+`
Are you using the latest client?`)}onReady_(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){X(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=ka,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=ka,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>Ak&&(this.reconnectDelay_=ka),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*Ck)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),t=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),r=this.id+":"+cr.nextConnectionId_++,s=this.lastSessionId;let o=!1,a=null;const l=function(){a?a.close():(o=!0,i())},c=function(h){X(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(h)};this.realtime_={close:l,sendRequest:c};const u=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[h,f]=await Promise.all([this.authTokenProvider_.getToken(u),this.appCheckTokenProvider_.getToken(u)]);o?tn("getToken() completed but was canceled"):(tn("getToken() completed. Creating connection."),this.authToken_=h&&h.accessToken,this.appCheckToken_=f&&f.token,a=new wk(r,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,t,i,d=>{Vn(d+" ("+this.repoInfo_.toString()+")"),this.interrupt(xk)},s))}catch(h){this.log_("Failed to get token: "+h),o||(this.repoInfo_.nodeAdmin&&Vn(h),l())}}}interrupt(e){tn("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){tn("Resuming connection for reason: "+e),delete this.interruptReasons_[e],vy(this.interruptReasons_)&&(this.reconnectDelay_=ka,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const t=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,t){let i;t?i=t.map(s=>L_(s)).join("$"):i="default";const r=this.removeListen_(e,i);r&&r.onComplete&&r.onComplete("permission_denied")}removeListen_(e,t){const i=new lt(e).toString();let r;if(this.listens.has(i)){const s=this.listens.get(i);r=s.get(t),s.delete(t),s.size===0&&this.listens.delete(i)}else r=void 0;return r}onAuthRevoked_(e,t){tn("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=rv&&(this.reconnectDelay_=iv,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,t){tn("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=rv&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const t of e.values())this.sendListen_(t);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let t="js";e["sdk."+t+"."+aE.replace(/\./g,"-")]=1,k_()?e["framework.cordova"]=1:MT()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=ku.getInstance().currentlyOnline();return vy(this.interruptReasons_)&&e}}cr.nextPersistentConnectionId_=0;cr.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Me{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new Me(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ch{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const i=new Me(Ko,e),r=new Me(Ko,t);return this.compare(i,r)!==0}minPost(){return Me.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fc;class DE extends Ch{static get __EMPTY_NODE(){return Fc}static set __EMPTY_NODE(e){Fc=e}compare(e,t){return ya(e.name,t.name)}isDefinedOn(e){throw _a("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return Me.MIN}maxPost(){return new Me(Bs,Fc)}makePost(e,t){return X(typeof e=="string","KeyIndex indexValue must always be a string."),new Me(e,Fc)}toString(){return".key"}}const Po=new DE;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Uc=class{constructor(e,t,i,r,s=null){this.isReverse_=r,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=t?i(e.key,t):1,r&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),t;if(this.resultGenerator_?t=this.resultGenerator_(e.key,e.value):t={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}},Rn=class Ga{constructor(e,t,i,r,s){this.key=e,this.value=t,this.color=i??Ga.RED,this.left=r??Ni.EMPTY_NODE,this.right=s??Ni.EMPTY_NODE}copy(e,t,i,r,s){return new Ga(e??this.key,t??this.value,i??this.color,r??this.left,s??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let r=this;const s=i(e,r.key);return s<0?r=r.copy(null,null,null,r.left.insert(e,t,i),null):s===0?r=r.copy(null,t,null,null,null):r=r.copy(null,null,null,null,r.right.insert(e,t,i)),r.fixUp_()}removeMin_(){if(this.left.isEmpty())return Ni.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,t){let i,r;if(i=this,t(e,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),t(e,i.key)===0){if(i.right.isEmpty())return Ni.EMPTY_NODE;r=i.right.min_(),i=i.copy(r.key,r.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,Ga.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,Ga.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}};Rn.RED=!0;Rn.BLACK=!1;class Rk{copy(e,t,i,r,s){return this}insert(e,t,i){return new Rn(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}let Ni=class lu{constructor(e,t=lu.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new lu(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Rn.BLACK,null,null))}remove(e){return new lu(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Rn.BLACK,null,null))}get(e){let t,i=this.root_;for(;!i.isEmpty();){if(t=this.comparator_(e,i.key),t===0)return i.value;t<0?i=i.left:t>0&&(i=i.right)}return null}getPredecessorKey(e){let t,i=this.root_,r=null;for(;!i.isEmpty();)if(t=this.comparator_(e,i.key),t===0){if(i.left.isEmpty())return r?r.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}else t<0?i=i.left:t>0&&(r=i,i=i.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Uc(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new Uc(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new Uc(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new Uc(this.root_,null,this.comparator_,!0,e)}};Ni.EMPTY_NODE=new Rk;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pk(n,e){return ya(n.name,e.name)}function B_(n,e){return ya(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xf;function Ok(n){Xf=n}const LE=function(n){return typeof n=="number"?"number:"+dE(n):"string:"+n},VE=function(n){if(n.isLeafNode()){const e=n.val();X(typeof e=="string"||typeof e=="number"||typeof e=="object"&&gr(e,".sv"),"Priority must be a string or number.")}else X(n===Xf||n.isEmpty(),"priority of unexpected type.");X(n===Xf||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sv;class Mt{constructor(e,t=Mt.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=t,this.lazyHash_=null,X(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),VE(this.priorityNode_)}static set __childrenNodeConstructor(e){sv=e}static get __childrenNodeConstructor(){return sv}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new Mt(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:Mt.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return Re(e)?this:Ne(e)===".priority"?this.priorityNode_:Mt.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,t){return null}updateImmediateChild(e,t){return e===".priority"?this.updatePriority(t):t.isEmpty()&&e!==".priority"?this:Mt.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,t).updatePriority(this.priorityNode_)}updateChild(e,t){const i=Ne(e);return i===null?t:t.isEmpty()&&i!==".priority"?this:(X(i!==".priority"||Wr(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,Mt.__childrenNodeConstructor.EMPTY_NODE.updateChild(ot(e),t)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,t){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+LE(this.priorityNode_.val())+":");const t=typeof this.value_;e+=t+":",t==="number"?e+=dE(this.value_):e+=this.value_,this.lazyHash_=cE(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===Mt.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof Mt.__childrenNodeConstructor?-1:(X(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const t=typeof e.value_,i=typeof this.value_,r=Mt.VALUE_TYPE_ORDER.indexOf(t),s=Mt.VALUE_TYPE_ORDER.indexOf(i);return X(r>=0,"Unknown leaf type: "+t),X(s>=0,"Unknown leaf type: "+i),r===s?i==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:s-r}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}else return!1}}Mt.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let FE,UE;function kk(n){FE=n}function Nk(n){UE=n}class Mk extends Ch{compare(e,t){const i=e.node.getPriority(),r=t.node.getPriority(),s=i.compareTo(r);return s===0?ya(e.name,t.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return Me.MIN}maxPost(){return new Me(Bs,new Mt("[PRIORITY-POST]",UE))}makePost(e,t){const i=FE(e);return new Me(t,new Mt("[PRIORITY-POST]",i))}toString(){return".priority"}}const cn=new Mk;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dk=Math.log(2);class Lk{constructor(e){const t=s=>parseInt(Math.log(s)/Dk,10),i=s=>parseInt(Array(s+1).join("1"),2);this.count=t(e+1),this.current_=this.count-1;const r=i(this.count);this.bits_=e+1&r}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Nu=function(n,e,t,i){n.sort(e);const r=function(l,c){const u=c-l;let h,f;if(u===0)return null;if(u===1)return h=n[l],f=t?t(h):h,new Rn(f,h.node,Rn.BLACK,null,null);{const d=parseInt(u/2,10)+l,_=r(l,d),p=r(d+1,c);return h=n[d],f=t?t(h):h,new Rn(f,h.node,Rn.BLACK,_,p)}},s=function(l){let c=null,u=null,h=n.length;const f=function(_,p){const g=h-_,m=h;h-=_;const T=r(g+1,m),w=n[g],S=t?t(w):w;d(new Rn(S,w.node,p,null,T))},d=function(_){c?(c.left=_,c=_):(u=_,c=_)};for(let _=0;_<l.count;++_){const p=l.nextBitIsOne(),g=Math.pow(2,l.count-(_+1));p?f(g,Rn.BLACK):(f(g,Rn.BLACK),f(g,Rn.RED))}return u},o=new Lk(n.length),a=s(o);return new Ni(i||e,a)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Rd;const ro={};class nr{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return X(ro&&cn,"ChildrenNode.ts has not been loaded"),Rd=Rd||new nr({".priority":ro},{".priority":cn}),Rd}get(e){const t=Wo(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Ni?t:null}hasIndex(e){return gr(this.indexSet_,e.toString())}addIndex(e,t){X(e!==Po,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const i=[];let r=!1;const s=t.getIterator(Me.Wrap);let o=s.getNext();for(;o;)r=r||e.isDefinedOn(o.node),i.push(o),o=s.getNext();let a;r?a=Nu(i,e.getCompare()):a=ro;const l=e.toString(),c=Object.assign({},this.indexSet_);c[l]=e;const u=Object.assign({},this.indexes_);return u[l]=a,new nr(u,c)}addToIndexes(e,t){const i=Iu(this.indexes_,(r,s)=>{const o=Wo(this.indexSet_,s);if(X(o,"Missing index implementation for "+s),r===ro)if(o.isDefinedOn(e.node)){const a=[],l=t.getIterator(Me.Wrap);let c=l.getNext();for(;c;)c.name!==e.name&&a.push(c),c=l.getNext();return a.push(e),Nu(a,o.getCompare())}else return ro;else{const a=t.get(e.name);let l=r;return a&&(l=l.remove(new Me(e.name,a))),l.insert(e,e.node)}});return new nr(i,this.indexSet_)}removeFromIndexes(e,t){const i=Iu(this.indexes_,r=>{if(r===ro)return r;{const s=t.get(e.name);return s?r.remove(new Me(e.name,s)):r}});return new nr(i,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Na;class je{constructor(e,t,i){this.children_=e,this.priorityNode_=t,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&VE(this.priorityNode_),this.children_.isEmpty()&&X(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Na||(Na=new je(new Ni(B_),null,nr.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Na}updatePriority(e){return this.children_.isEmpty()?this:new je(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const t=this.children_.get(e);return t===null?Na:t}}getChild(e){const t=Ne(e);return t===null?this:this.getImmediateChild(t).getChild(ot(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,t){if(X(t,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(t);{const i=new Me(e,t);let r,s;t.isEmpty()?(r=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(i,this.children_)):(r=this.children_.insert(e,t),s=this.indexMap_.addToIndexes(i,this.children_));const o=r.isEmpty()?Na:this.priorityNode_;return new je(r,o,s)}}updateChild(e,t){const i=Ne(e);if(i===null)return t;{X(Ne(e)!==".priority"||Wr(e)===1,".priority must be the last token in a path");const r=this.getImmediateChild(i).updateChild(ot(e),t);return this.updateImmediateChild(i,r)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const t={};let i=0,r=0,s=!0;if(this.forEachChild(cn,(o,a)=>{t[o]=a.val(e),i++,s&&je.INTEGER_REGEXP_.test(o)?r=Math.max(r,Number(o)):s=!1}),!e&&s&&r<2*i){const o=[];for(const a in t)o[a]=t[a];return o}else return e&&!this.getPriority().isEmpty()&&(t[".priority"]=this.getPriority().val()),t}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+LE(this.getPriority().val())+":"),this.forEachChild(cn,(t,i)=>{const r=i.hash();r!==""&&(e+=":"+t+":"+r)}),this.lazyHash_=e===""?"":cE(e)}return this.lazyHash_}getPredecessorChildName(e,t,i){const r=this.resolveIndex_(i);if(r){const s=r.getPredecessorKey(new Me(e,t));return s?s.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const t=this.resolveIndex_(e);if(t){const i=t.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(e){const t=this.getFirstChildName(e);return t?new Me(t,this.children_.get(t)):null}getLastChildName(e){const t=this.resolveIndex_(e);if(t){const i=t.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(e){const t=this.getLastChildName(e);return t?new Me(t,this.children_.get(t)):null}forEachChild(e,t){const i=this.resolveIndex_(e);return i?i.inorderTraversal(r=>t(r.name,r.node)):this.children_.inorderTraversal(t)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,t){const i=this.resolveIndex_(t);if(i)return i.getIteratorFrom(e,r=>r);{const r=this.children_.getIteratorFrom(e.name,Me.Wrap);let s=r.peek();for(;s!=null&&t.compare(s,e)<0;)r.getNext(),s=r.peek();return r}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,t){const i=this.resolveIndex_(t);if(i)return i.getReverseIteratorFrom(e,r=>r);{const r=this.children_.getReverseIteratorFrom(e.name,Me.Wrap);let s=r.peek();for(;s!=null&&t.compare(s,e)>0;)r.getNext(),s=r.peek();return r}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===dc?-1:0}withIndex(e){if(e===Po||this.indexMap_.hasIndex(e))return this;{const t=this.indexMap_.addIndex(e,this.children_);return new je(this.children_,this.priorityNode_,t)}}isIndexed(e){return e===Po||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const t=e;if(this.getPriority().equals(t.getPriority()))if(this.children_.count()===t.children_.count()){const i=this.getIterator(cn),r=t.getIterator(cn);let s=i.getNext(),o=r.getNext();for(;s&&o;){if(s.name!==o.name||!s.node.equals(o.node))return!1;s=i.getNext(),o=r.getNext()}return s===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===Po?null:this.indexMap_.get(e.toString())}}je.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class Vk extends je{constructor(){super(new Ni(B_),je.EMPTY_NODE,nr.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return je.EMPTY_NODE}isEmpty(){return!1}}const dc=new Vk;Object.defineProperties(Me,{MIN:{value:new Me(Ko,je.EMPTY_NODE)},MAX:{value:new Me(Bs,dc)}});DE.__EMPTY_NODE=je.EMPTY_NODE;Mt.__childrenNodeConstructor=je;Ok(dc);Nk(dc);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fk=!0;function nn(n,e=null){if(n===null)return je.EMPTY_NODE;if(typeof n=="object"&&".priority"in n&&(e=n[".priority"]),X(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof n=="object"&&".value"in n&&n[".value"]!==null&&(n=n[".value"]),typeof n!="object"||".sv"in n){const t=n;return new Mt(t,nn(e))}if(!(n instanceof Array)&&Fk){const t=[];let i=!1;if(ti(n,(o,a)=>{if(o.substring(0,1)!=="."){const l=nn(a);l.isEmpty()||(i=i||!l.getPriority().isEmpty(),t.push(new Me(o,l)))}}),t.length===0)return je.EMPTY_NODE;const s=Nu(t,Pk,o=>o.name,B_);if(i){const o=Nu(t,cn.getCompare());return new je(s,nn(e),new nr({".priority":o},{".priority":cn}))}else return new je(s,nn(e),nr.Default)}else{let t=je.EMPTY_NODE;return ti(n,(i,r)=>{if(gr(n,i)&&i.substring(0,1)!=="."){const s=nn(r);(s.isLeafNode()||!s.isEmpty())&&(t=t.updateImmediateChild(i,s))}}),t.updatePriority(nn(e))}}kk(nn);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uk extends Ch{constructor(e){super(),this.indexPath_=e,X(!Re(e)&&Ne(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const i=this.extractChild(e.node),r=this.extractChild(t.node),s=i.compareTo(r);return s===0?ya(e.name,t.name):s}makePost(e,t){const i=nn(e),r=je.EMPTY_NODE.updateChild(this.indexPath_,i);return new Me(t,r)}maxPost(){const e=je.EMPTY_NODE.updateChild(this.indexPath_,dc);return new Me(Bs,e)}toString(){return OE(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $k extends Ch{compare(e,t){const i=e.node.compareTo(t.node);return i===0?ya(e.name,t.name):i}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return Me.MIN}maxPost(){return Me.MAX}makePost(e,t){const i=nn(e);return new Me(t,i)}toString(){return".value"}}const Bk=new $k;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zk(n){return{type:"value",snapshotNode:n}}function jk(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function Gk(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function ov(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}function qk(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z_{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=cn}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return X(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return X(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Ko}hasEnd(){return this.endSet_}getIndexEndValue(){return X(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return X(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Bs}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return X(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===cn}copy(){const e=new z_;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function av(n){const e={};if(n.isDefault())return e;let t;if(n.index_===cn?t="$priority":n.index_===Bk?t="$value":n.index_===Po?t="$key":(X(n.index_ instanceof Uk,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=Kt(t),n.startSet_){const i=n.startAfterSet_?"startAfter":"startAt";e[i]=Kt(n.indexStartValue_),n.startNameSet_&&(e[i]+=","+Kt(n.indexStartName_))}if(n.endSet_){const i=n.endBeforeSet_?"endBefore":"endAt";e[i]=Kt(n.indexEndValue_),n.endNameSet_&&(e[i]+=","+Kt(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function lv(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;t===""&&(n.isViewFromLeft()?t="l":t="r"),e.vf=t}return n.index_!==cn&&(e.i=n.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mu extends xE{constructor(e,t,i,r){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=i,this.appCheckTokenProvider_=r,this.log_=uc("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return t!==void 0?"tag$"+t:(X(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,i,r){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const o=Mu.getListenId_(e,i),a={};this.listens_[o]=a;const l=av(e._queryParams);this.restRequest_(s+".json",l,(c,u)=>{let h=u;if(c===404&&(h=null,c=null),c===null&&this.onDataUpdate_(s,h,!1,i),Wo(this.listens_,o)===a){let f;c?c===401?f="permission_denied":f="rest_error:"+c:f="ok",r(f,null)}})}unlisten(e,t){const i=Mu.getListenId_(e,t);delete this.listens_[i]}get(e){const t=av(e._queryParams),i=e._path.toString(),r=new Pl;return this.restRequest_(i+".json",t,(s,o)=>{let a=o;s===404&&(a=null,s=null),s===null?(this.onDataUpdate_(i,a,!1,null),r.resolve(a)):r.reject(new Error(a))}),r.promise}refreshAuthToken(e){}restRequest_(e,t={},i){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([r,s])=>{r&&r.accessToken&&(t.auth=r.accessToken),s&&s.token&&(t.ac=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+N_(t);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(i&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let l=null;if(a.status>=200&&a.status<300){try{l=Ol(a.responseText)}catch{Vn("Failed to parse JSON response for "+o+": "+a.responseText)}i(null,l)}else a.status!==401&&a.status!==404&&Vn("Got unsuccessful REST response for "+o+" Status: "+a.status),i(a.status);i=null}},a.open("GET",o,!0),a.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hk{constructor(){this.rootNode_=je.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Du(){return{value:null,children:new Map}}function $E(n,e,t){if(Re(e))n.value=t,n.children.clear();else if(n.value!==null)n.value=n.value.updateChild(e,t);else{const i=Ne(e);n.children.has(i)||n.children.set(i,Du());const r=n.children.get(i);e=ot(e),$E(r,e,t)}}function Qf(n,e,t){n.value!==null?t(e,n.value):Wk(n,(i,r)=>{const s=new lt(e.toString()+"/"+i);Qf(r,s,t)})}function Wk(n,e){n.children.forEach((t,i)=>{e(i,t)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kk{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&ti(this.last_,(i,r)=>{t[i]=t[i]-r}),this.last_=e,t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cv=10*1e3,Yk=30*1e3,Xk=5*60*1e3;class Qk{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new Kk(e);const i=cv+(Yk-cv)*Math.random();cl(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){const e=this.statsListener_.get(),t={};let i=!1;ti(e,(r,s)=>{s>0&&gr(this.statsToReport_,r)&&(t[r]=s,i=!0)}),i&&this.server_.reportStats(t),cl(this.reportStats_.bind(this),Math.floor(Math.random()*2*Xk))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Mi;(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(Mi||(Mi={}));function BE(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function zE(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function jE(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lu{constructor(e,t,i){this.path=e,this.affectedTree=t,this.revert=i,this.type=Mi.ACK_USER_WRITE,this.source=BE()}operationForChild(e){if(Re(this.path)){if(this.affectedTree.value!=null)return X(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new lt(e));return new Lu(Je(),t,this.revert)}}else return X(Ne(this.path)===e,"operationForChild called for unrelated child."),new Lu(ot(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zs{constructor(e,t,i){this.source=e,this.path=t,this.snap=i,this.type=Mi.OVERWRITE}operationForChild(e){return Re(this.path)?new zs(this.source,Je(),this.snap.getImmediateChild(e)):new zs(this.source,ot(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ml{constructor(e,t,i){this.source=e,this.path=t,this.children=i,this.type=Mi.MERGE}operationForChild(e){if(Re(this.path)){const t=this.children.subtree(new lt(e));return t.isEmpty()?null:t.value?new zs(this.source,Je(),t.value):new Ml(this.source,Je(),t)}else return X(Ne(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Ml(this.source,ot(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j_{constructor(e,t,i){this.node_=e,this.fullyInitialized_=t,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Re(e))return this.isFullyInitialized()&&!this.filtered_;const t=Ne(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}function Jk(n,e,t,i){const r=[],s=[];return e.forEach(o=>{o.type==="child_changed"&&n.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(qk(o.childName,o.snapshotNode))}),Ma(n,r,"child_removed",e,i,t),Ma(n,r,"child_added",e,i,t),Ma(n,r,"child_moved",s,i,t),Ma(n,r,"child_changed",e,i,t),Ma(n,r,"value",e,i,t),r}function Ma(n,e,t,i,r,s){const o=i.filter(a=>a.type===t);o.sort((a,l)=>eN(n,a,l)),o.forEach(a=>{const l=Zk(n,a,s);r.forEach(c=>{c.respondsTo(a.type)&&e.push(c.createEvent(l,n.query_))})})}function Zk(n,e,t){return e.type==="value"||e.type==="child_removed"||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}function eN(n,e,t){if(e.childName==null||t.childName==null)throw _a("Should only compare child_ events.");const i=new Me(e.childName,e.snapshotNode),r=new Me(t.childName,t.snapshotNode);return n.index_.compare(i,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GE(n,e){return{eventCache:n,serverCache:e}}function ul(n,e,t,i){return GE(new j_(e,t,i),n.serverCache)}function qE(n,e,t,i){return GE(n.eventCache,new j_(e,t,i))}function Jf(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function js(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Pd;const tN=()=>(Pd||(Pd=new Ni($O)),Pd);class rt{constructor(e,t=tN()){this.value=e,this.children=t}static fromObject(e){let t=new rt(null);return ti(e,(i,r)=>{t=t.set(new lt(i),r)}),t}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(this.value!=null&&t(this.value))return{path:Je(),value:this.value};if(Re(e))return null;{const i=Ne(e),r=this.children.get(i);if(r!==null){const s=r.findRootMostMatchingPathAndValue(ot(e),t);return s!=null?{path:Ft(new lt(i),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Re(e))return this;{const t=Ne(e),i=this.children.get(t);return i!==null?i.subtree(ot(e)):new rt(null)}}set(e,t){if(Re(e))return new rt(t,this.children);{const i=Ne(e),s=(this.children.get(i)||new rt(null)).set(ot(e),t),o=this.children.insert(i,s);return new rt(this.value,o)}}remove(e){if(Re(e))return this.children.isEmpty()?new rt(null):new rt(null,this.children);{const t=Ne(e),i=this.children.get(t);if(i){const r=i.remove(ot(e));let s;return r.isEmpty()?s=this.children.remove(t):s=this.children.insert(t,r),this.value===null&&s.isEmpty()?new rt(null):new rt(this.value,s)}else return this}}get(e){if(Re(e))return this.value;{const t=Ne(e),i=this.children.get(t);return i?i.get(ot(e)):null}}setTree(e,t){if(Re(e))return t;{const i=Ne(e),s=(this.children.get(i)||new rt(null)).setTree(ot(e),t);let o;return s.isEmpty()?o=this.children.remove(i):o=this.children.insert(i,s),new rt(this.value,o)}}fold(e){return this.fold_(Je(),e)}fold_(e,t){const i={};return this.children.inorderTraversal((r,s)=>{i[r]=s.fold_(Ft(e,r),t)}),t(e,this.value,i)}findOnPath(e,t){return this.findOnPath_(e,Je(),t)}findOnPath_(e,t,i){const r=this.value?i(t,this.value):!1;if(r)return r;if(Re(e))return null;{const s=Ne(e),o=this.children.get(s);return o?o.findOnPath_(ot(e),Ft(t,s),i):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,Je(),t)}foreachOnPath_(e,t,i){if(Re(e))return this;{this.value&&i(t,this.value);const r=Ne(e),s=this.children.get(r);return s?s.foreachOnPath_(ot(e),Ft(t,r),i):new rt(null)}}foreach(e){this.foreach_(Je(),e)}foreach_(e,t){this.children.inorderTraversal((i,r)=>{r.foreach_(Ft(e,i),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,i)=>{i.value&&e(t,i.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gi{constructor(e){this.writeTree_=e}static empty(){return new gi(new rt(null))}}function hl(n,e,t){if(Re(e))return new gi(new rt(t));{const i=n.writeTree_.findRootMostValueAndPath(e);if(i!=null){const r=i.path;let s=i.value;const o=Xn(r,e);return s=s.updateChild(o,t),new gi(n.writeTree_.set(r,s))}else{const r=new rt(t),s=n.writeTree_.setTree(e,r);return new gi(s)}}}function uv(n,e,t){let i=n;return ti(t,(r,s)=>{i=hl(i,Ft(e,r),s)}),i}function hv(n,e){if(Re(e))return gi.empty();{const t=n.writeTree_.setTree(e,new rt(null));return new gi(t)}}function Zf(n,e){return Js(n,e)!=null}function Js(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return t!=null?n.writeTree_.get(t.path).getChild(Xn(t.path,e)):null}function dv(n){const e=[],t=n.writeTree_.value;return t!=null?t.isLeafNode()||t.forEachChild(cn,(i,r)=>{e.push(new Me(i,r))}):n.writeTree_.children.inorderTraversal((i,r)=>{r.value!=null&&e.push(new Me(i,r.value))}),e}function jr(n,e){if(Re(e))return n;{const t=Js(n,e);return t!=null?new gi(new rt(t)):new gi(n.writeTree_.subtree(e))}}function ep(n){return n.writeTree_.isEmpty()}function Yo(n,e){return HE(Je(),n.writeTree_,e)}function HE(n,e,t){if(e.value!=null)return t.updateChild(n,e.value);{let i=null;return e.children.inorderTraversal((r,s)=>{r===".priority"?(X(s.value!==null,"Priority writes must always be leaf nodes"),i=s.value):t=HE(Ft(n,r),s,t)}),!t.getChild(n).isEmpty()&&i!==null&&(t=t.updateChild(Ft(n,".priority"),i)),t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WE(n,e){return JE(e,n)}function nN(n,e,t,i,r){X(i>n.lastWriteId,"Stacking an older write on top of newer ones"),r===void 0&&(r=!0),n.allWrites.push({path:e,snap:t,writeId:i,visible:r}),r&&(n.visibleWrites=hl(n.visibleWrites,e,t)),n.lastWriteId=i}function iN(n,e){for(let t=0;t<n.allWrites.length;t++){const i=n.allWrites[t];if(i.writeId===e)return i}return null}function rN(n,e){const t=n.allWrites.findIndex(a=>a.writeId===e);X(t>=0,"removeWrite called with nonexistent writeId.");const i=n.allWrites[t];n.allWrites.splice(t,1);let r=i.visible,s=!1,o=n.allWrites.length-1;for(;r&&o>=0;){const a=n.allWrites[o];a.visible&&(o>=t&&sN(a,i.path)?r=!1:hi(i.path,a.path)&&(s=!0)),o--}if(r){if(s)return oN(n),!0;if(i.snap)n.visibleWrites=hv(n.visibleWrites,i.path);else{const a=i.children;ti(a,l=>{n.visibleWrites=hv(n.visibleWrites,Ft(i.path,l))})}return!0}else return!1}function sN(n,e){if(n.snap)return hi(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&hi(Ft(n.path,t),e))return!0;return!1}function oN(n){n.visibleWrites=KE(n.allWrites,aN,Je()),n.allWrites.length>0?n.lastWriteId=n.allWrites[n.allWrites.length-1].writeId:n.lastWriteId=-1}function aN(n){return n.visible}function KE(n,e,t){let i=gi.empty();for(let r=0;r<n.length;++r){const s=n[r];if(e(s)){const o=s.path;let a;if(s.snap)hi(t,o)?(a=Xn(t,o),i=hl(i,a,s.snap)):hi(o,t)&&(a=Xn(o,t),i=hl(i,Je(),s.snap.getChild(a)));else if(s.children){if(hi(t,o))a=Xn(t,o),i=uv(i,a,s.children);else if(hi(o,t))if(a=Xn(o,t),Re(a))i=uv(i,Je(),s.children);else{const l=Wo(s.children,Ne(a));if(l){const c=l.getChild(ot(a));i=hl(i,Je(),c)}}}else throw _a("WriteRecord should have .snap or .children")}}return i}function YE(n,e,t,i,r){if(!i&&!r){const s=Js(n.visibleWrites,e);if(s!=null)return s;{const o=jr(n.visibleWrites,e);if(ep(o))return t;if(t==null&&!Zf(o,Je()))return null;{const a=t||je.EMPTY_NODE;return Yo(o,a)}}}else{const s=jr(n.visibleWrites,e);if(!r&&ep(s))return t;if(!r&&t==null&&!Zf(s,Je()))return null;{const o=function(c){return(c.visible||r)&&(!i||!~i.indexOf(c.writeId))&&(hi(c.path,e)||hi(e,c.path))},a=KE(n.allWrites,o,e),l=t||je.EMPTY_NODE;return Yo(a,l)}}}function lN(n,e,t){let i=je.EMPTY_NODE;const r=Js(n.visibleWrites,e);if(r)return r.isLeafNode()||r.forEachChild(cn,(s,o)=>{i=i.updateImmediateChild(s,o)}),i;if(t){const s=jr(n.visibleWrites,e);return t.forEachChild(cn,(o,a)=>{const l=Yo(jr(s,new lt(o)),a);i=i.updateImmediateChild(o,l)}),dv(s).forEach(o=>{i=i.updateImmediateChild(o.name,o.node)}),i}else{const s=jr(n.visibleWrites,e);return dv(s).forEach(o=>{i=i.updateImmediateChild(o.name,o.node)}),i}}function cN(n,e,t,i,r){X(i||r,"Either existingEventSnap or existingServerSnap must exist");const s=Ft(e,t);if(Zf(n.visibleWrites,s))return null;{const o=jr(n.visibleWrites,s);return ep(o)?r.getChild(t):Yo(o,r.getChild(t))}}function uN(n,e,t,i){const r=Ft(e,t),s=Js(n.visibleWrites,r);if(s!=null)return s;if(i.isCompleteForChild(t)){const o=jr(n.visibleWrites,r);return Yo(o,i.getNode().getImmediateChild(t))}else return null}function hN(n,e){return Js(n.visibleWrites,e)}function dN(n,e,t,i,r,s,o){let a;const l=jr(n.visibleWrites,e),c=Js(l,Je());if(c!=null)a=c;else if(t!=null)a=Yo(l,t);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){const u=[],h=o.getCompare(),f=s?a.getReverseIteratorFrom(i,o):a.getIteratorFrom(i,o);let d=f.getNext();for(;d&&u.length<r;)h(d,i)!==0&&u.push(d),d=f.getNext();return u}else return[]}function fN(){return{visibleWrites:gi.empty(),allWrites:[],lastWriteId:-1}}function tp(n,e,t,i){return YE(n.writeTree,n.treePath,e,t,i)}function XE(n,e){return lN(n.writeTree,n.treePath,e)}function fv(n,e,t,i){return cN(n.writeTree,n.treePath,e,t,i)}function Vu(n,e){return hN(n.writeTree,Ft(n.treePath,e))}function pN(n,e,t,i,r,s){return dN(n.writeTree,n.treePath,e,t,i,r,s)}function G_(n,e,t){return uN(n.writeTree,n.treePath,e,t)}function QE(n,e){return JE(Ft(n.treePath,e),n.writeTree)}function JE(n,e){return{treePath:n,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _N{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,i=e.childName;X(t==="child_added"||t==="child_changed"||t==="child_removed","Only child changes supported for tracking"),X(i!==".priority","Only non-priority child changes can be tracked.");const r=this.changeMap.get(i);if(r){const s=r.type;if(t==="child_added"&&s==="child_removed")this.changeMap.set(i,ov(i,e.snapshotNode,r.snapshotNode));else if(t==="child_removed"&&s==="child_added")this.changeMap.delete(i);else if(t==="child_removed"&&s==="child_changed")this.changeMap.set(i,Gk(i,r.oldSnap));else if(t==="child_changed"&&s==="child_added")this.changeMap.set(i,jk(i,e.snapshotNode));else if(t==="child_changed"&&s==="child_changed")this.changeMap.set(i,ov(i,e.snapshotNode,r.oldSnap));else throw _a("Illegal combination of changes: "+e+" occurred after "+r)}else this.changeMap.set(i,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gN{getCompleteChild(e){return null}getChildAfterChild(e,t,i){return null}}const ZE=new gN;class q_{constructor(e,t,i=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=i}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const i=this.optCompleteServerCache_!=null?new j_(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return G_(this.writes_,e,i)}}getChildAfterChild(e,t,i){const r=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:js(this.viewCache_),s=pN(this.writes_,r,t,1,i,e);return s.length===0?null:s[0]}}function mN(n,e){X(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),X(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}function yN(n,e,t,i,r){const s=new _N;let o,a;if(t.type===Mi.OVERWRITE){const c=t;c.source.fromUser?o=np(n,e,c.path,c.snap,i,r,s):(X(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered()&&!Re(c.path),o=Fu(n,e,c.path,c.snap,i,r,a,s))}else if(t.type===Mi.MERGE){const c=t;c.source.fromUser?o=wN(n,e,c.path,c.children,i,r,s):(X(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered(),o=ip(n,e,c.path,c.children,i,r,a,s))}else if(t.type===Mi.ACK_USER_WRITE){const c=t;c.revert?o=SN(n,e,c.path,i,r,s):o=TN(n,e,c.path,c.affectedTree,i,r,s)}else if(t.type===Mi.LISTEN_COMPLETE)o=EN(n,e,t.path,i,s);else throw _a("Unknown operation type: "+t.type);const l=s.getChanges();return vN(e,o,l),{viewCache:o,changes:l}}function vN(n,e,t){const i=e.eventCache;if(i.isFullyInitialized()){const r=i.getNode().isLeafNode()||i.getNode().isEmpty(),s=Jf(n);(t.length>0||!n.eventCache.isFullyInitialized()||r&&!i.getNode().equals(s)||!i.getNode().getPriority().equals(s.getPriority()))&&t.push(zk(Jf(e)))}}function eS(n,e,t,i,r,s){const o=e.eventCache;if(Vu(i,t)!=null)return e;{let a,l;if(Re(t))if(X(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const c=js(e),u=c instanceof je?c:je.EMPTY_NODE,h=XE(i,u);a=n.filter.updateFullNode(e.eventCache.getNode(),h,s)}else{const c=tp(i,js(e));a=n.filter.updateFullNode(e.eventCache.getNode(),c,s)}else{const c=Ne(t);if(c===".priority"){X(Wr(t)===1,"Can't have a priority with additional path components");const u=o.getNode();l=e.serverCache.getNode();const h=fv(i,t,u,l);h!=null?a=n.filter.updatePriority(u,h):a=o.getNode()}else{const u=ot(t);let h;if(o.isCompleteForChild(c)){l=e.serverCache.getNode();const f=fv(i,t,o.getNode(),l);f!=null?h=o.getNode().getImmediateChild(c).updateChild(u,f):h=o.getNode().getImmediateChild(c)}else h=G_(i,c,e.serverCache);h!=null?a=n.filter.updateChild(o.getNode(),c,h,u,r,s):a=o.getNode()}}return ul(e,a,o.isFullyInitialized()||Re(t),n.filter.filtersNodes())}}function Fu(n,e,t,i,r,s,o,a){const l=e.serverCache;let c;const u=o?n.filter:n.filter.getIndexedFilter();if(Re(t))c=u.updateFullNode(l.getNode(),i,null);else if(u.filtersNodes()&&!l.isFiltered()){const d=l.getNode().updateChild(t,i);c=u.updateFullNode(l.getNode(),d,null)}else{const d=Ne(t);if(!l.isCompleteForPath(t)&&Wr(t)>1)return e;const _=ot(t),g=l.getNode().getImmediateChild(d).updateChild(_,i);d===".priority"?c=u.updatePriority(l.getNode(),g):c=u.updateChild(l.getNode(),d,g,_,ZE,null)}const h=qE(e,c,l.isFullyInitialized()||Re(t),u.filtersNodes()),f=new q_(r,h,s);return eS(n,h,t,r,f,a)}function np(n,e,t,i,r,s,o){const a=e.eventCache;let l,c;const u=new q_(r,e,s);if(Re(t))c=n.filter.updateFullNode(e.eventCache.getNode(),i,o),l=ul(e,c,!0,n.filter.filtersNodes());else{const h=Ne(t);if(h===".priority")c=n.filter.updatePriority(e.eventCache.getNode(),i),l=ul(e,c,a.isFullyInitialized(),a.isFiltered());else{const f=ot(t),d=a.getNode().getImmediateChild(h);let _;if(Re(f))_=i;else{const p=u.getCompleteChild(h);p!=null?PE(f)===".priority"&&p.getChild(kE(f)).isEmpty()?_=p:_=p.updateChild(f,i):_=je.EMPTY_NODE}if(d.equals(_))l=e;else{const p=n.filter.updateChild(a.getNode(),h,_,f,u,o);l=ul(e,p,a.isFullyInitialized(),n.filter.filtersNodes())}}}return l}function pv(n,e){return n.eventCache.isCompleteForChild(e)}function wN(n,e,t,i,r,s,o){let a=e;return i.foreach((l,c)=>{const u=Ft(t,l);pv(e,Ne(u))&&(a=np(n,a,u,c,r,s,o))}),i.foreach((l,c)=>{const u=Ft(t,l);pv(e,Ne(u))||(a=np(n,a,u,c,r,s,o))}),a}function _v(n,e,t){return t.foreach((i,r)=>{e=e.updateChild(i,r)}),e}function ip(n,e,t,i,r,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let l=e,c;Re(t)?c=i:c=new rt(null).setTree(t,i);const u=e.serverCache.getNode();return c.children.inorderTraversal((h,f)=>{if(u.hasChild(h)){const d=e.serverCache.getNode().getImmediateChild(h),_=_v(n,d,f);l=Fu(n,l,new lt(h),_,r,s,o,a)}}),c.children.inorderTraversal((h,f)=>{const d=!e.serverCache.isCompleteForChild(h)&&f.value===null;if(!u.hasChild(h)&&!d){const _=e.serverCache.getNode().getImmediateChild(h),p=_v(n,_,f);l=Fu(n,l,new lt(h),p,r,s,o,a)}}),l}function TN(n,e,t,i,r,s,o){if(Vu(r,t)!=null)return e;const a=e.serverCache.isFiltered(),l=e.serverCache;if(i.value!=null){if(Re(t)&&l.isFullyInitialized()||l.isCompleteForPath(t))return Fu(n,e,t,l.getNode().getChild(t),r,s,a,o);if(Re(t)){let c=new rt(null);return l.getNode().forEachChild(Po,(u,h)=>{c=c.set(new lt(u),h)}),ip(n,e,t,c,r,s,a,o)}else return e}else{let c=new rt(null);return i.foreach((u,h)=>{const f=Ft(t,u);l.isCompleteForPath(f)&&(c=c.set(u,l.getNode().getChild(f)))}),ip(n,e,t,c,r,s,a,o)}}function EN(n,e,t,i,r){const s=e.serverCache,o=qE(e,s.getNode(),s.isFullyInitialized()||Re(t),s.isFiltered());return eS(n,o,t,i,ZE,r)}function SN(n,e,t,i,r,s){let o;if(Vu(i,t)!=null)return e;{const a=new q_(i,e,r),l=e.eventCache.getNode();let c;if(Re(t)||Ne(t)===".priority"){let u;if(e.serverCache.isFullyInitialized())u=tp(i,js(e));else{const h=e.serverCache.getNode();X(h instanceof je,"serverChildren would be complete if leaf node"),u=XE(i,h)}u=u,c=n.filter.updateFullNode(l,u,s)}else{const u=Ne(t);let h=G_(i,u,e.serverCache);h==null&&e.serverCache.isCompleteForChild(u)&&(h=l.getImmediateChild(u)),h!=null?c=n.filter.updateChild(l,u,h,ot(t),a,s):e.eventCache.getNode().hasChild(u)?c=n.filter.updateChild(l,u,je.EMPTY_NODE,ot(t),a,s):c=l,c.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=tp(i,js(e)),o.isLeafNode()&&(c=n.filter.updateFullNode(c,o,s)))}return o=e.serverCache.isFullyInitialized()||Vu(i,Je())!=null,ul(e,c,o,n.filter.filtersNodes())}}function bN(n,e){const t=js(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!Re(e)&&!t.getImmediateChild(Ne(e)).isEmpty())?t.getChild(e):null}function gv(n,e,t,i){e.type===Mi.MERGE&&e.source.queryId!==null&&(X(js(n.viewCache_),"We should always have a full cache before handling merges"),X(Jf(n.viewCache_),"Missing event cache, even though we have a server cache"));const r=n.viewCache_,s=yN(n.processor_,r,e,t,i);return mN(n.processor_,s.viewCache),X(s.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=s.viewCache,IN(n,s.changes,s.viewCache.eventCache.getNode(),null)}function IN(n,e,t,i){const r=i?[i]:n.eventRegistrations_;return Jk(n.eventGenerator_,e,t,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mv;function CN(n){X(!mv,"__referenceConstructor has already been defined"),mv=n}function H_(n,e,t,i){const r=e.source.queryId;if(r!==null){const s=n.views.get(r);return X(s!=null,"SyncTree gave us an op for an invalid query."),gv(s,e,t,i)}else{let s=[];for(const o of n.views.values())s=s.concat(gv(o,e,t,i));return s}}function W_(n,e){let t=null;for(const i of n.views.values())t=t||bN(i,e);return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yv;function AN(n){X(!yv,"__referenceConstructor has already been defined"),yv=n}class vv{constructor(e){this.listenProvider_=e,this.syncPointTree_=new rt(null),this.pendingWriteTree_=fN(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function xN(n,e,t,i,r){return nN(n.pendingWriteTree_,e,t,i,r),r?xh(n,new zs(BE(),e,t)):[]}function yo(n,e,t=!1){const i=iN(n.pendingWriteTree_,e);if(rN(n.pendingWriteTree_,e)){let s=new rt(null);return i.snap!=null?s=s.set(Je(),!0):ti(i.children,o=>{s=s.set(new lt(o),!0)}),xh(n,new Lu(i.path,s,t))}else return[]}function Ah(n,e,t){return xh(n,new zs(zE(),e,t))}function RN(n,e,t){const i=rt.fromObject(t);return xh(n,new Ml(zE(),e,i))}function PN(n,e,t,i){const r=rS(n,i);if(r!=null){const s=sS(r),o=s.path,a=s.queryId,l=Xn(o,e),c=new zs(jE(a),l,t);return oS(n,o,c)}else return[]}function ON(n,e,t,i){const r=rS(n,i);if(r){const s=sS(r),o=s.path,a=s.queryId,l=Xn(o,e),c=rt.fromObject(t),u=new Ml(jE(a),l,c);return oS(n,o,u)}else return[]}function tS(n,e,t){const r=n.pendingWriteTree_,s=n.syncPointTree_.findOnPath(e,(o,a)=>{const l=Xn(o,e),c=W_(a,l);if(c)return c});return YE(r,e,s,t,!0)}function xh(n,e){return nS(e,n.syncPointTree_,null,WE(n.pendingWriteTree_,Je()))}function nS(n,e,t,i){if(Re(n.path))return iS(n,e,t,i);{const r=e.get(Je());t==null&&r!=null&&(t=W_(r,Je()));let s=[];const o=Ne(n.path),a=n.operationForChild(o),l=e.children.get(o);if(l&&a){const c=t?t.getImmediateChild(o):null,u=QE(i,o);s=s.concat(nS(a,l,c,u))}return r&&(s=s.concat(H_(r,n,i,t))),s}}function iS(n,e,t,i){const r=e.get(Je());t==null&&r!=null&&(t=W_(r,Je()));let s=[];return e.children.inorderTraversal((o,a)=>{const l=t?t.getImmediateChild(o):null,c=QE(i,o),u=n.operationForChild(o);u&&(s=s.concat(iS(u,a,l,c)))}),r&&(s=s.concat(H_(r,n,i,t))),s}function rS(n,e){return n.tagToQueryMap.get(e)}function sS(n){const e=n.indexOf("$");return X(e!==-1&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new lt(n.substr(0,e))}}function oS(n,e,t){const i=n.syncPointTree_.get(e);X(i,"Missing sync point for query tag that we're tracking");const r=WE(n.pendingWriteTree_,e);return H_(i,t,r,null)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K_{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new K_(t)}node(){return this.node_}}class Y_{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=Ft(this.path_,e);return new Y_(this.syncTree_,t)}node(){return tS(this.syncTree_,this.path_)}}const kN=function(n){return n=n||{},n.timestamp=n.timestamp||new Date().getTime(),n},wv=function(n,e,t){if(!n||typeof n!="object")return n;if(X(".sv"in n,"Unexpected leaf node or priority contents"),typeof n[".sv"]=="string")return NN(n[".sv"],e,t);if(typeof n[".sv"]=="object")return MN(n[".sv"],e);X(!1,"Unexpected server value: "+JSON.stringify(n,null,2))},NN=function(n,e,t){switch(n){case"timestamp":return t.timestamp;default:X(!1,"Unexpected server value: "+n)}},MN=function(n,e,t){n.hasOwnProperty("increment")||X(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const i=n.increment;typeof i!="number"&&X(!1,"Unexpected increment value: "+i);const r=e.node();if(X(r!==null&&typeof r<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return i;const o=r.getValue();return typeof o!="number"?i:o+i},DN=function(n,e,t,i){return X_(e,new Y_(t,n),i)},LN=function(n,e,t){return X_(n,new K_(e),t)};function X_(n,e,t){const i=n.getPriority().val(),r=wv(i,e.getImmediateChild(".priority"),t);let s;if(n.isLeafNode()){const o=n,a=wv(o.getValue(),e,t);return a!==o.getValue()||r!==o.getPriority().val()?new Mt(a,nn(r)):n}else{const o=n;return s=o,r!==o.getPriority().val()&&(s=s.updatePriority(new Mt(r))),o.forEachChild(cn,(a,l)=>{const c=X_(l,e.getImmediateChild(a),t);c!==l&&(s=s.updateImmediateChild(a,c))}),s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q_{constructor(e="",t=null,i={children:{},childCount:0}){this.name=e,this.parent=t,this.node=i}}function J_(n,e){let t=e instanceof lt?e:new lt(e),i=n,r=Ne(t);for(;r!==null;){const s=Wo(i.node.children,r)||{children:{},childCount:0};i=new Q_(r,i,s),t=ot(t),r=Ne(t)}return i}function va(n){return n.node.value}function aS(n,e){n.node.value=e,rp(n)}function lS(n){return n.node.childCount>0}function VN(n){return va(n)===void 0&&!lS(n)}function Rh(n,e){ti(n.node.children,(t,i)=>{e(new Q_(t,n,i))})}function cS(n,e,t,i){t&&!i&&e(n),Rh(n,r=>{cS(r,e,!0,i)}),t&&i&&e(n)}function FN(n,e,t){let i=t?n:n.parent;for(;i!==null;){if(e(i))return!0;i=i.parent}return!1}function fc(n){return new lt(n.parent===null?n.name:fc(n.parent)+"/"+n.name)}function rp(n){n.parent!==null&&UN(n.parent,n.name,n)}function UN(n,e,t){const i=VN(t),r=gr(n.node.children,e);i&&r?(delete n.node.children[e],n.node.childCount--,rp(n)):!i&&!r&&(n.node.children[e]=t.node,n.node.childCount++,rp(n))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $N=/[\[\].#$\/\u0000-\u001F\u007F]/,BN=/[\[\].#$\u0000-\u001F\u007F]/,Od=10*1024*1024,uS=function(n){return typeof n=="string"&&n.length!==0&&!$N.test(n)},zN=function(n){return typeof n=="string"&&n.length!==0&&!BN.test(n)},jN=function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),zN(n)},hS=function(n,e,t){const i=t instanceof lt?new Ek(t,n):t;if(e===void 0)throw new Error(n+"contains undefined "+ps(i));if(typeof e=="function")throw new Error(n+"contains a function "+ps(i)+" with contents = "+e.toString());if(uE(e))throw new Error(n+"contains "+e.toString()+" "+ps(i));if(typeof e=="string"&&e.length>Od/3&&bh(e)>Od)throw new Error(n+"contains a string greater than "+Od+" utf8 bytes "+ps(i)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let r=!1,s=!1;if(ti(e,(o,a)=>{if(o===".value")r=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!uS(o)))throw new Error(n+" contains an invalid key ("+o+") "+ps(i)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);Sk(i,o),hS(n,a,i),bk(i)}),r&&s)throw new Error(n+' contains ".value" child '+ps(i)+" in addition to actual children.")}},GN=function(n,e){const t=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!uS(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||t.length!==0&&!jN(t))throw new Error(yR(n,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qN{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function HN(n,e){let t=null;for(let i=0;i<e.length;i++){const r=e[i],s=r.getPath();t!==null&&!NE(s,t.path)&&(n.eventLists_.push(t),t=null),t===null&&(t={events:[],path:s}),t.events.push(r)}t&&n.eventLists_.push(t)}function Zs(n,e,t){HN(n,t),WN(n,i=>hi(i,e)||hi(e,i))}function WN(n,e){n.recursionDepth_++;let t=!0;for(let i=0;i<n.eventLists_.length;i++){const r=n.eventLists_[i];if(r){const s=r.path;e(s)?(KN(n.eventLists_[i]),n.eventLists_[i]=null):t=!1}}t&&(n.eventLists_=[]),n.recursionDepth_--}function KN(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(t!==null){n.events[e]=null;const i=t.getEventRunner();xs&&tn("event: "+t.toString()),hc(i)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YN="repo_interrupt",XN=25;class QN{constructor(e,t,i,r){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=i,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new qN,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Du(),this.transactionQueueTree_=new Q_,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function JN(n,e,t){if(n.stats_=F_(n.repoInfo_),n.forceRestClient_||HO())n.server_=new Mu(n.repoInfo_,(i,r,s,o)=>{Tv(n,i,r,s,o)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>Ev(n,!0),0);else{if(typeof t<"u"&&t!==null){if(typeof t!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Kt(t)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}n.persistentConnection_=new cr(n.repoInfo_,e,(i,r,s,o)=>{Tv(n,i,r,s,o)},i=>{Ev(n,i)},i=>{eM(n,i)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(i=>{n.server_.refreshAuthToken(i)}),n.appCheckProvider_.addTokenChangeListener(i=>{n.server_.refreshAppCheckToken(i.token)}),n.statsReporter_=JO(n.repoInfo_,()=>new Qk(n.stats_,n.server_)),n.infoData_=new Hk,n.infoSyncTree_=new vv({startListening:(i,r,s,o)=>{let a=[];const l=n.infoData_.getNode(i._path);return l.isEmpty()||(a=Ah(n.infoSyncTree_,i._path,l),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),Z_(n,"connected",!1),n.serverSyncTree_=new vv({startListening:(i,r,s,o)=>(n.server_.listen(i,s,r,(a,l)=>{const c=o(a,l);Zs(n.eventQueue_,i._path,c)}),[]),stopListening:(i,r)=>{n.server_.unlisten(i,r)}})}function ZN(n){const t=n.infoData_.getNode(new lt(".info/serverTimeOffset")).val()||0;return new Date().getTime()+t}function dS(n){return kN({timestamp:ZN(n)})}function Tv(n,e,t,i,r){n.dataUpdateCount++;const s=new lt(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let o=[];if(r)if(i){const l=Iu(t,c=>nn(c));o=ON(n.serverSyncTree_,s,l,r)}else{const l=nn(t);o=PN(n.serverSyncTree_,s,l,r)}else if(i){const l=Iu(t,c=>nn(c));o=RN(n.serverSyncTree_,s,l)}else{const l=nn(t);o=Ah(n.serverSyncTree_,s,l)}let a=s;o.length>0&&(a=tg(n,s)),Zs(n.eventQueue_,a,o)}function Ev(n,e){Z_(n,"connected",e),e===!1&&nM(n)}function eM(n,e){ti(e,(t,i)=>{Z_(n,t,i)})}function Z_(n,e,t){const i=new lt("/.info/"+e),r=nn(t);n.infoData_.updateSnapshot(i,r);const s=Ah(n.infoSyncTree_,i,r);Zs(n.eventQueue_,i,s)}function tM(n){return n.nextWriteId_++}function nM(n){fS(n,"onDisconnectEvents");const e=dS(n),t=Du();Qf(n.onDisconnect_,Je(),(r,s)=>{const o=DN(r,s,n.serverSyncTree_,e);$E(t,r,o)});let i=[];Qf(t,Je(),(r,s)=>{i=i.concat(Ah(n.serverSyncTree_,r,s));const o=oM(n,r);tg(n,o)}),n.onDisconnect_=Du(),Zs(n.eventQueue_,Je(),i)}function iM(n){n.persistentConnection_&&n.persistentConnection_.interrupt(YN)}function fS(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),tn(t,...e)}function pS(n,e,t){return tS(n.serverSyncTree_,e,t)||je.EMPTY_NODE}function eg(n,e=n.transactionQueueTree_){if(e||Ph(n,e),va(e)){const t=gS(n,e);X(t.length>0,"Sending zero length transaction queue"),t.every(r=>r.status===0)&&rM(n,fc(e),t)}else lS(e)&&Rh(e,t=>{eg(n,t)})}function rM(n,e,t){const i=t.map(c=>c.currentWriteId),r=pS(n,e,i);let s=r;const o=r.hash();for(let c=0;c<t.length;c++){const u=t[c];X(u.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;const h=Xn(e,u.path);s=s.updateChild(h,u.currentOutputSnapshotRaw)}const a=s.val(!0),l=e;n.server_.put(l.toString(),a,c=>{fS(n,"transaction put response",{path:l.toString(),status:c});let u=[];if(c==="ok"){const h=[];for(let f=0;f<t.length;f++)t[f].status=2,u=u.concat(yo(n.serverSyncTree_,t[f].currentWriteId)),t[f].onComplete&&h.push(()=>t[f].onComplete(null,!0,t[f].currentOutputSnapshotResolved)),t[f].unwatcher();Ph(n,J_(n.transactionQueueTree_,e)),eg(n,n.transactionQueueTree_),Zs(n.eventQueue_,e,u);for(let f=0;f<h.length;f++)hc(h[f])}else{if(c==="datastale")for(let h=0;h<t.length;h++)t[h].status===3?t[h].status=4:t[h].status=0;else{Vn("transaction at "+l.toString()+" failed: "+c);for(let h=0;h<t.length;h++)t[h].status=4,t[h].abortReason=c}tg(n,e)}},o)}function tg(n,e){const t=_S(n,e),i=fc(t),r=gS(n,t);return sM(n,r,i),i}function sM(n,e,t){if(e.length===0)return;const i=[];let r=[];const o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const l=e[a],c=Xn(t,l.path);let u=!1,h;if(X(c!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),l.status===4)u=!0,h=l.abortReason,r=r.concat(yo(n.serverSyncTree_,l.currentWriteId,!0));else if(l.status===0)if(l.retryCount>=XN)u=!0,h="maxretry",r=r.concat(yo(n.serverSyncTree_,l.currentWriteId,!0));else{const f=pS(n,l.path,o);l.currentInputSnapshot=f;const d=e[a].update(f.val());if(d!==void 0){hS("transaction failed: Data returned ",d,l.path);let _=nn(d);typeof d=="object"&&d!=null&&gr(d,".priority")||(_=_.updatePriority(f.getPriority()));const g=l.currentWriteId,m=dS(n),T=LN(_,f,m);l.currentOutputSnapshotRaw=_,l.currentOutputSnapshotResolved=T,l.currentWriteId=tM(n),o.splice(o.indexOf(g),1),r=r.concat(xN(n.serverSyncTree_,l.path,T,l.currentWriteId,l.applyLocally)),r=r.concat(yo(n.serverSyncTree_,g,!0))}else u=!0,h="nodata",r=r.concat(yo(n.serverSyncTree_,l.currentWriteId,!0))}Zs(n.eventQueue_,t,r),r=[],u&&(e[a].status=2,function(f){setTimeout(f,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(h==="nodata"?i.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):i.push(()=>e[a].onComplete(new Error(h),!1,null))))}Ph(n,n.transactionQueueTree_);for(let a=0;a<i.length;a++)hc(i[a]);eg(n,n.transactionQueueTree_)}function _S(n,e){let t,i=n.transactionQueueTree_;for(t=Ne(e);t!==null&&va(i)===void 0;)i=J_(i,t),e=ot(e),t=Ne(e);return i}function gS(n,e){const t=[];return mS(n,e,t),t.sort((i,r)=>i.order-r.order),t}function mS(n,e,t){const i=va(e);if(i)for(let r=0;r<i.length;r++)t.push(i[r]);Rh(e,r=>{mS(n,r,t)})}function Ph(n,e){const t=va(e);if(t){let i=0;for(let r=0;r<t.length;r++)t[r].status!==2&&(t[i]=t[r],i++);t.length=i,aS(e,t.length>0?t:void 0)}Rh(e,i=>{Ph(n,i)})}function oM(n,e){const t=fc(_S(n,e)),i=J_(n.transactionQueueTree_,e);return FN(i,r=>{kd(n,r)}),kd(n,i),cS(i,r=>{kd(n,r)}),t}function kd(n,e){const t=va(e);if(t){const i=[];let r=[],s=-1;for(let o=0;o<t.length;o++)t[o].status===3||(t[o].status===1?(X(s===o-1,"All SENT items should be at beginning of queue."),s=o,t[o].status=3,t[o].abortReason="set"):(X(t[o].status===0,"Unexpected transaction status in abort"),t[o].unwatcher(),r=r.concat(yo(n.serverSyncTree_,t[o].currentWriteId,!0)),t[o].onComplete&&i.push(t[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?aS(e,void 0):t.length=s+1,Zs(n.eventQueue_,fc(e),r);for(let o=0;o<i.length;o++)hc(i[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aM(n){let e="";const t=n.split("/");for(let i=0;i<t.length;i++)if(t[i].length>0){let r=t[i];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch{}e+="/"+r}return e}function lM(n){const e={};n.charAt(0)==="?"&&(n=n.substring(1));for(const t of n.split("&")){if(t.length===0)continue;const i=t.split("=");i.length===2?e[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):Vn(`Invalid query segment '${t}' in query '${n}'`)}return e}const Sv=function(n,e){const t=cM(n),i=t.namespace;t.domain==="firebase.com"&&$s(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||i==="undefined")&&t.domain!=="localhost"&&$s("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||FO();const r=t.scheme==="ws"||t.scheme==="wss";return{repoInfo:new YO(t.host,t.secure,i,r,e,"",i!==t.subdomain),path:new lt(t.pathString)}},cM=function(n){let e="",t="",i="",r="",s="",o=!0,a="https",l=443;if(typeof n=="string"){let c=n.indexOf("//");c>=0&&(a=n.substring(0,c-1),n=n.substring(c+2));let u=n.indexOf("/");u===-1&&(u=n.length);let h=n.indexOf("?");h===-1&&(h=n.length),e=n.substring(0,Math.min(u,h)),u<h&&(r=aM(n.substring(u,h)));const f=lM(n.substring(Math.min(n.length,h)));c=e.indexOf(":"),c>=0?(o=a==="https"||a==="wss",l=parseInt(e.substring(c+1),10)):c=e.length;const d=e.slice(0,c);if(d.toLowerCase()==="localhost")t="localhost";else if(d.split(".").length<=2)t=d;else{const _=e.indexOf(".");i=e.substring(0,_).toLowerCase(),t=e.substring(_+1),s=i}"ns"in f&&(s=f.ns)}return{host:e,port:l,domain:t,subdomain:i,secure:o,scheme:a,pathString:r,namespace:s}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ng{constructor(e,t,i,r){this._repo=e,this._path=t,this._queryParams=i,this._orderByCalled=r}get key(){return Re(this._path)?null:PE(this._path)}get ref(){return new wa(this._repo,this._path)}get _queryIdentifier(){const e=lv(this._queryParams),t=L_(e);return t==="{}"?"default":t}get _queryObject(){return lv(this._queryParams)}isEqual(e){if(e=vi(e),!(e instanceof ng))return!1;const t=this._repo===e._repo,i=NE(this._path,e._path),r=this._queryIdentifier===e._queryIdentifier;return t&&i&&r}toJSON(){return this.toString()}toString(){return this._repo.toString()+Tk(this._path)}}class wa extends ng{constructor(e,t){super(e,t,new z_,!1)}get parent(){const e=kE(this._path);return e===null?null:new wa(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}CN(wa);AN(wa);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uM="FIREBASE_DATABASE_EMULATOR_HOST",sp={};let hM=!1;function dM(n,e,t,i,r){let s=i||n.options.databaseURL;s===void 0&&(n.options.projectId||$s("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),tn("Using default host for project ",n.options.projectId),s=`${n.options.projectId}-default-rtdb.firebaseio.com`);let o=Sv(s,r),a=o.repoInfo,l,c;typeof process<"u"&&jy&&(c=jy[uM]),c?(l=!0,s=`http://${c}?ns=${a.namespace}`,o=Sv(s,r),a=o.repoInfo):l=!o.repoInfo.secure;const u=r&&l?new Kf(Kf.OWNER):new KO(n.name,n.options,e);GN("Invalid Firebase Database URL",o),Re(o.path)||$s("Database URL must point to the root of a Firebase Database (not including a child path).");const h=pM(a,n,u,new WO(n.name,t));return new _M(h,n)}function fM(n,e){const t=sp[e];(!t||t[n.key]!==n)&&$s(`Database ${e}(${n.repoInfo_}) has already been deleted.`),iM(n),delete t[n.key]}function pM(n,e,t,i){let r=sp[e.name];r||(r={},sp[e.name]=r);let s=r[n.toURLString()];return s&&$s("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new QN(n,hM,t,i),r[n.toURLString()]=s,s}class _M{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(JN(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new wa(this._repo,Je())),this._rootInternal}_delete(){return this._rootInternal!==null&&(fM(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&$s("Cannot call "+e+" on a deleted database.")}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gM(n){NO(ma),Bi(new wi("database",(e,{instanceIdentifier:t})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return dM(i,r,s,t)},"PUBLIC").setMultipleInstances(!0)),Ln(Gy,qy,n),Ln(Gy,qy,"esm2017")}cr.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)};cr.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)};gM();var mM=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Q,ig=ig||{},me=mM||self;function Oh(n){var e=typeof n;return e=e!="object"?e:n?Array.isArray(n)?"array":e:"null",e=="array"||e=="object"&&typeof n.length=="number"}function pc(n){var e=typeof n;return e=="object"&&n!=null||e=="function"}function yM(n){return Object.prototype.hasOwnProperty.call(n,Nd)&&n[Nd]||(n[Nd]=++vM)}var Nd="closure_uid_"+(1e9*Math.random()>>>0),vM=0;function wM(n,e,t){return n.call.apply(n.bind,arguments)}function TM(n,e,t){if(!n)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var r=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(r,i),n.apply(e,r)}}return function(){return n.apply(e,arguments)}}function un(n,e,t){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?un=wM:un=TM,un.apply(null,arguments)}function $c(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var i=t.slice();return i.push.apply(i,arguments),n.apply(this,i)}}function jt(n,e){function t(){}t.prototype=e.prototype,n.$=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.ac=function(i,r,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[r].apply(i,o)}}function ts(){this.s=this.s,this.o=this.o}var EM=0;ts.prototype.s=!1;ts.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),EM!=0)&&yM(this)};ts.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const yS=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if(typeof n=="string")return typeof e!="string"||e.length!=1?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function rg(n){const e=n.length;if(0<e){const t=Array(e);for(let i=0;i<e;i++)t[i]=n[i];return t}return[]}function bv(n,e){for(let t=1;t<arguments.length;t++){const i=arguments[t];if(Oh(i)){const r=n.length||0,s=i.length||0;n.length=r+s;for(let o=0;o<s;o++)n[r+o]=i[o]}else n.push(i)}}function hn(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}hn.prototype.h=function(){this.defaultPrevented=!0};var SM=function(){if(!me.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{const t=()=>{};me.addEventListener("test",t,e),me.removeEventListener("test",t,e)}catch{}return n}();function Dl(n){return/^[\s\xa0]*$/.test(n)}function kh(){var n=me.navigator;return n&&(n=n.userAgent)?n:""}function Pi(n){return kh().indexOf(n)!=-1}function sg(n){return sg[" "](n),n}sg[" "]=function(){};function bM(n,e){var t=gD;return Object.prototype.hasOwnProperty.call(t,n)?t[n]:t[n]=e(n)}var IM=Pi("Opera"),Xo=Pi("Trident")||Pi("MSIE"),vS=Pi("Edge"),op=vS||Xo,wS=Pi("Gecko")&&!(kh().toLowerCase().indexOf("webkit")!=-1&&!Pi("Edge"))&&!(Pi("Trident")||Pi("MSIE"))&&!Pi("Edge"),CM=kh().toLowerCase().indexOf("webkit")!=-1&&!Pi("Edge");function TS(){var n=me.document;return n?n.documentMode:void 0}var ap;e:{var Md="",Dd=function(){var n=kh();if(wS)return/rv:([^\);]+)(\)|;)/.exec(n);if(vS)return/Edge\/([\d\.]+)/.exec(n);if(Xo)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n);if(CM)return/WebKit\/(\S+)/.exec(n);if(IM)return/(?:Version)[ \/]?(\S+)/.exec(n)}();if(Dd&&(Md=Dd?Dd[1]:""),Xo){var Ld=TS();if(Ld!=null&&Ld>parseFloat(Md)){ap=String(Ld);break e}}ap=Md}var lp;if(me.document&&Xo){var Iv=TS();lp=Iv||parseInt(ap,10)||void 0}else lp=void 0;var AM=lp;function Ll(n,e){if(hn.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,i=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(wS){e:{try{sg(e.nodeName);var r=!0;break e}catch{}r=!1}r||(e=null)}}else t=="mouseover"?e=n.fromElement:t=="mouseout"&&(e=n.toElement);this.relatedTarget=e,i?(this.clientX=i.clientX!==void 0?i.clientX:i.pageX,this.clientY=i.clientY!==void 0?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=n.clientX!==void 0?n.clientX:n.pageX,this.clientY=n.clientY!==void 0?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType=typeof n.pointerType=="string"?n.pointerType:xM[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Ll.$.h.call(this)}}jt(Ll,hn);var xM={2:"touch",3:"pen",4:"mouse"};Ll.prototype.h=function(){Ll.$.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var _c="closure_listenable_"+(1e6*Math.random()|0),RM=0;function PM(n,e,t,i,r){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!i,this.la=r,this.key=++RM,this.fa=this.ia=!1}function Nh(n){n.fa=!0,n.listener=null,n.proxy=null,n.src=null,n.la=null}function og(n,e,t){for(const i in n)e.call(t,n[i],i,n)}function OM(n,e){for(const t in n)e.call(void 0,n[t],t,n)}function ES(n){const e={};for(const t in n)e[t]=n[t];return e}const Cv="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function SS(n,e){let t,i;for(let r=1;r<arguments.length;r++){i=arguments[r];for(t in i)n[t]=i[t];for(let s=0;s<Cv.length;s++)t=Cv[s],Object.prototype.hasOwnProperty.call(i,t)&&(n[t]=i[t])}}function Mh(n){this.src=n,this.g={},this.h=0}Mh.prototype.add=function(n,e,t,i,r){var s=n.toString();n=this.g[s],n||(n=this.g[s]=[],this.h++);var o=up(n,e,i,r);return-1<o?(e=n[o],t||(e.ia=!1)):(e=new PM(e,this.src,s,!!i,r),e.ia=t,n.push(e)),e};function cp(n,e){var t=e.type;if(t in n.g){var i=n.g[t],r=yS(i,e),s;(s=0<=r)&&Array.prototype.splice.call(i,r,1),s&&(Nh(e),n.g[t].length==0&&(delete n.g[t],n.h--))}}function up(n,e,t,i){for(var r=0;r<n.length;++r){var s=n[r];if(!s.fa&&s.listener==e&&s.capture==!!t&&s.la==i)return r}return-1}var ag="closure_lm_"+(1e6*Math.random()|0),Vd={};function bS(n,e,t,i,r){if(i&&i.once)return CS(n,e,t,i,r);if(Array.isArray(e)){for(var s=0;s<e.length;s++)bS(n,e[s],t,i,r);return null}return t=ug(t),n&&n[_c]?n.O(e,t,pc(i)?!!i.capture:!!i,r):IS(n,e,t,!1,i,r)}function IS(n,e,t,i,r,s){if(!e)throw Error("Invalid event type");var o=pc(r)?!!r.capture:!!r,a=cg(n);if(a||(n[ag]=a=new Mh(n)),t=a.add(e,t,i,o,s),t.proxy)return t;if(i=kM(),t.proxy=i,i.src=n,i.listener=t,n.addEventListener)SM||(r=o),r===void 0&&(r=!1),n.addEventListener(e.toString(),i,r);else if(n.attachEvent)n.attachEvent(xS(e.toString()),i);else if(n.addListener&&n.removeListener)n.addListener(i);else throw Error("addEventListener and attachEvent are unavailable.");return t}function kM(){function n(t){return e.call(n.src,n.listener,t)}const e=NM;return n}function CS(n,e,t,i,r){if(Array.isArray(e)){for(var s=0;s<e.length;s++)CS(n,e[s],t,i,r);return null}return t=ug(t),n&&n[_c]?n.P(e,t,pc(i)?!!i.capture:!!i,r):IS(n,e,t,!0,i,r)}function AS(n,e,t,i,r){if(Array.isArray(e))for(var s=0;s<e.length;s++)AS(n,e[s],t,i,r);else i=pc(i)?!!i.capture:!!i,t=ug(t),n&&n[_c]?(n=n.i,e=String(e).toString(),e in n.g&&(s=n.g[e],t=up(s,t,i,r),-1<t&&(Nh(s[t]),Array.prototype.splice.call(s,t,1),s.length==0&&(delete n.g[e],n.h--)))):n&&(n=cg(n))&&(e=n.g[e.toString()],n=-1,e&&(n=up(e,t,i,r)),(t=-1<n?e[n]:null)&&lg(t))}function lg(n){if(typeof n!="number"&&n&&!n.fa){var e=n.src;if(e&&e[_c])cp(e.i,n);else{var t=n.type,i=n.proxy;e.removeEventListener?e.removeEventListener(t,i,n.capture):e.detachEvent?e.detachEvent(xS(t),i):e.addListener&&e.removeListener&&e.removeListener(i),(t=cg(e))?(cp(t,n),t.h==0&&(t.src=null,e[ag]=null)):Nh(n)}}}function xS(n){return n in Vd?Vd[n]:Vd[n]="on"+n}function NM(n,e){if(n.fa)n=!0;else{e=new Ll(e,this);var t=n.listener,i=n.la||n.src;n.ia&&lg(n),n=t.call(i,e)}return n}function cg(n){return n=n[ag],n instanceof Mh?n:null}var Fd="__closure_events_fn_"+(1e9*Math.random()>>>0);function ug(n){return typeof n=="function"?n:(n[Fd]||(n[Fd]=function(e){return n.handleEvent(e)}),n[Fd])}function Bt(){ts.call(this),this.i=new Mh(this),this.S=this,this.J=null}jt(Bt,ts);Bt.prototype[_c]=!0;Bt.prototype.removeEventListener=function(n,e,t,i){AS(this,n,e,t,i)};function Yt(n,e){var t,i=n.J;if(i)for(t=[];i;i=i.J)t.push(i);if(n=n.S,i=e.type||e,typeof e=="string")e=new hn(e,n);else if(e instanceof hn)e.target=e.target||n;else{var r=e;e=new hn(i,n),SS(e,r)}if(r=!0,t)for(var s=t.length-1;0<=s;s--){var o=e.g=t[s];r=Bc(o,i,!0,e)&&r}if(o=e.g=n,r=Bc(o,i,!0,e)&&r,r=Bc(o,i,!1,e)&&r,t)for(s=0;s<t.length;s++)o=e.g=t[s],r=Bc(o,i,!1,e)&&r}Bt.prototype.N=function(){if(Bt.$.N.call(this),this.i){var n=this.i,e;for(e in n.g){for(var t=n.g[e],i=0;i<t.length;i++)Nh(t[i]);delete n.g[e],n.h--}}this.J=null};Bt.prototype.O=function(n,e,t,i){return this.i.add(String(n),e,!1,t,i)};Bt.prototype.P=function(n,e,t,i){return this.i.add(String(n),e,!0,t,i)};function Bc(n,e,t,i){if(e=n.i.g[String(e)],!e)return!0;e=e.concat();for(var r=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.fa&&o.capture==t){var a=o.listener,l=o.la||o.src;o.ia&&cp(n.i,o),r=a.call(l,i)!==!1&&r}}return r&&!i.defaultPrevented}var hg=me.JSON.stringify;class MM{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}function DM(){var n=dg;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}class LM{constructor(){this.h=this.g=null}add(e,t){const i=RS.get();i.set(e,t),this.h?this.h.next=i:this.g=i,this.h=i}}var RS=new MM(()=>new VM,n=>n.reset());class VM{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function FM(n){var e=1;n=n.split(":");const t=[];for(;0<e&&n.length;)t.push(n.shift()),e--;return n.length&&t.push(n.join(":")),t}function UM(n){me.setTimeout(()=>{throw n},0)}let Vl,Fl=!1,dg=new LM,PS=()=>{const n=me.Promise.resolve(void 0);Vl=()=>{n.then($M)}};var $M=()=>{for(var n;n=DM();){try{n.h.call(n.g)}catch(t){UM(t)}var e=RS;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Fl=!1};function Dh(n,e){Bt.call(this),this.h=n||1,this.g=e||me,this.j=un(this.qb,this),this.l=Date.now()}jt(Dh,Bt);Q=Dh.prototype;Q.ga=!1;Q.T=null;Q.qb=function(){if(this.ga){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-n):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Yt(this,"tick"),this.ga&&(fg(this),this.start()))}};Q.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function fg(n){n.ga=!1,n.T&&(n.g.clearTimeout(n.T),n.T=null)}Q.N=function(){Dh.$.N.call(this),fg(this),delete this.g};function pg(n,e,t){if(typeof n=="function")t&&(n=un(n,t));else if(n&&typeof n.handleEvent=="function")n=un(n.handleEvent,n);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:me.setTimeout(n,e||0)}function OS(n){n.g=pg(()=>{n.g=null,n.i&&(n.i=!1,OS(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}class BM extends ts{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:OS(this)}N(){super.N(),this.g&&(me.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ul(n){ts.call(this),this.h=n,this.g={}}jt(Ul,ts);var Av=[];function kS(n,e,t,i){Array.isArray(t)||(t&&(Av[0]=t.toString()),t=Av);for(var r=0;r<t.length;r++){var s=bS(e,t[r],i||n.handleEvent,!1,n.h||n);if(!s)break;n.g[s.key]=s}}function NS(n){og(n.g,function(e,t){this.g.hasOwnProperty(t)&&lg(e)},n),n.g={}}Ul.prototype.N=function(){Ul.$.N.call(this),NS(this)};Ul.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function Lh(){this.g=!0}Lh.prototype.Ea=function(){this.g=!1};function zM(n,e,t,i,r,s){n.info(function(){if(n.g)if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var u=c[0];c=c[1];var h=u.split("_");o=2<=h.length&&h[1]=="type"?o+(u+"="+c+"&"):o+(u+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+i+") [attempt "+r+"]: "+e+`
`+t+`
`+o})}function jM(n,e,t,i,r,s,o){n.info(function(){return"XMLHTTP RESP ("+i+") [ attempt "+r+"]: "+e+`
`+t+`
`+s+" "+o})}function vo(n,e,t,i){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+qM(n,t)+(i?" "+i:"")})}function GM(n,e){n.info(function(){return"TIMEOUT: "+e})}Lh.prototype.info=function(){};function qM(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t){for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var i=t[n];if(!(2>i.length)){var r=i[1];if(Array.isArray(r)&&!(1>r.length)){var s=r[0];if(s!="noop"&&s!="stop"&&s!="close")for(var o=1;o<r.length;o++)r[o]=""}}}}return hg(t)}catch{return e}}var eo={},xv=null;function Vh(){return xv=xv||new Bt}eo.Ta="serverreachability";function MS(n){hn.call(this,eo.Ta,n)}jt(MS,hn);function $l(n){const e=Vh();Yt(e,new MS(e))}eo.STAT_EVENT="statevent";function DS(n,e){hn.call(this,eo.STAT_EVENT,n),this.stat=e}jt(DS,hn);function mn(n){const e=Vh();Yt(e,new DS(e,n))}eo.Ua="timingevent";function LS(n,e){hn.call(this,eo.Ua,n),this.size=e}jt(LS,hn);function gc(n,e){if(typeof n!="function")throw Error("Fn must not be null and must be a function");return me.setTimeout(function(){n()},e)}var Fh={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},VS={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function _g(){}_g.prototype.h=null;function Rv(n){return n.h||(n.h=n.i())}function FS(){}var mc={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function gg(){hn.call(this,"d")}jt(gg,hn);function mg(){hn.call(this,"c")}jt(mg,hn);var hp;function Uh(){}jt(Uh,_g);Uh.prototype.g=function(){return new XMLHttpRequest};Uh.prototype.i=function(){return{}};hp=new Uh;function yc(n,e,t,i){this.l=n,this.j=e,this.m=t,this.W=i||1,this.U=new Ul(this),this.P=HM,n=op?125:void 0,this.V=new Dh(n),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new US}function US(){this.i=null,this.g="",this.h=!1}var HM=45e3,$S={},dp={};Q=yc.prototype;Q.setTimeout=function(n){this.P=n};function fp(n,e,t){n.L=1,n.A=Bh(ur(e)),n.u=t,n.S=!0,BS(n,null)}function BS(n,e){n.G=Date.now(),vc(n),n.B=ur(n.A);var t=n.B,i=n.W;Array.isArray(i)||(i=[String(i)]),YS(t.i,"t",i),n.o=0,t=n.l.J,n.h=new US,n.g=gb(n.l,t?e:null,!n.u),0<n.O&&(n.M=new BM(un(n.Pa,n,n.g),n.O)),kS(n.U,n.g,"readystatechange",n.nb),e=n.I?ES(n.I):{},n.u?(n.v||(n.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ha(n.B,n.v,n.u,e)):(n.v="GET",n.g.ha(n.B,n.v,null,e)),$l(),zM(n.j,n.v,n.B,n.m,n.W,n.u)}Q.nb=function(n){n=n.target;const e=this.M;e&&Di(n)==3?e.l():this.Pa(n)};Q.Pa=function(n){try{if(n==this.g)e:{const u=Di(this.g);var e=this.g.Ia();const h=this.g.da();if(!(3>u)&&(u!=3||op||this.g&&(this.h.h||this.g.ja()||Nv(this.g)))){this.J||u!=4||e==7||(e==8||0>=h?$l(3):$l(2)),$h(this);var t=this.g.da();this.ca=t;t:if(zS(this)){var i=Nv(this.g);n="";var r=i.length,s=Di(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ts(this),dl(this);var o="";break t}this.h.i=new me.TextDecoder}for(e=0;e<r;e++)this.h.h=!0,n+=this.h.i.decode(i[e],{stream:s&&e==r-1});i.length=0,this.h.g+=n,this.o=0,o=this.h.g}else o=this.g.ja();if(this.i=t==200,jM(this.j,this.v,this.B,this.m,this.W,u,t),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Dl(a)){var c=a;break t}}c=null}if(t=c)vo(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,pp(this,t);else{this.i=!1,this.s=3,mn(12),Ts(this),dl(this);break e}}this.S?(jS(this,u,o),op&&this.i&&u==3&&(kS(this.U,this.V,"tick",this.mb),this.V.start())):(vo(this.j,this.m,o,null),pp(this,o)),u==4&&Ts(this),this.i&&!this.J&&(u==4?db(this.l,this):(this.i=!1,vc(this)))}else fD(this.g),t==400&&0<o.indexOf("Unknown SID")?(this.s=3,mn(12)):(this.s=0,mn(13)),Ts(this),dl(this)}}}catch{}finally{}};function zS(n){return n.g?n.v=="GET"&&n.L!=2&&n.l.Ha:!1}function jS(n,e,t){let i=!0,r;for(;!n.J&&n.o<t.length;)if(r=WM(n,t),r==dp){e==4&&(n.s=4,mn(14),i=!1),vo(n.j,n.m,null,"[Incomplete Response]");break}else if(r==$S){n.s=4,mn(15),vo(n.j,n.m,t,"[Invalid Chunk]"),i=!1;break}else vo(n.j,n.m,r,null),pp(n,r);zS(n)&&n.o!=0&&(n.h.g=n.h.g.slice(n.o),n.o=0),e!=4||t.length!=0||n.h.h||(n.s=1,mn(16),i=!1),n.i=n.i&&i,i?0<t.length&&!n.ba&&(n.ba=!0,e=n.l,e.g==n&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+t.length),Sg(e),e.M=!0,mn(11))):(vo(n.j,n.m,t,"[Invalid Chunked Response]"),Ts(n),dl(n))}Q.mb=function(){if(this.g){var n=Di(this.g),e=this.g.ja();this.o<e.length&&($h(this),jS(this,n,e),this.i&&n!=4&&vc(this))}};function WM(n,e){var t=n.o,i=e.indexOf(`
`,t);return i==-1?dp:(t=Number(e.substring(t,i)),isNaN(t)?$S:(i+=1,i+t>e.length?dp:(e=e.slice(i,i+t),n.o=i+t,e)))}Q.cancel=function(){this.J=!0,Ts(this)};function vc(n){n.Y=Date.now()+n.P,GS(n,n.P)}function GS(n,e){if(n.C!=null)throw Error("WatchDog timer not null");n.C=gc(un(n.lb,n),e)}function $h(n){n.C&&(me.clearTimeout(n.C),n.C=null)}Q.lb=function(){this.C=null;const n=Date.now();0<=n-this.Y?(GM(this.j,this.B),this.L!=2&&($l(),mn(17)),Ts(this),this.s=2,dl(this)):GS(this,this.Y-n)};function dl(n){n.l.H==0||n.J||db(n.l,n)}function Ts(n){$h(n);var e=n.M;e&&typeof e.sa=="function"&&e.sa(),n.M=null,fg(n.V),NS(n.U),n.g&&(e=n.g,n.g=null,e.abort(),e.sa())}function pp(n,e){try{var t=n.l;if(t.H!=0&&(t.g==n||_p(t.i,n))){if(!n.K&&_p(t.i,n)&&t.H==3){try{var i=t.Ja.g.parse(e)}catch{i=null}if(Array.isArray(i)&&i.length==3){var r=i;if(r[0]==0){e:if(!t.u){if(t.g)if(t.g.G+3e3<n.G)Bu(t),Gh(t);else break e;Eg(t),mn(18)}}else t.Fa=r[1],0<t.Fa-t.V&&37500>r[2]&&t.G&&t.A==0&&!t.v&&(t.v=gc(un(t.ib,t),6e3));if(1>=JS(t.i)&&t.oa){try{t.oa()}catch{}t.oa=void 0}}else Es(t,11)}else if((n.K||t.g==n)&&Bu(t),!Dl(e))for(r=t.Ja.g.parse(e),e=0;e<r.length;e++){let c=r[e];if(t.V=c[0],c=c[1],t.H==2)if(c[0]=="c"){t.K=c[1],t.pa=c[2];const u=c[3];u!=null&&(t.ra=u,t.l.info("VER="+t.ra));const h=c[4];h!=null&&(t.Ga=h,t.l.info("SVER="+t.Ga));const f=c[5];f!=null&&typeof f=="number"&&0<f&&(i=1.5*f,t.L=i,t.l.info("backChannelRequestTimeoutMs_="+i)),i=t;const d=n.g;if(d){const _=d.g?d.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(_){var s=i.i;s.g||_.indexOf("spdy")==-1&&_.indexOf("quic")==-1&&_.indexOf("h2")==-1||(s.j=s.l,s.g=new Set,s.h&&(yg(s,s.h),s.h=null))}if(i.F){const p=d.g?d.g.getResponseHeader("X-HTTP-Session-Id"):null;p&&(i.Da=p,at(i.I,i.F,p))}}t.H=3,t.h&&t.h.Ba(),t.ca&&(t.S=Date.now()-n.G,t.l.info("Handshake RTT: "+t.S+"ms")),i=t;var o=n;if(i.wa=_b(i,i.J?i.pa:null,i.Y),o.K){ZS(i.i,o);var a=o,l=i.L;l&&a.setTimeout(l),a.C&&($h(a),vc(a)),i.g=o}else ub(i);0<t.j.length&&qh(t)}else c[0]!="stop"&&c[0]!="close"||Es(t,7);else t.H==3&&(c[0]=="stop"||c[0]=="close"?c[0]=="stop"?Es(t,7):Tg(t):c[0]!="noop"&&t.h&&t.h.Aa(c),t.A=0)}}$l(4)}catch{}}function KM(n){if(n.Z&&typeof n.Z=="function")return n.Z();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if(typeof n=="string")return n.split("");if(Oh(n)){for(var e=[],t=n.length,i=0;i<t;i++)e.push(n[i]);return e}e=[],t=0;for(i in n)e[t++]=n[i];return e}function YM(n){if(n.ta&&typeof n.ta=="function")return n.ta();if(!n.Z||typeof n.Z!="function"){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(Oh(n)||typeof n=="string"){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const i in n)e[t++]=i;return e}}}function qS(n,e){if(n.forEach&&typeof n.forEach=="function")n.forEach(e,void 0);else if(Oh(n)||typeof n=="string")Array.prototype.forEach.call(n,e,void 0);else for(var t=YM(n),i=KM(n),r=i.length,s=0;s<r;s++)e.call(void 0,i[s],t&&t[s],n)}var HS=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function XM(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var i=n[t].indexOf("="),r=null;if(0<=i){var s=n[t].substring(0,i);r=n[t].substring(i+1)}else s=n[t];e(s,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}function Rs(n){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof Rs){this.h=n.h,Uu(this,n.j),this.s=n.s,this.g=n.g,$u(this,n.m),this.l=n.l;var e=n.i,t=new Bl;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),Pv(this,t),this.o=n.o}else n&&(e=String(n).match(HS))?(this.h=!1,Uu(this,e[1]||"",!0),this.s=qa(e[2]||""),this.g=qa(e[3]||"",!0),$u(this,e[4]),this.l=qa(e[5]||"",!0),Pv(this,e[6]||"",!0),this.o=qa(e[7]||"")):(this.h=!1,this.i=new Bl(null,this.h))}Rs.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Ha(e,Ov,!0),":");var t=this.g;return(t||e=="file")&&(n.push("//"),(e=this.s)&&n.push(Ha(e,Ov,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t=this.m,t!=null&&n.push(":",String(t))),(t=this.l)&&(this.g&&t.charAt(0)!="/"&&n.push("/"),n.push(Ha(t,t.charAt(0)=="/"?ZM:JM,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Ha(t,tD)),n.join("")};function ur(n){return new Rs(n)}function Uu(n,e,t){n.j=t?qa(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function $u(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function Pv(n,e,t){e instanceof Bl?(n.i=e,nD(n.i,n.h)):(t||(e=Ha(e,eD)),n.i=new Bl(e,n.h))}function at(n,e,t){n.i.set(e,t)}function Bh(n){return at(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function qa(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Ha(n,e,t){return typeof n=="string"?(n=encodeURI(n).replace(e,QM),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function QM(n){return n=n.charCodeAt(0),"%"+(n>>4&15).toString(16)+(n&15).toString(16)}var Ov=/[#\/\?@]/g,JM=/[#\?:]/g,ZM=/[#\?]/g,eD=/[#\?@]/g,tD=/#/g;function Bl(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function ns(n){n.g||(n.g=new Map,n.h=0,n.i&&XM(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}Q=Bl.prototype;Q.add=function(n,e){ns(this),this.i=null,n=Ta(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this};function WS(n,e){ns(n),e=Ta(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function KS(n,e){return ns(n),e=Ta(n,e),n.g.has(e)}Q.forEach=function(n,e){ns(this),this.g.forEach(function(t,i){t.forEach(function(r){n.call(e,r,i,this)},this)},this)};Q.ta=function(){ns(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let i=0;i<e.length;i++){const r=n[i];for(let s=0;s<r.length;s++)t.push(e[i])}return t};Q.Z=function(n){ns(this);let e=[];if(typeof n=="string")KS(this,n)&&(e=e.concat(this.g.get(Ta(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e};Q.set=function(n,e){return ns(this),this.i=null,n=Ta(this,n),KS(this,n)&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this};Q.get=function(n,e){return n?(n=this.Z(n),0<n.length?String(n[0]):e):e};function YS(n,e,t){WS(n,e),0<t.length&&(n.i=null,n.g.set(Ta(n,e),rg(t)),n.h+=t.length)}Q.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var i=e[t];const s=encodeURIComponent(String(i)),o=this.Z(i);for(i=0;i<o.length;i++){var r=s;o[i]!==""&&(r+="="+encodeURIComponent(String(o[i]))),n.push(r)}}return this.i=n.join("&")};function Ta(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function nD(n,e){e&&!n.j&&(ns(n),n.i=null,n.g.forEach(function(t,i){var r=i.toLowerCase();i!=r&&(WS(this,i),YS(this,r,t))},n)),n.j=e}var iD=class{constructor(n,e){this.g=n,this.map=e}};function XS(n){this.l=n||rD,me.PerformanceNavigationTiming?(n=me.performance.getEntriesByType("navigation"),n=0<n.length&&(n[0].nextHopProtocol=="hq"||n[0].nextHopProtocol=="h2")):n=!!(me.g&&me.g.Ka&&me.g.Ka()&&me.g.Ka().dc),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var rD=10;function QS(n){return n.h?!0:n.g?n.g.size>=n.j:!1}function JS(n){return n.h?1:n.g?n.g.size:0}function _p(n,e){return n.h?n.h==e:n.g?n.g.has(e):!1}function yg(n,e){n.g?n.g.add(e):n.h=e}function ZS(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}XS.prototype.cancel=function(){if(this.i=eb(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const n of this.g.values())n.cancel();this.g.clear()}};function eb(n){if(n.h!=null)return n.i.concat(n.h.F);if(n.g!=null&&n.g.size!==0){let e=n.i;for(const t of n.g.values())e=e.concat(t.F);return e}return rg(n.i)}var sD=class{stringify(n){return me.JSON.stringify(n,void 0)}parse(n){return me.JSON.parse(n,void 0)}};function oD(){this.g=new sD}function aD(n,e,t){const i=t||"";try{qS(n,function(r,s){let o=r;pc(r)&&(o=hg(r)),e.push(i+s+"="+encodeURIComponent(o))})}catch(r){throw e.push(i+"type="+encodeURIComponent("_badmap")),r}}function lD(n,e){const t=new Lh;if(me.Image){const i=new Image;i.onload=$c(zc,t,i,"TestLoadImage: loaded",!0,e),i.onerror=$c(zc,t,i,"TestLoadImage: error",!1,e),i.onabort=$c(zc,t,i,"TestLoadImage: abort",!1,e),i.ontimeout=$c(zc,t,i,"TestLoadImage: timeout",!1,e),me.setTimeout(function(){i.ontimeout&&i.ontimeout()},1e4),i.src=n}else e(!1)}function zc(n,e,t,i,r){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,r(i)}catch{}}function wc(n){this.l=n.ec||null,this.j=n.ob||!1}jt(wc,_g);wc.prototype.g=function(){return new zh(this.l,this.j)};wc.prototype.i=function(n){return function(){return n}}({});function zh(n,e){Bt.call(this),this.F=n,this.u=e,this.m=void 0,this.readyState=vg,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}jt(zh,Bt);var vg=0;Q=zh.prototype;Q.open=function(n,e){if(this.readyState!=vg)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,zl(this)};Q.send=function(n){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.F||me).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};Q.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Tc(this)),this.readyState=vg};Q.$a=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,zl(this)),this.g&&(this.readyState=3,zl(this),this.g)))if(this.responseType==="arraybuffer")n.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof me.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;tb(this)}else n.text().then(this.Za.bind(this),this.ka.bind(this))};function tb(n){n.j.read().then(n.Xa.bind(n)).catch(n.ka.bind(n))}Q.Xa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Tc(this):zl(this),this.readyState==3&&tb(this)}};Q.Za=function(n){this.g&&(this.response=this.responseText=n,Tc(this))};Q.Ya=function(n){this.g&&(this.response=n,Tc(this))};Q.ka=function(){this.g&&Tc(this)};function Tc(n){n.readyState=4,n.l=null,n.j=null,n.A=null,zl(n)}Q.setRequestHeader=function(n,e){this.v.append(n,e)};Q.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""};Q.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)t=t.value,n.push(t[0]+": "+t[1]),t=e.next();return n.join(`\r
`)};function zl(n){n.onreadystatechange&&n.onreadystatechange.call(n)}Object.defineProperty(zh.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(n){this.m=n?"include":"same-origin"}});var cD=me.JSON.parse;function mt(n){Bt.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=nb,this.L=this.M=!1}jt(mt,Bt);var nb="",uD=/^https?$/i,hD=["POST","PUT"];Q=mt.prototype;Q.Oa=function(n){this.M=n};Q.ha=function(n,e,t,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+n);e=e?e.toUpperCase():"GET",this.I=n,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():hp.g(),this.C=this.u?Rv(this.u):Rv(hp),this.g.onreadystatechange=un(this.La,this);try{this.G=!0,this.g.open(e,String(n),!0),this.G=!1}catch(s){kv(this,s);return}if(n=t||"",t=new Map(this.headers),i)if(Object.getPrototypeOf(i)===Object.prototype)for(var r in i)t.set(r,i[r]);else if(typeof i.keys=="function"&&typeof i.get=="function")for(const s of i.keys())t.set(s,i.get(s));else throw Error("Unknown input type for opt_headers: "+String(i));i=Array.from(t.keys()).find(s=>s.toLowerCase()=="content-type"),r=me.FormData&&n instanceof me.FormData,!(0<=yS(hD,e))||i||r||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of t)this.g.setRequestHeader(s,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{sb(this),0<this.B&&((this.L=dD(this.g))?(this.g.timeout=this.B,this.g.ontimeout=un(this.ua,this)):this.A=pg(this.ua,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(s){kv(this,s)}};function dD(n){return Xo&&typeof n.timeout=="number"&&n.ontimeout!==void 0}Q.ua=function(){typeof ig<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Yt(this,"timeout"),this.abort(8))};function kv(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,ib(n),jh(n)}function ib(n){n.F||(n.F=!0,Yt(n,"complete"),Yt(n,"error"))}Q.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Yt(this,"complete"),Yt(this,"abort"),jh(this))};Q.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),jh(this,!0)),mt.$.N.call(this)};Q.La=function(){this.s||(this.G||this.v||this.l?rb(this):this.kb())};Q.kb=function(){rb(this)};function rb(n){if(n.h&&typeof ig<"u"&&(!n.C[1]||Di(n)!=4||n.da()!=2)){if(n.v&&Di(n)==4)pg(n.La,0,n);else if(Yt(n,"readystatechange"),Di(n)==4){n.h=!1;try{const o=n.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var i;if(i=o===0){var r=String(n.I).match(HS)[1]||null;!r&&me.self&&me.self.location&&(r=me.self.location.protocol.slice(0,-1)),i=!uD.test(r?r.toLowerCase():"")}t=i}if(t)Yt(n,"complete"),Yt(n,"success");else{n.m=6;try{var s=2<Di(n)?n.g.statusText:""}catch{s=""}n.j=s+" ["+n.da()+"]",ib(n)}}finally{jh(n)}}}}function jh(n,e){if(n.g){sb(n);const t=n.g,i=n.C[0]?()=>{}:null;n.g=null,n.C=null,e||Yt(n,"ready");try{t.onreadystatechange=i}catch{}}}function sb(n){n.g&&n.L&&(n.g.ontimeout=null),n.A&&(me.clearTimeout(n.A),n.A=null)}Q.isActive=function(){return!!this.g};function Di(n){return n.g?n.g.readyState:0}Q.da=function(){try{return 2<Di(this)?this.g.status:-1}catch{return-1}};Q.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};Q.Wa=function(n){if(this.g){var e=this.g.responseText;return n&&e.indexOf(n)==0&&(e=e.substring(n.length)),cD(e)}};function Nv(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.K){case nb:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function fD(n){const e={};n=(n.g&&2<=Di(n)&&n.g.getAllResponseHeaders()||"").split(`\r
`);for(let i=0;i<n.length;i++){if(Dl(n[i]))continue;var t=FM(n[i]);const r=t[0];if(t=t[1],typeof t!="string")continue;t=t.trim();const s=e[r]||[];e[r]=s,s.push(t)}OM(e,function(i){return i.join(", ")})}Q.Ia=function(){return this.m};Q.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function ob(n){let e="";return og(n,function(t,i){e+=i,e+=":",e+=t,e+=`\r
`}),e}function wg(n,e,t){e:{for(i in t){var i=!1;break e}i=!0}i||(t=ob(t),typeof n=="string"?t!=null&&encodeURIComponent(String(t)):at(n,e,t))}function Da(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function ab(n){this.Ga=0,this.j=[],this.l=new Lh,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Da("failFast",!1,n),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Da("baseRetryDelayMs",5e3,n),this.hb=Da("retryDelaySeedMs",1e4,n),this.eb=Da("forwardChannelMaxRetries",2,n),this.xa=Da("forwardChannelRequestTimeoutMs",2e4,n),this.va=n&&n.xmlHttpFactory||void 0,this.Ha=n&&n.useFetchStreams||!1,this.L=void 0,this.J=n&&n.supportsCrossDomainXhr||!1,this.K="",this.i=new XS(n&&n.concurrentRequestLimit),this.Ja=new oD,this.P=n&&n.fastHandshake||!1,this.O=n&&n.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=n&&n.bc||!1,n&&n.Ea&&this.l.Ea(),n&&n.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&n&&n.detectBufferingProxy||!1,this.qa=void 0,n&&n.longPollingTimeout&&0<n.longPollingTimeout&&(this.qa=n.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}Q=ab.prototype;Q.ra=8;Q.H=1;function Tg(n){if(lb(n),n.H==3){var e=n.W++,t=ur(n.I);if(at(t,"SID",n.K),at(t,"RID",e),at(t,"TYPE","terminate"),Ec(n,t),e=new yc(n,n.l,e),e.L=2,e.A=Bh(ur(t)),t=!1,me.navigator&&me.navigator.sendBeacon)try{t=me.navigator.sendBeacon(e.A.toString(),"")}catch{}!t&&me.Image&&(new Image().src=e.A,t=!0),t||(e.g=gb(e.l,null),e.g.ha(e.A)),e.G=Date.now(),vc(e)}pb(n)}function Gh(n){n.g&&(Sg(n),n.g.cancel(),n.g=null)}function lb(n){Gh(n),n.u&&(me.clearTimeout(n.u),n.u=null),Bu(n),n.i.cancel(),n.m&&(typeof n.m=="number"&&me.clearTimeout(n.m),n.m=null)}function qh(n){if(!QS(n.i)&&!n.m){n.m=!0;var e=n.Na;Vl||PS(),Fl||(Vl(),Fl=!0),dg.add(e,n),n.C=0}}function pD(n,e){return JS(n.i)>=n.i.j-(n.m?1:0)?!1:n.m?(n.j=e.F.concat(n.j),!0):n.H==1||n.H==2||n.C>=(n.cb?0:n.eb)?!1:(n.m=gc(un(n.Na,n,e),fb(n,n.C)),n.C++,!0)}Q.Na=function(n){if(this.m)if(this.m=null,this.H==1){if(!n){this.W=Math.floor(1e5*Math.random()),n=this.W++;const r=new yc(this,this.l,n);let s=this.s;if(this.U&&(s?(s=ES(s),SS(s,this.U)):s=this.U),this.o!==null||this.O||(r.I=s,s=null),this.P)e:{for(var e=0,t=0;t<this.j.length;t++){t:{var i=this.j[t];if("__data__"in i.map&&(i=i.map.__data__,typeof i=="string")){i=i.length;break t}i=void 0}if(i===void 0)break;if(e+=i,4096<e){e=t;break e}if(e===4096||t===this.j.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=cb(this,r,e),t=ur(this.I),at(t,"RID",n),at(t,"CVER",22),this.F&&at(t,"X-HTTP-Session-Id",this.F),Ec(this,t),s&&(this.O?e="headers="+encodeURIComponent(String(ob(s)))+"&"+e:this.o&&wg(t,this.o,s)),yg(this.i,r),this.bb&&at(t,"TYPE","init"),this.P?(at(t,"$req",e),at(t,"SID","null"),r.aa=!0,fp(r,t,null)):fp(r,t,e),this.H=2}}else this.H==3&&(n?Mv(this,n):this.j.length==0||QS(this.i)||Mv(this))};function Mv(n,e){var t;e?t=e.m:t=n.W++;const i=ur(n.I);at(i,"SID",n.K),at(i,"RID",t),at(i,"AID",n.V),Ec(n,i),n.o&&n.s&&wg(i,n.o,n.s),t=new yc(n,n.l,t,n.C+1),n.o===null&&(t.I=n.s),e&&(n.j=e.F.concat(n.j)),e=cb(n,t,1e3),t.setTimeout(Math.round(.5*n.xa)+Math.round(.5*n.xa*Math.random())),yg(n.i,t),fp(t,i,e)}function Ec(n,e){n.na&&og(n.na,function(t,i){at(e,i,t)}),n.h&&qS({},function(t,i){at(e,i,t)})}function cb(n,e,t){t=Math.min(n.j.length,t);var i=n.h?un(n.h.Va,n.h,n):null;e:{var r=n.j;let s=-1;for(;;){const o=["count="+t];s==-1?0<t?(s=r[0].g,o.push("ofs="+s)):s=0:o.push("ofs="+s);let a=!0;for(let l=0;l<t;l++){let c=r[l].g;const u=r[l].map;if(c-=s,0>c)s=Math.max(0,r[l].g-100),a=!1;else try{aD(u,o,"req"+c+"_")}catch{i&&i(u)}}if(a){i=o.join("&");break e}}}return n=n.j.splice(0,t),e.F=n,i}function ub(n){if(!n.g&&!n.u){n.ba=1;var e=n.Ma;Vl||PS(),Fl||(Vl(),Fl=!0),dg.add(e,n),n.A=0}}function Eg(n){return n.g||n.u||3<=n.A?!1:(n.ba++,n.u=gc(un(n.Ma,n),fb(n,n.A)),n.A++,!0)}Q.Ma=function(){if(this.u=null,hb(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var n=2*this.S;this.l.info("BP detection timer enabled: "+n),this.B=gc(un(this.jb,this),n)}};Q.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,mn(10),Gh(this),hb(this))};function Sg(n){n.B!=null&&(me.clearTimeout(n.B),n.B=null)}function hb(n){n.g=new yc(n,n.l,"rpc",n.ba),n.o===null&&(n.g.I=n.s),n.g.O=0;var e=ur(n.wa);at(e,"RID","rpc"),at(e,"SID",n.K),at(e,"AID",n.V),at(e,"CI",n.G?"0":"1"),!n.G&&n.qa&&at(e,"TO",n.qa),at(e,"TYPE","xmlhttp"),Ec(n,e),n.o&&n.s&&wg(e,n.o,n.s),n.L&&n.g.setTimeout(n.L);var t=n.g;n=n.pa,t.L=1,t.A=Bh(ur(e)),t.u=null,t.S=!0,BS(t,n)}Q.ib=function(){this.v!=null&&(this.v=null,Gh(this),Eg(this),mn(19))};function Bu(n){n.v!=null&&(me.clearTimeout(n.v),n.v=null)}function db(n,e){var t=null;if(n.g==e){Bu(n),Sg(n),n.g=null;var i=2}else if(_p(n.i,e))t=e.F,ZS(n.i,e),i=1;else return;if(n.H!=0){if(e.i)if(i==1){t=e.u?e.u.length:0,e=Date.now()-e.G;var r=n.C;i=Vh(),Yt(i,new LS(i,t)),qh(n)}else ub(n);else if(r=e.s,r==3||r==0&&0<e.ca||!(i==1&&pD(n,e)||i==2&&Eg(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),r){case 1:Es(n,5);break;case 4:Es(n,10);break;case 3:Es(n,6);break;default:Es(n,2)}}}function fb(n,e){let t=n.ab+Math.floor(Math.random()*n.hb);return n.isActive()||(t*=2),t*e}function Es(n,e){if(n.l.info("Error code "+e),e==2){var t=null;n.h&&(t=null);var i=un(n.pb,n);t||(t=new Rs("//www.google.com/images/cleardot.gif"),me.location&&me.location.protocol=="http"||Uu(t,"https"),Bh(t)),lD(t.toString(),i)}else mn(2);n.H=0,n.h&&n.h.za(e),pb(n),lb(n)}Q.pb=function(n){n?(this.l.info("Successfully pinged google.com"),mn(2)):(this.l.info("Failed to ping google.com"),mn(1))};function pb(n){if(n.H=0,n.ma=[],n.h){const e=eb(n.i);(e.length!=0||n.j.length!=0)&&(bv(n.ma,e),bv(n.ma,n.j),n.i.i.length=0,rg(n.j),n.j.length=0),n.h.ya()}}function _b(n,e,t){var i=t instanceof Rs?ur(t):new Rs(t);if(i.g!="")e&&(i.g=e+"."+i.g),$u(i,i.m);else{var r=me.location;i=r.protocol,e=e?e+"."+r.hostname:r.hostname,r=+r.port;var s=new Rs(null);i&&Uu(s,i),e&&(s.g=e),r&&$u(s,r),t&&(s.l=t),i=s}return t=n.F,e=n.Da,t&&e&&at(i,t,e),at(i,"VER",n.ra),Ec(n,i),i}function gb(n,e,t){if(e&&!n.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=n.Ha&&!n.va?new mt(new wc({ob:t})):new mt(n.va),e.Oa(n.J),e}Q.isActive=function(){return!!this.h&&this.h.isActive(this)};function mb(){}Q=mb.prototype;Q.Ba=function(){};Q.Aa=function(){};Q.za=function(){};Q.ya=function(){};Q.isActive=function(){return!0};Q.Va=function(){};function zu(){if(Xo&&!(10<=Number(AM)))throw Error("Environmental error: no available transport.")}zu.prototype.g=function(n,e){return new Un(n,e)};function Un(n,e){Bt.call(this),this.g=new ab(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(n?n["X-WebChannel-Client-Profile"]=e.Ca:n={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=n,(n=e&&e.cc)&&!Dl(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Dl(e)&&(this.g.F=e,n=this.h,n!==null&&e in n&&(n=this.h,e in n&&delete n[e])),this.j=new Ea(this)}jt(Un,Bt);Un.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var n=this.g,e=this.l,t=this.h||void 0;mn(0),n.Y=e,n.na=t||{},n.G=n.aa,n.I=_b(n,null,n.Y),qh(n)};Un.prototype.close=function(){Tg(this.g)};Un.prototype.u=function(n){var e=this.g;if(typeof n=="string"){var t={};t.__data__=n,n=t}else this.v&&(t={},t.__data__=hg(n),n=t);e.j.push(new iD(e.fb++,n)),e.H==3&&qh(e)};Un.prototype.N=function(){this.g.h=null,delete this.j,Tg(this.g),delete this.g,Un.$.N.call(this)};function yb(n){gg.call(this),n.__headers__&&(this.headers=n.__headers__,this.statusCode=n.__status__,delete n.__headers__,delete n.__status__);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=e!==null&&n in e?e[n]:void 0),this.data=e}else this.data=n}jt(yb,gg);function vb(){mg.call(this),this.status=1}jt(vb,mg);function Ea(n){this.g=n}jt(Ea,mb);Ea.prototype.Ba=function(){Yt(this.g,"a")};Ea.prototype.Aa=function(n){Yt(this.g,new yb(n))};Ea.prototype.za=function(n){Yt(this.g,new vb)};Ea.prototype.ya=function(){Yt(this.g,"b")};function _D(){this.blockSize=-1}function Ei(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}jt(Ei,_D);Ei.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function Ud(n,e,t){t||(t=0);var i=Array(16);if(typeof e=="string")for(var r=0;16>r;++r)i[r]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(r=0;16>r;++r)i[r]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;e=n.g[0],t=n.g[1],r=n.g[2];var s=n.g[3],o=e+(s^t&(r^s))+i[0]+3614090360&4294967295;e=t+(o<<7&4294967295|o>>>25),o=s+(r^e&(t^r))+i[1]+3905402710&4294967295,s=e+(o<<12&4294967295|o>>>20),o=r+(t^s&(e^t))+i[2]+606105819&4294967295,r=s+(o<<17&4294967295|o>>>15),o=t+(e^r&(s^e))+i[3]+3250441966&4294967295,t=r+(o<<22&4294967295|o>>>10),o=e+(s^t&(r^s))+i[4]+4118548399&4294967295,e=t+(o<<7&4294967295|o>>>25),o=s+(r^e&(t^r))+i[5]+1200080426&4294967295,s=e+(o<<12&4294967295|o>>>20),o=r+(t^s&(e^t))+i[6]+2821735955&4294967295,r=s+(o<<17&4294967295|o>>>15),o=t+(e^r&(s^e))+i[7]+4249261313&4294967295,t=r+(o<<22&4294967295|o>>>10),o=e+(s^t&(r^s))+i[8]+1770035416&4294967295,e=t+(o<<7&4294967295|o>>>25),o=s+(r^e&(t^r))+i[9]+2336552879&4294967295,s=e+(o<<12&4294967295|o>>>20),o=r+(t^s&(e^t))+i[10]+4294925233&4294967295,r=s+(o<<17&4294967295|o>>>15),o=t+(e^r&(s^e))+i[11]+2304563134&4294967295,t=r+(o<<22&4294967295|o>>>10),o=e+(s^t&(r^s))+i[12]+1804603682&4294967295,e=t+(o<<7&4294967295|o>>>25),o=s+(r^e&(t^r))+i[13]+4254626195&4294967295,s=e+(o<<12&4294967295|o>>>20),o=r+(t^s&(e^t))+i[14]+2792965006&4294967295,r=s+(o<<17&4294967295|o>>>15),o=t+(e^r&(s^e))+i[15]+1236535329&4294967295,t=r+(o<<22&4294967295|o>>>10),o=e+(r^s&(t^r))+i[1]+4129170786&4294967295,e=t+(o<<5&4294967295|o>>>27),o=s+(t^r&(e^t))+i[6]+3225465664&4294967295,s=e+(o<<9&4294967295|o>>>23),o=r+(e^t&(s^e))+i[11]+643717713&4294967295,r=s+(o<<14&4294967295|o>>>18),o=t+(s^e&(r^s))+i[0]+3921069994&4294967295,t=r+(o<<20&4294967295|o>>>12),o=e+(r^s&(t^r))+i[5]+3593408605&4294967295,e=t+(o<<5&4294967295|o>>>27),o=s+(t^r&(e^t))+i[10]+38016083&4294967295,s=e+(o<<9&4294967295|o>>>23),o=r+(e^t&(s^e))+i[15]+3634488961&4294967295,r=s+(o<<14&4294967295|o>>>18),o=t+(s^e&(r^s))+i[4]+3889429448&4294967295,t=r+(o<<20&4294967295|o>>>12),o=e+(r^s&(t^r))+i[9]+568446438&4294967295,e=t+(o<<5&4294967295|o>>>27),o=s+(t^r&(e^t))+i[14]+3275163606&4294967295,s=e+(o<<9&4294967295|o>>>23),o=r+(e^t&(s^e))+i[3]+4107603335&4294967295,r=s+(o<<14&4294967295|o>>>18),o=t+(s^e&(r^s))+i[8]+1163531501&4294967295,t=r+(o<<20&4294967295|o>>>12),o=e+(r^s&(t^r))+i[13]+2850285829&4294967295,e=t+(o<<5&4294967295|o>>>27),o=s+(t^r&(e^t))+i[2]+4243563512&4294967295,s=e+(o<<9&4294967295|o>>>23),o=r+(e^t&(s^e))+i[7]+1735328473&4294967295,r=s+(o<<14&4294967295|o>>>18),o=t+(s^e&(r^s))+i[12]+2368359562&4294967295,t=r+(o<<20&4294967295|o>>>12),o=e+(t^r^s)+i[5]+4294588738&4294967295,e=t+(o<<4&4294967295|o>>>28),o=s+(e^t^r)+i[8]+2272392833&4294967295,s=e+(o<<11&4294967295|o>>>21),o=r+(s^e^t)+i[11]+1839030562&4294967295,r=s+(o<<16&4294967295|o>>>16),o=t+(r^s^e)+i[14]+4259657740&4294967295,t=r+(o<<23&4294967295|o>>>9),o=e+(t^r^s)+i[1]+2763975236&4294967295,e=t+(o<<4&4294967295|o>>>28),o=s+(e^t^r)+i[4]+1272893353&4294967295,s=e+(o<<11&4294967295|o>>>21),o=r+(s^e^t)+i[7]+4139469664&4294967295,r=s+(o<<16&4294967295|o>>>16),o=t+(r^s^e)+i[10]+3200236656&4294967295,t=r+(o<<23&4294967295|o>>>9),o=e+(t^r^s)+i[13]+681279174&4294967295,e=t+(o<<4&4294967295|o>>>28),o=s+(e^t^r)+i[0]+3936430074&4294967295,s=e+(o<<11&4294967295|o>>>21),o=r+(s^e^t)+i[3]+3572445317&4294967295,r=s+(o<<16&4294967295|o>>>16),o=t+(r^s^e)+i[6]+76029189&4294967295,t=r+(o<<23&4294967295|o>>>9),o=e+(t^r^s)+i[9]+3654602809&4294967295,e=t+(o<<4&4294967295|o>>>28),o=s+(e^t^r)+i[12]+3873151461&4294967295,s=e+(o<<11&4294967295|o>>>21),o=r+(s^e^t)+i[15]+530742520&4294967295,r=s+(o<<16&4294967295|o>>>16),o=t+(r^s^e)+i[2]+3299628645&4294967295,t=r+(o<<23&4294967295|o>>>9),o=e+(r^(t|~s))+i[0]+4096336452&4294967295,e=t+(o<<6&4294967295|o>>>26),o=s+(t^(e|~r))+i[7]+1126891415&4294967295,s=e+(o<<10&4294967295|o>>>22),o=r+(e^(s|~t))+i[14]+2878612391&4294967295,r=s+(o<<15&4294967295|o>>>17),o=t+(s^(r|~e))+i[5]+4237533241&4294967295,t=r+(o<<21&4294967295|o>>>11),o=e+(r^(t|~s))+i[12]+1700485571&4294967295,e=t+(o<<6&4294967295|o>>>26),o=s+(t^(e|~r))+i[3]+2399980690&4294967295,s=e+(o<<10&4294967295|o>>>22),o=r+(e^(s|~t))+i[10]+4293915773&4294967295,r=s+(o<<15&4294967295|o>>>17),o=t+(s^(r|~e))+i[1]+2240044497&4294967295,t=r+(o<<21&4294967295|o>>>11),o=e+(r^(t|~s))+i[8]+1873313359&4294967295,e=t+(o<<6&4294967295|o>>>26),o=s+(t^(e|~r))+i[15]+4264355552&4294967295,s=e+(o<<10&4294967295|o>>>22),o=r+(e^(s|~t))+i[6]+2734768916&4294967295,r=s+(o<<15&4294967295|o>>>17),o=t+(s^(r|~e))+i[13]+1309151649&4294967295,t=r+(o<<21&4294967295|o>>>11),o=e+(r^(t|~s))+i[4]+4149444226&4294967295,e=t+(o<<6&4294967295|o>>>26),o=s+(t^(e|~r))+i[11]+3174756917&4294967295,s=e+(o<<10&4294967295|o>>>22),o=r+(e^(s|~t))+i[2]+718787259&4294967295,r=s+(o<<15&4294967295|o>>>17),o=t+(s^(r|~e))+i[9]+3951481745&4294967295,n.g[0]=n.g[0]+e&4294967295,n.g[1]=n.g[1]+(r+(o<<21&4294967295|o>>>11))&4294967295,n.g[2]=n.g[2]+r&4294967295,n.g[3]=n.g[3]+s&4294967295}Ei.prototype.j=function(n,e){e===void 0&&(e=n.length);for(var t=e-this.blockSize,i=this.m,r=this.h,s=0;s<e;){if(r==0)for(;s<=t;)Ud(this,n,s),s+=this.blockSize;if(typeof n=="string"){for(;s<e;)if(i[r++]=n.charCodeAt(s++),r==this.blockSize){Ud(this,i),r=0;break}}else for(;s<e;)if(i[r++]=n[s++],r==this.blockSize){Ud(this,i),r=0;break}}this.h=r,this.i+=e};Ei.prototype.l=function(){var n=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);n[0]=128;for(var e=1;e<n.length-8;++e)n[e]=0;var t=8*this.i;for(e=n.length-8;e<n.length;++e)n[e]=t&255,t/=256;for(this.j(n),n=Array(16),e=t=0;4>e;++e)for(var i=0;32>i;i+=8)n[t++]=this.g[e]>>>i&255;return n};function Ye(n,e){this.h=e;for(var t=[],i=!0,r=n.length-1;0<=r;r--){var s=n[r]|0;i&&s==e||(t[r]=s,i=!1)}this.g=t}var gD={};function bg(n){return-128<=n&&128>n?bM(n,function(e){return new Ye([e|0],0>e?-1:0)}):new Ye([n|0],0>n?-1:0)}function Li(n){if(isNaN(n)||!isFinite(n))return Oo;if(0>n)return Wt(Li(-n));for(var e=[],t=1,i=0;n>=t;i++)e[i]=n/t|0,t*=gp;return new Ye(e,0)}function wb(n,e){if(n.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(n.charAt(0)=="-")return Wt(wb(n.substring(1),e));if(0<=n.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=Li(Math.pow(e,8)),i=Oo,r=0;r<n.length;r+=8){var s=Math.min(8,n.length-r),o=parseInt(n.substring(r,r+s),e);8>s?(s=Li(Math.pow(e,s)),i=i.R(s).add(Li(o))):(i=i.R(t),i=i.add(Li(o)))}return i}var gp=4294967296,Oo=bg(0),mp=bg(1),Dv=bg(16777216);Q=Ye.prototype;Q.ea=function(){if(Kn(this))return-Wt(this).ea();for(var n=0,e=1,t=0;t<this.g.length;t++){var i=this.D(t);n+=(0<=i?i:gp+i)*e,e*=gp}return n};Q.toString=function(n){if(n=n||10,2>n||36<n)throw Error("radix out of range: "+n);if(ir(this))return"0";if(Kn(this))return"-"+Wt(this).toString(n);for(var e=Li(Math.pow(n,6)),t=this,i="";;){var r=Gu(t,e).g;t=ju(t,r.R(e));var s=((0<t.g.length?t.g[0]:t.h)>>>0).toString(n);if(t=r,ir(t))return s+i;for(;6>s.length;)s="0"+s;i=s+i}};Q.D=function(n){return 0>n?0:n<this.g.length?this.g[n]:this.h};function ir(n){if(n.h!=0)return!1;for(var e=0;e<n.g.length;e++)if(n.g[e]!=0)return!1;return!0}function Kn(n){return n.h==-1}Q.X=function(n){return n=ju(this,n),Kn(n)?-1:ir(n)?0:1};function Wt(n){for(var e=n.g.length,t=[],i=0;i<e;i++)t[i]=~n.g[i];return new Ye(t,~n.h).add(mp)}Q.abs=function(){return Kn(this)?Wt(this):this};Q.add=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],i=0,r=0;r<=e;r++){var s=i+(this.D(r)&65535)+(n.D(r)&65535),o=(s>>>16)+(this.D(r)>>>16)+(n.D(r)>>>16);i=o>>>16,s&=65535,o&=65535,t[r]=o<<16|s}return new Ye(t,t[t.length-1]&-2147483648?-1:0)};function ju(n,e){return n.add(Wt(e))}Q.R=function(n){if(ir(this)||ir(n))return Oo;if(Kn(this))return Kn(n)?Wt(this).R(Wt(n)):Wt(Wt(this).R(n));if(Kn(n))return Wt(this.R(Wt(n)));if(0>this.X(Dv)&&0>n.X(Dv))return Li(this.ea()*n.ea());for(var e=this.g.length+n.g.length,t=[],i=0;i<2*e;i++)t[i]=0;for(i=0;i<this.g.length;i++)for(var r=0;r<n.g.length;r++){var s=this.D(i)>>>16,o=this.D(i)&65535,a=n.D(r)>>>16,l=n.D(r)&65535;t[2*i+2*r]+=o*l,jc(t,2*i+2*r),t[2*i+2*r+1]+=s*l,jc(t,2*i+2*r+1),t[2*i+2*r+1]+=o*a,jc(t,2*i+2*r+1),t[2*i+2*r+2]+=s*a,jc(t,2*i+2*r+2)}for(i=0;i<e;i++)t[i]=t[2*i+1]<<16|t[2*i];for(i=e;i<2*e;i++)t[i]=0;return new Ye(t,0)};function jc(n,e){for(;(n[e]&65535)!=n[e];)n[e+1]+=n[e]>>>16,n[e]&=65535,e++}function La(n,e){this.g=n,this.h=e}function Gu(n,e){if(ir(e))throw Error("division by zero");if(ir(n))return new La(Oo,Oo);if(Kn(n))return e=Gu(Wt(n),e),new La(Wt(e.g),Wt(e.h));if(Kn(e))return e=Gu(n,Wt(e)),new La(Wt(e.g),e.h);if(30<n.g.length){if(Kn(n)||Kn(e))throw Error("slowDivide_ only works with positive integers.");for(var t=mp,i=e;0>=i.X(n);)t=Lv(t),i=Lv(i);var r=so(t,1),s=so(i,1);for(i=so(i,2),t=so(t,2);!ir(i);){var o=s.add(i);0>=o.X(n)&&(r=r.add(t),s=o),i=so(i,1),t=so(t,1)}return e=ju(n,r.R(e)),new La(r,e)}for(r=Oo;0<=n.X(e);){for(t=Math.max(1,Math.floor(n.ea()/e.ea())),i=Math.ceil(Math.log(t)/Math.LN2),i=48>=i?1:Math.pow(2,i-48),s=Li(t),o=s.R(e);Kn(o)||0<o.X(n);)t-=i,s=Li(t),o=s.R(e);ir(s)&&(s=mp),r=r.add(s),n=ju(n,o)}return new La(r,n)}Q.gb=function(n){return Gu(this,n).h};Q.and=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],i=0;i<e;i++)t[i]=this.D(i)&n.D(i);return new Ye(t,this.h&n.h)};Q.or=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],i=0;i<e;i++)t[i]=this.D(i)|n.D(i);return new Ye(t,this.h|n.h)};Q.xor=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],i=0;i<e;i++)t[i]=this.D(i)^n.D(i);return new Ye(t,this.h^n.h)};function Lv(n){for(var e=n.g.length+1,t=[],i=0;i<e;i++)t[i]=n.D(i)<<1|n.D(i-1)>>>31;return new Ye(t,n.h)}function so(n,e){var t=e>>5;e%=32;for(var i=n.g.length-t,r=[],s=0;s<i;s++)r[s]=0<e?n.D(s+t)>>>e|n.D(s+t+1)<<32-e:n.D(s+t);return new Ye(r,n.h)}zu.prototype.createWebChannel=zu.prototype.g;Un.prototype.send=Un.prototype.u;Un.prototype.open=Un.prototype.m;Un.prototype.close=Un.prototype.close;Fh.NO_ERROR=0;Fh.TIMEOUT=8;Fh.HTTP_ERROR=6;VS.COMPLETE="complete";FS.EventType=mc;mc.OPEN="a";mc.CLOSE="b";mc.ERROR="c";mc.MESSAGE="d";Bt.prototype.listen=Bt.prototype.O;mt.prototype.listenOnce=mt.prototype.P;mt.prototype.getLastError=mt.prototype.Sa;mt.prototype.getLastErrorCode=mt.prototype.Ia;mt.prototype.getStatus=mt.prototype.da;mt.prototype.getResponseJson=mt.prototype.Wa;mt.prototype.getResponseText=mt.prototype.ja;mt.prototype.send=mt.prototype.ha;mt.prototype.setWithCredentials=mt.prototype.Oa;Ei.prototype.digest=Ei.prototype.l;Ei.prototype.reset=Ei.prototype.reset;Ei.prototype.update=Ei.prototype.j;Ye.prototype.add=Ye.prototype.add;Ye.prototype.multiply=Ye.prototype.R;Ye.prototype.modulo=Ye.prototype.gb;Ye.prototype.compare=Ye.prototype.X;Ye.prototype.toNumber=Ye.prototype.ea;Ye.prototype.toString=Ye.prototype.toString;Ye.prototype.getBits=Ye.prototype.D;Ye.fromNumber=Li;Ye.fromString=wb;var mD=function(){return new zu},yD=function(){return Vh()},$d=Fh,vD=VS,wD=eo,Vv={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},TD=wc,Gc=FS,ED=mt,SD=Ei,ko=Ye;const Fv="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}en.UNAUTHENTICATED=new en(null),en.GOOGLE_CREDENTIALS=new en("google-credentials-uid"),en.FIRST_PARTY=new en("first-party-uid"),en.MOCK_USER=new en("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Sa="10.11.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gs=new ac("@firebase/firestore");function Va(){return Gs.logLevel}function re(n,...e){if(Gs.logLevel<=Ae.DEBUG){const t=e.map(Ig);Gs.debug(`Firestore (${Sa}): ${n}`,...t)}}function hr(n,...e){if(Gs.logLevel<=Ae.ERROR){const t=e.map(Ig);Gs.error(`Firestore (${Sa}): ${n}`,...t)}}function Qo(n,...e){if(Gs.logLevel<=Ae.WARN){const t=e.map(Ig);Gs.warn(`Firestore (${Sa}): ${n}`,...t)}}function Ig(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ee(n="Unexpected state"){const e=`FIRESTORE (${Sa}) INTERNAL ASSERTION FAILED: `+n;throw hr(e),new Error(e)}function Pt(n,e){n||Ee()}function Ve(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class se extends _r{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ps{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tb{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class bD{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(en.UNAUTHENTICATED))}shutdown(){}}class ID{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class CD{constructor(e){this.t=e,this.currentUser=en.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let i=this.i;const r=l=>this.i!==i?(i=this.i,t(l)):Promise.resolve();let s=new Ps;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Ps,e.enqueueRetryable(()=>r(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await r(this.currentUser)})},a=l=>{re("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(re("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Ps)}},0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(i=>this.i!==e?(re("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Pt(typeof i.accessToken=="string"),new Tb(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Pt(e===null||typeof e=="string"),new en(e)}}class AD{constructor(e,t,i){this.l=e,this.h=t,this.P=i,this.type="FirstParty",this.user=en.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class xD{constructor(e,t,i){this.l=e,this.h=t,this.P=i}getToken(){return Promise.resolve(new AD(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(en.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class RD{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class PD{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){const i=s=>{s.error!=null&&re("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,re("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>i(s))};const r=s=>{re("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?r(s):re("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Pt(typeof t.token=="string"),this.R=t.token,new RD(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OD(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kD{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let i="";for(;i.length<20;){const r=OD(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<t&&(i+=e.charAt(r[s]%e.length))}return i}}function ze(n,e){return n<e?-1:n>e?1:0}function Jo(n,e,t){return n.length===e.length&&n.every((i,r)=>t(i,e[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new se(G.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new se(G.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new se(G.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new se(G.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ut.fromMillis(Date.now())}static fromDate(e){return Ut.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*t));return new Ut(t,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ze(this.nanoseconds,e.nanoseconds):ze(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ve{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ve(e)}static min(){return new ve(new Ut(0,0))}static max(){return new ve(new Ut(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jl{constructor(e,t,i){t===void 0?t=0:t>e.length&&Ee(),i===void 0?i=e.length-t:i>e.length-t&&Ee(),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return jl.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof jl?e.forEach(i=>{t.push(i)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let r=0;r<i;r++){const s=e.get(r),o=t.get(r);if(s<o)return-1;if(s>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class dt extends jl{construct(e,t,i){return new dt(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new se(G.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter(r=>r.length>0))}return new dt(t)}static emptyPath(){return new dt([])}}const ND=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class an extends jl{construct(e,t,i){return new an(e,t,i)}static isValidIdentifier(e){return ND.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),an.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new an(["__name__"])}static fromServerFormat(e){const t=[];let i="",r=0;const s=()=>{if(i.length===0)throw new se(G.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let o=!1;for(;r<e.length;){const a=e[r];if(a==="\\"){if(r+1===e.length)throw new se(G.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[r+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new se(G.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=l,r+=2}else a==="`"?(o=!o,r++):a!=="."||o?(i+=a,r++):(s(),r++)}if(s(),o)throw new se(G.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new an(t)}static emptyPath(){return new an([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pe{constructor(e){this.path=e}static fromPath(e){return new pe(dt.fromString(e))}static fromName(e){return new pe(dt.fromString(e).popFirst(5))}static empty(){return new pe(dt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&dt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return dt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new pe(new dt(e.slice()))}}function MD(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,r=ve.fromTimestamp(i===1e9?new Ut(t+1,0):new Ut(t,i));return new Kr(r,pe.empty(),e)}function DD(n){return new Kr(n.readTime,n.key,-1)}class Kr{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new Kr(ve.min(),pe.empty(),-1)}static max(){return new Kr(ve.max(),pe.empty(),-1)}}function LD(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=pe.comparator(n.documentKey,e.documentKey),t!==0?t:ze(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VD="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class FD{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cg(n){if(n.code!==G.FAILED_PRECONDITION||n.message!==VD)throw n;re("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ee(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new U((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(t,s).next(i,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof U?t:U.resolve(t)}catch(t){return U.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):U.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):U.reject(t)}static resolve(e){return new U((t,i)=>{t(e)})}static reject(e){return new U((t,i)=>{i(e)})}static waitFor(e){return new U((t,i)=>{let r=0,s=0,o=!1;e.forEach(a=>{++r,a.next(()=>{++s,o&&s===r&&t()},l=>i(l))}),o=!0,s===r&&t()})}static or(e){let t=U.resolve(!1);for(const i of e)t=t.next(r=>r?U.resolve(r):i());return t}static forEach(e,t){const i=[];return e.forEach((r,s)=>{i.push(t.call(this,r,s))}),this.waitFor(i)}static mapArray(e,t){return new U((i,r)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const c=l;t(e[c]).next(u=>{o[c]=u,++a,a===s&&i(o)},u=>r(u))}})}static doWhile(e,t){return new U((i,r)=>{const s=()=>{e()===!0?t().next(()=>{s()},r):i()};s()})}}function UD(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Sc(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ag{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ie(i),this.se=i=>t.writeSequenceNumber(i))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Ag.oe=-1;function Hh(n){return n==null}function qu(n){return n===0&&1/n==-1/0}function $D(n){return typeof n=="number"&&Number.isInteger(n)&&!qu(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uv(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function bc(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Eb(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et{constructor(e,t){this.comparator=e,this.root=t||Ht.EMPTY}insert(e,t){return new Et(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ht.BLACK,null,null))}remove(e){return new Et(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ht.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(r===0)return t+i.left.size;r<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,i)=>(e(t,i),!1))}toString(){const e=[];return this.inorderTraversal((t,i)=>(e.push(`${t}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new qc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new qc(this.root,e,this.comparator,!1)}getReverseIterator(){return new qc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new qc(this.root,e,this.comparator,!0)}}class qc{constructor(e,t,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?i(e.key,t):1,t&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ht{constructor(e,t,i,r,s){this.key=e,this.value=t,this.color=i??Ht.RED,this.left=r??Ht.EMPTY,this.right=s??Ht.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,r,s){return new Ht(e??this.key,t??this.value,i??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let r=this;const s=i(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,t,i),null):s===0?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Ht.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),t(e,r.key)===0){if(r.right.isEmpty())return Ht.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ht.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ht.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ee();const e=this.left.check();if(e!==this.right.check())throw Ee();return e+(this.isRed()?0:1)}}Ht.EMPTY=null,Ht.RED=!0,Ht.BLACK=!1;Ht.EMPTY=new class{constructor(){this.size=0}get key(){throw Ee()}get value(){throw Ee()}get color(){throw Ee()}get left(){throw Ee()}get right(){throw Ee()}copy(e,t,i,r,s){return this}insert(e,t,i){return new Ht(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xt{constructor(e){this.comparator=e,this.data=new Et(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,i)=>(e(t),!1))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new $v(this.data.getIterator())}getIteratorFrom(e){return new $v(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(i=>{t=t.add(i)}),t}isEqual(e){if(!(e instanceof Xt)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const r=t.getNext().key,s=i.getNext().key;if(this.comparator(r,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Xt(this.comparator);return t.data=e,t}}class $v{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kr{constructor(e){this.fields=e,e.sort(an.comparator)}static empty(){return new kr([])}unionWith(e){let t=new Xt(an.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new kr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Jo(this.fields,e.fields,(t,i)=>t.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sb extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Sb("Invalid base64 string: "+s):s}}(e);return new pn(t)}static fromUint8Array(e){const t=function(r){let s="";for(let o=0;o<r.length;++o)s+=String.fromCharCode(r[o]);return s}(e);return new pn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const i=new Uint8Array(t.length);for(let r=0;r<t.length;r++)i[r]=t.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ze(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}pn.EMPTY_BYTE_STRING=new pn("");const BD=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Yr(n){if(Pt(!!n),typeof n=="string"){let e=0;const t=BD.exec(n);if(Pt(!!t),t[1]){let r=t[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:At(n.seconds),nanos:At(n.nanos)}}function At(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function qs(n){return typeof n=="string"?pn.fromBase64String(n):pn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xg(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function Rg(n){const e=n.mapValue.fields.__previous_value__;return xg(e)?Rg(e):e}function Gl(n){const e=Yr(n.mapValue.fields.__local_write_time__.timestampValue);return new Ut(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zD{constructor(e,t,i,r,s,o,a,l,c){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class ql{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new ql("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof ql&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hc={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Hs(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?xg(n)?4:jD(n)?9007199254740991:10:Ee()}function zi(n,e){if(n===e)return!0;const t=Hs(n);if(t!==Hs(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Gl(n).isEqual(Gl(e));case 3:return function(r,s){if(typeof r.timestampValue=="string"&&typeof s.timestampValue=="string"&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;const o=Yr(r.timestampValue),a=Yr(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(r,s){return qs(r.bytesValue).isEqual(qs(s.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,s){return At(r.geoPointValue.latitude)===At(s.geoPointValue.latitude)&&At(r.geoPointValue.longitude)===At(s.geoPointValue.longitude)}(n,e);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return At(r.integerValue)===At(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){const o=At(r.doubleValue),a=At(s.doubleValue);return o===a?qu(o)===qu(a):isNaN(o)&&isNaN(a)}return!1}(n,e);case 9:return Jo(n.arrayValue.values||[],e.arrayValue.values||[],zi);case 10:return function(r,s){const o=r.mapValue.fields||{},a=s.mapValue.fields||{};if(Uv(o)!==Uv(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!zi(o[l],a[l])))return!1;return!0}(n,e);default:return Ee()}}function Hl(n,e){return(n.values||[]).find(t=>zi(t,e))!==void 0}function Zo(n,e){if(n===e)return 0;const t=Hs(n),i=Hs(e);if(t!==i)return ze(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return ze(n.booleanValue,e.booleanValue);case 2:return function(s,o){const a=At(s.integerValue||s.doubleValue),l=At(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(n,e);case 3:return Bv(n.timestampValue,e.timestampValue);case 4:return Bv(Gl(n),Gl(e));case 5:return ze(n.stringValue,e.stringValue);case 6:return function(s,o){const a=qs(s),l=qs(o);return a.compareTo(l)}(n.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const u=ze(a[c],l[c]);if(u!==0)return u}return ze(a.length,l.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,o){const a=ze(At(s.latitude),At(o.latitude));return a!==0?a:ze(At(s.longitude),At(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(s,o){const a=s.values||[],l=o.values||[];for(let c=0;c<a.length&&c<l.length;++c){const u=Zo(a[c],l[c]);if(u)return u}return ze(a.length,l.length)}(n.arrayValue,e.arrayValue);case 10:return function(s,o){if(s===Hc.mapValue&&o===Hc.mapValue)return 0;if(s===Hc.mapValue)return 1;if(o===Hc.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),c=o.fields||{},u=Object.keys(c);l.sort(),u.sort();for(let h=0;h<l.length&&h<u.length;++h){const f=ze(l[h],u[h]);if(f!==0)return f;const d=Zo(a[l[h]],c[u[h]]);if(d!==0)return d}return ze(l.length,u.length)}(n.mapValue,e.mapValue);default:throw Ee()}}function Bv(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return ze(n,e);const t=Yr(n),i=Yr(e),r=ze(t.seconds,i.seconds);return r!==0?r:ze(t.nanos,i.nanos)}function ea(n){return yp(n)}function yp(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const i=Yr(t);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return qs(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return pe.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let i="[",r=!0;for(const s of t.values||[])r?r=!1:i+=",",i+=yp(s);return i+"]"}(n.arrayValue):"mapValue"in n?function(t){const i=Object.keys(t.fields||{}).sort();let r="{",s=!0;for(const o of i)s?s=!1:r+=",",r+=`${o}:${yp(t.fields[o])}`;return r+"}"}(n.mapValue):Ee()}function zv(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function vp(n){return!!n&&"integerValue"in n}function Pg(n){return!!n&&"arrayValue"in n}function jv(n){return!!n&&"nullValue"in n}function Gv(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Bd(n){return!!n&&"mapValue"in n}function fl(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return bc(n.mapValue.fields,(t,i)=>e.mapValue.fields[t]=fl(i)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=fl(n.arrayValue.values[t]);return e}return Object.assign({},n)}function jD(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oi{constructor(e){this.value=e}static empty(){return new Oi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!Bd(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=fl(t)}setAll(e){let t=an.emptyPath(),i={},r=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){const l=this.getFieldsMap(t);this.applyChanges(l,i,r),i={},r=[],t=a.popLast()}o?i[a.lastSegment()]=fl(o):r.push(a.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,i,r)}delete(e){const t=this.field(e.popLast());Bd(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return zi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=t.mapValue.fields[e.get(i)];Bd(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,i){bc(t,(r,s)=>e[r]=s);for(const r of i)delete e[r]}clone(){return new Oi(fl(this.value))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(e,t,i,r,s,o,a){this.key=e,this.documentType=t,this.version=i,this.readTime=r,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new rn(e,0,ve.min(),ve.min(),ve.min(),Oi.empty(),0)}static newFoundDocument(e,t,i,r){return new rn(e,1,t,ve.min(),i,r,0)}static newNoDocument(e,t){return new rn(e,2,t,ve.min(),ve.min(),Oi.empty(),0)}static newUnknownDocument(e,t){return new rn(e,3,t,ve.min(),ve.min(),Oi.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ve.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Oi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Oi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ve.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof rn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new rn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hu{constructor(e,t){this.position=e,this.inclusive=t}}function qv(n,e,t){let i=0;for(let r=0;r<n.position.length;r++){const s=e[r],o=n.position[r];if(s.field.isKeyField()?i=pe.comparator(pe.fromName(o.referenceValue),t.key):i=Zo(o,t.data.field(s.field)),s.dir==="desc"&&(i*=-1),i!==0)break}return i}function Hv(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!zi(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wl{constructor(e,t="asc"){this.field=e,this.dir=t}}function GD(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bb{}class Rt extends bb{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new HD(e,t,i):t==="array-contains"?new YD(e,i):t==="in"?new XD(e,i):t==="not-in"?new QD(e,i):t==="array-contains-any"?new JD(e,i):new Rt(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new WD(e,i):new KD(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Zo(t,this.value)):t!==null&&Hs(this.value)===Hs(t)&&this.matchesComparison(Zo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ee()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Si extends bb{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new Si(e,t)}matches(e){return Ib(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Ib(n){return n.op==="and"}function Cb(n){return qD(n)&&Ib(n)}function qD(n){for(const e of n.filters)if(e instanceof Si)return!1;return!0}function wp(n){if(n instanceof Rt)return n.field.canonicalString()+n.op.toString()+ea(n.value);if(Cb(n))return n.filters.map(e=>wp(e)).join(",");{const e=n.filters.map(t=>wp(t)).join(",");return`${n.op}(${e})`}}function Ab(n,e){return n instanceof Rt?function(i,r){return r instanceof Rt&&i.op===r.op&&i.field.isEqual(r.field)&&zi(i.value,r.value)}(n,e):n instanceof Si?function(i,r){return r instanceof Si&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((s,o,a)=>s&&Ab(o,r.filters[a]),!0):!1}(n,e):void Ee()}function xb(n){return n instanceof Rt?function(t){return`${t.field.canonicalString()} ${t.op} ${ea(t.value)}`}(n):n instanceof Si?function(t){return t.op.toString()+" {"+t.getFilters().map(xb).join(" ,")+"}"}(n):"Filter"}class HD extends Rt{constructor(e,t,i){super(e,t,i),this.key=pe.fromName(i.referenceValue)}matches(e){const t=pe.comparator(e.key,this.key);return this.matchesComparison(t)}}class WD extends Rt{constructor(e,t){super(e,"in",t),this.keys=Rb("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class KD extends Rt{constructor(e,t){super(e,"not-in",t),this.keys=Rb("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Rb(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(i=>pe.fromName(i.referenceValue))}class YD extends Rt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Pg(t)&&Hl(t.arrayValue,this.value)}}class XD extends Rt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Hl(this.value.arrayValue,t)}}class QD extends Rt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Hl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!Hl(this.value.arrayValue,t)}}class JD extends Rt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Pg(t)||!t.arrayValue.values)&&t.arrayValue.values.some(i=>Hl(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZD{constructor(e,t=null,i=[],r=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function Wv(n,e=null,t=[],i=[],r=null,s=null,o=null){return new ZD(n,e,t,i,r,s,o)}function Og(n){const e=Ve(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(i=>wp(i)).join(","),t+="|ob:",t+=e.orderBy.map(i=>function(s){return s.field.canonicalString()+s.dir}(i)).join(","),Hh(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(i=>ea(i)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(i=>ea(i)).join(",")),e.ue=t}return e.ue}function kg(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!GD(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!Ab(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Hv(n.startAt,e.startAt)&&Hv(n.endAt,e.endAt)}function Tp(n){return pe.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ba{constructor(e,t=null,i=[],r=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function eL(n,e,t,i,r,s,o,a){return new ba(n,e,t,i,r,s,o,a)}function Ng(n){return new ba(n)}function Kv(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function Pb(n){return n.collectionGroup!==null}function pl(n){const e=Ve(n);if(e.ce===null){e.ce=[];const t=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),t.add(s.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Xt(an.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Wl(s,i))}),t.has(an.keyField().canonicalString())||e.ce.push(new Wl(an.keyField(),i))}return e.ce}function Fi(n){const e=Ve(n);return e.le||(e.le=tL(e,pl(n))),e.le}function tL(n,e){if(n.limitType==="F")return Wv(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(r=>{const s=r.dir==="desc"?"asc":"desc";return new Wl(r.field,s)});const t=n.endAt?new Hu(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new Hu(n.startAt.position,n.startAt.inclusive):null;return Wv(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function Ep(n,e){const t=n.filters.concat([e]);return new ba(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Sp(n,e,t){return new ba(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Wh(n,e){return kg(Fi(n),Fi(e))&&n.limitType===e.limitType}function Ob(n){return`${Og(Fi(n))}|lt:${n.limitType}`}function fo(n){return`Query(target=${function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map(r=>xb(r)).join(", ")}]`),Hh(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map(r=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(r)).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map(r=>ea(r)).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map(r=>ea(r)).join(",")),`Target(${i})`}(Fi(n))}; limitType=${n.limitType})`}function Kh(n,e){return e.isFoundDocument()&&function(i,r){const s=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(s):pe.isDocumentKey(i.path)?i.path.isEqual(s):i.path.isImmediateParentOf(s)}(n,e)&&function(i,r){for(const s of pl(i))if(!s.field.isKeyField()&&r.data.field(s.field)===null)return!1;return!0}(n,e)&&function(i,r){for(const s of i.filters)if(!s.matches(r))return!1;return!0}(n,e)&&function(i,r){return!(i.startAt&&!function(o,a,l){const c=qv(o,a,l);return o.inclusive?c<=0:c<0}(i.startAt,pl(i),r)||i.endAt&&!function(o,a,l){const c=qv(o,a,l);return o.inclusive?c>=0:c>0}(i.endAt,pl(i),r))}(n,e)}function nL(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function kb(n){return(e,t)=>{let i=!1;for(const r of pl(n)){const s=iL(r,e,t);if(s!==0)return s;i=i||r.field.isKeyField()}return 0}}function iL(n,e,t){const i=n.field.isKeyField()?pe.comparator(e.key,t.key):function(s,o,a){const l=o.data.field(s),c=a.data.field(s);return l!==null&&c!==null?Zo(l,c):Ee()}(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return Ee()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ia{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[r,s]of i)if(this.equalsFn(r,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return void(r[s]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[t]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){bc(this.inner,(t,i)=>{for(const[r,s]of i)e(r,s)})}isEmpty(){return Eb(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rL=new Et(pe.comparator);function Xr(){return rL}const Nb=new Et(pe.comparator);function Wa(...n){let e=Nb;for(const t of n)e=e.insert(t.key,t);return e}function sL(n){let e=Nb;return n.forEach((t,i)=>e=e.insert(t,i.overlayedDocument)),e}function Ss(){return _l()}function Mb(){return _l()}function _l(){return new Ia(n=>n.toString(),(n,e)=>n.isEqual(e))}const oL=new Xt(pe.comparator);function Le(...n){let e=oL;for(const t of n)e=e.add(t);return e}const aL=new Xt(ze);function lL(){return aL}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Db(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:qu(e)?"-0":e}}function Lb(n){return{integerValue:""+n}}function cL(n,e){return $D(e)?Lb(e):Db(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yh{constructor(){this._=void 0}}function uL(n,e,t){return n instanceof bp?function(r,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&xg(s)&&(s=Rg(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(t,e):n instanceof Wu?Vb(n,e):n instanceof Ku?Fb(n,e):function(r,s){const o=dL(r,s),a=Yv(o)+Yv(r.Pe);return vp(o)&&vp(r.Pe)?Lb(a):Db(r.serializer,a)}(n,e)}function hL(n,e,t){return n instanceof Wu?Vb(n,e):n instanceof Ku?Fb(n,e):t}function dL(n,e){return n instanceof Ip?function(i){return vp(i)||function(s){return!!s&&"doubleValue"in s}(i)}(e)?e:{integerValue:0}:null}class bp extends Yh{}class Wu extends Yh{constructor(e){super(),this.elements=e}}function Vb(n,e){const t=Ub(e);for(const i of n.elements)t.some(r=>zi(r,i))||t.push(i);return{arrayValue:{values:t}}}class Ku extends Yh{constructor(e){super(),this.elements=e}}function Fb(n,e){let t=Ub(e);for(const i of n.elements)t=t.filter(r=>!zi(r,i));return{arrayValue:{values:t}}}class Ip extends Yh{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function Yv(n){return At(n.integerValue||n.doubleValue)}function Ub(n){return Pg(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function fL(n,e){return n.field.isEqual(e.field)&&function(i,r){return i instanceof Wu&&r instanceof Wu||i instanceof Ku&&r instanceof Ku?Jo(i.elements,r.elements,zi):i instanceof Ip&&r instanceof Ip?zi(i.Pe,r.Pe):i instanceof bp&&r instanceof bp}(n.transform,e.transform)}class Os{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Os}static exists(e){return new Os(void 0,e)}static updateTime(e){return new Os(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function cu(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Mg{}function $b(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new _L(n.key,Os.none()):new Dg(n.key,n.data,Os.none());{const t=n.data,i=Oi.empty();let r=new Xt(an.comparator);for(let s of e.fields)if(!r.has(s)){let o=t.field(s);o===null&&s.length>1&&(s=s.popLast(),o=t.field(s)),o===null?i.delete(s):i.set(s,o),r=r.add(s)}return new Xh(n.key,i,new kr(r.toArray()),Os.none())}}function pL(n,e,t){n instanceof Dg?function(r,s,o){const a=r.value.clone(),l=Qv(r.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(n,e,t):n instanceof Xh?function(r,s,o){if(!cu(r.precondition,s))return void s.convertToUnknownDocument(o.version);const a=Qv(r.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(Bb(r)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(n,e,t):function(r,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,t)}function gl(n,e,t,i){return n instanceof Dg?function(s,o,a,l){if(!cu(s.precondition,o))return a;const c=s.value.clone(),u=Jv(s.fieldTransforms,l,o);return c.setAll(u),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(n,e,t,i):n instanceof Xh?function(s,o,a,l){if(!cu(s.precondition,o))return a;const c=Jv(s.fieldTransforms,l,o),u=o.data;return u.setAll(Bb(s)),u.setAll(c),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(h=>h.field))}(n,e,t,i):function(s,o,a){return cu(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(n,e,t)}function Xv(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&Jo(i,r,(s,o)=>fL(s,o))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Dg extends Mg{constructor(e,t,i,r=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Xh extends Mg{constructor(e,t,i,r,s=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function Bb(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}}),e}function Qv(n,e,t){const i=new Map;Pt(n.length===t.length);for(let r=0;r<t.length;r++){const s=n[r],o=s.transform,a=e.data.field(s.field);i.set(s.field,hL(o,a,t[r]))}return i}function Jv(n,e,t){const i=new Map;for(const r of n){const s=r.transform,o=t.data.field(r.field);i.set(r.field,uL(s,o,e))}return i}class _L extends Mg{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gL{constructor(e,t,i,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const s=this.mutations[r];s.key.isEqual(e.key)&&pL(s,e,i[r])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=gl(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=gl(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=Mb();return this.mutations.forEach(r=>{const s=e.get(r.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=t.has(r.key)?null:a;const l=$b(o,a);l!==null&&i.set(r.key,l),o.isValidDocument()||o.convertToNoDocument(ve.min())}),i}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Le())}isEqual(e){return this.batchId===e.batchId&&Jo(this.mutations,e.mutations,(t,i)=>Xv(t,i))&&Jo(this.baseMutations,e.baseMutations,(t,i)=>Xv(t,i))}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mL{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yL{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ct,ke;function zb(n){if(n===void 0)return hr("GRPC error has no .code"),G.UNKNOWN;switch(n){case Ct.OK:return G.OK;case Ct.CANCELLED:return G.CANCELLED;case Ct.UNKNOWN:return G.UNKNOWN;case Ct.DEADLINE_EXCEEDED:return G.DEADLINE_EXCEEDED;case Ct.RESOURCE_EXHAUSTED:return G.RESOURCE_EXHAUSTED;case Ct.INTERNAL:return G.INTERNAL;case Ct.UNAVAILABLE:return G.UNAVAILABLE;case Ct.UNAUTHENTICATED:return G.UNAUTHENTICATED;case Ct.INVALID_ARGUMENT:return G.INVALID_ARGUMENT;case Ct.NOT_FOUND:return G.NOT_FOUND;case Ct.ALREADY_EXISTS:return G.ALREADY_EXISTS;case Ct.PERMISSION_DENIED:return G.PERMISSION_DENIED;case Ct.FAILED_PRECONDITION:return G.FAILED_PRECONDITION;case Ct.ABORTED:return G.ABORTED;case Ct.OUT_OF_RANGE:return G.OUT_OF_RANGE;case Ct.UNIMPLEMENTED:return G.UNIMPLEMENTED;case Ct.DATA_LOSS:return G.DATA_LOSS;default:return Ee()}}(ke=Ct||(Ct={}))[ke.OK=0]="OK",ke[ke.CANCELLED=1]="CANCELLED",ke[ke.UNKNOWN=2]="UNKNOWN",ke[ke.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ke[ke.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ke[ke.NOT_FOUND=5]="NOT_FOUND",ke[ke.ALREADY_EXISTS=6]="ALREADY_EXISTS",ke[ke.PERMISSION_DENIED=7]="PERMISSION_DENIED",ke[ke.UNAUTHENTICATED=16]="UNAUTHENTICATED",ke[ke.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ke[ke.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ke[ke.ABORTED=10]="ABORTED",ke[ke.OUT_OF_RANGE=11]="OUT_OF_RANGE",ke[ke.UNIMPLEMENTED=12]="UNIMPLEMENTED",ke[ke.INTERNAL=13]="INTERNAL",ke[ke.UNAVAILABLE=14]="UNAVAILABLE",ke[ke.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vL(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wL=new ko([4294967295,4294967295],0);function Zv(n){const e=vL().encode(n),t=new SD;return t.update(e),new Uint8Array(t.digest())}function e0(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new ko([t,i],0),new ko([r,s],0)]}class Lg{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new Ka(`Invalid padding: ${t}`);if(i<0)throw new Ka(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Ka(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new Ka(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=ko.fromNumber(this.Ie)}Ee(e,t,i){let r=e.add(t.multiply(ko.fromNumber(i)));return r.compare(wL)===1&&(r=new ko([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const t=Zv(e),[i,r]=e0(t);for(let s=0;s<this.hashCount;s++){const o=this.Ee(i,r,s);if(!this.de(o))return!1}return!0}static create(e,t,i){const r=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new Lg(s,r,t);return i.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const t=Zv(e),[i,r]=e0(t);for(let s=0;s<this.hashCount;s++){const o=this.Ee(i,r,s);this.Ae(o)}}Ae(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class Ka extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qh{constructor(e,t,i,r,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const r=new Map;return r.set(e,Ic.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new Qh(ve.min(),r,new Et(ze),Xr(),Le())}}class Ic{constructor(e,t,i,r,s){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new Ic(i,t,Le(),Le(),Le())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uu{constructor(e,t,i,r){this.Re=e,this.removedTargetIds=t,this.key=i,this.Ve=r}}class jb{constructor(e,t){this.targetId=e,this.me=t}}class Gb{constructor(e,t,i=pn.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=r}}class t0{constructor(){this.fe=0,this.ge=i0(),this.pe=pn.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}Ce(){let e=Le(),t=Le(),i=Le();return this.ge.forEach((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:i=i.add(r);break;default:Ee()}}),new Ic(this.pe,this.ye,e,t,i)}ve(){this.we=!1,this.ge=i0()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Pt(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class TL{constructor(e){this.Le=e,this.Be=new Map,this.ke=Xr(),this.qe=n0(),this.Qe=new Et(ze)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{const i=this.Ge(t);switch(e.state){case 0:this.ze(t)&&i.De(e.resumeToken);break;case 1:i.Oe(),i.Se||i.ve(),i.De(e.resumeToken);break;case 2:i.Oe(),i.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(i.Ne(),i.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),i.De(e.resumeToken));break;default:Ee()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((i,r)=>{this.ze(r)&&t(r)})}He(e){const t=e.targetId,i=e.me.count,r=this.Je(t);if(r){const s=r.target;if(Tp(s))if(i===0){const o=new pe(s.path);this.Ue(t,o,rn.newNoDocument(o,ve.min()))}else Pt(i===1);else{const o=this.Ye(t);if(o!==i){const a=this.Ze(e),l=a?this.Xe(a,e,o):1;if(l!==0){this.je(t);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,c)}}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:s=0}=t;let o,a;try{o=qs(i).toUint8Array()}catch(l){if(l instanceof Sb)return Qo("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new Lg(o,r,s)}catch(l){return Qo(l instanceof Ka?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(e,t,i){return t.me.count===i-this.nt(e,t.targetId)?0:2}nt(e,t){const i=this.Le.getRemoteKeysForTarget(t);let r=0;return i.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(t,s,null),r++)}),r}rt(e){const t=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&Tp(a.target)){const l=new pe(a.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,rn.newNoDocument(l,e))}s.be&&(t.set(o,s.Ce()),s.ve())}});let i=Le();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Je(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(i=i.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const r=new Qh(e,t,this.Qe,this.ke,i);return this.ke=Xr(),this.qe=n0(),this.Qe=new Et(ze),r}$e(e,t){if(!this.ze(e))return;const i=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,i),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,i){if(!this.ze(e))return;const r=this.Ge(e);this.it(e,t)?r.Fe(t,1):r.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),i&&(this.ke=this.ke.insert(t,i))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).Ce();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new t0,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Xt(ze),this.qe=this.qe.insert(e,t)),t}ze(e){const t=this.Je(e)!==null;return t||re("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new t0),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function n0(){return new Et(pe.comparator)}function i0(){return new Et(pe.comparator)}const EL={asc:"ASCENDING",desc:"DESCENDING"},SL={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},bL={and:"AND",or:"OR"};class IL{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Cp(n,e){return n.useProto3Json||Hh(e)?e:{value:e}}function Ap(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function qb(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function No(n){return Pt(!!n),ve.fromTimestamp(function(t){const i=Yr(t);return new Ut(i.seconds,i.nanos)}(n))}function Hb(n,e){return xp(n,e).canonicalString()}function xp(n,e){const t=function(r){return new dt(["projects",r.projectId,"databases",r.database])}(n).child("documents");return e===void 0?t:t.child(e)}function Wb(n){const e=dt.fromString(n);return Pt(Jb(e)),e}function zd(n,e){const t=Wb(e);if(t.get(1)!==n.databaseId.projectId)throw new se(G.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new se(G.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new pe(Yb(t))}function Kb(n,e){return Hb(n.databaseId,e)}function CL(n){const e=Wb(n);return e.length===4?dt.emptyPath():Yb(e)}function r0(n){return new dt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Yb(n){return Pt(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function AL(n,e){let t;if("targetChange"in e){e.targetChange;const i=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:Ee()}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],s=function(c,u){return c.useProto3Json?(Pt(u===void 0||typeof u=="string"),pn.fromBase64String(u||"")):(Pt(u===void 0||u instanceof Buffer||u instanceof Uint8Array),pn.fromUint8Array(u||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const u=c.code===void 0?G.UNKNOWN:zb(c.code);return new se(u,c.message||"")}(o);t=new Gb(i,r,s,a||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const r=zd(n,i.document.name),s=No(i.document.updateTime),o=i.document.createTime?No(i.document.createTime):ve.min(),a=new Oi({mapValue:{fields:i.document.fields}}),l=rn.newFoundDocument(r,s,o,a),c=i.targetIds||[],u=i.removedTargetIds||[];t=new uu(c,u,l.key,l)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const r=zd(n,i.document),s=i.readTime?No(i.readTime):ve.min(),o=rn.newNoDocument(r,s),a=i.removedTargetIds||[];t=new uu([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const r=zd(n,i.document),s=i.removedTargetIds||[];t=new uu([],s,r,null)}else{if(!("filter"in e))return Ee();{e.filter;const i=e.filter;i.targetId;const{count:r=0,unchangedNames:s}=i,o=new yL(r,s),a=i.targetId;t=new jb(a,o)}}return t}function xL(n,e){return{documents:[Kb(n,e.path)]}}function RL(n,e){const t={structuredQuery:{}},i=e.path;let r;e.collectionGroup!==null?(r=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=Kb(n,r);const s=function(c){if(c.length!==0)return Qb(Si.create(c,"and"))}(e.filters);s&&(t.structuredQuery.where=s);const o=function(c){if(c.length!==0)return c.map(u=>function(f){return{field:po(f.field),direction:kL(f.dir)}}(u))}(e.orderBy);o&&(t.structuredQuery.orderBy=o);const a=Cp(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:t,parent:r}}function PL(n){let e=CL(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let r=null;if(i>0){Pt(i===1);const u=t.from[0];u.allDescendants?r=u.collectionId:e=e.child(u.collectionId)}let s=[];t.where&&(s=function(h){const f=Xb(h);return f instanceof Si&&Cb(f)?f.getFilters():[f]}(t.where));let o=[];t.orderBy&&(o=function(h){return h.map(f=>function(_){return new Wl(_o(_.field),function(g){switch(g){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(_.direction))}(f))}(t.orderBy));let a=null;t.limit&&(a=function(h){let f;return f=typeof h=="object"?h.value:h,Hh(f)?null:f}(t.limit));let l=null;t.startAt&&(l=function(h){const f=!!h.before,d=h.values||[];return new Hu(d,f)}(t.startAt));let c=null;return t.endAt&&(c=function(h){const f=!h.before,d=h.values||[];return new Hu(d,f)}(t.endAt)),eL(e,r,o,s,a,"F",l,c)}function OL(n,e){const t=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ee()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function Xb(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=_o(t.unaryFilter.field);return Rt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=_o(t.unaryFilter.field);return Rt.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=_o(t.unaryFilter.field);return Rt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=_o(t.unaryFilter.field);return Rt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Ee()}}(n):n.fieldFilter!==void 0?function(t){return Rt.create(_o(t.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ee()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Si.create(t.compositeFilter.filters.map(i=>Xb(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return Ee()}}(t.compositeFilter.op))}(n):Ee()}function kL(n){return EL[n]}function NL(n){return SL[n]}function ML(n){return bL[n]}function po(n){return{fieldPath:n.canonicalString()}}function _o(n){return an.fromServerFormat(n.fieldPath)}function Qb(n){return n instanceof Rt?function(t){if(t.op==="=="){if(Gv(t.value))return{unaryFilter:{field:po(t.field),op:"IS_NAN"}};if(jv(t.value))return{unaryFilter:{field:po(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Gv(t.value))return{unaryFilter:{field:po(t.field),op:"IS_NOT_NAN"}};if(jv(t.value))return{unaryFilter:{field:po(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:po(t.field),op:NL(t.op),value:t.value}}}(n):n instanceof Si?function(t){const i=t.getFilters().map(r=>Qb(r));return i.length===1?i[0]:{compositeFilter:{op:ML(t.op),filters:i}}}(n):Ee()}function Jb(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nr{constructor(e,t,i,r,s=ve.min(),o=ve.min(),a=pn.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Nr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Nr(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Nr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Nr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DL{constructor(e){this.ut=e}}function LL(n){const e=PL({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Sp(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VL{constructor(){this.on=new FL}addToCollectionParentIndex(e,t){return this.on.add(t),U.resolve()}getCollectionParents(e,t){return U.resolve(this.on.getEntries(t))}addFieldIndex(e,t){return U.resolve()}deleteFieldIndex(e,t){return U.resolve()}deleteAllFieldIndexes(e){return U.resolve()}createTargetIndexes(e,t){return U.resolve()}getDocumentsMatchingTarget(e,t){return U.resolve(null)}getIndexType(e,t){return U.resolve(0)}getFieldIndexes(e,t){return U.resolve([])}getNextCollectionGroupToUpdate(e){return U.resolve(null)}getMinOffset(e,t){return U.resolve(Kr.min())}getMinOffsetFromCollectionGroup(e,t){return U.resolve(Kr.min())}updateCollectionGroup(e,t,i){return U.resolve()}updateIndexEntries(e,t){return U.resolve()}}class FL{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),r=this.index[t]||new Xt(dt.comparator),s=!r.has(i);return this.index[t]=r.add(i),s}has(e){const t=e.lastSegment(),i=e.popLast(),r=this.index[t];return r&&r.has(i)}getEntries(e){return(this.index[e]||new Xt(dt.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ta{constructor(e){this.xn=e}next(){return this.xn+=2,this.xn}static On(){return new ta(0)}static Nn(){return new ta(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UL{constructor(){this.changes=new Ia(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,rn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?U.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $L{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BL{constructor(e,t,i,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,t))).next(r=>(i!==null&&gl(i.mutation,r,kr.empty(),Ut.now()),r))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.getLocalViewOfDocuments(e,i,Le()).next(()=>i))}getLocalViewOfDocuments(e,t,i=Le()){const r=Ss();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,i).next(s=>{let o=Wa();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){const i=Ss();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,Le()))}populateOverlays(e,t,i){const r=[];return i.forEach(s=>{t.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(e,r).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,i,r){let s=Xr();const o=_l(),a=function(){return _l()}();return t.forEach((l,c)=>{const u=i.get(c.key);r.has(c.key)&&(u===void 0||u.mutation instanceof Xh)?s=s.insert(c.key,c):u!==void 0?(o.set(c.key,u.mutation.getFieldMask()),gl(u.mutation,c,u.mutation.getFieldMask(),Ut.now())):o.set(c.key,kr.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((c,u)=>o.set(c,u)),t.forEach((c,u)=>{var h;return a.set(c,new $L(u,(h=o.get(c))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(e,t){const i=_l();let r=new Et((o,a)=>o-a),s=Le();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=t.get(l);if(c===null)return;let u=i.get(l)||kr.empty();u=a.applyToLocalView(c,u),i.set(l,u);const h=(r.get(a.batchId)||Le()).add(l);r=r.insert(a.batchId,h)})}).next(()=>{const o=[],a=r.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,u=l.value,h=Mb();u.forEach(f=>{if(!s.has(f)){const d=$b(t.get(f),i.get(f));d!==null&&h.set(f,d),s=s.add(f)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,h))}return U.waitFor(o)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,t,i,r){return function(o){return pe.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Pb(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,r):this.getDocumentsMatchingCollectionQuery(e,t,i,r)}getNextDocuments(e,t,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,r).next(s=>{const o=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,r-s.size):U.resolve(Ss());let a=-1,l=s;return o.next(c=>U.forEach(c,(u,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),s.get(u)?U.resolve():this.remoteDocumentCache.getEntry(e,u).next(f=>{l=l.insert(u,f)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,l,c,Le())).next(u=>({batchId:a,changes:sL(u)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new pe(t)).next(i=>{let r=Wa();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,t,i,r){const s=t.collectionGroup;let o=Wa();return this.indexManager.getCollectionParents(e,s).next(a=>U.forEach(a,l=>{const c=function(h,f){return new ba(f,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(t,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,i,r).next(u=>{u.forEach((h,f)=>{o=o.insert(h,f)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,i,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,s,r))).next(o=>{s.forEach((l,c)=>{const u=c.getKey();o.get(u)===null&&(o=o.insert(u,rn.newInvalidDocument(u)))});let a=Wa();return o.forEach((l,c)=>{const u=s.get(l);u!==void 0&&gl(u.mutation,c,kr.empty(),Ut.now()),Kh(t,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zL{constructor(e){this.serializer=e,this.ur=new Map,this.cr=new Map}getBundleMetadata(e,t){return U.resolve(this.ur.get(t))}saveBundleMetadata(e,t){return this.ur.set(t.id,function(r){return{id:r.id,version:r.version,createTime:No(r.createTime)}}(t)),U.resolve()}getNamedQuery(e,t){return U.resolve(this.cr.get(t))}saveNamedQuery(e,t){return this.cr.set(t.name,function(r){return{name:r.name,query:LL(r.bundledQuery),readTime:No(r.readTime)}}(t)),U.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jL{constructor(){this.overlays=new Et(pe.comparator),this.lr=new Map}getOverlay(e,t){return U.resolve(this.overlays.get(t))}getOverlays(e,t){const i=Ss();return U.forEach(t,r=>this.getOverlay(e,r).next(s=>{s!==null&&i.set(r,s)})).next(()=>i)}saveOverlays(e,t,i){return i.forEach((r,s)=>{this.lt(e,t,s)}),U.resolve()}removeOverlaysForBatchId(e,t,i){const r=this.lr.get(i);return r!==void 0&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.lr.delete(i)),U.resolve()}getOverlaysForCollection(e,t,i){const r=Ss(),s=t.length+1,o=new pe(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!t.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>i&&r.set(l.getKey(),l)}return U.resolve(r)}getOverlaysForCollectionGroup(e,t,i,r){let s=new Et((c,u)=>c-u);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===t&&c.largestBatchId>i){let u=s.get(c.largestBatchId);u===null&&(u=Ss(),s=s.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const a=Ss(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,u)=>a.set(c,u)),!(a.size()>=r)););return U.resolve(a)}lt(e,t,i){const r=this.overlays.get(i.key);if(r!==null){const o=this.lr.get(r.largestBatchId).delete(i.key);this.lr.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(i.key,new mL(t,i));let s=this.lr.get(t);s===void 0&&(s=Le(),this.lr.set(t,s)),this.lr.set(t,s.add(i.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vg{constructor(){this.hr=new Xt(Dt.Pr),this.Ir=new Xt(Dt.Tr)}isEmpty(){return this.hr.isEmpty()}addReference(e,t){const i=new Dt(e,t);this.hr=this.hr.add(i),this.Ir=this.Ir.add(i)}Er(e,t){e.forEach(i=>this.addReference(i,t))}removeReference(e,t){this.dr(new Dt(e,t))}Ar(e,t){e.forEach(i=>this.removeReference(i,t))}Rr(e){const t=new pe(new dt([])),i=new Dt(t,e),r=new Dt(t,e+1),s=[];return this.Ir.forEachInRange([i,r],o=>{this.dr(o),s.push(o.key)}),s}Vr(){this.hr.forEach(e=>this.dr(e))}dr(e){this.hr=this.hr.delete(e),this.Ir=this.Ir.delete(e)}mr(e){const t=new pe(new dt([])),i=new Dt(t,e),r=new Dt(t,e+1);let s=Le();return this.Ir.forEachInRange([i,r],o=>{s=s.add(o.key)}),s}containsKey(e){const t=new Dt(e,0),i=this.hr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class Dt{constructor(e,t){this.key=e,this.gr=t}static Pr(e,t){return pe.comparator(e.key,t.key)||ze(e.gr,t.gr)}static Tr(e,t){return ze(e.gr,t.gr)||pe.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GL{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.pr=1,this.yr=new Xt(Dt.Pr)}checkEmpty(e){return U.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,r){const s=this.pr;this.pr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new gL(s,t,i,r);this.mutationQueue.push(o);for(const a of r)this.yr=this.yr.add(new Dt(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return U.resolve(o)}lookupMutationBatch(e,t){return U.resolve(this.wr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,r=this.Sr(i),s=r<0?0:r;return U.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return U.resolve(this.mutationQueue.length===0?-1:this.pr-1)}getAllMutationBatches(e){return U.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new Dt(t,0),r=new Dt(t,Number.POSITIVE_INFINITY),s=[];return this.yr.forEachInRange([i,r],o=>{const a=this.wr(o.gr);s.push(a)}),U.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Xt(ze);return t.forEach(r=>{const s=new Dt(r,0),o=new Dt(r,Number.POSITIVE_INFINITY);this.yr.forEachInRange([s,o],a=>{i=i.add(a.gr)})}),U.resolve(this.br(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,r=i.length+1;let s=i;pe.isDocumentKey(s)||(s=s.child(""));const o=new Dt(new pe(s),0);let a=new Xt(ze);return this.yr.forEachWhile(l=>{const c=l.key.path;return!!i.isPrefixOf(c)&&(c.length===r&&(a=a.add(l.gr)),!0)},o),U.resolve(this.br(a))}br(e){const t=[];return e.forEach(i=>{const r=this.wr(i);r!==null&&t.push(r)}),t}removeMutationBatch(e,t){Pt(this.Dr(t.batchId,"removed")===0),this.mutationQueue.shift();let i=this.yr;return U.forEach(t.mutations,r=>{const s=new Dt(r.key,t.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.yr=i})}Fn(e){}containsKey(e,t){const i=new Dt(t,0),r=this.yr.firstAfterOrEqual(i);return U.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,U.resolve()}Dr(e,t){return this.Sr(e)}Sr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}wr(e){const t=this.Sr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qL{constructor(e){this.Cr=e,this.docs=function(){return new Et(pe.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,r=this.docs.get(i),s=r?r.size:0,o=this.Cr(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return U.resolve(i?i.document.mutableCopy():rn.newInvalidDocument(t))}getEntries(e,t){let i=Xr();return t.forEach(r=>{const s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():rn.newInvalidDocument(r))}),U.resolve(i)}getDocumentsMatchingQuery(e,t,i,r){let s=Xr();const o=t.path,a=new pe(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:u}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||LD(DD(u),i)<=0||(r.has(u.key)||Kh(t,u))&&(s=s.insert(u.key,u.mutableCopy()))}return U.resolve(s)}getAllFromCollectionGroup(e,t,i,r){Ee()}vr(e,t){return U.forEach(this.docs,i=>t(i))}newChangeBuffer(e){return new HL(this)}getSize(e){return U.resolve(this.size)}}class HL extends UL{constructor(e){super(),this._r=e}applyChanges(e){const t=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?t.push(this._r.addEntry(e,r)):this._r.removeEntry(i)}),U.waitFor(t)}getFromCache(e,t){return this._r.getEntry(e,t)}getAllFromCache(e,t){return this._r.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WL{constructor(e){this.persistence=e,this.Fr=new Ia(t=>Og(t),kg),this.lastRemoteSnapshotVersion=ve.min(),this.highestTargetId=0,this.Mr=0,this.Or=new Vg,this.targetCount=0,this.Nr=ta.On()}forEachTarget(e,t){return this.Fr.forEach((i,r)=>t(r)),U.resolve()}getLastRemoteSnapshotVersion(e){return U.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return U.resolve(this.Mr)}allocateTargetId(e){return this.highestTargetId=this.Nr.next(),U.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.Mr&&(this.Mr=t),U.resolve()}kn(e){this.Fr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Nr=new ta(t),this.highestTargetId=t),e.sequenceNumber>this.Mr&&(this.Mr=e.sequenceNumber)}addTargetData(e,t){return this.kn(t),this.targetCount+=1,U.resolve()}updateTargetData(e,t){return this.kn(t),U.resolve()}removeTargetData(e,t){return this.Fr.delete(t.target),this.Or.Rr(t.targetId),this.targetCount-=1,U.resolve()}removeTargets(e,t,i){let r=0;const s=[];return this.Fr.forEach((o,a)=>{a.sequenceNumber<=t&&i.get(a.targetId)===null&&(this.Fr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),U.waitFor(s).next(()=>r)}getTargetCount(e){return U.resolve(this.targetCount)}getTargetData(e,t){const i=this.Fr.get(t)||null;return U.resolve(i)}addMatchingKeys(e,t,i){return this.Or.Er(t,i),U.resolve()}removeMatchingKeys(e,t,i){this.Or.Ar(t,i);const r=this.persistence.referenceDelegate,s=[];return r&&t.forEach(o=>{s.push(r.markPotentiallyOrphaned(e,o))}),U.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Or.Rr(t),U.resolve()}getMatchingKeysForTargetId(e,t){const i=this.Or.mr(t);return U.resolve(i)}containsKey(e,t){return U.resolve(this.Or.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KL{constructor(e,t){this.Lr={},this.overlays={},this.Br=new Ag(0),this.kr=!1,this.kr=!0,this.referenceDelegate=e(this),this.qr=new WL(this),this.indexManager=new VL,this.remoteDocumentCache=function(r){return new qL(r)}(i=>this.referenceDelegate.Qr(i)),this.serializer=new DL(t),this.Kr=new zL(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.kr=!1,Promise.resolve()}get started(){return this.kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new jL,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.Lr[e.toKey()];return i||(i=new GL(t,this.referenceDelegate),this.Lr[e.toKey()]=i),i}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Kr}runTransaction(e,t,i){re("MemoryPersistence","Starting transaction:",e);const r=new YL(this.Br.next());return this.referenceDelegate.$r(),i(r).next(s=>this.referenceDelegate.Ur(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}Wr(e,t){return U.or(Object.values(this.Lr).map(i=>()=>i.containsKey(e,t)))}}class YL extends FD{constructor(e){super(),this.currentSequenceNumber=e}}class Fg{constructor(e){this.persistence=e,this.Gr=new Vg,this.zr=null}static jr(e){return new Fg(e)}get Hr(){if(this.zr)return this.zr;throw Ee()}addReference(e,t,i){return this.Gr.addReference(i,t),this.Hr.delete(i.toString()),U.resolve()}removeReference(e,t,i){return this.Gr.removeReference(i,t),this.Hr.add(i.toString()),U.resolve()}markPotentiallyOrphaned(e,t){return this.Hr.add(t.toString()),U.resolve()}removeTarget(e,t){this.Gr.Rr(t.targetId).forEach(r=>this.Hr.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next(r=>{r.forEach(s=>this.Hr.add(s.toString()))}).next(()=>i.removeTargetData(e,t))}$r(){this.zr=new Set}Ur(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return U.forEach(this.Hr,i=>{const r=pe.fromPath(i);return this.Jr(e,r).next(s=>{s||t.removeEntry(r,ve.min())})}).next(()=>(this.zr=null,t.apply(e)))}updateLimboDocument(e,t){return this.Jr(e,t).next(i=>{i?this.Hr.delete(t.toString()):this.Hr.add(t.toString())})}Qr(e){return 0}Jr(e,t){return U.or([()=>U.resolve(this.Gr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Wr(e,t)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ug{constructor(e,t,i,r){this.targetId=e,this.fromCache=t,this.ki=i,this.qi=r}static Qi(e,t){let i=Le(),r=Le();for(const s of t.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new Ug(e,t.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XL{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QL{constructor(){this.Ki=!1,this.$i=!1,this.Ui=100,this.Wi=function(){return aR()?8:UD(yi())>0?6:4}()}initialize(e,t){this.Gi=e,this.indexManager=t,this.Ki=!0}getDocumentsMatchingQuery(e,t,i,r){const s={result:null};return this.zi(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ji(e,t,r,i).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new XL;return this.Hi(e,t,o).next(a=>{if(s.result=a,this.$i)return this.Ji(e,t,o,a.size)})}).next(()=>s.result)}Ji(e,t,i,r){return i.documentReadCount<this.Ui?(Va()<=Ae.DEBUG&&re("QueryEngine","SDK will not create cache indexes for query:",fo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Ui,"documents"),U.resolve()):(Va()<=Ae.DEBUG&&re("QueryEngine","Query:",fo(t),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.Wi*r?(Va()<=Ae.DEBUG&&re("QueryEngine","The SDK decides to create cache indexes for query:",fo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Fi(t))):U.resolve())}zi(e,t){if(Kv(t))return U.resolve(null);let i=Fi(t);return this.indexManager.getIndexType(e,i).next(r=>r===0?null:(t.limit!==null&&r===1&&(t=Sp(t,null,"F"),i=Fi(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next(s=>{const o=Le(...s);return this.Gi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,i).next(l=>{const c=this.Yi(t,a);return this.Zi(t,c,o,l.readTime)?this.zi(e,Sp(t,null,"F")):this.Xi(e,c,t,l)}))})))}ji(e,t,i,r){return Kv(t)||r.isEqual(ve.min())?U.resolve(null):this.Gi.getDocuments(e,i).next(s=>{const o=this.Yi(t,s);return this.Zi(t,o,i,r)?U.resolve(null):(Va()<=Ae.DEBUG&&re("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),fo(t)),this.Xi(e,o,t,MD(r,-1)).next(a=>a))})}Yi(e,t){let i=new Xt(kb(e));return t.forEach((r,s)=>{Kh(e,s)&&(i=i.add(s))}),i}Zi(e,t,i,r){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Hi(e,t,i){return Va()<=Ae.DEBUG&&re("QueryEngine","Using full collection scan to execute query:",fo(t)),this.Gi.getDocumentsMatchingQuery(e,t,Kr.min(),i)}Xi(e,t,i,r){return this.Gi.getDocumentsMatchingQuery(e,i,r).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JL{constructor(e,t,i,r){this.persistence=e,this.es=t,this.serializer=r,this.ts=new Et(ze),this.ns=new Ia(s=>Og(s),kg),this.rs=new Map,this.ss=e.getRemoteDocumentCache(),this.qr=e.getTargetCache(),this.Kr=e.getBundleCache(),this.os(i)}os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new BL(this.ss,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ss.setIndexManager(this.indexManager),this.es.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ts))}}function ZL(n,e,t,i){return new JL(n,e,t,i)}async function Zb(n,e){const t=Ve(n);return await t.persistence.runTransaction("Handle user change","readonly",i=>{let r;return t.mutationQueue.getAllMutationBatches(i).next(s=>(r=s,t.os(e),t.mutationQueue.getAllMutationBatches(i))).next(s=>{const o=[],a=[];let l=Le();for(const c of r){o.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}for(const c of s){a.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}return t.localDocuments.getDocuments(i,l).next(c=>({_s:c,removedBatchIds:o,addedBatchIds:a}))})})}function eI(n){const e=Ve(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.qr.getLastRemoteSnapshotVersion(t))}function eV(n,e){const t=Ve(n),i=e.snapshotVersion;let r=t.ts;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=t.ss.newChangeBuffer({trackRemovals:!0});r=t.ts;const a=[];e.targetChanges.forEach((u,h)=>{const f=r.get(h);if(!f)return;a.push(t.qr.removeMatchingKeys(s,u.removedDocuments,h).next(()=>t.qr.addMatchingKeys(s,u.addedDocuments,h)));let d=f.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(h)!==null?d=d.withResumeToken(pn.EMPTY_BYTE_STRING,ve.min()).withLastLimboFreeSnapshotVersion(ve.min()):u.resumeToken.approximateByteSize()>0&&(d=d.withResumeToken(u.resumeToken,i)),r=r.insert(h,d),function(p,g,m){return p.resumeToken.approximateByteSize()===0||g.snapshotVersion.toMicroseconds()-p.snapshotVersion.toMicroseconds()>=3e8?!0:m.addedDocuments.size+m.modifiedDocuments.size+m.removedDocuments.size>0}(f,d,u)&&a.push(t.qr.updateTargetData(s,d))});let l=Xr(),c=Le();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,u))}),a.push(tV(s,o,e.documentUpdates).next(u=>{l=u.us,c=u.cs})),!i.isEqual(ve.min())){const u=t.qr.getLastRemoteSnapshotVersion(s).next(h=>t.qr.setTargetsMetadata(s,s.currentSequenceNumber,i));a.push(u)}return U.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(t.ts=r,s))}function tV(n,e,t){let i=Le(),r=Le();return t.forEach(s=>i=i.add(s)),e.getEntries(n,i).next(s=>{let o=Xr();return t.forEach((a,l)=>{const c=s.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(r=r.add(a)),l.isNoDocument()&&l.version.isEqual(ve.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):re("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{us:o,cs:r}})}function nV(n,e){const t=Ve(n);return t.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return t.qr.getTargetData(i,e).next(s=>s?(r=s,U.resolve(r)):t.qr.allocateTargetId(i).next(o=>(r=new Nr(e,o,"TargetPurposeListen",i.currentSequenceNumber),t.qr.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=t.ts.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(t.ts=t.ts.insert(i.targetId,i),t.ns.set(e,i.targetId)),i})}async function Rp(n,e,t){const i=Ve(n),r=i.ts.get(e),s=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",s,o=>i.persistence.referenceDelegate.removeTarget(o,r))}catch(o){if(!Sc(o))throw o;re("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}i.ts=i.ts.remove(e),i.ns.delete(r.target)}function s0(n,e,t){const i=Ve(n);let r=ve.min(),s=Le();return i.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,u){const h=Ve(l),f=h.ns.get(u);return f!==void 0?U.resolve(h.ts.get(f)):h.qr.getTargetData(c,u)}(i,o,Fi(e)).next(a=>{if(a)return r=a.lastLimboFreeSnapshotVersion,i.qr.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>i.es.getDocumentsMatchingQuery(o,e,t?r:ve.min(),t?s:Le())).next(a=>(iV(i,nL(e),a),{documents:a,ls:s})))}function iV(n,e,t){let i=n.rs.get(e)||ve.min();t.forEach((r,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),n.rs.set(e,i)}class o0{constructor(){this.activeTargetIds=lL()}ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}As(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Es(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class rV{constructor(){this.eo=new o0,this.no={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e){return this.eo.ds(e),this.no[e]||"not-current"}updateQueryState(e,t,i){this.no[e]=t}removeLocalQueryTarget(e){this.eo.As(e)}isLocalQueryTarget(e){return this.eo.activeTargetIds.has(e)}clearQueryState(e){delete this.no[e]}getAllActiveQueryTargets(){return this.eo.activeTargetIds}isActiveQueryTarget(e){return this.eo.activeTargetIds.has(e)}start(){return this.eo=new o0,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sV{ro(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a0{constructor(){this.io=()=>this.so(),this.oo=()=>this._o(),this.ao=[],this.uo()}ro(e){this.ao.push(e)}shutdown(){window.removeEventListener("online",this.io),window.removeEventListener("offline",this.oo)}uo(){window.addEventListener("online",this.io),window.addEventListener("offline",this.oo)}so(){re("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ao)e(0)}_o(){re("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ao)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wc=null;function jd(){return Wc===null?Wc=function(){return 268435456+Math.round(2147483648*Math.random())}():Wc++,"0x"+Wc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oV={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aV{constructor(e){this.co=e.co,this.lo=e.lo}ho(e){this.Po=e}Io(e){this.To=e}Eo(e){this.Ao=e}onMessage(e){this.Ro=e}close(){this.lo()}send(e){this.co(e)}Vo(){this.Po()}mo(){this.To()}fo(e){this.Ao(e)}po(e){this.Ro(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jt="WebChannelConnection";class lV extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const i=t.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.yo=i+"://"+t.host,this.wo=`projects/${r}/databases/${s}`,this.So=this.databaseId.database==="(default)"?`project_id=${r}`:`project_id=${r}&database_id=${s}`}get bo(){return!1}Do(t,i,r,s,o){const a=jd(),l=this.Co(t,i.toUriEncodedString());re("RestConnection",`Sending RPC '${t}' ${a}:`,l,r);const c={"google-cloud-resource-prefix":this.wo,"x-goog-request-params":this.So};return this.vo(c,s,o),this.Fo(t,l,c,r).then(u=>(re("RestConnection",`Received RPC '${t}' ${a}: `,u),u),u=>{throw Qo("RestConnection",`RPC '${t}' ${a} failed with error: `,u,"url: ",l,"request:",r),u})}Mo(t,i,r,s,o,a){return this.Do(t,i,r,s,o)}vo(t,i,r){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Sa}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((s,o)=>t[o]=s),r&&r.headers.forEach((s,o)=>t[o]=s)}Co(t,i){const r=oV[t];return`${this.yo}/v1/${i}:${r}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Fo(e,t,i,r){const s=jd();return new Promise((o,a)=>{const l=new ED;l.setWithCredentials(!0),l.listenOnce(vD.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case $d.NO_ERROR:const u=l.getResponseJson();re(Jt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(u)),o(u);break;case $d.TIMEOUT:re(Jt,`RPC '${e}' ${s} timed out`),a(new se(G.DEADLINE_EXCEEDED,"Request time out"));break;case $d.HTTP_ERROR:const h=l.getStatus();if(re(Jt,`RPC '${e}' ${s} failed with status:`,h,"response text:",l.getResponseText()),h>0){let f=l.getResponseJson();Array.isArray(f)&&(f=f[0]);const d=f==null?void 0:f.error;if(d&&d.status&&d.message){const _=function(g){const m=g.toLowerCase().replace(/_/g,"-");return Object.values(G).indexOf(m)>=0?m:G.UNKNOWN}(d.status);a(new se(_,d.message))}else a(new se(G.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new se(G.UNAVAILABLE,"Connection failed."));break;default:Ee()}}finally{re(Jt,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(r);re(Jt,`RPC '${e}' ${s} sending request:`,r),l.send(t,"POST",c,i,15)})}xo(e,t,i){const r=jd(),s=[this.yo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=mD(),a=yD(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.xmlHttpFactory=new TD({})),this.vo(l.initMessageHeaders,t,i),l.encodeInitMessageHeaders=!0;const u=s.join("");re(Jt,`Creating RPC '${e}' stream ${r}: ${u}`,l);const h=o.createWebChannel(u,l);let f=!1,d=!1;const _=new aV({co:g=>{d?re(Jt,`Not sending because RPC '${e}' stream ${r} is closed:`,g):(f||(re(Jt,`Opening RPC '${e}' stream ${r} transport.`),h.open(),f=!0),re(Jt,`RPC '${e}' stream ${r} sending:`,g),h.send(g))},lo:()=>h.close()}),p=(g,m,T)=>{g.listen(m,w=>{try{T(w)}catch(S){setTimeout(()=>{throw S},0)}})};return p(h,Gc.EventType.OPEN,()=>{d||(re(Jt,`RPC '${e}' stream ${r} transport opened.`),_.Vo())}),p(h,Gc.EventType.CLOSE,()=>{d||(d=!0,re(Jt,`RPC '${e}' stream ${r} transport closed`),_.fo())}),p(h,Gc.EventType.ERROR,g=>{d||(d=!0,Qo(Jt,`RPC '${e}' stream ${r} transport errored:`,g),_.fo(new se(G.UNAVAILABLE,"The operation could not be completed")))}),p(h,Gc.EventType.MESSAGE,g=>{var m;if(!d){const T=g.data[0];Pt(!!T);const w=T,S=w.error||((m=w[0])===null||m===void 0?void 0:m.error);if(S){re(Jt,`RPC '${e}' stream ${r} received error:`,S);const E=S.status;let I=function(A){const k=Ct[A];if(k!==void 0)return zb(k)}(E),P=S.message;I===void 0&&(I=G.INTERNAL,P="Unknown error status: "+E+" with message "+S.message),d=!0,_.fo(new se(I,P)),h.close()}else re(Jt,`RPC '${e}' stream ${r} received:`,T),_.po(T)}}),p(a,wD.STAT_EVENT,g=>{g.stat===Vv.PROXY?re(Jt,`RPC '${e}' stream ${r} detected buffering proxy`):g.stat===Vv.NOPROXY&&re(Jt,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{_.mo()},0),_}}function Gd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jh(n){return new IL(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tI{constructor(e,t,i=1e3,r=1.5,s=6e4){this.si=e,this.timerId=t,this.Oo=i,this.No=r,this.Lo=s,this.Bo=0,this.ko=null,this.qo=Date.now(),this.reset()}reset(){this.Bo=0}Qo(){this.Bo=this.Lo}Ko(e){this.cancel();const t=Math.floor(this.Bo+this.$o()),i=Math.max(0,Date.now()-this.qo),r=Math.max(0,t-i);r>0&&re("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Bo} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.ko=this.si.enqueueAfterDelay(this.timerId,r,()=>(this.qo=Date.now(),e())),this.Bo*=this.No,this.Bo<this.Oo&&(this.Bo=this.Oo),this.Bo>this.Lo&&(this.Bo=this.Lo)}Uo(){this.ko!==null&&(this.ko.skipDelay(),this.ko=null)}cancel(){this.ko!==null&&(this.ko.cancel(),this.ko=null)}$o(){return(Math.random()-.5)*this.Bo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cV{constructor(e,t,i,r,s,o,a,l){this.si=e,this.Wo=i,this.Go=r,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.zo=0,this.jo=null,this.Ho=null,this.stream=null,this.Jo=new tI(e,t)}Yo(){return this.state===1||this.state===5||this.Zo()}Zo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Xo()}async stop(){this.Yo()&&await this.close(0)}e_(){this.state=0,this.Jo.reset()}t_(){this.Zo()&&this.jo===null&&(this.jo=this.si.enqueueAfterDelay(this.Wo,6e4,()=>this.n_()))}r_(e){this.i_(),this.stream.send(e)}async n_(){if(this.Zo())return this.close(0)}i_(){this.jo&&(this.jo.cancel(),this.jo=null)}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}async close(e,t){this.i_(),this.s_(),this.Jo.cancel(),this.zo++,e!==4?this.Jo.reset():t&&t.code===G.RESOURCE_EXHAUSTED?(hr(t.toString()),hr("Using maximum backoff delay to prevent overloading the backend."),this.Jo.Qo()):t&&t.code===G.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.o_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Eo(t)}o_(){}auth(){this.state=1;const e=this.__(this.zo),t=this.zo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.zo===t&&this.a_(i,r)},i=>{e(()=>{const r=new se(G.UNKNOWN,"Fetching auth token failed: "+i.message);return this.u_(r)})})}a_(e,t){const i=this.__(this.zo);this.stream=this.c_(e,t),this.stream.ho(()=>{i(()=>this.listener.ho())}),this.stream.Io(()=>{i(()=>(this.state=2,this.Ho=this.si.enqueueAfterDelay(this.Go,1e4,()=>(this.Zo()&&(this.state=3),Promise.resolve())),this.listener.Io()))}),this.stream.Eo(r=>{i(()=>this.u_(r))}),this.stream.onMessage(r=>{i(()=>this.onMessage(r))})}Xo(){this.state=5,this.Jo.Ko(async()=>{this.state=0,this.start()})}u_(e){return re("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}__(e){return t=>{this.si.enqueueAndForget(()=>this.zo===e?t():(re("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class uV extends cV{constructor(e,t,i,r,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,r,o),this.serializer=s}c_(e,t){return this.connection.xo("Listen",e,t)}onMessage(e){this.Jo.reset();const t=AL(this.serializer,e),i=function(s){if(!("targetChange"in s))return ve.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?ve.min():o.readTime?No(o.readTime):ve.min()}(e);return this.listener.l_(t,i)}h_(e){const t={};t.database=r0(this.serializer),t.addTarget=function(s,o){let a;const l=o.target;if(a=Tp(l)?{documents:xL(s,l)}:{query:RL(s,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=qb(s,o.resumeToken);const c=Cp(s,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(ve.min())>0){a.readTime=Ap(s,o.snapshotVersion.toTimestamp());const c=Cp(s,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const i=OL(this.serializer,e);i&&(t.labels=i),this.r_(t)}P_(e){const t={};t.database=r0(this.serializer),t.removeTarget=e,this.r_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hV extends class{}{constructor(e,t,i,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=r,this.V_=!1}m_(){if(this.V_)throw new se(G.FAILED_PRECONDITION,"The client has already been terminated.")}Do(e,t,i,r){return this.m_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Do(e,xp(t,i),r,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===G.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new se(G.UNKNOWN,s.toString())})}Mo(e,t,i,r,s){return this.m_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Mo(e,xp(t,i),r,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===G.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new se(G.UNKNOWN,o.toString())})}terminate(){this.V_=!0,this.connection.terminate()}}class dV{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){this.g_===0&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve())))}D_(e){this.state==="Online"?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.S_("Offline")))}set(e){this.C_(),this.g_=0,e==="Online"&&(this.y_=!1),this.S_(e)}S_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}b_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(hr(t),this.y_=!1):re("OnlineStateTracker",t)}C_(){this.p_!==null&&(this.p_.cancel(),this.p_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fV{constructor(e,t,i,r,s){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=s,this.O_.ro(o=>{i.enqueueAndForget(async()=>{Ac(this)&&(re("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=Ve(l);c.M_.add(4),await Cc(c),c.N_.set("Unknown"),c.M_.delete(4),await Zh(c)}(this))})}),this.N_=new dV(i,r)}}async function Zh(n){if(Ac(n))for(const e of n.x_)await e(!0)}async function Cc(n){for(const e of n.x_)await e(!1)}function nI(n,e){const t=Ve(n);t.F_.has(e.targetId)||(t.F_.set(e.targetId,e),jg(t)?zg(t):Ca(t).Zo()&&Bg(t,e))}function $g(n,e){const t=Ve(n),i=Ca(t);t.F_.delete(e),i.Zo()&&iI(t,e),t.F_.size===0&&(i.Zo()?i.t_():Ac(t)&&t.N_.set("Unknown"))}function Bg(n,e){if(n.L_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ve.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Ca(n).h_(e)}function iI(n,e){n.L_.xe(e),Ca(n).P_(e)}function zg(n){n.L_=new TL({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.F_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),Ca(n).start(),n.N_.w_()}function jg(n){return Ac(n)&&!Ca(n).Yo()&&n.F_.size>0}function Ac(n){return Ve(n).M_.size===0}function rI(n){n.L_=void 0}async function pV(n){n.N_.set("Online")}async function _V(n){n.F_.forEach((e,t)=>{Bg(n,e)})}async function gV(n,e){rI(n),jg(n)?(n.N_.D_(e),zg(n)):n.N_.set("Unknown")}async function mV(n,e,t){if(n.N_.set("Online"),e instanceof Gb&&e.state===2&&e.cause)try{await async function(r,s){const o=s.cause;for(const a of s.targetIds)r.F_.has(a)&&(await r.remoteSyncer.rejectListen(a,o),r.F_.delete(a),r.L_.removeTarget(a))}(n,e)}catch(i){re("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),await l0(n,i)}else if(e instanceof uu?n.L_.Ke(e):e instanceof jb?n.L_.He(e):n.L_.We(e),!t.isEqual(ve.min()))try{const i=await eI(n.localStore);t.compareTo(i)>=0&&await function(s,o){const a=s.L_.rt(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const u=s.F_.get(c);u&&s.F_.set(c,u.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const u=s.F_.get(l);if(!u)return;s.F_.set(l,u.withResumeToken(pn.EMPTY_BYTE_STRING,u.snapshotVersion)),iI(s,l);const h=new Nr(u.target,l,c,u.sequenceNumber);Bg(s,h)}),s.remoteSyncer.applyRemoteEvent(a)}(n,t)}catch(i){re("RemoteStore","Failed to raise snapshot:",i),await l0(n,i)}}async function l0(n,e,t){if(!Sc(e))throw e;n.M_.add(1),await Cc(n),n.N_.set("Offline"),t||(t=()=>eI(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{re("RemoteStore","Retrying IndexedDB access"),await t(),n.M_.delete(1),await Zh(n)})}async function c0(n,e){const t=Ve(n);t.asyncQueue.verifyOperationInProgress(),re("RemoteStore","RemoteStore received new credentials");const i=Ac(t);t.M_.add(3),await Cc(t),i&&t.N_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.M_.delete(3),await Zh(t)}async function yV(n,e){const t=Ve(n);e?(t.M_.delete(2),await Zh(t)):e||(t.M_.add(2),await Cc(t),t.N_.set("Unknown"))}function Ca(n){return n.B_||(n.B_=function(t,i,r){const s=Ve(t);return s.m_(),new uV(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(n.datastore,n.asyncQueue,{ho:pV.bind(null,n),Io:_V.bind(null,n),Eo:gV.bind(null,n),l_:mV.bind(null,n)}),n.x_.push(async e=>{e?(n.B_.e_(),jg(n)?zg(n):n.N_.set("Unknown")):(await n.B_.stop(),rI(n))})),n.B_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gg{constructor(e,t,i,r,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new Ps,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,r,s){const o=Date.now()+i,a=new Gg(e,t,o,r,s);return a.start(i),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new se(G.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function sI(n,e){if(hr("AsyncQueue",`${e}: ${n}`),Sc(n))return new se(G.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mo{constructor(e){this.comparator=e?(t,i)=>e(t,i)||pe.comparator(t.key,i.key):(t,i)=>pe.comparator(t.key,i.key),this.keyedMap=Wa(),this.sortedSet=new Et(this.comparator)}static emptySet(e){return new Mo(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,i)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Mo)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const r=t.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new Mo;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u0{constructor(){this.q_=new Et(pe.comparator)}track(e){const t=e.doc.key,i=this.q_.get(t);i?e.type!==0&&i.type===3?this.q_=this.q_.insert(t,e):e.type===3&&i.type!==1?this.q_=this.q_.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.q_=this.q_.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.q_=this.q_.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.q_=this.q_.remove(t):e.type===1&&i.type===2?this.q_=this.q_.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.q_=this.q_.insert(t,{type:2,doc:e.doc}):Ee():this.q_=this.q_.insert(t,e)}Q_(){const e=[];return this.q_.inorderTraversal((t,i)=>{e.push(i)}),e}}class na{constructor(e,t,i,r,s,o,a,l,c){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,t,i,r,s){const o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new na(e,t,Mo.emptySet(t),o,i,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Wh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==i[r].type||!t[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vV{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some(e=>e.G_())}}class wV{constructor(){this.queries=new Ia(e=>Ob(e),Wh),this.onlineState="Unknown",this.z_=new Set}}async function oI(n,e){const t=Ve(n);let i=3;const r=e.query;let s=t.queries.get(r);s?!s.W_()&&e.G_()&&(i=2):(s=new vV,i=e.G_()?0:1);try{switch(i){case 0:s.K_=await t.onListen(r,!0);break;case 1:s.K_=await t.onListen(r,!1);break;case 2:await t.onFirstRemoteStoreListen(r)}}catch(o){const a=sI(o,`Initialization of query '${fo(e.query)}' failed`);return void e.onError(a)}t.queries.set(r,s),s.U_.push(e),e.j_(t.onlineState),s.K_&&e.H_(s.K_)&&qg(t)}async function aI(n,e){const t=Ve(n),i=e.query;let r=3;const s=t.queries.get(i);if(s){const o=s.U_.indexOf(e);o>=0&&(s.U_.splice(o,1),s.U_.length===0?r=e.G_()?0:1:!s.W_()&&e.G_()&&(r=2))}switch(r){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function TV(n,e){const t=Ve(n);let i=!1;for(const r of e){const s=r.query,o=t.queries.get(s);if(o){for(const a of o.U_)a.H_(r)&&(i=!0);o.K_=r}}i&&qg(t)}function EV(n,e,t){const i=Ve(n),r=i.queries.get(e);if(r)for(const s of r.U_)s.onError(t);i.queries.delete(e)}function qg(n){n.z_.forEach(e=>{e.next()})}var Pp,h0;(h0=Pp||(Pp={})).J_="default",h0.Cache="cache";class lI{constructor(e,t,i){this.query=e,this.Y_=t,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=i||{}}H_(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)r.type!==3&&i.push(r);e=new na(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Z_?this.ea(e)&&(this.Y_.next(e),t=!0):this.ta(e,this.onlineState)&&(this.na(e),t=!0),this.X_=e,t}onError(e){this.Y_.error(e)}j_(e){this.onlineState=e;let t=!1;return this.X_&&!this.Z_&&this.ta(this.X_,e)&&(this.na(this.X_),t=!0),t}ta(e,t){if(!e.fromCache||!this.G_())return!0;const i=t!=="Offline";return(!this.options.ra||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ea(e){if(e.docChanges.length>0)return!0;const t=this.X_&&this.X_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}na(e){e=na.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Z_=!0,this.Y_.next(e)}G_(){return this.options.source!==Pp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cI{constructor(e){this.key=e}}class uI{constructor(e){this.key=e}}class SV{constructor(e,t){this.query=e,this.la=t,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=Le(),this.mutatedKeys=Le(),this.Ia=kb(e),this.Ta=new Mo(this.Ia)}get Ea(){return this.la}da(e,t){const i=t?t.Aa:new u0,r=t?t.Ta:this.Ta;let s=t?t.mutatedKeys:this.mutatedKeys,o=r,a=!1;const l=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,c=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((u,h)=>{const f=r.get(u),d=Kh(this.query,h)?h:null,_=!!f&&this.mutatedKeys.has(f.key),p=!!d&&(d.hasLocalMutations||this.mutatedKeys.has(d.key)&&d.hasCommittedMutations);let g=!1;f&&d?f.data.isEqual(d.data)?_!==p&&(i.track({type:3,doc:d}),g=!0):this.Ra(f,d)||(i.track({type:2,doc:d}),g=!0,(l&&this.Ia(d,l)>0||c&&this.Ia(d,c)<0)&&(a=!0)):!f&&d?(i.track({type:0,doc:d}),g=!0):f&&!d&&(i.track({type:1,doc:f}),g=!0,(l||c)&&(a=!0)),g&&(d?(o=o.add(d),s=p?s.add(u):s.delete(u)):(o=o.delete(u),s=s.delete(u)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const u=this.query.limitType==="F"?o.last():o.first();o=o.delete(u.key),s=s.delete(u.key),i.track({type:1,doc:u})}return{Ta:o,Aa:i,Zi:a,mutatedKeys:s}}Ra(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,r){const s=this.Ta;this.Ta=e.Ta,this.mutatedKeys=e.mutatedKeys;const o=e.Aa.Q_();o.sort((u,h)=>function(d,_){const p=g=>{switch(g){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ee()}};return p(d)-p(_)}(u.type,h.type)||this.Ia(u.doc,h.doc)),this.Va(i),r=r!=null&&r;const a=t&&!r?this.ma():[],l=this.Pa.size===0&&this.current&&!r?1:0,c=l!==this.ha;return this.ha=l,o.length!==0||c?{snapshot:new na(this.query,e.Ta,s,o,e.mutatedKeys,l===0,c,!1,!!i&&i.resumeToken.approximateByteSize()>0),fa:a}:{fa:a}}j_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new u0,mutatedKeys:this.mutatedKeys,Zi:!1},!1)):{fa:[]}}ga(e){return!this.la.has(e)&&!!this.Ta.has(e)&&!this.Ta.get(e).hasLocalMutations}Va(e){e&&(e.addedDocuments.forEach(t=>this.la=this.la.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.la=this.la.delete(t)),this.current=e.current)}ma(){if(!this.current)return[];const e=this.Pa;this.Pa=Le(),this.Ta.forEach(i=>{this.ga(i.key)&&(this.Pa=this.Pa.add(i.key))});const t=[];return e.forEach(i=>{this.Pa.has(i)||t.push(new uI(i))}),this.Pa.forEach(i=>{e.has(i)||t.push(new cI(i))}),t}pa(e){this.la=e.ls,this.Pa=Le();const t=this.da(e.documents);return this.applyChanges(t,!0)}ya(){return na.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,this.ha===0,this.hasCachedResults)}}class bV{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class IV{constructor(e){this.key=e,this.wa=!1}}class CV{constructor(e,t,i,r,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Sa={},this.ba=new Ia(a=>Ob(a),Wh),this.Da=new Map,this.Ca=new Set,this.va=new Et(pe.comparator),this.Fa=new Map,this.Ma=new Vg,this.xa={},this.Oa=new Map,this.Na=ta.Nn(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return this.La===!0}}async function AV(n,e,t=!0){const i=_I(n);let r;const s=i.ba.get(e);return s?(i.sharedClientState.addLocalQueryTarget(s.targetId),r=s.view.ya()):r=await hI(i,e,t,!0),r}async function xV(n,e){const t=_I(n);await hI(t,e,!0,!1)}async function hI(n,e,t,i){const r=await nV(n.localStore,Fi(e)),s=r.targetId,o=t?n.sharedClientState.addLocalQueryTarget(s):"not-current";let a;return i&&(a=await RV(n,e,s,o==="current",r.resumeToken)),n.isPrimaryClient&&t&&nI(n.remoteStore,r),a}async function RV(n,e,t,i,r){n.Ba=(h,f,d)=>async function(p,g,m,T){let w=g.view.da(m);w.Zi&&(w=await s0(p.localStore,g.query,!1).then(({documents:P})=>g.view.da(P,w)));const S=T&&T.targetChanges.get(g.targetId),E=T&&T.targetMismatches.get(g.targetId)!=null,I=g.view.applyChanges(w,p.isPrimaryClient,S,E);return f0(p,g.targetId,I.fa),I.snapshot}(n,h,f,d);const s=await s0(n.localStore,e,!0),o=new SV(e,s.ls),a=o.da(s.documents),l=Ic.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",r),c=o.applyChanges(a,n.isPrimaryClient,l);f0(n,t,c.fa);const u=new bV(e,t,o);return n.ba.set(e,u),n.Da.has(t)?n.Da.get(t).push(e):n.Da.set(t,[e]),c.snapshot}async function PV(n,e,t){const i=Ve(n),r=i.ba.get(e),s=i.Da.get(r.targetId);if(s.length>1)return i.Da.set(r.targetId,s.filter(o=>!Wh(o,e))),void i.ba.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await Rp(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),t&&$g(i.remoteStore,r.targetId),Op(i,r.targetId)}).catch(Cg)):(Op(i,r.targetId),await Rp(i.localStore,r.targetId,!0))}async function OV(n,e){const t=Ve(n),i=t.ba.get(e),r=t.Da.get(i.targetId);t.isPrimaryClient&&r.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),$g(t.remoteStore,i.targetId))}async function dI(n,e){const t=Ve(n);try{const i=await eV(t.localStore,e);e.targetChanges.forEach((r,s)=>{const o=t.Fa.get(s);o&&(Pt(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?o.wa=!0:r.modifiedDocuments.size>0?Pt(o.wa):r.removedDocuments.size>0&&(Pt(o.wa),o.wa=!1))}),await pI(t,i,e)}catch(i){await Cg(i)}}function d0(n,e,t){const i=Ve(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const r=[];i.ba.forEach((s,o)=>{const a=o.view.j_(e);a.snapshot&&r.push(a.snapshot)}),function(o,a){const l=Ve(o);l.onlineState=a;let c=!1;l.queries.forEach((u,h)=>{for(const f of h.U_)f.j_(a)&&(c=!0)}),c&&qg(l)}(i.eventManager,e),r.length&&i.Sa.l_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function kV(n,e,t){const i=Ve(n);i.sharedClientState.updateQueryState(e,"rejected",t);const r=i.Fa.get(e),s=r&&r.key;if(s){let o=new Et(pe.comparator);o=o.insert(s,rn.newNoDocument(s,ve.min()));const a=Le().add(s),l=new Qh(ve.min(),new Map,new Et(ze),o,a);await dI(i,l),i.va=i.va.remove(s),i.Fa.delete(e),Hg(i)}else await Rp(i.localStore,e,!1).then(()=>Op(i,e,t)).catch(Cg)}function Op(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.Da.get(e))n.ba.delete(i),t&&n.Sa.ka(i,t);n.Da.delete(e),n.isPrimaryClient&&n.Ma.Rr(e).forEach(i=>{n.Ma.containsKey(i)||fI(n,i)})}function fI(n,e){n.Ca.delete(e.path.canonicalString());const t=n.va.get(e);t!==null&&($g(n.remoteStore,t),n.va=n.va.remove(e),n.Fa.delete(t),Hg(n))}function f0(n,e,t){for(const i of t)i instanceof cI?(n.Ma.addReference(i.key,e),NV(n,i)):i instanceof uI?(re("SyncEngine","Document no longer in limbo: "+i.key),n.Ma.removeReference(i.key,e),n.Ma.containsKey(i.key)||fI(n,i.key)):Ee()}function NV(n,e){const t=e.key,i=t.path.canonicalString();n.va.get(t)||n.Ca.has(i)||(re("SyncEngine","New document in limbo: "+t),n.Ca.add(i),Hg(n))}function Hg(n){for(;n.Ca.size>0&&n.va.size<n.maxConcurrentLimboResolutions;){const e=n.Ca.values().next().value;n.Ca.delete(e);const t=new pe(dt.fromString(e)),i=n.Na.next();n.Fa.set(i,new IV(t)),n.va=n.va.insert(t,i),nI(n.remoteStore,new Nr(Fi(Ng(t.path)),i,"TargetPurposeLimboResolution",Ag.oe))}}async function pI(n,e,t){const i=Ve(n),r=[],s=[],o=[];i.ba.isEmpty()||(i.ba.forEach((a,l)=>{o.push(i.Ba(l,e,t).then(c=>{if((c||t)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(l.targetId,c!=null&&c.fromCache?"not-current":"current"),c){r.push(c);const u=Ug.Qi(l.targetId,c);s.push(u)}}))}),await Promise.all(o),i.Sa.l_(r),await async function(l,c){const u=Ve(l);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>U.forEach(c,f=>U.forEach(f.ki,d=>u.persistence.referenceDelegate.addReference(h,f.targetId,d)).next(()=>U.forEach(f.qi,d=>u.persistence.referenceDelegate.removeReference(h,f.targetId,d)))))}catch(h){if(!Sc(h))throw h;re("LocalStore","Failed to update sequence numbers: "+h)}for(const h of c){const f=h.targetId;if(!h.fromCache){const d=u.ts.get(f),_=d.snapshotVersion,p=d.withLastLimboFreeSnapshotVersion(_);u.ts=u.ts.insert(f,p)}}}(i.localStore,s))}async function MV(n,e){const t=Ve(n);if(!t.currentUser.isEqual(e)){re("SyncEngine","User change. New user:",e.toKey());const i=await Zb(t.localStore,e);t.currentUser=e,function(s,o){s.Oa.forEach(a=>{a.forEach(l=>{l.reject(new se(G.CANCELLED,o))})}),s.Oa.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await pI(t,i._s)}}function DV(n,e){const t=Ve(n),i=t.Fa.get(e);if(i&&i.wa)return Le().add(i.key);{let r=Le();const s=t.Da.get(e);if(!s)return r;for(const o of s){const a=t.ba.get(o);r=r.unionWith(a.view.Ea)}return r}}function _I(n){const e=Ve(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=dI.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=DV.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=kV.bind(null,e),e.Sa.l_=TV.bind(null,e.eventManager),e.Sa.ka=EV.bind(null,e.eventManager),e}class p0{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=Jh(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return ZL(this.persistence,new QL,e.initialUser,this.serializer)}createPersistence(e){return new KL(Fg.jr,this.serializer)}createSharedClientState(e){return new rV}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class LV{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>d0(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=MV.bind(null,this.syncEngine),await yV(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new wV}()}createDatastore(e){const t=Jh(e.databaseInfo.databaseId),i=function(s){return new lV(s)}(e.databaseInfo);return function(s,o,a,l){return new hV(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return function(i,r,s,o,a){return new fV(i,r,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,t=>d0(this.syncEngine,t,0),function(){return a0.D()?new a0:new sV}())}createSyncEngine(e,t){return function(r,s,o,a,l,c,u){const h=new CV(r,s,o,a,l,c);return u&&(h.La=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e;await async function(i){const r=Ve(i);re("RemoteStore","RemoteStore shutting down."),r.M_.add(5),await Cc(r),r.O_.shutdown(),r.N_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gI{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ka(this.observer.next,e)}error(e){this.observer.error?this.Ka(this.observer.error,e):hr("Uncaught Error in snapshot listener:",e.toString())}$a(){this.muted=!0}Ka(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VV{constructor(e,t,i,r){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=r,this.user=en.UNAUTHENTICATED,this.clientId=kD.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(i,async s=>{re("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(i,s=>(re("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new se(G.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ps;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=sI(t,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function qd(n,e){n.asyncQueue.verifyOperationInProgress(),re("FirestoreClient","Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener(async r=>{i.isEqual(r)||(await Zb(e.localStore,r),i=r)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function _0(n,e){n.asyncQueue.verifyOperationInProgress();const t=await UV(n);re("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(i=>c0(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,r)=>c0(e.remoteStore,r)),n._onlineComponents=e}function FV(n){return n.name==="FirebaseError"?n.code===G.FAILED_PRECONDITION||n.code===G.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||n.code===22||n.code===20||n.code===11}async function UV(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){re("FirestoreClient","Using user provided OfflineComponentProvider");try{await qd(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!FV(t))throw t;Qo("Error using user provided cache. Falling back to memory cache: "+t),await qd(n,new p0)}}else re("FirestoreClient","Using default OfflineComponentProvider"),await qd(n,new p0);return n._offlineComponents}async function $V(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(re("FirestoreClient","Using user provided OnlineComponentProvider"),await _0(n,n._uninitializedComponentsProvider._online)):(re("FirestoreClient","Using default OnlineComponentProvider"),await _0(n,new LV))),n._onlineComponents}async function kp(n){const e=await $V(n),t=e.eventManager;return t.onListen=AV.bind(null,e.syncEngine),t.onUnlisten=PV.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=xV.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=OV.bind(null,e.syncEngine),t}function BV(n,e,t={}){const i=new Ps;return n.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const u=new gI({next:f=>{o.enqueueAndForget(()=>aI(s,h)),f.fromCache&&l.source==="server"?c.reject(new se(G.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(f)},error:f=>c.reject(f)}),h=new lI(a,u,{includeMetadataChanges:!0,ra:!0});return oI(s,h)}(await kp(n),n.asyncQueue,e,t,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mI(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g0=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zV(n,e,t){if(!t)throw new se(G.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function jV(n,e,t,i){if(e===!0&&i===!0)throw new se(G.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function m0(n){if(pe.isDocumentKey(n))throw new se(G.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function ed(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Ee()}function Do(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new se(G.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=ed(n);throw new se(G.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y0{constructor(e){var t,i;if(e.host===void 0){if(e.ssl!==void 0)throw new se(G.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new se(G.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}jV("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=mI((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new se(G.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new se(G.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new se(G.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Wg{constructor(e,t,i,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new y0({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new se(G.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new se(G.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new y0(e),e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new bD;switch(i.type){case"firstParty":return new xD(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new se(G.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const i=g0.get(t);i&&(re("ComponentProvider","Removing Datastore"),g0.delete(t),i.terminate())}(this),Promise.resolve()}}function GV(n,e,t,i={}){var r;const s=(n=Do(n,Wg))._getSettings(),o=`${e}:${t}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&Qo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),i.mockUserToken){let a,l;if(typeof i.mockUserToken=="string")a=i.mockUserToken,l=en.MOCK_USER;else{a=NT(i.mockUserToken,(r=n._app)===null||r===void 0?void 0:r.options.projectId);const c=i.mockUserToken.sub||i.mockUserToken.user_id;if(!c)throw new se(G.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new en(c)}n._authCredentials=new ID(new Tb(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new is(this.firestore,e,this._query)}}class Wi{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Lo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Wi(this.firestore,e,this._key)}}class Lo extends is{constructor(e,t,i){super(e,t,Ng(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Wi(this.firestore,null,new pe(e))}withConverter(e){return new Lo(this.firestore,e,this._path)}}function Kg(n,e,...t){if(n=vi(n),zV("collection","path",e),n instanceof Wg){const i=dt.fromString(e,...t);return m0(i),new Lo(n,null,i)}{if(!(n instanceof Wi||n instanceof Lo))throw new se(G.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(dt.fromString(e,...t));return m0(i),new Lo(n.firestore,null,i)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qV{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Jo=new tI(this,"async_queue_retry"),this.hu=()=>{const t=Gd();t&&re("AsyncQueue","Visibility state changed to "+t.visibilityState),this.Jo.Uo()};const e=Gd();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Pu(),this.Iu(e)}enterRestrictedMode(e){if(!this.ou){this.ou=!0,this.cu=e||!1;const t=Gd();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.hu)}}enqueue(e){if(this.Pu(),this.ou)return new Promise(()=>{});const t=new Ps;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.su.push(e),this.Tu()))}async Tu(){if(this.su.length!==0){try{await this.su[0](),this.su.shift(),this.Jo.reset()}catch(e){if(!Sc(e))throw e;re("AsyncQueue","Operation failed with retryable error: "+e)}this.su.length>0&&this.Jo.Ko(()=>this.Tu())}}Iu(e){const t=this.iu.then(()=>(this.uu=!0,e().catch(i=>{this.au=i,this.uu=!1;const r=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(i);throw hr("INTERNAL UNHANDLED ERROR: ",r),i}).then(i=>(this.uu=!1,i))));return this.iu=t,t}enqueueAfterDelay(e,t,i){this.Pu(),this.lu.indexOf(e)>-1&&(t=0);const r=Gg.createAndSchedule(this,e,t,i,s=>this.Eu(s));return this._u.push(r),r}Pu(){this.au&&Ee()}verifyOperationInProgress(){}async du(){let e;do e=this.iu,await e;while(e!==this.iu)}Au(e){for(const t of this._u)if(t.timerId===e)return!0;return!1}Ru(e){return this.du().then(()=>{this._u.sort((t,i)=>t.targetTimeMs-i.targetTimeMs);for(const t of this._u)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.du()})}Vu(e){this.lu.push(e)}Eu(e){const t=this._u.indexOf(e);this._u.splice(t,1)}}function v0(n){return function(t,i){if(typeof t!="object"||t===null)return!1;const r=t;for(const s of i)if(s in r&&typeof r[s]=="function")return!0;return!1}(n,["next","error","complete"])}class Yu extends Wg{constructor(e,t,i,r){super(e,t,i,r),this.type="firestore",this._queue=function(){return new qV}(),this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||vI(this),this._firestoreClient.terminate()}}function HV(n,e){const t=typeof n=="object"?n:zT(),i=typeof n=="string"?n:e||"(default)",r=$T(t,"firestore").getImmediate({identifier:i});if(!r._initialized){const s=OT("firestore");s&&GV(r,...s)}return r}function yI(n){return n._firestoreClient||vI(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function vI(n){var e,t,i;const r=n._freezeSettings(),s=function(a,l,c,u){return new zD(a,l,c,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,mI(u.experimentalLongPollingOptions),u.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,r);n._firestoreClient=new VV(n._authCredentials,n._appCheckCredentials,n._queue,s),!((t=r.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((i=r.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:r.localCache.kind,_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ia{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ia(pn.fromBase64String(e))}catch(t){throw new se(G.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new ia(pn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wI{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new se(G.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new an(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TI{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yg{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new se(G.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new se(G.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ze(this._lat,e._lat)||ze(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WV=/^__.*__$/;function EI(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ee()}}class Xg{constructor(e,t,i,r,s,o){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=r,s===void 0&&this.mu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(e){return new Xg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),r=this.gu({path:i,yu:!1});return r.wu(e),r}Su(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),r=this.gu({path:i,yu:!1});return r.mu(),r}bu(e){return this.gu({path:void 0,yu:!0})}Du(e){return Np(e,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}mu(){if(this.path)for(let e=0;e<this.path.length;e++)this.wu(this.path.get(e))}wu(e){if(e.length===0)throw this.Du("Document fields must not be empty");if(EI(this.fu)&&WV.test(e))throw this.Du('Document fields cannot begin and end with "__"')}}class KV{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||Jh(e)}Fu(e,t,i,r=!1){return new Xg({fu:e,methodName:t,vu:i,path:an.emptyPath(),yu:!1,Cu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function YV(n){const e=n._freezeSettings(),t=Jh(n._databaseId);return new KV(n._databaseId,!!e.ignoreUndefinedProperties,t)}function XV(n,e,t,i=!1){return Qg(t,n.Fu(i?4:3,e))}function Qg(n,e){if(SI(n=vi(n)))return JV("Unsupported field value:",e,n),QV(n,e);if(n instanceof TI)return function(i,r){if(!EI(r.fu))throw r.Du(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Du(`${i._methodName}() is not currently supported inside arrays`);const s=i._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.yu&&e.fu!==4)throw e.Du("Nested arrays are not supported");return function(i,r){const s=[];let o=0;for(const a of i){let l=Qg(a,r.bu(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(n,e)}return function(i,r){if((i=vi(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return cL(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const s=Ut.fromDate(i);return{timestampValue:Ap(r.serializer,s)}}if(i instanceof Ut){const s=new Ut(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Ap(r.serializer,s)}}if(i instanceof Yg)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof ia)return{bytesValue:qb(r.serializer,i._byteString)};if(i instanceof Wi){const s=r.databaseId,o=i.firestore._databaseId;if(!o.isEqual(s))throw r.Du(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Hb(i.firestore._databaseId||r.databaseId,i._key.path)}}throw r.Du(`Unsupported field value: ${ed(i)}`)}(n,e)}function QV(n,e){const t={};return Eb(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):bc(n,(i,r)=>{const s=Qg(r,e.pu(i));s!=null&&(t[i]=s)}),{mapValue:{fields:t}}}function SI(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Ut||n instanceof Yg||n instanceof ia||n instanceof Wi||n instanceof TI)}function JV(n,e,t){if(!SI(t)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(t)){const i=ed(t);throw i==="an object"?e.Du(n+" a custom object"):e.Du(n+" "+i)}}const ZV=new RegExp("[~\\*/\\[\\]]");function eF(n,e,t){if(e.search(ZV)>=0)throw Np(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new wI(...e.split("."))._internalPath}catch{throw Np(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Np(n,e,t,i,r){const s=i&&!i.isEmpty(),o=r!==void 0;let a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${i}`),o&&(l+=` in document ${r}`),l+=")"),new se(G.INVALID_ARGUMENT,a+n+l)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bI{constructor(e,t,i,r,s){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Wi(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new tF(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Jg("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class tF extends bI{data(){return super.data()}}function Jg(n,e){return typeof e=="string"?eF(n,e):e instanceof wI?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function II(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new se(G.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Zg{}class CI extends Zg{}function AI(n,e,...t){let i=[];e instanceof Zg&&i.push(e),i=i.concat(t),function(s){const o=s.filter(l=>l instanceof tm).length,a=s.filter(l=>l instanceof em).length;if(o>1||o>0&&a>0)throw new se(G.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const r of i)n=r._apply(n);return n}class em extends CI{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new em(e,t,i)}_apply(e){const t=this._parse(e);return xI(e._query,t),new is(e.firestore,e.converter,Ep(e._query,t))}_parse(e){const t=YV(e.firestore);return function(s,o,a,l,c,u,h){let f;if(c.isKeyField()){if(u==="array-contains"||u==="array-contains-any")throw new se(G.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if(u==="in"||u==="not-in"){T0(h,u);const d=[];for(const _ of h)d.push(w0(l,s,_));f={arrayValue:{values:d}}}else f=w0(l,s,h)}else u!=="in"&&u!=="not-in"&&u!=="array-contains-any"||T0(h,u),f=XV(a,o,h,u==="in"||u==="not-in");return Rt.create(c,u,f)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}class tm extends Zg{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new tm(e,t)}_parse(e){const t=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return t.length===1?t[0]:Si.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(r,s){let o=r;const a=s.getFlattenedFilters();for(const l of a)xI(o,l),o=Ep(o,l)}(e._query,t),new is(e.firestore,e.converter,Ep(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class nm extends CI{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new nm(e,t)}_apply(e){const t=function(r,s,o){if(r.startAt!==null)throw new se(G.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new se(G.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Wl(s,o)}(e._query,this._field,this._direction);return new is(e.firestore,e.converter,function(r,s){const o=r.explicitOrderBy.concat([s]);return new ba(r.path,r.collectionGroup,o,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}function nF(n,e="asc"){const t=e,i=Jg("orderBy",n);return nm._create(i,t)}function w0(n,e,t){if(typeof(t=vi(t))=="string"){if(t==="")throw new se(G.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Pb(e)&&t.indexOf("/")!==-1)throw new se(G.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(dt.fromString(t));if(!pe.isDocumentKey(i))throw new se(G.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return zv(n,new pe(i))}if(t instanceof Wi)return zv(n,t._key);throw new se(G.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ed(t)}.`)}function T0(n,e){if(!Array.isArray(n)||n.length===0)throw new se(G.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function xI(n,e){const t=function(r,s){for(const o of r)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new se(G.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new se(G.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class iF{convertValue(e,t="none"){switch(Hs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return At(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(qs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Ee()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return bc(e,(r,s)=>{i[r]=this.convertValue(s,t)}),i}convertGeoPoint(e){return new Yg(At(e.latitude),At(e.longitude))}convertArray(e,t){return(e.values||[]).map(i=>this.convertValue(i,t))}convertServerTimestamp(e,t){switch(t){case"previous":const i=Rg(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(Gl(e));default:return null}}convertTimestamp(e){const t=Yr(e);return new Ut(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=dt.fromString(e);Pt(Jb(i));const r=new ql(i.get(1),i.get(3)),s=new pe(i.popFirst(5));return r.isEqual(t)||hr(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ya{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class RI extends bI{constructor(e,t,i,r,s,o){super(e,t,i,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new hu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(Jg("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}}class hu extends RI{data(e={}){return super.data(e)}}class PI{constructor(e,t,i,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Ya(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(i=>{e.call(t,new hu(this._firestore,this._userDataWriter,i.key,i,new Ya(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new se(G.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map(a=>{const l=new hu(r._firestore,r._userDataWriter,a.doc.key,a.doc,new Ya(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new hu(r._firestore,r._userDataWriter,a.doc.key,a.doc,new Ya(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);let c=-1,u=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),u=o.indexOf(a.doc.key)),{type:rF(a.type),doc:l,oldIndex:c,newIndex:u}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function rF(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ee()}}class im extends iF{constructor(e){super(),this.firestore=e}convertBytes(e){return new ia(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Wi(this.firestore,null,t)}}function sF(n){n=Do(n,is);const e=Do(n.firestore,Yu),t=yI(e),i=new im(e);return II(n._query),BV(t,n._query).then(r=>new PI(e,i,n,r))}function OI(n,...e){var t,i,r;n=vi(n);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||v0(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(v0(e[o])){const h=e[o];e[o]=(t=h.next)===null||t===void 0?void 0:t.bind(h),e[o+1]=(i=h.error)===null||i===void 0?void 0:i.bind(h),e[o+2]=(r=h.complete)===null||r===void 0?void 0:r.bind(h)}let l,c,u;if(n instanceof Wi)c=Do(n.firestore,Yu),u=Ng(n._key.path),l={next:h=>{e[o]&&e[o](oF(c,n,h))},error:e[o+1],complete:e[o+2]};else{const h=Do(n,is);c=Do(h.firestore,Yu),u=h._query;const f=new im(c);l={next:d=>{e[o]&&e[o](new PI(c,f,h,d))},error:e[o+1],complete:e[o+2]},II(n._query)}return function(f,d,_,p){const g=new gI(p),m=new lI(d,g,_);return f.asyncQueue.enqueueAndForget(async()=>oI(await kp(f),m)),()=>{g.$a(),f.asyncQueue.enqueueAndForget(async()=>aI(await kp(f),m))}}(yI(c),u,a,l)}function oF(n,e,t){const i=t.docs.get(e._key),r=new im(n);return new RI(n,r,e._key,i,new Ya(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(r){Sa=r})(ma),Bi(new wi("firestore",(i,{instanceIdentifier:r,options:s})=>{const o=i.getProvider("app").getImmediate(),a=new Yu(new CD(i.getProvider("auth-internal")),new PD(i.getProvider("app-check-internal")),function(c,u){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new se(G.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ql(c.options.projectId,u)}(o,r),o);return s=Object.assign({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Ln(Fv,"4.6.1",e),Ln(Fv,"4.6.1","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kI="firebasestorage.googleapis.com",aF="storageBucket",lF=2*60*1e3,cF=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ki extends _r{constructor(e,t,i=0){super(Hd(e),`Firebase Storage: ${t} (${Hd(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Ki.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Hd(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var ji;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(ji||(ji={}));function Hd(n){return"storage/"+n}function uF(){const n="An unknown error occurred, please check the error payload for server response.";return new Ki(ji.UNKNOWN,n)}function hF(){return new Ki(ji.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function dF(){return new Ki(ji.CANCELED,"User canceled the upload/download.")}function fF(n){return new Ki(ji.INVALID_URL,"Invalid URL '"+n+"'.")}function pF(n){return new Ki(ji.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function E0(n){return new Ki(ji.INVALID_ARGUMENT,n)}function NI(){return new Ki(ji.APP_DELETED,"The Firebase app was deleted.")}function _F(n){return new Ki(ji.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let i;try{i=di.makeFromUrl(e,t)}catch{return new di(e,"")}if(i.path==="")return i;throw pF(e)}static makeFromUrl(e,t){let i=null;const r="([A-Za-z0-9.\\-_]+)";function s(S){S.path.charAt(S.path.length-1)==="/"&&(S.path_=S.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+r+o,"i"),l={bucket:1,path:3};function c(S){S.path_=decodeURIComponent(S.path)}const u="v[A-Za-z0-9_]+",h=t.replace(/[.]/g,"\\."),f="(/([^?#]*).*)?$",d=new RegExp(`^https?://${h}/${u}/b/${r}/o${f}`,"i"),_={bucket:1,path:3},p=t===kI?"(?:storage.googleapis.com|storage.cloud.google.com)":t,g="([^?#]*)",m=new RegExp(`^https?://${p}/${r}/${g}`,"i"),w=[{regex:a,indices:l,postModify:s},{regex:d,indices:_,postModify:c},{regex:m,indices:{bucket:1,path:2},postModify:c}];for(let S=0;S<w.length;S++){const E=w[S],I=E.regex.exec(e);if(I){const P=I[E.indices.bucket];let x=I[E.indices.path];x||(x=""),i=new di(P,x),E.postModify(i);break}}if(i==null)throw fF(e);return i}}class gF{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mF(n,e,t){let i=1,r=null,s=null,o=!1,a=0;function l(){return a===2}let c=!1;function u(...g){c||(c=!0,e.apply(null,g))}function h(g){r=setTimeout(()=>{r=null,n(d,l())},g)}function f(){s&&clearTimeout(s)}function d(g,...m){if(c){f();return}if(g){f(),u.call(null,g,...m);return}if(l()||o){f(),u.call(null,g,...m);return}i<64&&(i*=2);let w;a===1?(a=2,w=0):w=(i+Math.random())*1e3,h(w)}let _=!1;function p(g){_||(_=!0,f(),!c&&(r!==null?(g||(a=2),clearTimeout(r),h(0)):g||(a=1)))}return h(0),s=setTimeout(()=>{o=!0,p(!0)},t),p}function yF(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vF(n){return n!==void 0}function S0(n,e,t,i){if(i<e)throw E0(`Invalid value for '${n}'. Expected ${e} or greater.`);if(i>t)throw E0(`Invalid value for '${n}'. Expected ${t} or less.`)}function wF(n){const e=encodeURIComponent;let t="?";for(const i in n)if(n.hasOwnProperty(i)){const r=e(i)+"="+e(n[i]);t=t+r+"&"}return t=t.slice(0,-1),t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Xu;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(Xu||(Xu={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TF(n,e){const t=n>=500&&n<600,r=[408,429].indexOf(n)!==-1,s=e.indexOf(n)!==-1;return t||r||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EF{constructor(e,t,i,r,s,o,a,l,c,u,h,f=!0){this.url_=e,this.method_=t,this.headers_=i,this.body_=r,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=u,this.connectionFactory_=h,this.retry=f,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((d,_)=>{this.resolve_=d,this.reject_=_,this.start_()})}start_(){const e=(i,r)=>{if(r){i(!1,new Kc(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const l=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===Xu.NO_ERROR,l=s.getStatus();if(!a||TF(l,this.additionalRetryCodes_)&&this.retry){const u=s.getErrorCode()===Xu.ABORT;i(!1,new Kc(!1,null,u));return}const c=this.successCodes_.indexOf(l)!==-1;i(!0,new Kc(c,s))})},t=(i,r)=>{const s=this.resolve_,o=this.reject_,a=r.connection;if(r.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());vF(l)?s(l):s()}catch(l){o(l)}else if(a!==null){const l=uF();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(r.canceled){const l=this.appDelete_?NI():dF();o(l)}else{const l=hF();o(l)}};this.canceled_?t(!1,new Kc(!1,null,!0)):this.backoffId_=mF(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&yF(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Kc{constructor(e,t,i){this.wasSuccessCode=e,this.connection=t,this.canceled=!!i}}function SF(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function bF(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function IF(n,e){e&&(n["X-Firebase-GMPID"]=e)}function CF(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function AF(n,e,t,i,r,s,o=!0){const a=wF(n.urlParams),l=n.url+a,c=Object.assign({},n.headers);return IF(c,e),SF(c,t),bF(c,s),CF(c,i),new EF(l,n.method,c,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,r,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xF(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function RF(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qu{constructor(e,t){this._service=e,t instanceof di?this._location=t:this._location=di.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Qu(e,t)}get root(){const e=new di(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return RF(this._location.path)}get storage(){return this._service}get parent(){const e=xF(this._location.path);if(e===null)return null;const t=new di(this._location.bucket,e);return new Qu(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw _F(e)}}function b0(n,e){const t=e==null?void 0:e[aF];return t==null?null:di.makeFromBucketSpec(t,n)}function PF(n,e,t,i={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:r}=i;r&&(n._overrideAuthToken=typeof r=="string"?r:NT(r,n.app.options.projectId))}class OF{constructor(e,t,i,r,s){this.app=e,this._authProvider=t,this._appCheckProvider=i,this._url=r,this._firebaseVersion=s,this._bucket=null,this._host=kI,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=lF,this._maxUploadRetryTime=cF,this._requests=new Set,r!=null?this._bucket=di.makeFromBucketSpec(r,this._host):this._bucket=b0(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=di.makeFromBucketSpec(this._url,e):this._bucket=b0(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){S0("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){S0("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Qu(this,e)}_makeRequest(e,t,i,r,s=!0){if(this._deleted)return new gF(NI());{const o=AF(e,this._appId,i,r,t,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,t){const[i,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,i,r).getPromise()}}const I0="@firebase/storage",C0="0.12.4";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MI="storage";function kF(n=zT(),e){n=vi(n);const i=$T(n,MI).getImmediate({identifier:e}),r=OT("storage");return r&&NF(i,...r),i}function NF(n,e,t,i={}){PF(n,e,t,i)}function MF(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),i=n.getProvider("auth-internal"),r=n.getProvider("app-check-internal");return new OF(t,i,r,e,ma)}function DF(){Bi(new wi(MI,MF,"PUBLIC").setMultipleInstances(!0)),Ln(I0,C0,""),Ln(I0,C0,"esm2017")}DF();function LF(n,{firebaseApp:e,modules:t=[]}){n.provide(kO,e);for(const i of t)i(e,n)}function VF(){return DI().__VUE_DEVTOOLS_GLOBAL_HOOK__}function DI(){return typeof navigator<"u"&&typeof window<"u"?window:typeof globalThis<"u"?globalThis:{}}const FF=typeof Proxy=="function",UF="devtools-plugin:setup",$F="plugin:settings:set";let oo,Mp;function BF(){var n;return oo!==void 0||(typeof window<"u"&&window.performance?(oo=!0,Mp=window.performance):typeof globalThis<"u"&&(!((n=globalThis.perf_hooks)===null||n===void 0)&&n.performance)?(oo=!0,Mp=globalThis.perf_hooks.performance):oo=!1),oo}function zF(){return BF()?Mp.now():Date.now()}class jF{constructor(e,t){this.target=null,this.targetQueue=[],this.onQueue=[],this.plugin=e,this.hook=t;const i={};if(e.settings)for(const o in e.settings){const a=e.settings[o];i[o]=a.defaultValue}const r=`__vue-devtools-plugin-settings__${e.id}`;let s=Object.assign({},i);try{const o=localStorage.getItem(r),a=JSON.parse(o);Object.assign(s,a)}catch{}this.fallbacks={getSettings(){return s},setSettings(o){try{localStorage.setItem(r,JSON.stringify(o))}catch{}s=o},now(){return zF()}},t&&t.on($F,(o,a)=>{o===this.plugin.id&&this.fallbacks.setSettings(a)}),this.proxiedOn=new Proxy({},{get:(o,a)=>this.target?this.target.on[a]:(...l)=>{this.onQueue.push({method:a,args:l})}}),this.proxiedTarget=new Proxy({},{get:(o,a)=>this.target?this.target[a]:a==="on"?this.proxiedOn:Object.keys(this.fallbacks).includes(a)?(...l)=>(this.targetQueue.push({method:a,args:l,resolve:()=>{}}),this.fallbacks[a](...l)):(...l)=>new Promise(c=>{this.targetQueue.push({method:a,args:l,resolve:c})})})}async setRealTarget(e){this.target=e;for(const t of this.onQueue)this.target.on[t.method](...t.args);for(const t of this.targetQueue)t.resolve(await this.target[t.method](...t.args))}}function GF(n,e){const t=n,i=DI(),r=VF(),s=FF&&t.enableEarlyProxy;if(r&&(i.__VUE_DEVTOOLS_PLUGIN_API_AVAILABLE__||!s))r.emit(UF,n,e);else{const o=s?new jF(t,r):null;(i.__VUE_DEVTOOLS_PLUGINS__=i.__VUE_DEVTOOLS_PLUGINS__||[]).push({pluginDescriptor:t,setupFn:e,proxy:o}),o&&e(o.proxiedTarget)}}/*!
  * vue-router v4.3.2
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const go=typeof document<"u";function qF(n){return n.__esModule||n[Symbol.toStringTag]==="Module"}const Ke=Object.assign;function Wd(n,e){const t={};for(const i in e){const r=e[i];t[i]=bi(r)?r.map(n):n(r)}return t}const ml=()=>{},bi=Array.isArray,LI=/#/g,HF=/&/g,WF=/\//g,KF=/=/g,YF=/\?/g,VI=/\+/g,XF=/%5B/g,QF=/%5D/g,FI=/%5E/g,JF=/%60/g,UI=/%7B/g,ZF=/%7C/g,$I=/%7D/g,e2=/%20/g;function rm(n){return encodeURI(""+n).replace(ZF,"|").replace(XF,"[").replace(QF,"]")}function t2(n){return rm(n).replace(UI,"{").replace($I,"}").replace(FI,"^")}function Dp(n){return rm(n).replace(VI,"%2B").replace(e2,"+").replace(LI,"%23").replace(HF,"%26").replace(JF,"`").replace(UI,"{").replace($I,"}").replace(FI,"^")}function n2(n){return Dp(n).replace(KF,"%3D")}function i2(n){return rm(n).replace(LI,"%23").replace(YF,"%3F")}function r2(n){return n==null?"":i2(n).replace(WF,"%2F")}function Kl(n){try{return decodeURIComponent(""+n)}catch{}return""+n}const s2=/\/$/,o2=n=>n.replace(s2,"");function Kd(n,e,t="/"){let i,r={},s="",o="";const a=e.indexOf("#");let l=e.indexOf("?");return a<l&&a>=0&&(l=-1),l>-1&&(i=e.slice(0,l),s=e.slice(l+1,a>-1?a:e.length),r=n(s)),a>-1&&(i=i||e.slice(0,a),o=e.slice(a,e.length)),i=u2(i??e,t),{fullPath:i+(s&&"?")+s+o,path:i,query:r,hash:Kl(o)}}function a2(n,e){const t=e.query?n(e.query):"";return e.path+(t&&"?")+t+(e.hash||"")}function A0(n,e){return!e||!n.toLowerCase().startsWith(e.toLowerCase())?n:n.slice(e.length)||"/"}function l2(n,e,t){const i=e.matched.length-1,r=t.matched.length-1;return i>-1&&i===r&&ra(e.matched[i],t.matched[r])&&BI(e.params,t.params)&&n(e.query)===n(t.query)&&e.hash===t.hash}function ra(n,e){return(n.aliasOf||n)===(e.aliasOf||e)}function BI(n,e){if(Object.keys(n).length!==Object.keys(e).length)return!1;for(const t in n)if(!c2(n[t],e[t]))return!1;return!0}function c2(n,e){return bi(n)?x0(n,e):bi(e)?x0(e,n):n===e}function x0(n,e){return bi(e)?n.length===e.length&&n.every((t,i)=>t===e[i]):n.length===1&&n[0]===e}function u2(n,e){if(n.startsWith("/"))return n;if(!n)return e;const t=e.split("/"),i=n.split("/"),r=i[i.length-1];(r===".."||r===".")&&i.push("");let s=t.length-1,o,a;for(o=0;o<i.length;o++)if(a=i[o],a!==".")if(a==="..")s>1&&s--;else break;return t.slice(0,s).join("/")+"/"+i.slice(o).join("/")}var Yl;(function(n){n.pop="pop",n.push="push"})(Yl||(Yl={}));var yl;(function(n){n.back="back",n.forward="forward",n.unknown=""})(yl||(yl={}));function h2(n){if(!n)if(go){const e=document.querySelector("base");n=e&&e.getAttribute("href")||"/",n=n.replace(/^\w+:\/\/[^\/]+/,"")}else n="/";return n[0]!=="/"&&n[0]!=="#"&&(n="/"+n),o2(n)}const d2=/^[^#]+#/;function f2(n,e){return n.replace(d2,"#")+e}function p2(n,e){const t=document.documentElement.getBoundingClientRect(),i=n.getBoundingClientRect();return{behavior:e.behavior,left:i.left-t.left-(e.left||0),top:i.top-t.top-(e.top||0)}}const td=()=>({left:window.scrollX,top:window.scrollY});function _2(n){let e;if("el"in n){const t=n.el,i=typeof t=="string"&&t.startsWith("#"),r=typeof t=="string"?i?document.getElementById(t.slice(1)):document.querySelector(t):t;if(!r)return;e=p2(r,n)}else e=n;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function R0(n,e){return(history.state?history.state.position-e:-1)+n}const Lp=new Map;function g2(n,e){Lp.set(n,e)}function m2(n){const e=Lp.get(n);return Lp.delete(n),e}let y2=()=>location.protocol+"//"+location.host;function zI(n,e){const{pathname:t,search:i,hash:r}=e,s=n.indexOf("#");if(s>-1){let a=r.includes(n.slice(s))?n.slice(s).length:1,l=r.slice(a);return l[0]!=="/"&&(l="/"+l),A0(l,"")}return A0(t,n)+i+r}function v2(n,e,t,i){let r=[],s=[],o=null;const a=({state:f})=>{const d=zI(n,location),_=t.value,p=e.value;let g=0;if(f){if(t.value=d,e.value=f,o&&o===_){o=null;return}g=p?f.position-p.position:0}else i(d);r.forEach(m=>{m(t.value,_,{delta:g,type:Yl.pop,direction:g?g>0?yl.forward:yl.back:yl.unknown})})};function l(){o=t.value}function c(f){r.push(f);const d=()=>{const _=r.indexOf(f);_>-1&&r.splice(_,1)};return s.push(d),d}function u(){const{history:f}=window;f.state&&f.replaceState(Ke({},f.state,{scroll:td()}),"")}function h(){for(const f of s)f();s=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",u)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",u,{passive:!0}),{pauseListeners:l,listen:c,destroy:h}}function P0(n,e,t,i=!1,r=!1){return{back:n,current:e,forward:t,replaced:i,position:window.history.length,scroll:r?td():null}}function w2(n){const{history:e,location:t}=window,i={value:zI(n,t)},r={value:e.state};r.value||s(i.value,{back:null,current:i.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function s(l,c,u){const h=n.indexOf("#"),f=h>-1?(t.host&&document.querySelector("base")?n:n.slice(h))+l:y2()+n+l;try{e[u?"replaceState":"pushState"](c,"",f),r.value=c}catch(d){console.error(d),t[u?"replace":"assign"](f)}}function o(l,c){const u=Ke({},e.state,P0(r.value.back,l,r.value.forward,!0),c,{position:r.value.position});s(l,u,!0),i.value=l}function a(l,c){const u=Ke({},r.value,e.state,{forward:l,scroll:td()});s(u.current,u,!0);const h=Ke({},P0(i.value,l,null),{position:u.position+1},c);s(l,h,!1),i.value=l}return{location:i,state:r,push:a,replace:o}}function T2(n){n=h2(n);const e=w2(n),t=v2(n,e.state,e.location,e.replace);function i(s,o=!0){o||t.pauseListeners(),history.go(s)}const r=Ke({location:"",base:n,go:i,createHref:f2.bind(null,n)},e,t);return Object.defineProperty(r,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(r,"state",{enumerable:!0,get:()=>e.state.value}),r}function E2(n){return typeof n=="string"||n&&typeof n=="object"}function jI(n){return typeof n=="string"||typeof n=="symbol"}const Sr={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},GI=Symbol("");var O0;(function(n){n[n.aborted=4]="aborted",n[n.cancelled=8]="cancelled",n[n.duplicated=16]="duplicated"})(O0||(O0={}));function sa(n,e){return Ke(new Error,{type:n,[GI]:!0},e)}function Xi(n,e){return n instanceof Error&&GI in n&&(e==null||!!(n.type&e))}const k0="[^/]+?",S2={sensitive:!1,strict:!1,start:!0,end:!0},b2=/[.+*?^${}()[\]/\\]/g;function I2(n,e){const t=Ke({},S2,e),i=[];let r=t.start?"^":"";const s=[];for(const c of n){const u=c.length?[]:[90];t.strict&&!c.length&&(r+="/");for(let h=0;h<c.length;h++){const f=c[h];let d=40+(t.sensitive?.25:0);if(f.type===0)h||(r+="/"),r+=f.value.replace(b2,"\\$&"),d+=40;else if(f.type===1){const{value:_,repeatable:p,optional:g,regexp:m}=f;s.push({name:_,repeatable:p,optional:g});const T=m||k0;if(T!==k0){d+=10;try{new RegExp(`(${T})`)}catch(S){throw new Error(`Invalid custom RegExp for param "${_}" (${T}): `+S.message)}}let w=p?`((?:${T})(?:/(?:${T}))*)`:`(${T})`;h||(w=g&&c.length<2?`(?:/${w})`:"/"+w),g&&(w+="?"),r+=w,d+=20,g&&(d+=-8),p&&(d+=-20),T===".*"&&(d+=-50)}u.push(d)}i.push(u)}if(t.strict&&t.end){const c=i.length-1;i[c][i[c].length-1]+=.7000000000000001}t.strict||(r+="/?"),t.end?r+="$":t.strict&&(r+="(?:/|$)");const o=new RegExp(r,t.sensitive?"":"i");function a(c){const u=c.match(o),h={};if(!u)return null;for(let f=1;f<u.length;f++){const d=u[f]||"",_=s[f-1];h[_.name]=d&&_.repeatable?d.split("/"):d}return h}function l(c){let u="",h=!1;for(const f of n){(!h||!u.endsWith("/"))&&(u+="/"),h=!1;for(const d of f)if(d.type===0)u+=d.value;else if(d.type===1){const{value:_,repeatable:p,optional:g}=d,m=_ in c?c[_]:"";if(bi(m)&&!p)throw new Error(`Provided param "${_}" is an array but it is not repeatable (* or + modifiers)`);const T=bi(m)?m.join("/"):m;if(!T)if(g)f.length<2&&(u.endsWith("/")?u=u.slice(0,-1):h=!0);else throw new Error(`Missing required param "${_}"`);u+=T}}return u||"/"}return{re:o,score:i,keys:s,parse:a,stringify:l}}function C2(n,e){let t=0;for(;t<n.length&&t<e.length;){const i=e[t]-n[t];if(i)return i;t++}return n.length<e.length?n.length===1&&n[0]===80?-1:1:n.length>e.length?e.length===1&&e[0]===80?1:-1:0}function A2(n,e){let t=0;const i=n.score,r=e.score;for(;t<i.length&&t<r.length;){const s=C2(i[t],r[t]);if(s)return s;t++}if(Math.abs(r.length-i.length)===1){if(N0(i))return 1;if(N0(r))return-1}return r.length-i.length}function N0(n){const e=n[n.length-1];return n.length>0&&e[e.length-1]<0}const x2={type:0,value:""},R2=/[a-zA-Z0-9_]/;function P2(n){if(!n)return[[]];if(n==="/")return[[x2]];if(!n.startsWith("/"))throw new Error(`Invalid path "${n}"`);function e(d){throw new Error(`ERR (${t})/"${c}": ${d}`)}let t=0,i=t;const r=[];let s;function o(){s&&r.push(s),s=[]}let a=0,l,c="",u="";function h(){c&&(t===0?s.push({type:0,value:c}):t===1||t===2||t===3?(s.length>1&&(l==="*"||l==="+")&&e(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),s.push({type:1,value:c,regexp:u,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),c="")}function f(){c+=l}for(;a<n.length;){if(l=n[a++],l==="\\"&&t!==2){i=t,t=4;continue}switch(t){case 0:l==="/"?(c&&h(),o()):l===":"?(h(),t=1):f();break;case 4:f(),t=i;break;case 1:l==="("?t=2:R2.test(l)?f():(h(),t=0,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case 2:l===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+l:t=3:u+=l;break;case 3:h(),t=0,l!=="*"&&l!=="?"&&l!=="+"&&a--,u="";break;default:e("Unknown state");break}}return t===2&&e(`Unfinished custom RegExp for param "${c}"`),h(),o(),r}function O2(n,e,t){const i=I2(P2(n.path),t),r=Ke(i,{record:n,parent:e,children:[],alias:[]});return e&&!r.record.aliasOf==!e.record.aliasOf&&e.children.push(r),r}function k2(n,e){const t=[],i=new Map;e=L0({strict:!1,end:!0,sensitive:!1},e);function r(u){return i.get(u)}function s(u,h,f){const d=!f,_=N2(u);_.aliasOf=f&&f.record;const p=L0(e,u),g=[_];if("alias"in u){const w=typeof u.alias=="string"?[u.alias]:u.alias;for(const S of w)g.push(Ke({},_,{components:f?f.record.components:_.components,path:S,aliasOf:f?f.record:_}))}let m,T;for(const w of g){const{path:S}=w;if(h&&S[0]!=="/"){const E=h.record.path,I=E[E.length-1]==="/"?"":"/";w.path=h.record.path+(S&&I+S)}if(m=O2(w,h,p),f?f.alias.push(m):(T=T||m,T!==m&&T.alias.push(m),d&&u.name&&!D0(m)&&o(u.name)),_.children){const E=_.children;for(let I=0;I<E.length;I++)s(E[I],m,f&&f.children[I])}f=f||m,(m.record.components&&Object.keys(m.record.components).length||m.record.name||m.record.redirect)&&l(m)}return T?()=>{o(T)}:ml}function o(u){if(jI(u)){const h=i.get(u);h&&(i.delete(u),t.splice(t.indexOf(h),1),h.children.forEach(o),h.alias.forEach(o))}else{const h=t.indexOf(u);h>-1&&(t.splice(h,1),u.record.name&&i.delete(u.record.name),u.children.forEach(o),u.alias.forEach(o))}}function a(){return t}function l(u){let h=0;for(;h<t.length&&A2(u,t[h])>=0&&(u.record.path!==t[h].record.path||!qI(u,t[h]));)h++;t.splice(h,0,u),u.record.name&&!D0(u)&&i.set(u.record.name,u)}function c(u,h){let f,d={},_,p;if("name"in u&&u.name){if(f=i.get(u.name),!f)throw sa(1,{location:u});p=f.record.name,d=Ke(M0(h.params,f.keys.filter(T=>!T.optional).concat(f.parent?f.parent.keys.filter(T=>T.optional):[]).map(T=>T.name)),u.params&&M0(u.params,f.keys.map(T=>T.name))),_=f.stringify(d)}else if(u.path!=null)_=u.path,f=t.find(T=>T.re.test(_)),f&&(d=f.parse(_),p=f.record.name);else{if(f=h.name?i.get(h.name):t.find(T=>T.re.test(h.path)),!f)throw sa(1,{location:u,currentLocation:h});p=f.record.name,d=Ke({},h.params,u.params),_=f.stringify(d)}const g=[];let m=f;for(;m;)g.unshift(m.record),m=m.parent;return{name:p,path:_,params:d,matched:g,meta:D2(g)}}return n.forEach(u=>s(u)),{addRoute:s,resolve:c,removeRoute:o,getRoutes:a,getRecordMatcher:r}}function M0(n,e){const t={};for(const i of e)i in n&&(t[i]=n[i]);return t}function N2(n){return{path:n.path,redirect:n.redirect,name:n.name,meta:n.meta||{},aliasOf:void 0,beforeEnter:n.beforeEnter,props:M2(n),children:n.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in n?n.components||null:n.component&&{default:n.component}}}function M2(n){const e={},t=n.props||!1;if("component"in n)e.default=t;else for(const i in n.components)e[i]=typeof t=="object"?t[i]:t;return e}function D0(n){for(;n;){if(n.record.aliasOf)return!0;n=n.parent}return!1}function D2(n){return n.reduce((e,t)=>Ke(e,t.meta),{})}function L0(n,e){const t={};for(const i in n)t[i]=i in e?e[i]:n[i];return t}function qI(n,e){return e.children.some(t=>t===n||qI(n,t))}function L2(n){const e={};if(n===""||n==="?")return e;const i=(n[0]==="?"?n.slice(1):n).split("&");for(let r=0;r<i.length;++r){const s=i[r].replace(VI," "),o=s.indexOf("="),a=Kl(o<0?s:s.slice(0,o)),l=o<0?null:Kl(s.slice(o+1));if(a in e){let c=e[a];bi(c)||(c=e[a]=[c]),c.push(l)}else e[a]=l}return e}function V0(n){let e="";for(let t in n){const i=n[t];if(t=n2(t),i==null){i!==void 0&&(e+=(e.length?"&":"")+t);continue}(bi(i)?i.map(s=>s&&Dp(s)):[i&&Dp(i)]).forEach(s=>{s!==void 0&&(e+=(e.length?"&":"")+t,s!=null&&(e+="="+s))})}return e}function V2(n){const e={};for(const t in n){const i=n[t];i!==void 0&&(e[t]=bi(i)?i.map(r=>r==null?null:""+r):i==null?i:""+i)}return e}const F2=Symbol(""),F0=Symbol(""),sm=Symbol(""),HI=Symbol(""),Vp=Symbol("");function Fa(){let n=[];function e(i){return n.push(i),()=>{const r=n.indexOf(i);r>-1&&n.splice(r,1)}}function t(){n=[]}return{add:e,list:()=>n.slice(),reset:t}}function Rr(n,e,t,i,r,s=o=>o()){const o=i&&(i.enterCallbacks[r]=i.enterCallbacks[r]||[]);return()=>new Promise((a,l)=>{const c=f=>{f===!1?l(sa(4,{from:t,to:e})):f instanceof Error?l(f):E2(f)?l(sa(2,{from:e,to:f})):(o&&i.enterCallbacks[r]===o&&typeof f=="function"&&o.push(f),a())},u=s(()=>n.call(i&&i.instances[r],e,t,c));let h=Promise.resolve(u);n.length<3&&(h=h.then(c)),h.catch(f=>l(f))})}function Yd(n,e,t,i,r=s=>s()){const s=[];for(const o of n)for(const a in o.components){let l=o.components[a];if(!(e!=="beforeRouteEnter"&&!o.instances[a]))if(U2(l)){const u=(l.__vccOpts||l)[e];u&&s.push(Rr(u,t,i,o,a,r))}else{let c=l();s.push(()=>c.then(u=>{if(!u)return Promise.reject(new Error(`Couldn't resolve component "${a}" at "${o.path}"`));const h=qF(u)?u.default:u;o.components[a]=h;const d=(h.__vccOpts||h)[e];return d&&Rr(d,t,i,o,a,r)()}))}}return s}function U2(n){return typeof n=="object"||"displayName"in n||"props"in n||"__vccOpts"in n}function U0(n){const e=lr(sm),t=lr(HI),i=Wn(()=>{const l=bo(n.to);return e.resolve(l)}),r=Wn(()=>{const{matched:l}=i.value,{length:c}=l,u=l[c-1],h=t.matched;if(!u||!h.length)return-1;const f=h.findIndex(ra.bind(null,u));if(f>-1)return f;const d=$0(l[c-2]);return c>1&&$0(u)===d&&h[h.length-1].path!==d?h.findIndex(ra.bind(null,l[c-2])):f}),s=Wn(()=>r.value>-1&&j2(t.params,i.value.params)),o=Wn(()=>r.value>-1&&r.value===t.matched.length-1&&BI(t.params,i.value.params));function a(l={}){return z2(l)?e[bo(n.replace)?"replace":"push"](bo(n.to)).catch(ml):Promise.resolve()}return{route:i,href:Wn(()=>i.value.href),isActive:s,isExactActive:o,navigate:a}}const $2=sT({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:U0,setup(n,{slots:e}){const t=sc(U0(n)),{options:i}=lr(sm),r=Wn(()=>({[B0(n.activeClass,i.linkActiveClass,"router-link-active")]:t.isActive,[B0(n.exactActiveClass,i.linkExactActiveClass,"router-link-exact-active")]:t.isExactActive}));return()=>{const s=e.default&&e.default(t);return n.custom?s:kn("a",{"aria-current":t.isExactActive?n.ariaCurrentValue:null,href:t.href,onClick:t.navigate,class:r.value},s)}}}),B2=$2;function z2(n){if(!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)&&!n.defaultPrevented&&!(n.button!==void 0&&n.button!==0)){if(n.currentTarget&&n.currentTarget.getAttribute){const e=n.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return n.preventDefault&&n.preventDefault(),!0}}function j2(n,e){for(const t in e){const i=e[t],r=n[t];if(typeof i=="string"){if(i!==r)return!1}else if(!bi(r)||r.length!==i.length||i.some((s,o)=>s!==r[o]))return!1}return!0}function $0(n){return n?n.aliasOf?n.aliasOf.path:n.path:""}const B0=(n,e,t)=>n??e??t,G2=sT({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(n,{attrs:e,slots:t}){const i=lr(Vp),r=Wn(()=>n.route||i.value),s=lr(F0,0),o=Wn(()=>{let c=bo(s);const{matched:u}=r.value;let h;for(;(h=u[c])&&!h.components;)c++;return c}),a=Wn(()=>r.value.matched[o.value]);Co(F0,Wn(()=>o.value+1)),Co(F2,a),Co(Vp,r);const l=Zt();return As(()=>[l.value,a.value,n.name],([c,u,h],[f,d,_])=>{u&&(u.instances[h]=c,d&&d!==u&&c&&c===f&&(u.leaveGuards.size||(u.leaveGuards=d.leaveGuards),u.updateGuards.size||(u.updateGuards=d.updateGuards))),c&&u&&(!d||!ra(u,d)||!f)&&(u.enterCallbacks[h]||[]).forEach(p=>p(c))},{flush:"post"}),()=>{const c=r.value,u=n.name,h=a.value,f=h&&h.components[u];if(!f)return z0(t.default,{Component:f,route:c});const d=h.props[u],_=d?d===!0?c.params:typeof d=="function"?d(c):d:null,g=kn(f,Ke({},_,e,{onVnodeUnmounted:m=>{m.component.isUnmounted&&(h.instances[u]=null)},ref:l}));return z0(t.default,{Component:g,route:c})||g}}});function z0(n,e){if(!n)return null;const t=n(e);return t.length===1?t[0]:t}const q2=G2;function H2(n){const e=k2(n.routes,n),t=n.parseQuery||L2,i=n.stringifyQuery||V0,r=n.history,s=Fa(),o=Fa(),a=Fa(),l=f1(Sr);let c=Sr;go&&n.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=Wd.bind(null,M=>""+M),h=Wd.bind(null,r2),f=Wd.bind(null,Kl);function d(M,q){let K,te;return jI(M)?(K=e.getRecordMatcher(M),te=q):te=M,e.addRoute(te,K)}function _(M){const q=e.getRecordMatcher(M);q&&e.removeRoute(q)}function p(){return e.getRoutes().map(M=>M.record)}function g(M){return!!e.getRecordMatcher(M)}function m(M,q){if(q=Ke({},q||l.value),typeof M=="string"){const v=Kd(t,M,q.path),C=e.resolve({path:v.path},q),L=r.createHref(v.fullPath);return Ke(v,C,{params:f(C.params),hash:Kl(v.hash),redirectedFrom:void 0,href:L})}let K;if(M.path!=null)K=Ke({},M,{path:Kd(t,M.path,q.path).path});else{const v=Ke({},M.params);for(const C in v)v[C]==null&&delete v[C];K=Ke({},M,{params:h(v)}),q.params=h(q.params)}const te=e.resolve(K,q),be=M.hash||"";te.params=u(f(te.params));const Fe=a2(i,Ke({},M,{hash:t2(be),path:te.path})),y=r.createHref(Fe);return Ke({fullPath:Fe,hash:be,query:i===V0?V2(M.query):M.query||{}},te,{redirectedFrom:void 0,href:y})}function T(M){return typeof M=="string"?Kd(t,M,l.value.path):Ke({},M)}function w(M,q){if(c!==M)return sa(8,{from:q,to:M})}function S(M){return P(M)}function E(M){return S(Ke(T(M),{replace:!0}))}function I(M){const q=M.matched[M.matched.length-1];if(q&&q.redirect){const{redirect:K}=q;let te=typeof K=="function"?K(M):K;return typeof te=="string"&&(te=te.includes("?")||te.includes("#")?te=T(te):{path:te},te.params={}),Ke({query:M.query,hash:M.hash,params:te.path!=null?{}:M.params},te)}}function P(M,q){const K=c=m(M),te=l.value,be=M.state,Fe=M.force,y=M.replace===!0,v=I(K);if(v)return P(Ke(T(v),{state:typeof v=="object"?Ke({},be,v.state):be,force:Fe,replace:y}),q||K);const C=K;C.redirectedFrom=q;let L;return!Fe&&l2(i,te,K)&&(L=sa(16,{to:C,from:te}),Se(te,te,!0,!1)),(L?Promise.resolve(L):k(C,te)).catch(O=>Xi(O)?Xi(O,2)?O:bt(O):he(O,C,te)).then(O=>{if(O){if(Xi(O,2))return P(Ke({replace:y},T(O.to),{state:typeof O.to=="object"?Ke({},be,O.to.state):be,force:Fe}),q||C)}else O=W(C,te,!0,y,be);return D(C,te,O),O})}function x(M,q){const K=w(M,q);return K?Promise.reject(K):Promise.resolve()}function A(M){const q=Ce.values().next().value;return q&&typeof q.runWithContext=="function"?q.runWithContext(M):M()}function k(M,q){let K;const[te,be,Fe]=W2(M,q);K=Yd(te.reverse(),"beforeRouteLeave",M,q);for(const v of te)v.leaveGuards.forEach(C=>{K.push(Rr(C,M,q))});const y=x.bind(null,M,q);return K.push(y),We(K).then(()=>{K=[];for(const v of s.list())K.push(Rr(v,M,q));return K.push(y),We(K)}).then(()=>{K=Yd(be,"beforeRouteUpdate",M,q);for(const v of be)v.updateGuards.forEach(C=>{K.push(Rr(C,M,q))});return K.push(y),We(K)}).then(()=>{K=[];for(const v of Fe)if(v.beforeEnter)if(bi(v.beforeEnter))for(const C of v.beforeEnter)K.push(Rr(C,M,q));else K.push(Rr(v.beforeEnter,M,q));return K.push(y),We(K)}).then(()=>(M.matched.forEach(v=>v.enterCallbacks={}),K=Yd(Fe,"beforeRouteEnter",M,q,A),K.push(y),We(K))).then(()=>{K=[];for(const v of o.list())K.push(Rr(v,M,q));return K.push(y),We(K)}).catch(v=>Xi(v,8)?v:Promise.reject(v))}function D(M,q,K){a.list().forEach(te=>A(()=>te(M,q,K)))}function W(M,q,K,te,be){const Fe=w(M,q);if(Fe)return Fe;const y=q===Sr,v=go?history.state:{};K&&(te||y?r.replace(M.fullPath,Ke({scroll:y&&v&&v.scroll},be)):r.push(M.fullPath,be)),l.value=M,Se(M,q,K,y),bt()}let N;function de(){N||(N=r.listen((M,q,K)=>{if(!Gt.listening)return;const te=m(M),be=I(te);if(be){P(Ke(be,{replace:!0}),te).catch(ml);return}c=te;const Fe=l.value;go&&g2(R0(Fe.fullPath,K.delta),td()),k(te,Fe).catch(y=>Xi(y,12)?y:Xi(y,2)?(P(y.to,te).then(v=>{Xi(v,20)&&!K.delta&&K.type===Yl.pop&&r.go(-1,!1)}).catch(ml),Promise.reject()):(K.delta&&r.go(-K.delta,!1),he(y,te,Fe))).then(y=>{y=y||W(te,Fe,!1),y&&(K.delta&&!Xi(y,8)?r.go(-K.delta,!1):K.type===Yl.pop&&Xi(y,20)&&r.go(-1,!1)),D(te,Fe,y)}).catch(ml)}))}let fe=Fa(),ne=Fa(),Z;function he(M,q,K){bt(M);const te=ne.list();return te.length?te.forEach(be=>be(M,q,K)):console.error(M),Promise.reject(M)}function St(){return Z&&l.value!==Sr?Promise.resolve():new Promise((M,q)=>{fe.add([M,q])})}function bt(M){return Z||(Z=!M,de(),fe.list().forEach(([q,K])=>M?K(M):q()),fe.reset()),M}function Se(M,q,K,te){const{scrollBehavior:be}=n;if(!go||!be)return Promise.resolve();const Fe=!K&&m2(R0(M.fullPath,0))||(te||!K)&&history.state&&history.state.scroll||null;return b_().then(()=>be(M,q,Fe)).then(y=>y&&_2(y)).catch(y=>he(y,M,q))}const _e=M=>r.go(M);let He;const Ce=new Set,Gt={currentRoute:l,listening:!0,addRoute:d,removeRoute:_,hasRoute:g,getRoutes:p,resolve:m,options:n,push:S,replace:E,go:_e,back:()=>_e(-1),forward:()=>_e(1),beforeEach:s.add,beforeResolve:o.add,afterEach:a.add,onError:ne.add,isReady:St,install(M){const q=this;M.component("RouterLink",B2),M.component("RouterView",q2),M.config.globalProperties.$router=q,Object.defineProperty(M.config.globalProperties,"$route",{enumerable:!0,get:()=>bo(l)}),go&&!He&&l.value===Sr&&(He=!0,S(r.location).catch(be=>{}));const K={};for(const be in Sr)Object.defineProperty(K,be,{get:()=>l.value[be],enumerable:!0});M.provide(sm,q),M.provide(HI,Gw(K)),M.provide(Vp,l);const te=M.unmount;Ce.add(M),M.unmount=function(){Ce.delete(M),Ce.size<1&&(c=Sr,N&&N(),N=null,l.value=Sr,He=!1,Z=!1),te()}}};function We(M){return M.reduce((q,K)=>q.then(()=>A(K)),Promise.resolve())}return Gt}function W2(n,e){const t=[],i=[],r=[],s=Math.max(e.matched.length,n.matched.length);for(let o=0;o<s;o++){const a=e.matched[o];a&&(n.matched.find(c=>ra(c,a))?i.push(a):t.push(a));const l=n.matched[o];l&&(e.matched.find(c=>ra(c,l))||r.push(l))}return[t,i,r]}const K2="/museum-rock/img/svg/contacs-address.svg",Y2="/museum-rock/img/svg/contacs-tel.svg",X2="/museum-rock/img/svg/contacs-mail.svg",pt=(n,e)=>{const t=n.__vccOpts||n;for(const[i,r]of e)t[i]=r;return t},Q2={},J2={class:"footer"},Z2=bT('<div class="container" data-v-e3a01502><div class="footer__inner" data-v-e3a01502><h3 class="footer__title" data-v-e3a01502>Музей камня</h3><div class="footer__row" data-v-e3a01502><div class="footer__contacts" data-v-e3a01502><address class="footer__address" data-v-e3a01502><img class="footer__contacts-icon" src="'+K2+'" alt="Местоположение" data-v-e3a01502> Красноярск, ул. Ады Лебедевой, 93В </address><a href="tel:+79080473776" class="footer__number" data-v-e3a01502><img class="footer__contacts-icon" src="'+Y2+'" alt="Местоположение" data-v-e3a01502><span class="footer__contacts-link" data-v-e3a01502> +7 (908) 047-37-76 </span></a><a href="mailto:test@test.ru" class="footer__email" data-v-e3a01502><img class="footer__contacts-icon" src="'+X2+'" alt="Местоположение" data-v-e3a01502><span class="footer__contacts-link" data-v-e3a01502> test@test.ru </span></a></div><div class="footer__social" data-v-e3a01502><ul class="footer__social-list list-reset" data-v-e3a01502><li class="footer__social-item" data-v-e3a01502><a href="" class="footer__social-link" data-v-e3a01502><svg xmlns="http://www.w3.org/2000/svg" width="9.3" height="7.9" viewBox="0 0 9.3 7.9" xml:space="preserve" data-v-e3a01502><path d="M3.5 7.4c0-.4 0-.6.1-1.1v-.9c0-.1.1-.3.2-.4l3.9-3.5c0-.1-3 1.6-4.2 2.4-.3.2-.6.4-1 .6-.1 0-.1.1-.2 0C1.7 4.4 1 4.2.4 4c-.2-.1-.4-.1-.4-.3s.1-.3.3-.4L8.5.1c.3-.1.6 0 .7.1.2.1.2.3.1.6C9 2.1 7.9 7.4 7.8 7.5c-.1.4-.4.5-.7.3-.7-.5-1.3-1-2-1.5-.1-.1-.2-.1-.3 0-.3.3-.6.7-1 1-.1.1-.2.1-.3.1z" fill="#fff" data-v-e3a01502></path></svg></a></li><li class="footer__social-item" data-v-e3a01502><a href="https://vk.com/mineralsatka" class="footer__social-link" data-v-e3a01502><svg xmlns="http://www.w3.org/2000/svg" width="13" height="8" viewBox="0 0 32 20" xml:space="preserve" data-v-e3a01502><path d="M17.4 20C6.5 20 .3 12.5 0 0h5.5c.2 9.2 4.2 13 7.4 13.8V0h5.2v7.9c3.1-.3 6.4-3.9 7.6-7.9h5.2c-.9 4.9-4.5 8.5-7 10 2.6 1.2 6.7 4.3 8.2 10h-5.7c-1.2-3.8-4.3-6.7-8.3-7.1V20h-.7z" fill="#fff" data-v-e3a01502></path></svg></a></li></ul></div></div></div></div>',1),eU=[Z2];function tU(n,e,t,i,r,s){return Te(),Ge("footer",J2,eU)}const WI=pt(Q2,[["render",tU],["__scopeId","data-v-e3a01502"]]),nU={setup(){return{}}},nd=n=>(qi("data-v-467f0aa9"),n=n(),Hi(),n),iU={class:"nav"},rU={class:"list-reset nav__list"},sU={class:"nav__item"},oU=nd(()=>j("span",{class:"nav__link-text"},"Экспонаты",-1)),aU={class:"nav__item"},lU=nd(()=>j("span",{class:"nav__link-text"},"Основатели",-1)),cU={class:"nav__item"},uU=nd(()=>j("span",{class:"nav__link-text"},"Таймлайн",-1)),hU={class:"nav__item"},dU=nd(()=>j("span",{class:"nav__link-text"},"Афиша",-1));function fU(n,e,t,i,r,s){const o=it("router-link");return Te(),Ge("nav",iU,[j("ul",rU,[j("li",sU,[$e(o,{to:"/exhibitions",class:pi(["nav__link nav__link-exhibitions",{"router-link-active":this.$route.path.startsWith("/exhibitions")}])},{default:ci(()=>[oU]),_:1},8,["class"])]),j("li",aU,[$e(o,{to:"/people",class:"nav__link"},{default:ci(()=>[lU]),_:1})]),j("li",cU,[$e(o,{to:"/timeline",class:"nav__link"},{default:ci(()=>[uU]),_:1})]),j("li",hU,[$e(o,{to:"/afisha",class:"nav__link"},{default:ci(()=>[dU]),_:1})])])])}const pU=pt(nU,[["render",fU],["__scopeId","data-v-467f0aa9"]]),_U={components:{MyNavigation:pU}},gU={class:"header"},mU={class:"container"},yU={class:"header__inner"};function vU(n,e,t,i,r,s){const o=it("router-link"),a=it("my-navigation");return Te(),Ge("header",gU,[j("div",mU,[j("div",yU,[$e(o,{to:"/",class:"header__logo"},{default:ci(()=>[qo(" Главная ")]),_:1}),$e(a)])])])}const wU=pt(_U,[["render",vU],["__scopeId","data-v-c24e5168"]]),TU={components:{HeaderSection:wU,FooterSection:WI},setup(){return{}}},EU={class:"main"};function SU(n,e,t,i,r,s){const o=it("header-section"),a=it("RouterView"),l=it("footer-section");return Te(),Ge(Lt,null,[$e(o),j("main",EU,[$e(a)]),n.$route.path!=="/exhibitions"?(Te(),ei(l,{key:0})):Ho("",!0)],64)}const bU=pt(TU,[["render",SU]]),KI=BT({apiKey:"AIzaSyDGVRmA--pBDYTOjw1YbGuaxsgZmgn-U2A",authDomain:"museum-rock.firebaseapp.com",projectId:"museum-rock",storageBucket:"museum-rock.appspot.com",messagingSenderId:"739406576155",appId:"1:739406576155:web:c2c1ad49e8149dce4956be",measurementId:"G-MZQWMX2D5K"}),om=HV(KI);kF();/*!
 * vuex v4.0.2
 * (c) 2021 Evan You
 * @license MIT
 */var IU="store";function Aa(n,e){Object.keys(n).forEach(function(t){return e(n[t],t)})}function YI(n){return n!==null&&typeof n=="object"}function CU(n){return n&&typeof n.then=="function"}function AU(n,e){return function(){return n(e)}}function XI(n,e,t){return e.indexOf(n)<0&&(t&&t.prepend?e.unshift(n):e.push(n)),function(){var i=e.indexOf(n);i>-1&&e.splice(i,1)}}function QI(n,e){n._actions=Object.create(null),n._mutations=Object.create(null),n._wrappedGetters=Object.create(null),n._modulesNamespaceMap=Object.create(null);var t=n.state;id(n,t,[],n._modules.root,!0),am(n,t,e)}function am(n,e,t){var i=n._state;n.getters={},n._makeLocalGettersCache=Object.create(null);var r=n._wrappedGetters,s={};Aa(r,function(o,a){s[a]=AU(o,n),Object.defineProperty(n.getters,a,{get:function(){return s[a]()},enumerable:!0})}),n._state=sc({data:e}),n.strict&&kU(n),i&&t&&n._withCommit(function(){i.data=null})}function id(n,e,t,i,r){var s=!t.length,o=n._modules.getNamespace(t);if(i.namespaced&&(n._modulesNamespaceMap[o],n._modulesNamespaceMap[o]=i),!s&&!r){var a=lm(e,t.slice(0,-1)),l=t[t.length-1];n._withCommit(function(){a[l]=i.state})}var c=i.context=xU(n,o,t);i.forEachMutation(function(u,h){var f=o+h;RU(n,f,u,c)}),i.forEachAction(function(u,h){var f=u.root?h:o+h,d=u.handler||u;PU(n,f,d,c)}),i.forEachGetter(function(u,h){var f=o+h;OU(n,f,u,c)}),i.forEachChild(function(u,h){id(n,e,t.concat(h),u,r)})}function xU(n,e,t){var i=e==="",r={dispatch:i?n.dispatch:function(s,o,a){var l=Ju(s,o,a),c=l.payload,u=l.options,h=l.type;return(!u||!u.root)&&(h=e+h),n.dispatch(h,c)},commit:i?n.commit:function(s,o,a){var l=Ju(s,o,a),c=l.payload,u=l.options,h=l.type;(!u||!u.root)&&(h=e+h),n.commit(h,c,u)}};return Object.defineProperties(r,{getters:{get:i?function(){return n.getters}:function(){return JI(n,e)}},state:{get:function(){return lm(n.state,t)}}}),r}function JI(n,e){if(!n._makeLocalGettersCache[e]){var t={},i=e.length;Object.keys(n.getters).forEach(function(r){if(r.slice(0,i)===e){var s=r.slice(i);Object.defineProperty(t,s,{get:function(){return n.getters[r]},enumerable:!0})}}),n._makeLocalGettersCache[e]=t}return n._makeLocalGettersCache[e]}function RU(n,e,t,i){var r=n._mutations[e]||(n._mutations[e]=[]);r.push(function(o){t.call(n,i.state,o)})}function PU(n,e,t,i){var r=n._actions[e]||(n._actions[e]=[]);r.push(function(o){var a=t.call(n,{dispatch:i.dispatch,commit:i.commit,getters:i.getters,state:i.state,rootGetters:n.getters,rootState:n.state},o);return CU(a)||(a=Promise.resolve(a)),n._devtoolHook?a.catch(function(l){throw n._devtoolHook.emit("vuex:error",l),l}):a})}function OU(n,e,t,i){n._wrappedGetters[e]||(n._wrappedGetters[e]=function(s){return t(i.state,i.getters,s.state,s.getters)})}function kU(n){As(function(){return n._state.data},function(){},{deep:!0,flush:"sync"})}function lm(n,e){return e.reduce(function(t,i){return t[i]},n)}function Ju(n,e,t){return YI(n)&&n.type&&(t=e,e=n,n=n.type),{type:n,payload:e,options:t}}var NU="vuex bindings",j0="vuex:mutations",Xd="vuex:actions",ao="vuex",MU=0;function DU(n,e){GF({id:"org.vuejs.vuex",app:n,label:"Vuex",homepage:"https://next.vuex.vuejs.org/",logo:"https://vuejs.org/images/icons/favicon-96x96.png",packageName:"vuex",componentStateTypes:[NU]},function(t){t.addTimelineLayer({id:j0,label:"Vuex Mutations",color:G0}),t.addTimelineLayer({id:Xd,label:"Vuex Actions",color:G0}),t.addInspector({id:ao,label:"Vuex",icon:"storage",treeFilterPlaceholder:"Filter stores..."}),t.on.getInspectorTree(function(i){if(i.app===n&&i.inspectorId===ao)if(i.filter){var r=[];nC(r,e._modules.root,i.filter,""),i.rootNodes=r}else i.rootNodes=[tC(e._modules.root,"")]}),t.on.getInspectorState(function(i){if(i.app===n&&i.inspectorId===ao){var r=i.nodeId;JI(e,r),i.state=FU($U(e._modules,r),r==="root"?e.getters:e._makeLocalGettersCache,r)}}),t.on.editInspectorState(function(i){if(i.app===n&&i.inspectorId===ao){var r=i.nodeId,s=i.path;r!=="root"&&(s=r.split("/").filter(Boolean).concat(s)),e._withCommit(function(){i.set(e._state.data,s,i.state.value)})}}),e.subscribe(function(i,r){var s={};i.payload&&(s.payload=i.payload),s.state=r,t.notifyComponentUpdate(),t.sendInspectorTree(ao),t.sendInspectorState(ao),t.addTimelineEvent({layerId:j0,event:{time:Date.now(),title:i.type,data:s}})}),e.subscribeAction({before:function(i,r){var s={};i.payload&&(s.payload=i.payload),i._id=MU++,i._time=Date.now(),s.state=r,t.addTimelineEvent({layerId:Xd,event:{time:i._time,title:i.type,groupId:i._id,subtitle:"start",data:s}})},after:function(i,r){var s={},o=Date.now()-i._time;s.duration={_custom:{type:"duration",display:o+"ms",tooltip:"Action duration",value:o}},i.payload&&(s.payload=i.payload),s.state=r,t.addTimelineEvent({layerId:Xd,event:{time:Date.now(),title:i.type,groupId:i._id,subtitle:"end",data:s}})}})})}var G0=8702998,LU=6710886,VU=16777215,ZI={label:"namespaced",textColor:VU,backgroundColor:LU};function eC(n){return n&&n!=="root"?n.split("/").slice(-2,-1)[0]:"Root"}function tC(n,e){return{id:e||"root",label:eC(e),tags:n.namespaced?[ZI]:[],children:Object.keys(n._children).map(function(t){return tC(n._children[t],e+t+"/")})}}function nC(n,e,t,i){i.includes(t)&&n.push({id:i||"root",label:i.endsWith("/")?i.slice(0,i.length-1):i||"Root",tags:e.namespaced?[ZI]:[]}),Object.keys(e._children).forEach(function(r){nC(n,e._children[r],t,i+r+"/")})}function FU(n,e,t){e=t==="root"?e:e[t];var i=Object.keys(e),r={state:Object.keys(n.state).map(function(o){return{key:o,editable:!0,value:n.state[o]}})};if(i.length){var s=UU(e);r.getters=Object.keys(s).map(function(o){return{key:o.endsWith("/")?eC(o):o,editable:!1,value:Fp(function(){return s[o]})}})}return r}function UU(n){var e={};return Object.keys(n).forEach(function(t){var i=t.split("/");if(i.length>1){var r=e,s=i.pop();i.forEach(function(o){r[o]||(r[o]={_custom:{value:{},display:o,tooltip:"Module",abstract:!0}}),r=r[o]._custom.value}),r[s]=Fp(function(){return n[t]})}else e[t]=Fp(function(){return n[t]})}),e}function $U(n,e){var t=e.split("/").filter(function(i){return i});return t.reduce(function(i,r,s){var o=i[r];if(!o)throw new Error('Missing module "'+r+'" for path "'+e+'".');return s===t.length-1?o:o._children},e==="root"?n:n.root._children)}function Fp(n){try{return n()}catch(e){return e}}var Ii=function(e,t){this.runtime=t,this._children=Object.create(null),this._rawModule=e;var i=e.state;this.state=(typeof i=="function"?i():i)||{}},iC={namespaced:{configurable:!0}};iC.namespaced.get=function(){return!!this._rawModule.namespaced};Ii.prototype.addChild=function(e,t){this._children[e]=t};Ii.prototype.removeChild=function(e){delete this._children[e]};Ii.prototype.getChild=function(e){return this._children[e]};Ii.prototype.hasChild=function(e){return e in this._children};Ii.prototype.update=function(e){this._rawModule.namespaced=e.namespaced,e.actions&&(this._rawModule.actions=e.actions),e.mutations&&(this._rawModule.mutations=e.mutations),e.getters&&(this._rawModule.getters=e.getters)};Ii.prototype.forEachChild=function(e){Aa(this._children,e)};Ii.prototype.forEachGetter=function(e){this._rawModule.getters&&Aa(this._rawModule.getters,e)};Ii.prototype.forEachAction=function(e){this._rawModule.actions&&Aa(this._rawModule.actions,e)};Ii.prototype.forEachMutation=function(e){this._rawModule.mutations&&Aa(this._rawModule.mutations,e)};Object.defineProperties(Ii.prototype,iC);var to=function(e){this.register([],e,!1)};to.prototype.get=function(e){return e.reduce(function(t,i){return t.getChild(i)},this.root)};to.prototype.getNamespace=function(e){var t=this.root;return e.reduce(function(i,r){return t=t.getChild(r),i+(t.namespaced?r+"/":"")},"")};to.prototype.update=function(e){rC([],this.root,e)};to.prototype.register=function(e,t,i){var r=this;i===void 0&&(i=!0);var s=new Ii(t,i);if(e.length===0)this.root=s;else{var o=this.get(e.slice(0,-1));o.addChild(e[e.length-1],s)}t.modules&&Aa(t.modules,function(a,l){r.register(e.concat(l),a,i)})};to.prototype.unregister=function(e){var t=this.get(e.slice(0,-1)),i=e[e.length-1],r=t.getChild(i);r&&r.runtime&&t.removeChild(i)};to.prototype.isRegistered=function(e){var t=this.get(e.slice(0,-1)),i=e[e.length-1];return t?t.hasChild(i):!1};function rC(n,e,t){if(e.update(t),t.modules)for(var i in t.modules){if(!e.getChild(i))return;rC(n.concat(i),e.getChild(i),t.modules[i])}}function BU(n){return new An(n)}var An=function(e){var t=this;e===void 0&&(e={});var i=e.plugins;i===void 0&&(i=[]);var r=e.strict;r===void 0&&(r=!1);var s=e.devtools;this._committing=!1,this._actions=Object.create(null),this._actionSubscribers=[],this._mutations=Object.create(null),this._wrappedGetters=Object.create(null),this._modules=new to(e),this._modulesNamespaceMap=Object.create(null),this._subscribers=[],this._makeLocalGettersCache=Object.create(null),this._devtools=s;var o=this,a=this,l=a.dispatch,c=a.commit;this.dispatch=function(f,d){return l.call(o,f,d)},this.commit=function(f,d,_){return c.call(o,f,d,_)},this.strict=r;var u=this._modules.root.state;id(this,u,[],this._modules.root),am(this,u),i.forEach(function(h){return h(t)})},cm={state:{configurable:!0}};An.prototype.install=function(e,t){e.provide(t||IU,this),e.config.globalProperties.$store=this;var i=this._devtools!==void 0?this._devtools:!1;i&&DU(e,this)};cm.state.get=function(){return this._state.data};cm.state.set=function(n){};An.prototype.commit=function(e,t,i){var r=this,s=Ju(e,t,i),o=s.type,a=s.payload,l={type:o,payload:a},c=this._mutations[o];c&&(this._withCommit(function(){c.forEach(function(h){h(a)})}),this._subscribers.slice().forEach(function(u){return u(l,r.state)}))};An.prototype.dispatch=function(e,t){var i=this,r=Ju(e,t),s=r.type,o=r.payload,a={type:s,payload:o},l=this._actions[s];if(l){try{this._actionSubscribers.slice().filter(function(u){return u.before}).forEach(function(u){return u.before(a,i.state)})}catch{}var c=l.length>1?Promise.all(l.map(function(u){return u(o)})):l[0](o);return new Promise(function(u,h){c.then(function(f){try{i._actionSubscribers.filter(function(d){return d.after}).forEach(function(d){return d.after(a,i.state)})}catch{}u(f)},function(f){try{i._actionSubscribers.filter(function(d){return d.error}).forEach(function(d){return d.error(a,i.state,f)})}catch{}h(f)})})}};An.prototype.subscribe=function(e,t){return XI(e,this._subscribers,t)};An.prototype.subscribeAction=function(e,t){var i=typeof e=="function"?{before:e}:e;return XI(i,this._actionSubscribers,t)};An.prototype.watch=function(e,t,i){var r=this;return As(function(){return e(r.state,r.getters)},t,Object.assign({},i))};An.prototype.replaceState=function(e){var t=this;this._withCommit(function(){t._state.data=e})};An.prototype.registerModule=function(e,t,i){i===void 0&&(i={}),typeof e=="string"&&(e=[e]),this._modules.register(e,t),id(this,this.state,e,this._modules.get(e),i.preserveState),am(this,this.state)};An.prototype.unregisterModule=function(e){var t=this;typeof e=="string"&&(e=[e]),this._modules.unregister(e),this._withCommit(function(){var i=lm(t.state,e.slice(0,-1));delete i[e[e.length-1]]}),QI(this)};An.prototype.hasModule=function(e){return typeof e=="string"&&(e=[e]),this._modules.isRegistered(e)};An.prototype.hotUpdate=function(e){this._modules.update(e),QI(this,!0)};An.prototype._withCommit=function(e){var t=this._committing;this._committing=!0,e(),this._committing=t};Object.defineProperties(An.prototype,cm);var rd=oC(function(n,e){var t={};return sC(e).forEach(function(i){var r=i.key,s=i.val;t[r]=function(){var a=this.$store.state,l=this.$store.getters;if(n){var c=aC(this.$store,"mapState",n);if(!c)return;a=c.context.state,l=c.context.getters}return typeof s=="function"?s.call(this,a,l):a[s]},t[r].vuex=!0}),t}),sd=oC(function(n,e){var t={};return sC(e).forEach(function(i){var r=i.key,s=i.val;t[r]=function(){for(var a=[],l=arguments.length;l--;)a[l]=arguments[l];var c=this.$store.dispatch;if(n){var u=aC(this.$store,"mapActions",n);if(!u)return;c=u.context.dispatch}return typeof s=="function"?s.apply(this,[c].concat(a)):c.apply(this.$store,[s].concat(a))}}),t});function sC(n){return zU(n)?Array.isArray(n)?n.map(function(e){return{key:e,val:e}}):Object.keys(n).map(function(e){return{key:e,val:n[e]}}):[]}function zU(n){return Array.isArray(n)||YI(n)}function oC(n){return function(e,t){return typeof e!="string"?(t=e,e=""):e.charAt(e.length-1)!=="/"&&(e+="/"),n(e,t)}}function aC(n,e,t){var i=n._modulesNamespaceMap[t];return i}const jU={data(){return{}},mounted(){this.fetchExhibitions()},methods:{...sd({fetchExhibitions:"exhibitions/fetchExhibitions"})},computed:{...rd({isLoading:n=>n.exhibitions.isLoading,exhibitions:n=>n.exhibitions.exhibitions})}},GU={class:"exhibitions"},qU={class:"container"},HU={class:"exhibitions__inner"},WU={class:"exhibitions-nav"},KU={class:"list-reset exhibitions-nav__list"};function YU(n,e,t,i,r,s){const o=it("RouterLink"),a=it("RouterView");return Te(),Ge("section",GU,[j("div",qU,[j("div",HU,[j("nav",WU,[j("ul",KU,[(Te(!0),Ge(Lt,null,pa(n.exhibitions,(l,c)=>(Te(),Ge("li",{class:"exhibitions-nav__item",key:l.id},[$e(o,{to:`/exhibitions/categories/${l.id}`,class:"exhibitions-nav__link"},{default:ci(()=>[qo(Zn(l.title),1)]),_:2},1032,["to"])]))),128))])]),$e(a)])])])}const XU=pt(jU,[["render",YU],["__scopeId","data-v-d670f3f4"]]),QU={},JU={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",width:"80",height:"80",style:{"shape-rendering":"auto",display:"block",background:"transparent"},"xmlns:xlink":"http://www.w3.org/1999/xlink"},ZU=j("g",null,[j("circle",{"stroke-dasharray":"183.7831702350029 63.261056745000964",r:"39","stroke-width":"14",stroke:"#4f4c93",fill:"none",cy:"50",cx:"50"},[j("animateTransform",{keyTimes:"0;1",values:"0 50 50;360 50 50",dur:"1s",repeatCount:"indefinite",type:"rotate",attributeName:"transform"})]),j("g")],-1),e$=[ZU];function t$(n,e,t,i,r,s){return Te(),Ge("svg",JU,e$)}const um=pt(QU,[["render",t$]]),n$={components:{MyLoader:um},data(){return{loadCount:0,allImagesLoaded:!1}},methods:{...sd({fetchExhibitions:"exhibitions/fetchExhibitions"}),imageLoaded(){this.loadCount++,this.loadCount===this.currentItem.items.length&&(this.allImagesLoaded=!0)}},watch:{currentItem(){this.loadCount=0,this.allImagesLoaded=!1}},computed:{...rd({exhibitions:n=>n.exhibitions.exhibitions}),currentItem(){const n=parseInt(this.$route.params.id,10);return this.exhibitions.find(e=>e.id===n)}}},i$={class:"exhibitions-list__block"},r$=["src"],s$={class:"exhibitions-list__title"};function o$(n,e,t,i,r,s){const o=it("my-loader");return Te(),Ge(Lt,null,[r.allImagesLoaded?Ho("",!0):(Te(),ei(o,{key:0,class:"exhibitions-list__loader"})),j("div",{class:pi(["exhibitions-list grid",{loading:r.allImagesLoaded}])},[this.currentItem?(Te(!0),Ge(Lt,{key:0},pa(this.currentItem.items,a=>(Te(),Ge("a",{class:"exhibitions-list__item",key:a.id},[j("div",i$,[j("img",{src:a.image,alt:"Фото пока нет",class:"exhibitions-list__image",onLoad:e[0]||(e[0]=l=>s.imageLoaded())},null,40,r$)]),j("h3",s$,Zn(a.title),1)]))),128)):Ho("",!0)],2)],64)}const a$=pt(n$,[["render",o$],["__scopeId","data-v-1130d130"]]);function q0(n){return n!==null&&typeof n=="object"&&"constructor"in n&&n.constructor===Object}function hm(n,e){n===void 0&&(n={}),e===void 0&&(e={}),Object.keys(e).forEach(t=>{typeof n[t]>"u"?n[t]=e[t]:q0(e[t])&&q0(n[t])&&Object.keys(e[t]).length>0&&hm(n[t],e[t])})}const lC={body:{},addEventListener(){},removeEventListener(){},activeElement:{blur(){},nodeName:""},querySelector(){return null},querySelectorAll(){return[]},getElementById(){return null},createEvent(){return{initEvent(){}}},createElement(){return{children:[],childNodes:[],style:{},setAttribute(){},getElementsByTagName(){return[]}}},createElementNS(){return{}},importNode(){return null},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function xa(){const n=typeof document<"u"?document:{};return hm(n,lC),n}const l$={document:lC,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState(){},pushState(){},go(){},back(){}},CustomEvent:function(){return this},addEventListener(){},removeEventListener(){},getComputedStyle(){return{getPropertyValue(){return""}}},Image(){},Date(){},screen:{},setTimeout(){},clearTimeout(){},matchMedia(){return{}},requestAnimationFrame(n){return typeof setTimeout>"u"?(n(),null):setTimeout(n,0)},cancelAnimationFrame(n){typeof setTimeout>"u"||clearTimeout(n)}};function Bn(){const n=typeof window<"u"?window:{};return hm(n,l$),n}function c$(n){return n===void 0&&(n=""),n.trim().split(" ").filter(e=>!!e.trim())}function u$(n){const e=n;Object.keys(e).forEach(t=>{try{e[t]=null}catch{}try{delete e[t]}catch{}})}function Up(n,e){return e===void 0&&(e=0),setTimeout(n,e)}function Zu(){return Date.now()}function h$(n){const e=Bn();let t;return e.getComputedStyle&&(t=e.getComputedStyle(n,null)),!t&&n.currentStyle&&(t=n.currentStyle),t||(t=n.style),t}function d$(n,e){e===void 0&&(e="x");const t=Bn();let i,r,s;const o=h$(n);return t.WebKitCSSMatrix?(r=o.transform||o.webkitTransform,r.split(",").length>6&&(r=r.split(", ").map(a=>a.replace(",",".")).join(", ")),s=new t.WebKitCSSMatrix(r==="none"?"":r)):(s=o.MozTransform||o.OTransform||o.MsTransform||o.msTransform||o.transform||o.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),i=s.toString().split(",")),e==="x"&&(t.WebKitCSSMatrix?r=s.m41:i.length===16?r=parseFloat(i[12]):r=parseFloat(i[4])),e==="y"&&(t.WebKitCSSMatrix?r=s.m42:i.length===16?r=parseFloat(i[13]):r=parseFloat(i[5])),r||0}function Yc(n){return typeof n=="object"&&n!==null&&n.constructor&&Object.prototype.toString.call(n).slice(8,-1)==="Object"}function f$(n){return typeof window<"u"&&typeof window.HTMLElement<"u"?n instanceof HTMLElement:n&&(n.nodeType===1||n.nodeType===11)}function Pn(){const n=Object(arguments.length<=0?void 0:arguments[0]),e=["__proto__","constructor","prototype"];for(let t=1;t<arguments.length;t+=1){const i=t<0||arguments.length<=t?void 0:arguments[t];if(i!=null&&!f$(i)){const r=Object.keys(Object(i)).filter(s=>e.indexOf(s)<0);for(let s=0,o=r.length;s<o;s+=1){const a=r[s],l=Object.getOwnPropertyDescriptor(i,a);l!==void 0&&l.enumerable&&(Yc(n[a])&&Yc(i[a])?i[a].__swiper__?n[a]=i[a]:Pn(n[a],i[a]):!Yc(n[a])&&Yc(i[a])?(n[a]={},i[a].__swiper__?n[a]=i[a]:Pn(n[a],i[a])):n[a]=i[a])}}}return n}function Xc(n,e,t){n.style.setProperty(e,t)}function cC(n){let{swiper:e,targetPosition:t,side:i}=n;const r=Bn(),s=-e.translate;let o=null,a;const l=e.params.speed;e.wrapperEl.style.scrollSnapType="none",r.cancelAnimationFrame(e.cssModeFrameID);const c=t>s?"next":"prev",u=(f,d)=>c==="next"&&f>=d||c==="prev"&&f<=d,h=()=>{a=new Date().getTime(),o===null&&(o=a);const f=Math.max(Math.min((a-o)/l,1),0),d=.5-Math.cos(f*Math.PI)/2;let _=s+d*(t-s);if(u(_,t)&&(_=t),e.wrapperEl.scrollTo({[i]:_}),u(_,t)){e.wrapperEl.style.overflow="hidden",e.wrapperEl.style.scrollSnapType="",setTimeout(()=>{e.wrapperEl.style.overflow="",e.wrapperEl.scrollTo({[i]:_})}),r.cancelAnimationFrame(e.cssModeFrameID);return}e.cssModeFrameID=r.requestAnimationFrame(h)};h()}function rr(n,e){return e===void 0&&(e=""),[...n.children].filter(t=>t.matches(e))}function eh(n){try{console.warn(n);return}catch{}}function $p(n,e){e===void 0&&(e=[]);const t=document.createElement(n);return t.classList.add(...Array.isArray(e)?e:c$(e)),t}function p$(n,e){const t=[];for(;n.previousElementSibling;){const i=n.previousElementSibling;e?i.matches(e)&&t.push(i):t.push(i),n=i}return t}function _$(n,e){const t=[];for(;n.nextElementSibling;){const i=n.nextElementSibling;e?i.matches(e)&&t.push(i):t.push(i),n=i}return t}function Mr(n,e){return Bn().getComputedStyle(n,null).getPropertyValue(e)}function H0(n){let e=n,t;if(e){for(t=0;(e=e.previousSibling)!==null;)e.nodeType===1&&(t+=1);return t}}function g$(n,e){const t=[];let i=n.parentElement;for(;i;)e?i.matches(e)&&t.push(i):t.push(i),i=i.parentElement;return t}function W0(n,e,t){const i=Bn();return t?n[e==="width"?"offsetWidth":"offsetHeight"]+parseFloat(i.getComputedStyle(n,null).getPropertyValue(e==="width"?"margin-right":"margin-top"))+parseFloat(i.getComputedStyle(n,null).getPropertyValue(e==="width"?"margin-left":"margin-bottom")):n.offsetWidth}let Qd;function m$(){const n=Bn(),e=xa();return{smoothScroll:e.documentElement&&e.documentElement.style&&"scrollBehavior"in e.documentElement.style,touch:!!("ontouchstart"in n||n.DocumentTouch&&e instanceof n.DocumentTouch)}}function uC(){return Qd||(Qd=m$()),Qd}let Jd;function y$(n){let{userAgent:e}=n===void 0?{}:n;const t=uC(),i=Bn(),r=i.navigator.platform,s=e||i.navigator.userAgent,o={ios:!1,android:!1},a=i.screen.width,l=i.screen.height,c=s.match(/(Android);?[\s\/]+([\d.]+)?/);let u=s.match(/(iPad).*OS\s([\d_]+)/);const h=s.match(/(iPod)(.*OS\s([\d_]+))?/),f=!u&&s.match(/(iPhone\sOS|iOS)\s([\d_]+)/),d=r==="Win32";let _=r==="MacIntel";const p=["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"];return!u&&_&&t.touch&&p.indexOf(`${a}x${l}`)>=0&&(u=s.match(/(Version)\/([\d.]+)/),u||(u=[0,1,"13_0_0"]),_=!1),c&&!d&&(o.os="android",o.android=!0),(u||f||h)&&(o.os="ios",o.ios=!0),o}function hC(n){return n===void 0&&(n={}),Jd||(Jd=y$(n)),Jd}let Zd;function v$(){const n=Bn(),e=hC();let t=!1;function i(){const a=n.navigator.userAgent.toLowerCase();return a.indexOf("safari")>=0&&a.indexOf("chrome")<0&&a.indexOf("android")<0}if(i()){const a=String(n.navigator.userAgent);if(a.includes("Version/")){const[l,c]=a.split("Version/")[1].split(" ")[0].split(".").map(u=>Number(u));t=l<16||l===16&&c<2}}const r=/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(n.navigator.userAgent),s=i(),o=s||r&&e.ios;return{isSafari:t||s,needPerspectiveFix:t,need3dFix:o,isWebView:r}}function w$(){return Zd||(Zd=v$()),Zd}function T$(n){let{swiper:e,on:t,emit:i}=n;const r=Bn();let s=null,o=null;const a=()=>{!e||e.destroyed||!e.initialized||(i("beforeResize"),i("resize"))},l=()=>{!e||e.destroyed||!e.initialized||(s=new ResizeObserver(h=>{o=r.requestAnimationFrame(()=>{const{width:f,height:d}=e;let _=f,p=d;h.forEach(g=>{let{contentBoxSize:m,contentRect:T,target:w}=g;w&&w!==e.el||(_=T?T.width:(m[0]||m).inlineSize,p=T?T.height:(m[0]||m).blockSize)}),(_!==f||p!==d)&&a()})}),s.observe(e.el))},c=()=>{o&&r.cancelAnimationFrame(o),s&&s.unobserve&&e.el&&(s.unobserve(e.el),s=null)},u=()=>{!e||e.destroyed||!e.initialized||i("orientationchange")};t("init",()=>{if(e.params.resizeObserver&&typeof r.ResizeObserver<"u"){l();return}r.addEventListener("resize",a),r.addEventListener("orientationchange",u)}),t("destroy",()=>{c(),r.removeEventListener("resize",a),r.removeEventListener("orientationchange",u)})}function E$(n){let{swiper:e,extendParams:t,on:i,emit:r}=n;const s=[],o=Bn(),a=function(u,h){h===void 0&&(h={});const f=o.MutationObserver||o.WebkitMutationObserver,d=new f(_=>{if(e.__preventObserver__)return;if(_.length===1){r("observerUpdate",_[0]);return}const p=function(){r("observerUpdate",_[0])};o.requestAnimationFrame?o.requestAnimationFrame(p):o.setTimeout(p,0)});d.observe(u,{attributes:typeof h.attributes>"u"?!0:h.attributes,childList:typeof h.childList>"u"?!0:h.childList,characterData:typeof h.characterData>"u"?!0:h.characterData}),s.push(d)},l=()=>{if(e.params.observer){if(e.params.observeParents){const u=g$(e.hostEl);for(let h=0;h<u.length;h+=1)a(u[h])}a(e.hostEl,{childList:e.params.observeSlideChildren}),a(e.wrapperEl,{attributes:!1})}},c=()=>{s.forEach(u=>{u.disconnect()}),s.splice(0,s.length)};t({observer:!1,observeParents:!1,observeSlideChildren:!1}),i("init",l),i("destroy",c)}var S$={on(n,e,t){const i=this;if(!i.eventsListeners||i.destroyed||typeof e!="function")return i;const r=t?"unshift":"push";return n.split(" ").forEach(s=>{i.eventsListeners[s]||(i.eventsListeners[s]=[]),i.eventsListeners[s][r](e)}),i},once(n,e,t){const i=this;if(!i.eventsListeners||i.destroyed||typeof e!="function")return i;function r(){i.off(n,r),r.__emitterProxy&&delete r.__emitterProxy;for(var s=arguments.length,o=new Array(s),a=0;a<s;a++)o[a]=arguments[a];e.apply(i,o)}return r.__emitterProxy=e,i.on(n,r,t)},onAny(n,e){const t=this;if(!t.eventsListeners||t.destroyed||typeof n!="function")return t;const i=e?"unshift":"push";return t.eventsAnyListeners.indexOf(n)<0&&t.eventsAnyListeners[i](n),t},offAny(n){const e=this;if(!e.eventsListeners||e.destroyed||!e.eventsAnyListeners)return e;const t=e.eventsAnyListeners.indexOf(n);return t>=0&&e.eventsAnyListeners.splice(t,1),e},off(n,e){const t=this;return!t.eventsListeners||t.destroyed||!t.eventsListeners||n.split(" ").forEach(i=>{typeof e>"u"?t.eventsListeners[i]=[]:t.eventsListeners[i]&&t.eventsListeners[i].forEach((r,s)=>{(r===e||r.__emitterProxy&&r.__emitterProxy===e)&&t.eventsListeners[i].splice(s,1)})}),t},emit(){const n=this;if(!n.eventsListeners||n.destroyed||!n.eventsListeners)return n;let e,t,i;for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return typeof s[0]=="string"||Array.isArray(s[0])?(e=s[0],t=s.slice(1,s.length),i=n):(e=s[0].events,t=s[0].data,i=s[0].context||n),t.unshift(i),(Array.isArray(e)?e:e.split(" ")).forEach(l=>{n.eventsAnyListeners&&n.eventsAnyListeners.length&&n.eventsAnyListeners.forEach(c=>{c.apply(i,[l,...t])}),n.eventsListeners&&n.eventsListeners[l]&&n.eventsListeners[l].forEach(c=>{c.apply(i,t)})}),n}};function b$(){const n=this;let e,t;const i=n.el;typeof n.params.width<"u"&&n.params.width!==null?e=n.params.width:e=i.clientWidth,typeof n.params.height<"u"&&n.params.height!==null?t=n.params.height:t=i.clientHeight,!(e===0&&n.isHorizontal()||t===0&&n.isVertical())&&(e=e-parseInt(Mr(i,"padding-left")||0,10)-parseInt(Mr(i,"padding-right")||0,10),t=t-parseInt(Mr(i,"padding-top")||0,10)-parseInt(Mr(i,"padding-bottom")||0,10),Number.isNaN(e)&&(e=0),Number.isNaN(t)&&(t=0),Object.assign(n,{width:e,height:t,size:n.isHorizontal()?e:t}))}function I$(){const n=this;function e(k,D){return parseFloat(k.getPropertyValue(n.getDirectionLabel(D))||0)}const t=n.params,{wrapperEl:i,slidesEl:r,size:s,rtlTranslate:o,wrongRTL:a}=n,l=n.virtual&&t.virtual.enabled,c=l?n.virtual.slides.length:n.slides.length,u=rr(r,`.${n.params.slideClass}, swiper-slide`),h=l?n.virtual.slides.length:u.length;let f=[];const d=[],_=[];let p=t.slidesOffsetBefore;typeof p=="function"&&(p=t.slidesOffsetBefore.call(n));let g=t.slidesOffsetAfter;typeof g=="function"&&(g=t.slidesOffsetAfter.call(n));const m=n.snapGrid.length,T=n.slidesGrid.length;let w=t.spaceBetween,S=-p,E=0,I=0;if(typeof s>"u")return;typeof w=="string"&&w.indexOf("%")>=0?w=parseFloat(w.replace("%",""))/100*s:typeof w=="string"&&(w=parseFloat(w)),n.virtualSize=-w,u.forEach(k=>{o?k.style.marginLeft="":k.style.marginRight="",k.style.marginBottom="",k.style.marginTop=""}),t.centeredSlides&&t.cssMode&&(Xc(i,"--swiper-centered-offset-before",""),Xc(i,"--swiper-centered-offset-after",""));const P=t.grid&&t.grid.rows>1&&n.grid;P?n.grid.initSlides(u):n.grid&&n.grid.unsetSlides();let x;const A=t.slidesPerView==="auto"&&t.breakpoints&&Object.keys(t.breakpoints).filter(k=>typeof t.breakpoints[k].slidesPerView<"u").length>0;for(let k=0;k<h;k+=1){x=0;let D;if(u[k]&&(D=u[k]),P&&n.grid.updateSlide(k,D,u),!(u[k]&&Mr(D,"display")==="none")){if(t.slidesPerView==="auto"){A&&(u[k].style[n.getDirectionLabel("width")]="");const W=getComputedStyle(D),N=D.style.transform,de=D.style.webkitTransform;if(N&&(D.style.transform="none"),de&&(D.style.webkitTransform="none"),t.roundLengths)x=n.isHorizontal()?W0(D,"width",!0):W0(D,"height",!0);else{const fe=e(W,"width"),ne=e(W,"padding-left"),Z=e(W,"padding-right"),he=e(W,"margin-left"),St=e(W,"margin-right"),bt=W.getPropertyValue("box-sizing");if(bt&&bt==="border-box")x=fe+he+St;else{const{clientWidth:Se,offsetWidth:_e}=D;x=fe+ne+Z+he+St+(_e-Se)}}N&&(D.style.transform=N),de&&(D.style.webkitTransform=de),t.roundLengths&&(x=Math.floor(x))}else x=(s-(t.slidesPerView-1)*w)/t.slidesPerView,t.roundLengths&&(x=Math.floor(x)),u[k]&&(u[k].style[n.getDirectionLabel("width")]=`${x}px`);u[k]&&(u[k].swiperSlideSize=x),_.push(x),t.centeredSlides?(S=S+x/2+E/2+w,E===0&&k!==0&&(S=S-s/2-w),k===0&&(S=S-s/2-w),Math.abs(S)<1/1e3&&(S=0),t.roundLengths&&(S=Math.floor(S)),I%t.slidesPerGroup===0&&f.push(S),d.push(S)):(t.roundLengths&&(S=Math.floor(S)),(I-Math.min(n.params.slidesPerGroupSkip,I))%n.params.slidesPerGroup===0&&f.push(S),d.push(S),S=S+x+w),n.virtualSize+=x+w,E=x,I+=1}}if(n.virtualSize=Math.max(n.virtualSize,s)+g,o&&a&&(t.effect==="slide"||t.effect==="coverflow")&&(i.style.width=`${n.virtualSize+w}px`),t.setWrapperSize&&(i.style[n.getDirectionLabel("width")]=`${n.virtualSize+w}px`),P&&n.grid.updateWrapperSize(x,f),!t.centeredSlides){const k=[];for(let D=0;D<f.length;D+=1){let W=f[D];t.roundLengths&&(W=Math.floor(W)),f[D]<=n.virtualSize-s&&k.push(W)}f=k,Math.floor(n.virtualSize-s)-Math.floor(f[f.length-1])>1&&f.push(n.virtualSize-s)}if(l&&t.loop){const k=_[0]+w;if(t.slidesPerGroup>1){const D=Math.ceil((n.virtual.slidesBefore+n.virtual.slidesAfter)/t.slidesPerGroup),W=k*t.slidesPerGroup;for(let N=0;N<D;N+=1)f.push(f[f.length-1]+W)}for(let D=0;D<n.virtual.slidesBefore+n.virtual.slidesAfter;D+=1)t.slidesPerGroup===1&&f.push(f[f.length-1]+k),d.push(d[d.length-1]+k),n.virtualSize+=k}if(f.length===0&&(f=[0]),w!==0){const k=n.isHorizontal()&&o?"marginLeft":n.getDirectionLabel("marginRight");u.filter((D,W)=>!t.cssMode||t.loop?!0:W!==u.length-1).forEach(D=>{D.style[k]=`${w}px`})}if(t.centeredSlides&&t.centeredSlidesBounds){let k=0;_.forEach(W=>{k+=W+(w||0)}),k-=w;const D=k-s;f=f.map(W=>W<=0?-p:W>D?D+g:W)}if(t.centerInsufficientSlides){let k=0;if(_.forEach(D=>{k+=D+(w||0)}),k-=w,k<s){const D=(s-k)/2;f.forEach((W,N)=>{f[N]=W-D}),d.forEach((W,N)=>{d[N]=W+D})}}if(Object.assign(n,{slides:u,snapGrid:f,slidesGrid:d,slidesSizesGrid:_}),t.centeredSlides&&t.cssMode&&!t.centeredSlidesBounds){Xc(i,"--swiper-centered-offset-before",`${-f[0]}px`),Xc(i,"--swiper-centered-offset-after",`${n.size/2-_[_.length-1]/2}px`);const k=-n.snapGrid[0],D=-n.slidesGrid[0];n.snapGrid=n.snapGrid.map(W=>W+k),n.slidesGrid=n.slidesGrid.map(W=>W+D)}if(h!==c&&n.emit("slidesLengthChange"),f.length!==m&&(n.params.watchOverflow&&n.checkOverflow(),n.emit("snapGridLengthChange")),d.length!==T&&n.emit("slidesGridLengthChange"),t.watchSlidesProgress&&n.updateSlidesOffset(),n.emit("slidesUpdated"),!l&&!t.cssMode&&(t.effect==="slide"||t.effect==="fade")){const k=`${t.containerModifierClass}backface-hidden`,D=n.el.classList.contains(k);h<=t.maxBackfaceHiddenSlides?D||n.el.classList.add(k):D&&n.el.classList.remove(k)}}function C$(n){const e=this,t=[],i=e.virtual&&e.params.virtual.enabled;let r=0,s;typeof n=="number"?e.setTransition(n):n===!0&&e.setTransition(e.params.speed);const o=a=>i?e.slides[e.getSlideIndexByData(a)]:e.slides[a];if(e.params.slidesPerView!=="auto"&&e.params.slidesPerView>1)if(e.params.centeredSlides)(e.visibleSlides||[]).forEach(a=>{t.push(a)});else for(s=0;s<Math.ceil(e.params.slidesPerView);s+=1){const a=e.activeIndex+s;if(a>e.slides.length&&!i)break;t.push(o(a))}else t.push(o(e.activeIndex));for(s=0;s<t.length;s+=1)if(typeof t[s]<"u"){const a=t[s].offsetHeight;r=a>r?a:r}(r||r===0)&&(e.wrapperEl.style.height=`${r}px`)}function A$(){const n=this,e=n.slides,t=n.isElement?n.isHorizontal()?n.wrapperEl.offsetLeft:n.wrapperEl.offsetTop:0;for(let i=0;i<e.length;i+=1)e[i].swiperSlideOffset=(n.isHorizontal()?e[i].offsetLeft:e[i].offsetTop)-t-n.cssOverflowAdjustment()}function x$(n){n===void 0&&(n=this&&this.translate||0);const e=this,t=e.params,{slides:i,rtlTranslate:r,snapGrid:s}=e;if(i.length===0)return;typeof i[0].swiperSlideOffset>"u"&&e.updateSlidesOffset();let o=-n;r&&(o=n),i.forEach(l=>{l.classList.remove(t.slideVisibleClass,t.slideFullyVisibleClass)}),e.visibleSlidesIndexes=[],e.visibleSlides=[];let a=t.spaceBetween;typeof a=="string"&&a.indexOf("%")>=0?a=parseFloat(a.replace("%",""))/100*e.size:typeof a=="string"&&(a=parseFloat(a));for(let l=0;l<i.length;l+=1){const c=i[l];let u=c.swiperSlideOffset;t.cssMode&&t.centeredSlides&&(u-=i[0].swiperSlideOffset);const h=(o+(t.centeredSlides?e.minTranslate():0)-u)/(c.swiperSlideSize+a),f=(o-s[0]+(t.centeredSlides?e.minTranslate():0)-u)/(c.swiperSlideSize+a),d=-(o-u),_=d+e.slidesSizesGrid[l],p=d>=0&&d<=e.size-e.slidesSizesGrid[l];(d>=0&&d<e.size-1||_>1&&_<=e.size||d<=0&&_>=e.size)&&(e.visibleSlides.push(c),e.visibleSlidesIndexes.push(l),i[l].classList.add(t.slideVisibleClass)),p&&i[l].classList.add(t.slideFullyVisibleClass),c.progress=r?-h:h,c.originalProgress=r?-f:f}}function R$(n){const e=this;if(typeof n>"u"){const u=e.rtlTranslate?-1:1;n=e&&e.translate&&e.translate*u||0}const t=e.params,i=e.maxTranslate()-e.minTranslate();let{progress:r,isBeginning:s,isEnd:o,progressLoop:a}=e;const l=s,c=o;if(i===0)r=0,s=!0,o=!0;else{r=(n-e.minTranslate())/i;const u=Math.abs(n-e.minTranslate())<1,h=Math.abs(n-e.maxTranslate())<1;s=u||r<=0,o=h||r>=1,u&&(r=0),h&&(r=1)}if(t.loop){const u=e.getSlideIndexByData(0),h=e.getSlideIndexByData(e.slides.length-1),f=e.slidesGrid[u],d=e.slidesGrid[h],_=e.slidesGrid[e.slidesGrid.length-1],p=Math.abs(n);p>=f?a=(p-f)/_:a=(p+_-d)/_,a>1&&(a-=1)}Object.assign(e,{progress:r,progressLoop:a,isBeginning:s,isEnd:o}),(t.watchSlidesProgress||t.centeredSlides&&t.autoHeight)&&e.updateSlidesProgress(n),s&&!l&&e.emit("reachBeginning toEdge"),o&&!c&&e.emit("reachEnd toEdge"),(l&&!s||c&&!o)&&e.emit("fromEdge"),e.emit("progress",r)}const ef=(n,e,t)=>{e&&!n.classList.contains(t)?n.classList.add(t):!e&&n.classList.contains(t)&&n.classList.remove(t)};function P$(){const n=this,{slides:e,params:t,slidesEl:i,activeIndex:r}=n,s=n.virtual&&t.virtual.enabled,o=n.grid&&t.grid&&t.grid.rows>1,a=h=>rr(i,`.${t.slideClass}${h}, swiper-slide${h}`)[0];let l,c,u;if(s)if(t.loop){let h=r-n.virtual.slidesBefore;h<0&&(h=n.virtual.slides.length+h),h>=n.virtual.slides.length&&(h-=n.virtual.slides.length),l=a(`[data-swiper-slide-index="${h}"]`)}else l=a(`[data-swiper-slide-index="${r}"]`);else o?(l=e.filter(h=>h.column===r)[0],u=e.filter(h=>h.column===r+1)[0],c=e.filter(h=>h.column===r-1)[0]):l=e[r];l&&(o||(u=_$(l,`.${t.slideClass}, swiper-slide`)[0],t.loop&&!u&&(u=e[0]),c=p$(l,`.${t.slideClass}, swiper-slide`)[0],t.loop&&!c===0&&(c=e[e.length-1]))),e.forEach(h=>{ef(h,h===l,t.slideActiveClass),ef(h,h===u,t.slideNextClass),ef(h,h===c,t.slidePrevClass)}),n.emitSlidesClasses()}const du=(n,e)=>{if(!n||n.destroyed||!n.params)return;const t=()=>n.isElement?"swiper-slide":`.${n.params.slideClass}`,i=e.closest(t());if(i){let r=i.querySelector(`.${n.params.lazyPreloaderClass}`);!r&&n.isElement&&(i.shadowRoot?r=i.shadowRoot.querySelector(`.${n.params.lazyPreloaderClass}`):requestAnimationFrame(()=>{i.shadowRoot&&(r=i.shadowRoot.querySelector(`.${n.params.lazyPreloaderClass}`),r&&r.remove())})),r&&r.remove()}},tf=(n,e)=>{if(!n.slides[e])return;const t=n.slides[e].querySelector('[loading="lazy"]');t&&t.removeAttribute("loading")},Bp=n=>{if(!n||n.destroyed||!n.params)return;let e=n.params.lazyPreloadPrevNext;const t=n.slides.length;if(!t||!e||e<0)return;e=Math.min(e,t);const i=n.params.slidesPerView==="auto"?n.slidesPerViewDynamic():Math.ceil(n.params.slidesPerView),r=n.activeIndex;if(n.params.grid&&n.params.grid.rows>1){const o=r,a=[o-e];a.push(...Array.from({length:e}).map((l,c)=>o+i+c)),n.slides.forEach((l,c)=>{a.includes(l.column)&&tf(n,c)});return}const s=r+i-1;if(n.params.rewind||n.params.loop)for(let o=r-e;o<=s+e;o+=1){const a=(o%t+t)%t;(a<r||a>s)&&tf(n,a)}else for(let o=Math.max(r-e,0);o<=Math.min(s+e,t-1);o+=1)o!==r&&(o>s||o<r)&&tf(n,o)};function O$(n){const{slidesGrid:e,params:t}=n,i=n.rtlTranslate?n.translate:-n.translate;let r;for(let s=0;s<e.length;s+=1)typeof e[s+1]<"u"?i>=e[s]&&i<e[s+1]-(e[s+1]-e[s])/2?r=s:i>=e[s]&&i<e[s+1]&&(r=s+1):i>=e[s]&&(r=s);return t.normalizeSlideIndex&&(r<0||typeof r>"u")&&(r=0),r}function k$(n){const e=this,t=e.rtlTranslate?e.translate:-e.translate,{snapGrid:i,params:r,activeIndex:s,realIndex:o,snapIndex:a}=e;let l=n,c;const u=d=>{let _=d-e.virtual.slidesBefore;return _<0&&(_=e.virtual.slides.length+_),_>=e.virtual.slides.length&&(_-=e.virtual.slides.length),_};if(typeof l>"u"&&(l=O$(e)),i.indexOf(t)>=0)c=i.indexOf(t);else{const d=Math.min(r.slidesPerGroupSkip,l);c=d+Math.floor((l-d)/r.slidesPerGroup)}if(c>=i.length&&(c=i.length-1),l===s&&!e.params.loop){c!==a&&(e.snapIndex=c,e.emit("snapIndexChange"));return}if(l===s&&e.params.loop&&e.virtual&&e.params.virtual.enabled){e.realIndex=u(l);return}const h=e.grid&&r.grid&&r.grid.rows>1;let f;if(e.virtual&&r.virtual.enabled&&r.loop)f=u(l);else if(h){const d=e.slides.filter(p=>p.column===l)[0];let _=parseInt(d.getAttribute("data-swiper-slide-index"),10);Number.isNaN(_)&&(_=Math.max(e.slides.indexOf(d),0)),f=Math.floor(_/r.grid.rows)}else if(e.slides[l]){const d=e.slides[l].getAttribute("data-swiper-slide-index");d?f=parseInt(d,10):f=l}else f=l;Object.assign(e,{previousSnapIndex:a,snapIndex:c,previousRealIndex:o,realIndex:f,previousIndex:s,activeIndex:l}),e.initialized&&Bp(e),e.emit("activeIndexChange"),e.emit("snapIndexChange"),(e.initialized||e.params.runCallbacksOnInit)&&(o!==f&&e.emit("realIndexChange"),e.emit("slideChange"))}function N$(n,e){const t=this,i=t.params;let r=n.closest(`.${i.slideClass}, swiper-slide`);!r&&t.isElement&&e&&e.length>1&&e.includes(n)&&[...e.slice(e.indexOf(n)+1,e.length)].forEach(a=>{!r&&a.matches&&a.matches(`.${i.slideClass}, swiper-slide`)&&(r=a)});let s=!1,o;if(r){for(let a=0;a<t.slides.length;a+=1)if(t.slides[a]===r){s=!0,o=a;break}}if(r&&s)t.clickedSlide=r,t.virtual&&t.params.virtual.enabled?t.clickedIndex=parseInt(r.getAttribute("data-swiper-slide-index"),10):t.clickedIndex=o;else{t.clickedSlide=void 0,t.clickedIndex=void 0;return}i.slideToClickedSlide&&t.clickedIndex!==void 0&&t.clickedIndex!==t.activeIndex&&t.slideToClickedSlide()}var M$={updateSize:b$,updateSlides:I$,updateAutoHeight:C$,updateSlidesOffset:A$,updateSlidesProgress:x$,updateProgress:R$,updateSlidesClasses:P$,updateActiveIndex:k$,updateClickedSlide:N$};function D$(n){n===void 0&&(n=this.isHorizontal()?"x":"y");const e=this,{params:t,rtlTranslate:i,translate:r,wrapperEl:s}=e;if(t.virtualTranslate)return i?-r:r;if(t.cssMode)return r;let o=d$(s,n);return o+=e.cssOverflowAdjustment(),i&&(o=-o),o||0}function L$(n,e){const t=this,{rtlTranslate:i,params:r,wrapperEl:s,progress:o}=t;let a=0,l=0;const c=0;t.isHorizontal()?a=i?-n:n:l=n,r.roundLengths&&(a=Math.floor(a),l=Math.floor(l)),t.previousTranslate=t.translate,t.translate=t.isHorizontal()?a:l,r.cssMode?s[t.isHorizontal()?"scrollLeft":"scrollTop"]=t.isHorizontal()?-a:-l:r.virtualTranslate||(t.isHorizontal()?a-=t.cssOverflowAdjustment():l-=t.cssOverflowAdjustment(),s.style.transform=`translate3d(${a}px, ${l}px, ${c}px)`);let u;const h=t.maxTranslate()-t.minTranslate();h===0?u=0:u=(n-t.minTranslate())/h,u!==o&&t.updateProgress(n),t.emit("setTranslate",t.translate,e)}function V$(){return-this.snapGrid[0]}function F$(){return-this.snapGrid[this.snapGrid.length-1]}function U$(n,e,t,i,r){n===void 0&&(n=0),e===void 0&&(e=this.params.speed),t===void 0&&(t=!0),i===void 0&&(i=!0);const s=this,{params:o,wrapperEl:a}=s;if(s.animating&&o.preventInteractionOnTransition)return!1;const l=s.minTranslate(),c=s.maxTranslate();let u;if(i&&n>l?u=l:i&&n<c?u=c:u=n,s.updateProgress(u),o.cssMode){const h=s.isHorizontal();if(e===0)a[h?"scrollLeft":"scrollTop"]=-u;else{if(!s.support.smoothScroll)return cC({swiper:s,targetPosition:-u,side:h?"left":"top"}),!0;a.scrollTo({[h?"left":"top"]:-u,behavior:"smooth"})}return!0}return e===0?(s.setTransition(0),s.setTranslate(u),t&&(s.emit("beforeTransitionStart",e,r),s.emit("transitionEnd"))):(s.setTransition(e),s.setTranslate(u),t&&(s.emit("beforeTransitionStart",e,r),s.emit("transitionStart")),s.animating||(s.animating=!0,s.onTranslateToWrapperTransitionEnd||(s.onTranslateToWrapperTransitionEnd=function(f){!s||s.destroyed||f.target===this&&(s.wrapperEl.removeEventListener("transitionend",s.onTranslateToWrapperTransitionEnd),s.onTranslateToWrapperTransitionEnd=null,delete s.onTranslateToWrapperTransitionEnd,s.animating=!1,t&&s.emit("transitionEnd"))}),s.wrapperEl.addEventListener("transitionend",s.onTranslateToWrapperTransitionEnd))),!0}var $$={getTranslate:D$,setTranslate:L$,minTranslate:V$,maxTranslate:F$,translateTo:U$};function B$(n,e){const t=this;t.params.cssMode||(t.wrapperEl.style.transitionDuration=`${n}ms`,t.wrapperEl.style.transitionDelay=n===0?"0ms":""),t.emit("setTransition",n,e)}function dC(n){let{swiper:e,runCallbacks:t,direction:i,step:r}=n;const{activeIndex:s,previousIndex:o}=e;let a=i;if(a||(s>o?a="next":s<o?a="prev":a="reset"),e.emit(`transition${r}`),t&&s!==o){if(a==="reset"){e.emit(`slideResetTransition${r}`);return}e.emit(`slideChangeTransition${r}`),a==="next"?e.emit(`slideNextTransition${r}`):e.emit(`slidePrevTransition${r}`)}}function z$(n,e){n===void 0&&(n=!0);const t=this,{params:i}=t;i.cssMode||(i.autoHeight&&t.updateAutoHeight(),dC({swiper:t,runCallbacks:n,direction:e,step:"Start"}))}function j$(n,e){n===void 0&&(n=!0);const t=this,{params:i}=t;t.animating=!1,!i.cssMode&&(t.setTransition(0),dC({swiper:t,runCallbacks:n,direction:e,step:"End"}))}var G$={setTransition:B$,transitionStart:z$,transitionEnd:j$};function q$(n,e,t,i,r){n===void 0&&(n=0),t===void 0&&(t=!0),typeof n=="string"&&(n=parseInt(n,10));const s=this;let o=n;o<0&&(o=0);const{params:a,snapGrid:l,slidesGrid:c,previousIndex:u,activeIndex:h,rtlTranslate:f,wrapperEl:d,enabled:_}=s;if(!_&&!i&&!r||s.destroyed||s.animating&&a.preventInteractionOnTransition)return!1;typeof e>"u"&&(e=s.params.speed);const p=Math.min(s.params.slidesPerGroupSkip,o);let g=p+Math.floor((o-p)/s.params.slidesPerGroup);g>=l.length&&(g=l.length-1);const m=-l[g];if(a.normalizeSlideIndex)for(let w=0;w<c.length;w+=1){const S=-Math.floor(m*100),E=Math.floor(c[w]*100),I=Math.floor(c[w+1]*100);typeof c[w+1]<"u"?S>=E&&S<I-(I-E)/2?o=w:S>=E&&S<I&&(o=w+1):S>=E&&(o=w)}if(s.initialized&&o!==h&&(!s.allowSlideNext&&(f?m>s.translate&&m>s.minTranslate():m<s.translate&&m<s.minTranslate())||!s.allowSlidePrev&&m>s.translate&&m>s.maxTranslate()&&(h||0)!==o))return!1;o!==(u||0)&&t&&s.emit("beforeSlideChangeStart"),s.updateProgress(m);let T;if(o>h?T="next":o<h?T="prev":T="reset",f&&-m===s.translate||!f&&m===s.translate)return s.updateActiveIndex(o),a.autoHeight&&s.updateAutoHeight(),s.updateSlidesClasses(),a.effect!=="slide"&&s.setTranslate(m),T!=="reset"&&(s.transitionStart(t,T),s.transitionEnd(t,T)),!1;if(a.cssMode){const w=s.isHorizontal(),S=f?m:-m;if(e===0){const E=s.virtual&&s.params.virtual.enabled;E&&(s.wrapperEl.style.scrollSnapType="none",s._immediateVirtual=!0),E&&!s._cssModeVirtualInitialSet&&s.params.initialSlide>0?(s._cssModeVirtualInitialSet=!0,requestAnimationFrame(()=>{d[w?"scrollLeft":"scrollTop"]=S})):d[w?"scrollLeft":"scrollTop"]=S,E&&requestAnimationFrame(()=>{s.wrapperEl.style.scrollSnapType="",s._immediateVirtual=!1})}else{if(!s.support.smoothScroll)return cC({swiper:s,targetPosition:S,side:w?"left":"top"}),!0;d.scrollTo({[w?"left":"top"]:S,behavior:"smooth"})}return!0}return s.setTransition(e),s.setTranslate(m),s.updateActiveIndex(o),s.updateSlidesClasses(),s.emit("beforeTransitionStart",e,i),s.transitionStart(t,T),e===0?s.transitionEnd(t,T):s.animating||(s.animating=!0,s.onSlideToWrapperTransitionEnd||(s.onSlideToWrapperTransitionEnd=function(S){!s||s.destroyed||S.target===this&&(s.wrapperEl.removeEventListener("transitionend",s.onSlideToWrapperTransitionEnd),s.onSlideToWrapperTransitionEnd=null,delete s.onSlideToWrapperTransitionEnd,s.transitionEnd(t,T))}),s.wrapperEl.addEventListener("transitionend",s.onSlideToWrapperTransitionEnd)),!0}function H$(n,e,t,i){n===void 0&&(n=0),t===void 0&&(t=!0),typeof n=="string"&&(n=parseInt(n,10));const r=this;if(r.destroyed)return;typeof e>"u"&&(e=r.params.speed);const s=r.grid&&r.params.grid&&r.params.grid.rows>1;let o=n;if(r.params.loop)if(r.virtual&&r.params.virtual.enabled)o=o+r.virtual.slidesBefore;else{let a;if(s){const f=o*r.params.grid.rows;a=r.slides.filter(d=>d.getAttribute("data-swiper-slide-index")*1===f)[0].column}else a=r.getSlideIndexByData(o);const l=s?Math.ceil(r.slides.length/r.params.grid.rows):r.slides.length,{centeredSlides:c}=r.params;let u=r.params.slidesPerView;u==="auto"?u=r.slidesPerViewDynamic():(u=Math.ceil(parseFloat(r.params.slidesPerView,10)),c&&u%2===0&&(u=u+1));let h=l-a<u;if(c&&(h=h||a<Math.ceil(u/2)),i&&c&&r.params.slidesPerView!=="auto"&&!s&&(h=!1),h){const f=c?a<r.activeIndex?"prev":"next":a-r.activeIndex-1<r.params.slidesPerView?"next":"prev";r.loopFix({direction:f,slideTo:!0,activeSlideIndex:f==="next"?a+1:a-l+1,slideRealIndex:f==="next"?r.realIndex:void 0})}if(s){const f=o*r.params.grid.rows;o=r.slides.filter(d=>d.getAttribute("data-swiper-slide-index")*1===f)[0].column}else o=r.getSlideIndexByData(o)}return requestAnimationFrame(()=>{r.slideTo(o,e,t,i)}),r}function W$(n,e,t){e===void 0&&(e=!0);const i=this,{enabled:r,params:s,animating:o}=i;if(!r||i.destroyed)return i;typeof n>"u"&&(n=i.params.speed);let a=s.slidesPerGroup;s.slidesPerView==="auto"&&s.slidesPerGroup===1&&s.slidesPerGroupAuto&&(a=Math.max(i.slidesPerViewDynamic("current",!0),1));const l=i.activeIndex<s.slidesPerGroupSkip?1:a,c=i.virtual&&s.virtual.enabled;if(s.loop){if(o&&!c&&s.loopPreventsSliding)return!1;if(i.loopFix({direction:"next"}),i._clientLeft=i.wrapperEl.clientLeft,i.activeIndex===i.slides.length-1&&s.cssMode)return requestAnimationFrame(()=>{i.slideTo(i.activeIndex+l,n,e,t)}),!0}return s.rewind&&i.isEnd?i.slideTo(0,n,e,t):i.slideTo(i.activeIndex+l,n,e,t)}function K$(n,e,t){e===void 0&&(e=!0);const i=this,{params:r,snapGrid:s,slidesGrid:o,rtlTranslate:a,enabled:l,animating:c}=i;if(!l||i.destroyed)return i;typeof n>"u"&&(n=i.params.speed);const u=i.virtual&&r.virtual.enabled;if(r.loop){if(c&&!u&&r.loopPreventsSliding)return!1;i.loopFix({direction:"prev"}),i._clientLeft=i.wrapperEl.clientLeft}const h=a?i.translate:-i.translate;function f(m){return m<0?-Math.floor(Math.abs(m)):Math.floor(m)}const d=f(h),_=s.map(m=>f(m));let p=s[_.indexOf(d)-1];if(typeof p>"u"&&r.cssMode){let m;s.forEach((T,w)=>{d>=T&&(m=w)}),typeof m<"u"&&(p=s[m>0?m-1:m])}let g=0;if(typeof p<"u"&&(g=o.indexOf(p),g<0&&(g=i.activeIndex-1),r.slidesPerView==="auto"&&r.slidesPerGroup===1&&r.slidesPerGroupAuto&&(g=g-i.slidesPerViewDynamic("previous",!0)+1,g=Math.max(g,0))),r.rewind&&i.isBeginning){const m=i.params.virtual&&i.params.virtual.enabled&&i.virtual?i.virtual.slides.length-1:i.slides.length-1;return i.slideTo(m,n,e,t)}else if(r.loop&&i.activeIndex===0&&r.cssMode)return requestAnimationFrame(()=>{i.slideTo(g,n,e,t)}),!0;return i.slideTo(g,n,e,t)}function Y$(n,e,t){e===void 0&&(e=!0);const i=this;if(!i.destroyed)return typeof n>"u"&&(n=i.params.speed),i.slideTo(i.activeIndex,n,e,t)}function X$(n,e,t,i){e===void 0&&(e=!0),i===void 0&&(i=.5);const r=this;if(r.destroyed)return;typeof n>"u"&&(n=r.params.speed);let s=r.activeIndex;const o=Math.min(r.params.slidesPerGroupSkip,s),a=o+Math.floor((s-o)/r.params.slidesPerGroup),l=r.rtlTranslate?r.translate:-r.translate;if(l>=r.snapGrid[a]){const c=r.snapGrid[a],u=r.snapGrid[a+1];l-c>(u-c)*i&&(s+=r.params.slidesPerGroup)}else{const c=r.snapGrid[a-1],u=r.snapGrid[a];l-c<=(u-c)*i&&(s-=r.params.slidesPerGroup)}return s=Math.max(s,0),s=Math.min(s,r.slidesGrid.length-1),r.slideTo(s,n,e,t)}function Q$(){const n=this;if(n.destroyed)return;const{params:e,slidesEl:t}=n,i=e.slidesPerView==="auto"?n.slidesPerViewDynamic():e.slidesPerView;let r=n.clickedIndex,s;const o=n.isElement?"swiper-slide":`.${e.slideClass}`;if(e.loop){if(n.animating)return;s=parseInt(n.clickedSlide.getAttribute("data-swiper-slide-index"),10),e.centeredSlides?r<n.loopedSlides-i/2||r>n.slides.length-n.loopedSlides+i/2?(n.loopFix(),r=n.getSlideIndex(rr(t,`${o}[data-swiper-slide-index="${s}"]`)[0]),Up(()=>{n.slideTo(r)})):n.slideTo(r):r>n.slides.length-i?(n.loopFix(),r=n.getSlideIndex(rr(t,`${o}[data-swiper-slide-index="${s}"]`)[0]),Up(()=>{n.slideTo(r)})):n.slideTo(r)}else n.slideTo(r)}var J$={slideTo:q$,slideToLoop:H$,slideNext:W$,slidePrev:K$,slideReset:Y$,slideToClosest:X$,slideToClickedSlide:Q$};function Z$(n){const e=this,{params:t,slidesEl:i}=e;if(!t.loop||e.virtual&&e.params.virtual.enabled)return;const r=()=>{rr(i,`.${t.slideClass}, swiper-slide`).forEach((h,f)=>{h.setAttribute("data-swiper-slide-index",f)})},s=e.grid&&t.grid&&t.grid.rows>1,o=t.slidesPerGroup*(s?t.grid.rows:1),a=e.slides.length%o!==0,l=s&&e.slides.length%t.grid.rows!==0,c=u=>{for(let h=0;h<u;h+=1){const f=e.isElement?$p("swiper-slide",[t.slideBlankClass]):$p("div",[t.slideClass,t.slideBlankClass]);e.slidesEl.append(f)}};if(a){if(t.loopAddBlankSlides){const u=o-e.slides.length%o;c(u),e.recalcSlides(),e.updateSlides()}else eh("Swiper Loop Warning: The number of slides is not even to slidesPerGroup, loop mode may not function properly. You need to add more slides (or make duplicates, or empty slides)");r()}else if(l){if(t.loopAddBlankSlides){const u=t.grid.rows-e.slides.length%t.grid.rows;c(u),e.recalcSlides(),e.updateSlides()}else eh("Swiper Loop Warning: The number of slides is not even to grid.rows, loop mode may not function properly. You need to add more slides (or make duplicates, or empty slides)");r()}else r();e.loopFix({slideRealIndex:n,direction:t.centeredSlides?void 0:"next"})}function eB(n){let{slideRealIndex:e,slideTo:t=!0,direction:i,setTranslate:r,activeSlideIndex:s,byController:o,byMousewheel:a}=n===void 0?{}:n;const l=this;if(!l.params.loop)return;l.emit("beforeLoopFix");const{slides:c,allowSlidePrev:u,allowSlideNext:h,slidesEl:f,params:d}=l,{centeredSlides:_}=d;if(l.allowSlidePrev=!0,l.allowSlideNext=!0,l.virtual&&d.virtual.enabled){t&&(!d.centeredSlides&&l.snapIndex===0?l.slideTo(l.virtual.slides.length,0,!1,!0):d.centeredSlides&&l.snapIndex<d.slidesPerView?l.slideTo(l.virtual.slides.length+l.snapIndex,0,!1,!0):l.snapIndex===l.snapGrid.length-1&&l.slideTo(l.virtual.slidesBefore,0,!1,!0)),l.allowSlidePrev=u,l.allowSlideNext=h,l.emit("loopFix");return}let p=d.slidesPerView;p==="auto"?p=l.slidesPerViewDynamic():(p=Math.ceil(parseFloat(d.slidesPerView,10)),_&&p%2===0&&(p=p+1));const g=d.slidesPerGroupAuto?p:d.slidesPerGroup;let m=g;m%g!==0&&(m+=g-m%g),m+=d.loopAdditionalSlides,l.loopedSlides=m;const T=l.grid&&d.grid&&d.grid.rows>1;c.length<p+m?eh("Swiper Loop Warning: The number of slides is not enough for loop mode, it will be disabled and not function properly. You need to add more slides (or make duplicates) or lower the values of slidesPerView and slidesPerGroup parameters"):T&&d.grid.fill==="row"&&eh("Swiper Loop Warning: Loop mode is not compatible with grid.fill = `row`");const w=[],S=[];let E=l.activeIndex;typeof s>"u"?s=l.getSlideIndex(c.filter(N=>N.classList.contains(d.slideActiveClass))[0]):E=s;const I=i==="next"||!i,P=i==="prev"||!i;let x=0,A=0;const k=T?Math.ceil(c.length/d.grid.rows):c.length,W=(T?c[s].column:s)+(_&&typeof r>"u"?-p/2+.5:0);if(W<m){x=Math.max(m-W,g);for(let N=0;N<m-W;N+=1){const de=N-Math.floor(N/k)*k;if(T){const fe=k-de-1;for(let ne=c.length-1;ne>=0;ne-=1)c[ne].column===fe&&w.push(ne)}else w.push(k-de-1)}}else if(W+p>k-m){A=Math.max(W-(k-m*2),g);for(let N=0;N<A;N+=1){const de=N-Math.floor(N/k)*k;T?c.forEach((fe,ne)=>{fe.column===de&&S.push(ne)}):S.push(de)}}if(l.__preventObserver__=!0,requestAnimationFrame(()=>{l.__preventObserver__=!1}),P&&w.forEach(N=>{c[N].swiperLoopMoveDOM=!0,f.prepend(c[N]),c[N].swiperLoopMoveDOM=!1}),I&&S.forEach(N=>{c[N].swiperLoopMoveDOM=!0,f.append(c[N]),c[N].swiperLoopMoveDOM=!1}),l.recalcSlides(),d.slidesPerView==="auto"?l.updateSlides():T&&(w.length>0&&P||S.length>0&&I)&&l.slides.forEach((N,de)=>{l.grid.updateSlide(de,N,l.slides)}),d.watchSlidesProgress&&l.updateSlidesOffset(),t){if(w.length>0&&P){if(typeof e>"u"){const N=l.slidesGrid[E],fe=l.slidesGrid[E+x]-N;a?l.setTranslate(l.translate-fe):(l.slideTo(E+Math.ceil(x),0,!1,!0),r&&(l.touchEventsData.startTranslate=l.touchEventsData.startTranslate-fe,l.touchEventsData.currentTranslate=l.touchEventsData.currentTranslate-fe))}else if(r){const N=T?w.length/d.grid.rows:w.length;l.slideTo(l.activeIndex+N,0,!1,!0),l.touchEventsData.currentTranslate=l.translate}}else if(S.length>0&&I)if(typeof e>"u"){const N=l.slidesGrid[E],fe=l.slidesGrid[E-A]-N;a?l.setTranslate(l.translate-fe):(l.slideTo(E-A,0,!1,!0),r&&(l.touchEventsData.startTranslate=l.touchEventsData.startTranslate-fe,l.touchEventsData.currentTranslate=l.touchEventsData.currentTranslate-fe))}else{const N=T?S.length/d.grid.rows:S.length;l.slideTo(l.activeIndex-N,0,!1,!0)}}if(l.allowSlidePrev=u,l.allowSlideNext=h,l.controller&&l.controller.control&&!o){const N={slideRealIndex:e,direction:i,setTranslate:r,activeSlideIndex:s,byController:!0};Array.isArray(l.controller.control)?l.controller.control.forEach(de=>{!de.destroyed&&de.params.loop&&de.loopFix({...N,slideTo:de.params.slidesPerView===d.slidesPerView?t:!1})}):l.controller.control instanceof l.constructor&&l.controller.control.params.loop&&l.controller.control.loopFix({...N,slideTo:l.controller.control.params.slidesPerView===d.slidesPerView?t:!1})}l.emit("loopFix")}function tB(){const n=this,{params:e,slidesEl:t}=n;if(!e.loop||n.virtual&&n.params.virtual.enabled)return;n.recalcSlides();const i=[];n.slides.forEach(r=>{const s=typeof r.swiperSlideIndex>"u"?r.getAttribute("data-swiper-slide-index")*1:r.swiperSlideIndex;i[s]=r}),n.slides.forEach(r=>{r.removeAttribute("data-swiper-slide-index")}),i.forEach(r=>{t.append(r)}),n.recalcSlides(),n.slideTo(n.realIndex,0)}var nB={loopCreate:Z$,loopFix:eB,loopDestroy:tB};function iB(n){const e=this;if(!e.params.simulateTouch||e.params.watchOverflow&&e.isLocked||e.params.cssMode)return;const t=e.params.touchEventsTarget==="container"?e.el:e.wrapperEl;e.isElement&&(e.__preventObserver__=!0),t.style.cursor="move",t.style.cursor=n?"grabbing":"grab",e.isElement&&requestAnimationFrame(()=>{e.__preventObserver__=!1})}function rB(){const n=this;n.params.watchOverflow&&n.isLocked||n.params.cssMode||(n.isElement&&(n.__preventObserver__=!0),n[n.params.touchEventsTarget==="container"?"el":"wrapperEl"].style.cursor="",n.isElement&&requestAnimationFrame(()=>{n.__preventObserver__=!1}))}var sB={setGrabCursor:iB,unsetGrabCursor:rB};function oB(n,e){e===void 0&&(e=this);function t(i){if(!i||i===xa()||i===Bn())return null;i.assignedSlot&&(i=i.assignedSlot);const r=i.closest(n);return!r&&!i.getRootNode?null:r||t(i.getRootNode().host)}return t(e)}function K0(n,e,t){const i=Bn(),{params:r}=n,s=r.edgeSwipeDetection,o=r.edgeSwipeThreshold;return s&&(t<=o||t>=i.innerWidth-o)?s==="prevent"?(e.preventDefault(),!0):!1:!0}function aB(n){const e=this,t=xa();let i=n;i.originalEvent&&(i=i.originalEvent);const r=e.touchEventsData;if(i.type==="pointerdown"){if(r.pointerId!==null&&r.pointerId!==i.pointerId)return;r.pointerId=i.pointerId}else i.type==="touchstart"&&i.targetTouches.length===1&&(r.touchId=i.targetTouches[0].identifier);if(i.type==="touchstart"){K0(e,i,i.targetTouches[0].pageX);return}const{params:s,touches:o,enabled:a}=e;if(!a||!s.simulateTouch&&i.pointerType==="mouse"||e.animating&&s.preventInteractionOnTransition)return;!e.animating&&s.cssMode&&s.loop&&e.loopFix();let l=i.target;if(s.touchEventsTarget==="wrapper"&&!e.wrapperEl.contains(l)||"which"in i&&i.which===3||"button"in i&&i.button>0||r.isTouched&&r.isMoved)return;const c=!!s.noSwipingClass&&s.noSwipingClass!=="",u=i.composedPath?i.composedPath():i.path;c&&i.target&&i.target.shadowRoot&&u&&(l=u[0]);const h=s.noSwipingSelector?s.noSwipingSelector:`.${s.noSwipingClass}`,f=!!(i.target&&i.target.shadowRoot);if(s.noSwiping&&(f?oB(h,l):l.closest(h))){e.allowClick=!0;return}if(s.swipeHandler&&!l.closest(s.swipeHandler))return;o.currentX=i.pageX,o.currentY=i.pageY;const d=o.currentX,_=o.currentY;if(!K0(e,i,d))return;Object.assign(r,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),o.startX=d,o.startY=_,r.touchStartTime=Zu(),e.allowClick=!0,e.updateSize(),e.swipeDirection=void 0,s.threshold>0&&(r.allowThresholdMove=!1);let p=!0;l.matches(r.focusableElements)&&(p=!1,l.nodeName==="SELECT"&&(r.isTouched=!1)),t.activeElement&&t.activeElement.matches(r.focusableElements)&&t.activeElement!==l&&t.activeElement.blur();const g=p&&e.allowTouchMove&&s.touchStartPreventDefault;(s.touchStartForcePreventDefault||g)&&!l.isContentEditable&&i.preventDefault(),s.freeMode&&s.freeMode.enabled&&e.freeMode&&e.animating&&!s.cssMode&&e.freeMode.onTouchStart(),e.emit("touchStart",i)}function lB(n){const e=xa(),t=this,i=t.touchEventsData,{params:r,touches:s,rtlTranslate:o,enabled:a}=t;if(!a||!r.simulateTouch&&n.pointerType==="mouse")return;let l=n;if(l.originalEvent&&(l=l.originalEvent),l.type==="pointermove"&&(i.touchId!==null||l.pointerId!==i.pointerId))return;let c;if(l.type==="touchmove"){if(c=[...l.changedTouches].filter(I=>I.identifier===i.touchId)[0],!c||c.identifier!==i.touchId)return}else c=l;if(!i.isTouched){i.startMoving&&i.isScrolling&&t.emit("touchMoveOpposite",l);return}const u=c.pageX,h=c.pageY;if(l.preventedByNestedSwiper){s.startX=u,s.startY=h;return}if(!t.allowTouchMove){l.target.matches(i.focusableElements)||(t.allowClick=!1),i.isTouched&&(Object.assign(s,{startX:u,startY:h,currentX:u,currentY:h}),i.touchStartTime=Zu());return}if(r.touchReleaseOnEdges&&!r.loop){if(t.isVertical()){if(h<s.startY&&t.translate<=t.maxTranslate()||h>s.startY&&t.translate>=t.minTranslate()){i.isTouched=!1,i.isMoved=!1;return}}else if(u<s.startX&&t.translate<=t.maxTranslate()||u>s.startX&&t.translate>=t.minTranslate())return}if(e.activeElement&&l.target===e.activeElement&&l.target.matches(i.focusableElements)){i.isMoved=!0,t.allowClick=!1;return}i.allowTouchCallbacks&&t.emit("touchMove",l),s.previousX=s.currentX,s.previousY=s.currentY,s.currentX=u,s.currentY=h;const f=s.currentX-s.startX,d=s.currentY-s.startY;if(t.params.threshold&&Math.sqrt(f**2+d**2)<t.params.threshold)return;if(typeof i.isScrolling>"u"){let I;t.isHorizontal()&&s.currentY===s.startY||t.isVertical()&&s.currentX===s.startX?i.isScrolling=!1:f*f+d*d>=25&&(I=Math.atan2(Math.abs(d),Math.abs(f))*180/Math.PI,i.isScrolling=t.isHorizontal()?I>r.touchAngle:90-I>r.touchAngle)}if(i.isScrolling&&t.emit("touchMoveOpposite",l),typeof i.startMoving>"u"&&(s.currentX!==s.startX||s.currentY!==s.startY)&&(i.startMoving=!0),i.isScrolling||l.type==="touchmove"&&i.preventTouchMoveFromPointerMove){i.isTouched=!1;return}if(!i.startMoving)return;t.allowClick=!1,!r.cssMode&&l.cancelable&&l.preventDefault(),r.touchMoveStopPropagation&&!r.nested&&l.stopPropagation();let _=t.isHorizontal()?f:d,p=t.isHorizontal()?s.currentX-s.previousX:s.currentY-s.previousY;r.oneWayMovement&&(_=Math.abs(_)*(o?1:-1),p=Math.abs(p)*(o?1:-1)),s.diff=_,_*=r.touchRatio,o&&(_=-_,p=-p);const g=t.touchesDirection;t.swipeDirection=_>0?"prev":"next",t.touchesDirection=p>0?"prev":"next";const m=t.params.loop&&!r.cssMode,T=t.touchesDirection==="next"&&t.allowSlideNext||t.touchesDirection==="prev"&&t.allowSlidePrev;if(!i.isMoved){if(m&&T&&t.loopFix({direction:t.swipeDirection}),i.startTranslate=t.getTranslate(),t.setTransition(0),t.animating){const I=new window.CustomEvent("transitionend",{bubbles:!0,cancelable:!0});t.wrapperEl.dispatchEvent(I)}i.allowMomentumBounce=!1,r.grabCursor&&(t.allowSlideNext===!0||t.allowSlidePrev===!0)&&t.setGrabCursor(!0),t.emit("sliderFirstMove",l)}let w;if(new Date().getTime(),i.isMoved&&i.allowThresholdMove&&g!==t.touchesDirection&&m&&T&&Math.abs(_)>=1){Object.assign(s,{startX:u,startY:h,currentX:u,currentY:h,startTranslate:i.currentTranslate}),i.loopSwapReset=!0,i.startTranslate=i.currentTranslate;return}t.emit("sliderMove",l),i.isMoved=!0,i.currentTranslate=_+i.startTranslate;let S=!0,E=r.resistanceRatio;if(r.touchReleaseOnEdges&&(E=0),_>0?(m&&T&&!w&&i.allowThresholdMove&&i.currentTranslate>(r.centeredSlides?t.minTranslate()-t.slidesSizesGrid[t.activeIndex+1]:t.minTranslate())&&t.loopFix({direction:"prev",setTranslate:!0,activeSlideIndex:0}),i.currentTranslate>t.minTranslate()&&(S=!1,r.resistance&&(i.currentTranslate=t.minTranslate()-1+(-t.minTranslate()+i.startTranslate+_)**E))):_<0&&(m&&T&&!w&&i.allowThresholdMove&&i.currentTranslate<(r.centeredSlides?t.maxTranslate()+t.slidesSizesGrid[t.slidesSizesGrid.length-1]:t.maxTranslate())&&t.loopFix({direction:"next",setTranslate:!0,activeSlideIndex:t.slides.length-(r.slidesPerView==="auto"?t.slidesPerViewDynamic():Math.ceil(parseFloat(r.slidesPerView,10)))}),i.currentTranslate<t.maxTranslate()&&(S=!1,r.resistance&&(i.currentTranslate=t.maxTranslate()+1-(t.maxTranslate()-i.startTranslate-_)**E))),S&&(l.preventedByNestedSwiper=!0),!t.allowSlideNext&&t.swipeDirection==="next"&&i.currentTranslate<i.startTranslate&&(i.currentTranslate=i.startTranslate),!t.allowSlidePrev&&t.swipeDirection==="prev"&&i.currentTranslate>i.startTranslate&&(i.currentTranslate=i.startTranslate),!t.allowSlidePrev&&!t.allowSlideNext&&(i.currentTranslate=i.startTranslate),r.threshold>0)if(Math.abs(_)>r.threshold||i.allowThresholdMove){if(!i.allowThresholdMove){i.allowThresholdMove=!0,s.startX=s.currentX,s.startY=s.currentY,i.currentTranslate=i.startTranslate,s.diff=t.isHorizontal()?s.currentX-s.startX:s.currentY-s.startY;return}}else{i.currentTranslate=i.startTranslate;return}!r.followFinger||r.cssMode||((r.freeMode&&r.freeMode.enabled&&t.freeMode||r.watchSlidesProgress)&&(t.updateActiveIndex(),t.updateSlidesClasses()),r.freeMode&&r.freeMode.enabled&&t.freeMode&&t.freeMode.onTouchMove(),t.updateProgress(i.currentTranslate),t.setTranslate(i.currentTranslate))}function cB(n){const e=this,t=e.touchEventsData;let i=n;i.originalEvent&&(i=i.originalEvent);let r;if(i.type==="touchend"||i.type==="touchcancel"){if(r=[...i.changedTouches].filter(E=>E.identifier===t.touchId)[0],!r||r.identifier!==t.touchId)return}else{if(t.touchId!==null||i.pointerId!==t.pointerId)return;r=i}if(["pointercancel","pointerout","pointerleave","contextmenu"].includes(i.type)&&!(["pointercancel","contextmenu"].includes(i.type)&&(e.browser.isSafari||e.browser.isWebView)))return;t.pointerId=null,t.touchId=null;const{params:o,touches:a,rtlTranslate:l,slidesGrid:c,enabled:u}=e;if(!u||!o.simulateTouch&&i.pointerType==="mouse")return;if(t.allowTouchCallbacks&&e.emit("touchEnd",i),t.allowTouchCallbacks=!1,!t.isTouched){t.isMoved&&o.grabCursor&&e.setGrabCursor(!1),t.isMoved=!1,t.startMoving=!1;return}o.grabCursor&&t.isMoved&&t.isTouched&&(e.allowSlideNext===!0||e.allowSlidePrev===!0)&&e.setGrabCursor(!1);const h=Zu(),f=h-t.touchStartTime;if(e.allowClick){const E=i.path||i.composedPath&&i.composedPath();e.updateClickedSlide(E&&E[0]||i.target,E),e.emit("tap click",i),f<300&&h-t.lastClickTime<300&&e.emit("doubleTap doubleClick",i)}if(t.lastClickTime=Zu(),Up(()=>{e.destroyed||(e.allowClick=!0)}),!t.isTouched||!t.isMoved||!e.swipeDirection||a.diff===0&&!t.loopSwapReset||t.currentTranslate===t.startTranslate&&!t.loopSwapReset){t.isTouched=!1,t.isMoved=!1,t.startMoving=!1;return}t.isTouched=!1,t.isMoved=!1,t.startMoving=!1;let d;if(o.followFinger?d=l?e.translate:-e.translate:d=-t.currentTranslate,o.cssMode)return;if(o.freeMode&&o.freeMode.enabled){e.freeMode.onTouchEnd({currentPos:d});return}const _=d>=-e.maxTranslate()&&!e.params.loop;let p=0,g=e.slidesSizesGrid[0];for(let E=0;E<c.length;E+=E<o.slidesPerGroupSkip?1:o.slidesPerGroup){const I=E<o.slidesPerGroupSkip-1?1:o.slidesPerGroup;typeof c[E+I]<"u"?(_||d>=c[E]&&d<c[E+I])&&(p=E,g=c[E+I]-c[E]):(_||d>=c[E])&&(p=E,g=c[c.length-1]-c[c.length-2])}let m=null,T=null;o.rewind&&(e.isBeginning?T=o.virtual&&o.virtual.enabled&&e.virtual?e.virtual.slides.length-1:e.slides.length-1:e.isEnd&&(m=0));const w=(d-c[p])/g,S=p<o.slidesPerGroupSkip-1?1:o.slidesPerGroup;if(f>o.longSwipesMs){if(!o.longSwipes){e.slideTo(e.activeIndex);return}e.swipeDirection==="next"&&(w>=o.longSwipesRatio?e.slideTo(o.rewind&&e.isEnd?m:p+S):e.slideTo(p)),e.swipeDirection==="prev"&&(w>1-o.longSwipesRatio?e.slideTo(p+S):T!==null&&w<0&&Math.abs(w)>o.longSwipesRatio?e.slideTo(T):e.slideTo(p))}else{if(!o.shortSwipes){e.slideTo(e.activeIndex);return}e.navigation&&(i.target===e.navigation.nextEl||i.target===e.navigation.prevEl)?i.target===e.navigation.nextEl?e.slideTo(p+S):e.slideTo(p):(e.swipeDirection==="next"&&e.slideTo(m!==null?m:p+S),e.swipeDirection==="prev"&&e.slideTo(T!==null?T:p))}}function Y0(){const n=this,{params:e,el:t}=n;if(t&&t.offsetWidth===0)return;e.breakpoints&&n.setBreakpoint();const{allowSlideNext:i,allowSlidePrev:r,snapGrid:s}=n,o=n.virtual&&n.params.virtual.enabled;n.allowSlideNext=!0,n.allowSlidePrev=!0,n.updateSize(),n.updateSlides(),n.updateSlidesClasses();const a=o&&e.loop;(e.slidesPerView==="auto"||e.slidesPerView>1)&&n.isEnd&&!n.isBeginning&&!n.params.centeredSlides&&!a?n.slideTo(n.slides.length-1,0,!1,!0):n.params.loop&&!o?n.slideToLoop(n.realIndex,0,!1,!0):n.slideTo(n.activeIndex,0,!1,!0),n.autoplay&&n.autoplay.running&&n.autoplay.paused&&(clearTimeout(n.autoplay.resizeTimeout),n.autoplay.resizeTimeout=setTimeout(()=>{n.autoplay&&n.autoplay.running&&n.autoplay.paused&&n.autoplay.resume()},500)),n.allowSlidePrev=r,n.allowSlideNext=i,n.params.watchOverflow&&s!==n.snapGrid&&n.checkOverflow()}function uB(n){const e=this;e.enabled&&(e.allowClick||(e.params.preventClicks&&n.preventDefault(),e.params.preventClicksPropagation&&e.animating&&(n.stopPropagation(),n.stopImmediatePropagation())))}function hB(){const n=this,{wrapperEl:e,rtlTranslate:t,enabled:i}=n;if(!i)return;n.previousTranslate=n.translate,n.isHorizontal()?n.translate=-e.scrollLeft:n.translate=-e.scrollTop,n.translate===0&&(n.translate=0),n.updateActiveIndex(),n.updateSlidesClasses();let r;const s=n.maxTranslate()-n.minTranslate();s===0?r=0:r=(n.translate-n.minTranslate())/s,r!==n.progress&&n.updateProgress(t?-n.translate:n.translate),n.emit("setTranslate",n.translate,!1)}function dB(n){const e=this;du(e,n.target),!(e.params.cssMode||e.params.slidesPerView!=="auto"&&!e.params.autoHeight)&&e.update()}function fB(){const n=this;n.documentTouchHandlerProceeded||(n.documentTouchHandlerProceeded=!0,n.params.touchReleaseOnEdges&&(n.el.style.touchAction="auto"))}const fC=(n,e)=>{const t=xa(),{params:i,el:r,wrapperEl:s,device:o}=n,a=!!i.nested,l=e==="on"?"addEventListener":"removeEventListener",c=e;t[l]("touchstart",n.onDocumentTouchStart,{passive:!1,capture:a}),r[l]("touchstart",n.onTouchStart,{passive:!1}),r[l]("pointerdown",n.onTouchStart,{passive:!1}),t[l]("touchmove",n.onTouchMove,{passive:!1,capture:a}),t[l]("pointermove",n.onTouchMove,{passive:!1,capture:a}),t[l]("touchend",n.onTouchEnd,{passive:!0}),t[l]("pointerup",n.onTouchEnd,{passive:!0}),t[l]("pointercancel",n.onTouchEnd,{passive:!0}),t[l]("touchcancel",n.onTouchEnd,{passive:!0}),t[l]("pointerout",n.onTouchEnd,{passive:!0}),t[l]("pointerleave",n.onTouchEnd,{passive:!0}),t[l]("contextmenu",n.onTouchEnd,{passive:!0}),(i.preventClicks||i.preventClicksPropagation)&&r[l]("click",n.onClick,!0),i.cssMode&&s[l]("scroll",n.onScroll),i.updateOnWindowResize?n[c](o.ios||o.android?"resize orientationchange observerUpdate":"resize observerUpdate",Y0,!0):n[c]("observerUpdate",Y0,!0),r[l]("load",n.onLoad,{capture:!0})};function pB(){const n=this,{params:e}=n;n.onTouchStart=aB.bind(n),n.onTouchMove=lB.bind(n),n.onTouchEnd=cB.bind(n),n.onDocumentTouchStart=fB.bind(n),e.cssMode&&(n.onScroll=hB.bind(n)),n.onClick=uB.bind(n),n.onLoad=dB.bind(n),fC(n,"on")}function _B(){fC(this,"off")}var gB={attachEvents:pB,detachEvents:_B};const X0=(n,e)=>n.grid&&e.grid&&e.grid.rows>1;function mB(){const n=this,{realIndex:e,initialized:t,params:i,el:r}=n,s=i.breakpoints;if(!s||s&&Object.keys(s).length===0)return;const o=n.getBreakpoint(s,n.params.breakpointsBase,n.el);if(!o||n.currentBreakpoint===o)return;const l=(o in s?s[o]:void 0)||n.originalParams,c=X0(n,i),u=X0(n,l),h=n.params.grabCursor,f=l.grabCursor,d=i.enabled;c&&!u?(r.classList.remove(`${i.containerModifierClass}grid`,`${i.containerModifierClass}grid-column`),n.emitContainerClasses()):!c&&u&&(r.classList.add(`${i.containerModifierClass}grid`),(l.grid.fill&&l.grid.fill==="column"||!l.grid.fill&&i.grid.fill==="column")&&r.classList.add(`${i.containerModifierClass}grid-column`),n.emitContainerClasses()),h&&!f?n.unsetGrabCursor():!h&&f&&n.setGrabCursor(),["navigation","pagination","scrollbar"].forEach(w=>{if(typeof l[w]>"u")return;const S=i[w]&&i[w].enabled,E=l[w]&&l[w].enabled;S&&!E&&n[w].disable(),!S&&E&&n[w].enable()});const _=l.direction&&l.direction!==i.direction,p=i.loop&&(l.slidesPerView!==i.slidesPerView||_),g=i.loop;_&&t&&n.changeDirection(),Pn(n.params,l);const m=n.params.enabled,T=n.params.loop;Object.assign(n,{allowTouchMove:n.params.allowTouchMove,allowSlideNext:n.params.allowSlideNext,allowSlidePrev:n.params.allowSlidePrev}),d&&!m?n.disable():!d&&m&&n.enable(),n.currentBreakpoint=o,n.emit("_beforeBreakpoint",l),t&&(p?(n.loopDestroy(),n.loopCreate(e),n.updateSlides()):!g&&T?(n.loopCreate(e),n.updateSlides()):g&&!T&&n.loopDestroy()),n.emit("breakpoint",l)}function yB(n,e,t){if(e===void 0&&(e="window"),!n||e==="container"&&!t)return;let i=!1;const r=Bn(),s=e==="window"?r.innerHeight:t.clientHeight,o=Object.keys(n).map(a=>{if(typeof a=="string"&&a.indexOf("@")===0){const l=parseFloat(a.substr(1));return{value:s*l,point:a}}return{value:a,point:a}});o.sort((a,l)=>parseInt(a.value,10)-parseInt(l.value,10));for(let a=0;a<o.length;a+=1){const{point:l,value:c}=o[a];e==="window"?r.matchMedia(`(min-width: ${c}px)`).matches&&(i=l):c<=t.clientWidth&&(i=l)}return i||"max"}var vB={setBreakpoint:mB,getBreakpoint:yB};function wB(n,e){const t=[];return n.forEach(i=>{typeof i=="object"?Object.keys(i).forEach(r=>{i[r]&&t.push(e+r)}):typeof i=="string"&&t.push(e+i)}),t}function TB(){const n=this,{classNames:e,params:t,rtl:i,el:r,device:s}=n,o=wB(["initialized",t.direction,{"free-mode":n.params.freeMode&&t.freeMode.enabled},{autoheight:t.autoHeight},{rtl:i},{grid:t.grid&&t.grid.rows>1},{"grid-column":t.grid&&t.grid.rows>1&&t.grid.fill==="column"},{android:s.android},{ios:s.ios},{"css-mode":t.cssMode},{centered:t.cssMode&&t.centeredSlides},{"watch-progress":t.watchSlidesProgress}],t.containerModifierClass);e.push(...o),r.classList.add(...e),n.emitContainerClasses()}function EB(){const n=this,{el:e,classNames:t}=n;e.classList.remove(...t),n.emitContainerClasses()}var SB={addClasses:TB,removeClasses:EB};function bB(){const n=this,{isLocked:e,params:t}=n,{slidesOffsetBefore:i}=t;if(i){const r=n.slides.length-1,s=n.slidesGrid[r]+n.slidesSizesGrid[r]+i*2;n.isLocked=n.size>s}else n.isLocked=n.snapGrid.length===1;t.allowSlideNext===!0&&(n.allowSlideNext=!n.isLocked),t.allowSlidePrev===!0&&(n.allowSlidePrev=!n.isLocked),e&&e!==n.isLocked&&(n.isEnd=!1),e!==n.isLocked&&n.emit(n.isLocked?"lock":"unlock")}var IB={checkOverflow:bB},zp={init:!0,direction:"horizontal",oneWayMovement:!1,swiperElementNodeName:"SWIPER-CONTAINER",touchEventsTarget:"wrapper",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,resizeObserver:!0,nested:!1,createElements:!1,eventsPrefix:"swiper",enabled:!0,focusableElements:"input, select, option, textarea, button, video, label",width:null,height:null,preventInteractionOnTransition:!1,userAgent:null,url:null,edgeSwipeDetection:!1,edgeSwipeThreshold:20,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsBase:"window",spaceBetween:0,slidesPerView:1,slidesPerGroup:1,slidesPerGroupSkip:0,slidesPerGroupAuto:!1,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!0,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:5,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,loop:!1,loopAddBlankSlides:!0,loopAdditionalSlides:0,loopPreventsSliding:!0,rewind:!1,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,maxBackfaceHiddenSlides:10,containerModifierClass:"swiper-",slideClass:"swiper-slide",slideBlankClass:"swiper-slide-blank",slideActiveClass:"swiper-slide-active",slideVisibleClass:"swiper-slide-visible",slideFullyVisibleClass:"swiper-slide-fully-visible",slideNextClass:"swiper-slide-next",slidePrevClass:"swiper-slide-prev",wrapperClass:"swiper-wrapper",lazyPreloaderClass:"swiper-lazy-preloader",lazyPreloadPrevNext:0,runCallbacksOnInit:!0,_emitClasses:!1};function CB(n,e){return function(i){i===void 0&&(i={});const r=Object.keys(i)[0],s=i[r];if(typeof s!="object"||s===null){Pn(e,i);return}if(n[r]===!0&&(n[r]={enabled:!0}),r==="navigation"&&n[r]&&n[r].enabled&&!n[r].prevEl&&!n[r].nextEl&&(n[r].auto=!0),["pagination","scrollbar"].indexOf(r)>=0&&n[r]&&n[r].enabled&&!n[r].el&&(n[r].auto=!0),!(r in n&&"enabled"in s)){Pn(e,i);return}typeof n[r]=="object"&&!("enabled"in n[r])&&(n[r].enabled=!0),n[r]||(n[r]={enabled:!1}),Pn(e,i)}}const nf={eventsEmitter:S$,update:M$,translate:$$,transition:G$,slide:J$,loop:nB,grabCursor:sB,events:gB,breakpoints:vB,checkOverflow:IB,classes:SB},rf={};let dm=class Qi{constructor(){let e,t;for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];r.length===1&&r[0].constructor&&Object.prototype.toString.call(r[0]).slice(8,-1)==="Object"?t=r[0]:[e,t]=r,t||(t={}),t=Pn({},t),e&&!t.el&&(t.el=e);const o=xa();if(t.el&&typeof t.el=="string"&&o.querySelectorAll(t.el).length>1){const u=[];return o.querySelectorAll(t.el).forEach(h=>{const f=Pn({},t,{el:h});u.push(new Qi(f))}),u}const a=this;a.__swiper__=!0,a.support=uC(),a.device=hC({userAgent:t.userAgent}),a.browser=w$(),a.eventsListeners={},a.eventsAnyListeners=[],a.modules=[...a.__modules__],t.modules&&Array.isArray(t.modules)&&a.modules.push(...t.modules);const l={};a.modules.forEach(u=>{u({params:t,swiper:a,extendParams:CB(t,l),on:a.on.bind(a),once:a.once.bind(a),off:a.off.bind(a),emit:a.emit.bind(a)})});const c=Pn({},zp,l);return a.params=Pn({},c,rf,t),a.originalParams=Pn({},a.params),a.passedParams=Pn({},t),a.params&&a.params.on&&Object.keys(a.params.on).forEach(u=>{a.on(u,a.params.on[u])}),a.params&&a.params.onAny&&a.onAny(a.params.onAny),Object.assign(a,{enabled:a.params.enabled,el:e,classNames:[],slides:[],slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal(){return a.params.direction==="horizontal"},isVertical(){return a.params.direction==="vertical"},activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,cssOverflowAdjustment(){return Math.trunc(this.translate/2**23)*2**23},allowSlideNext:a.params.allowSlideNext,allowSlidePrev:a.params.allowSlidePrev,touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,focusableElements:a.params.focusableElements,lastClickTime:0,clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,startMoving:void 0,pointerId:null,touchId:null},allowClick:!0,allowTouchMove:a.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),a.emit("_swiper"),a.params.init&&a.init(),a}getDirectionLabel(e){return this.isHorizontal()?e:{width:"height","margin-top":"margin-left","margin-bottom ":"margin-right","margin-left":"margin-top","margin-right":"margin-bottom","padding-left":"padding-top","padding-right":"padding-bottom",marginRight:"marginBottom"}[e]}getSlideIndex(e){const{slidesEl:t,params:i}=this,r=rr(t,`.${i.slideClass}, swiper-slide`),s=H0(r[0]);return H0(e)-s}getSlideIndexByData(e){return this.getSlideIndex(this.slides.filter(t=>t.getAttribute("data-swiper-slide-index")*1===e)[0])}recalcSlides(){const e=this,{slidesEl:t,params:i}=e;e.slides=rr(t,`.${i.slideClass}, swiper-slide`)}enable(){const e=this;e.enabled||(e.enabled=!0,e.params.grabCursor&&e.setGrabCursor(),e.emit("enable"))}disable(){const e=this;e.enabled&&(e.enabled=!1,e.params.grabCursor&&e.unsetGrabCursor(),e.emit("disable"))}setProgress(e,t){const i=this;e=Math.min(Math.max(e,0),1);const r=i.minTranslate(),o=(i.maxTranslate()-r)*e+r;i.translateTo(o,typeof t>"u"?0:t),i.updateActiveIndex(),i.updateSlidesClasses()}emitContainerClasses(){const e=this;if(!e.params._emitClasses||!e.el)return;const t=e.el.className.split(" ").filter(i=>i.indexOf("swiper")===0||i.indexOf(e.params.containerModifierClass)===0);e.emit("_containerClasses",t.join(" "))}getSlideClasses(e){const t=this;return t.destroyed?"":e.className.split(" ").filter(i=>i.indexOf("swiper-slide")===0||i.indexOf(t.params.slideClass)===0).join(" ")}emitSlidesClasses(){const e=this;if(!e.params._emitClasses||!e.el)return;const t=[];e.slides.forEach(i=>{const r=e.getSlideClasses(i);t.push({slideEl:i,classNames:r}),e.emit("_slideClass",i,r)}),e.emit("_slideClasses",t)}slidesPerViewDynamic(e,t){e===void 0&&(e="current"),t===void 0&&(t=!1);const i=this,{params:r,slides:s,slidesGrid:o,slidesSizesGrid:a,size:l,activeIndex:c}=i;let u=1;if(typeof r.slidesPerView=="number")return r.slidesPerView;if(r.centeredSlides){let h=s[c]?Math.ceil(s[c].swiperSlideSize):0,f;for(let d=c+1;d<s.length;d+=1)s[d]&&!f&&(h+=Math.ceil(s[d].swiperSlideSize),u+=1,h>l&&(f=!0));for(let d=c-1;d>=0;d-=1)s[d]&&!f&&(h+=s[d].swiperSlideSize,u+=1,h>l&&(f=!0))}else if(e==="current")for(let h=c+1;h<s.length;h+=1)(t?o[h]+a[h]-o[c]<l:o[h]-o[c]<l)&&(u+=1);else for(let h=c-1;h>=0;h-=1)o[c]-o[h]<l&&(u+=1);return u}update(){const e=this;if(!e||e.destroyed)return;const{snapGrid:t,params:i}=e;i.breakpoints&&e.setBreakpoint(),[...e.el.querySelectorAll('[loading="lazy"]')].forEach(o=>{o.complete&&du(e,o)}),e.updateSize(),e.updateSlides(),e.updateProgress(),e.updateSlidesClasses();function r(){const o=e.rtlTranslate?e.translate*-1:e.translate,a=Math.min(Math.max(o,e.maxTranslate()),e.minTranslate());e.setTranslate(a),e.updateActiveIndex(),e.updateSlidesClasses()}let s;if(i.freeMode&&i.freeMode.enabled&&!i.cssMode)r(),i.autoHeight&&e.updateAutoHeight();else{if((i.slidesPerView==="auto"||i.slidesPerView>1)&&e.isEnd&&!i.centeredSlides){const o=e.virtual&&i.virtual.enabled?e.virtual.slides:e.slides;s=e.slideTo(o.length-1,0,!1,!0)}else s=e.slideTo(e.activeIndex,0,!1,!0);s||r()}i.watchOverflow&&t!==e.snapGrid&&e.checkOverflow(),e.emit("update")}changeDirection(e,t){t===void 0&&(t=!0);const i=this,r=i.params.direction;return e||(e=r==="horizontal"?"vertical":"horizontal"),e===r||e!=="horizontal"&&e!=="vertical"||(i.el.classList.remove(`${i.params.containerModifierClass}${r}`),i.el.classList.add(`${i.params.containerModifierClass}${e}`),i.emitContainerClasses(),i.params.direction=e,i.slides.forEach(s=>{e==="vertical"?s.style.width="":s.style.height=""}),i.emit("changeDirection"),t&&i.update()),i}changeLanguageDirection(e){const t=this;t.rtl&&e==="rtl"||!t.rtl&&e==="ltr"||(t.rtl=e==="rtl",t.rtlTranslate=t.params.direction==="horizontal"&&t.rtl,t.rtl?(t.el.classList.add(`${t.params.containerModifierClass}rtl`),t.el.dir="rtl"):(t.el.classList.remove(`${t.params.containerModifierClass}rtl`),t.el.dir="ltr"),t.update())}mount(e){const t=this;if(t.mounted)return!0;let i=e||t.params.el;if(typeof i=="string"&&(i=document.querySelector(i)),!i)return!1;i.swiper=t,i.parentNode&&i.parentNode.host&&i.parentNode.host.nodeName===t.params.swiperElementNodeName.toUpperCase()&&(t.isElement=!0);const r=()=>`.${(t.params.wrapperClass||"").trim().split(" ").join(".")}`;let o=i&&i.shadowRoot&&i.shadowRoot.querySelector?i.shadowRoot.querySelector(r()):rr(i,r())[0];return!o&&t.params.createElements&&(o=$p("div",t.params.wrapperClass),i.append(o),rr(i,`.${t.params.slideClass}`).forEach(a=>{o.append(a)})),Object.assign(t,{el:i,wrapperEl:o,slidesEl:t.isElement&&!i.parentNode.host.slideSlots?i.parentNode.host:o,hostEl:t.isElement?i.parentNode.host:i,mounted:!0,rtl:i.dir.toLowerCase()==="rtl"||Mr(i,"direction")==="rtl",rtlTranslate:t.params.direction==="horizontal"&&(i.dir.toLowerCase()==="rtl"||Mr(i,"direction")==="rtl"),wrongRTL:Mr(o,"display")==="-webkit-box"}),!0}init(e){const t=this;if(t.initialized||t.mount(e)===!1)return t;t.emit("beforeInit"),t.params.breakpoints&&t.setBreakpoint(),t.addClasses(),t.updateSize(),t.updateSlides(),t.params.watchOverflow&&t.checkOverflow(),t.params.grabCursor&&t.enabled&&t.setGrabCursor(),t.params.loop&&t.virtual&&t.params.virtual.enabled?t.slideTo(t.params.initialSlide+t.virtual.slidesBefore,0,t.params.runCallbacksOnInit,!1,!0):t.slideTo(t.params.initialSlide,0,t.params.runCallbacksOnInit,!1,!0),t.params.loop&&t.loopCreate(),t.attachEvents();const r=[...t.el.querySelectorAll('[loading="lazy"]')];return t.isElement&&r.push(...t.hostEl.querySelectorAll('[loading="lazy"]')),r.forEach(s=>{s.complete?du(t,s):s.addEventListener("load",o=>{du(t,o.target)})}),Bp(t),t.initialized=!0,Bp(t),t.emit("init"),t.emit("afterInit"),t}destroy(e,t){e===void 0&&(e=!0),t===void 0&&(t=!0);const i=this,{params:r,el:s,wrapperEl:o,slides:a}=i;return typeof i.params>"u"||i.destroyed||(i.emit("beforeDestroy"),i.initialized=!1,i.detachEvents(),r.loop&&i.loopDestroy(),t&&(i.removeClasses(),s.removeAttribute("style"),o.removeAttribute("style"),a&&a.length&&a.forEach(l=>{l.classList.remove(r.slideVisibleClass,r.slideFullyVisibleClass,r.slideActiveClass,r.slideNextClass,r.slidePrevClass),l.removeAttribute("style"),l.removeAttribute("data-swiper-slide-index")})),i.emit("destroy"),Object.keys(i.eventsListeners).forEach(l=>{i.off(l)}),e!==!1&&(i.el.swiper=null,u$(i)),i.destroyed=!0),null}static extendDefaults(e){Pn(rf,e)}static get extendedDefaults(){return rf}static get defaults(){return zp}static installModule(e){Qi.prototype.__modules__||(Qi.prototype.__modules__=[]);const t=Qi.prototype.__modules__;typeof e=="function"&&t.indexOf(e)<0&&t.push(e)}static use(e){return Array.isArray(e)?(e.forEach(t=>Qi.installModule(t)),Qi):(Qi.installModule(e),Qi)}};Object.keys(nf).forEach(n=>{Object.keys(nf[n]).forEach(e=>{dm.prototype[e]=nf[n][e]})});dm.use([T$,E$]);const pC=["eventsPrefix","injectStyles","injectStylesUrls","modules","init","_direction","oneWayMovement","swiperElementNodeName","touchEventsTarget","initialSlide","_speed","cssMode","updateOnWindowResize","resizeObserver","nested","focusableElements","_enabled","_width","_height","preventInteractionOnTransition","userAgent","url","_edgeSwipeDetection","_edgeSwipeThreshold","_freeMode","_autoHeight","setWrapperSize","virtualTranslate","_effect","breakpoints","breakpointsBase","_spaceBetween","_slidesPerView","maxBackfaceHiddenSlides","_grid","_slidesPerGroup","_slidesPerGroupSkip","_slidesPerGroupAuto","_centeredSlides","_centeredSlidesBounds","_slidesOffsetBefore","_slidesOffsetAfter","normalizeSlideIndex","_centerInsufficientSlides","_watchOverflow","roundLengths","touchRatio","touchAngle","simulateTouch","_shortSwipes","_longSwipes","longSwipesRatio","longSwipesMs","_followFinger","allowTouchMove","_threshold","touchMoveStopPropagation","touchStartPreventDefault","touchStartForcePreventDefault","touchReleaseOnEdges","uniqueNavElements","_resistance","_resistanceRatio","_watchSlidesProgress","_grabCursor","preventClicks","preventClicksPropagation","_slideToClickedSlide","_loop","loopAdditionalSlides","loopAddBlankSlides","loopPreventsSliding","_rewind","_allowSlidePrev","_allowSlideNext","_swipeHandler","_noSwiping","noSwipingClass","noSwipingSelector","passiveListeners","containerModifierClass","slideClass","slideActiveClass","slideVisibleClass","slideFullyVisibleClass","slideNextClass","slidePrevClass","slideBlankClass","wrapperClass","lazyPreloaderClass","lazyPreloadPrevNext","runCallbacksOnInit","observer","observeParents","observeSlideChildren","a11y","_autoplay","_controller","coverflowEffect","cubeEffect","fadeEffect","flipEffect","creativeEffect","cardsEffect","hashNavigation","history","keyboard","mousewheel","_navigation","_pagination","parallax","_scrollbar","_thumbs","virtual","zoom","control"];function Ws(n){return typeof n=="object"&&n!==null&&n.constructor&&Object.prototype.toString.call(n).slice(8,-1)==="Object"&&!n.__swiper__}function Vo(n,e){const t=["__proto__","constructor","prototype"];Object.keys(e).filter(i=>t.indexOf(i)<0).forEach(i=>{typeof n[i]>"u"?n[i]=e[i]:Ws(e[i])&&Ws(n[i])&&Object.keys(e[i]).length>0?e[i].__swiper__?n[i]=e[i]:Vo(n[i],e[i]):n[i]=e[i]})}function _C(n){return n===void 0&&(n={}),n.navigation&&typeof n.navigation.nextEl>"u"&&typeof n.navigation.prevEl>"u"}function gC(n){return n===void 0&&(n={}),n.pagination&&typeof n.pagination.el>"u"}function mC(n){return n===void 0&&(n={}),n.scrollbar&&typeof n.scrollbar.el>"u"}function yC(n){n===void 0&&(n="");const e=n.split(" ").map(i=>i.trim()).filter(i=>!!i),t=[];return e.forEach(i=>{t.indexOf(i)<0&&t.push(i)}),t.join(" ")}function AB(n){return n===void 0&&(n=""),n?n.includes("swiper-wrapper")?n:`swiper-wrapper ${n}`:"swiper-wrapper"}function xB(n){let{swiper:e,slides:t,passedParams:i,changedParams:r,nextEl:s,prevEl:o,scrollbarEl:a,paginationEl:l}=n;const c=r.filter(A=>A!=="children"&&A!=="direction"&&A!=="wrapperClass"),{params:u,pagination:h,navigation:f,scrollbar:d,virtual:_,thumbs:p}=e;let g,m,T,w,S,E,I,P;r.includes("thumbs")&&i.thumbs&&i.thumbs.swiper&&u.thumbs&&!u.thumbs.swiper&&(g=!0),r.includes("controller")&&i.controller&&i.controller.control&&u.controller&&!u.controller.control&&(m=!0),r.includes("pagination")&&i.pagination&&(i.pagination.el||l)&&(u.pagination||u.pagination===!1)&&h&&!h.el&&(T=!0),r.includes("scrollbar")&&i.scrollbar&&(i.scrollbar.el||a)&&(u.scrollbar||u.scrollbar===!1)&&d&&!d.el&&(w=!0),r.includes("navigation")&&i.navigation&&(i.navigation.prevEl||o)&&(i.navigation.nextEl||s)&&(u.navigation||u.navigation===!1)&&f&&!f.prevEl&&!f.nextEl&&(S=!0);const x=A=>{e[A]&&(e[A].destroy(),A==="navigation"?(e.isElement&&(e[A].prevEl.remove(),e[A].nextEl.remove()),u[A].prevEl=void 0,u[A].nextEl=void 0,e[A].prevEl=void 0,e[A].nextEl=void 0):(e.isElement&&e[A].el.remove(),u[A].el=void 0,e[A].el=void 0))};r.includes("loop")&&e.isElement&&(u.loop&&!i.loop?E=!0:!u.loop&&i.loop?I=!0:P=!0),c.forEach(A=>{if(Ws(u[A])&&Ws(i[A]))Object.assign(u[A],i[A]),(A==="navigation"||A==="pagination"||A==="scrollbar")&&"enabled"in i[A]&&!i[A].enabled&&x(A);else{const k=i[A];(k===!0||k===!1)&&(A==="navigation"||A==="pagination"||A==="scrollbar")?k===!1&&x(A):u[A]=i[A]}}),c.includes("controller")&&!m&&e.controller&&e.controller.control&&u.controller&&u.controller.control&&(e.controller.control=u.controller.control),r.includes("children")&&t&&_&&u.virtual.enabled?(_.slides=t,_.update(!0)):r.includes("virtual")&&_&&u.virtual.enabled&&(t&&(_.slides=t),_.update(!0)),r.includes("children")&&t&&u.loop&&(P=!0),g&&p.init()&&p.update(!0),m&&(e.controller.control=u.controller.control),T&&(e.isElement&&(!l||typeof l=="string")&&(l=document.createElement("div"),l.classList.add("swiper-pagination"),l.part.add("pagination"),e.el.appendChild(l)),l&&(u.pagination.el=l),h.init(),h.render(),h.update()),w&&(e.isElement&&(!a||typeof a=="string")&&(a=document.createElement("div"),a.classList.add("swiper-scrollbar"),a.part.add("scrollbar"),e.el.appendChild(a)),a&&(u.scrollbar.el=a),d.init(),d.updateSize(),d.setTranslate()),S&&(e.isElement&&((!s||typeof s=="string")&&(s=document.createElement("div"),s.classList.add("swiper-button-next"),s.innerHTML=e.hostEl.constructor.nextButtonSvg,s.part.add("button-next"),e.el.appendChild(s)),(!o||typeof o=="string")&&(o=document.createElement("div"),o.classList.add("swiper-button-prev"),o.innerHTML=e.hostEl.constructor.prevButtonSvg,o.part.add("button-prev"),e.el.appendChild(o))),s&&(u.navigation.nextEl=s),o&&(u.navigation.prevEl=o),f.init(),f.update()),r.includes("allowSlideNext")&&(e.allowSlideNext=i.allowSlideNext),r.includes("allowSlidePrev")&&(e.allowSlidePrev=i.allowSlidePrev),r.includes("direction")&&e.changeDirection(i.direction,!1),(E||P)&&e.loopDestroy(),(I||P)&&e.loopCreate(),e.update()}function Q0(n,e){n===void 0&&(n={}),e===void 0&&(e=!0);const t={on:{}},i={},r={};Vo(t,zp),t._emitClasses=!0,t.init=!1;const s={},o=pC.map(l=>l.replace(/_/,"")),a=Object.assign({},n);return Object.keys(a).forEach(l=>{typeof n[l]>"u"||(o.indexOf(l)>=0?Ws(n[l])?(t[l]={},r[l]={},Vo(t[l],n[l]),Vo(r[l],n[l])):(t[l]=n[l],r[l]=n[l]):l.search(/on[A-Z]/)===0&&typeof n[l]=="function"?e?i[`${l[2].toLowerCase()}${l.substr(3)}`]=n[l]:t.on[`${l[2].toLowerCase()}${l.substr(3)}`]=n[l]:s[l]=n[l])}),["navigation","pagination","scrollbar"].forEach(l=>{t[l]===!0&&(t[l]={}),t[l]===!1&&delete t[l]}),{params:t,passedParams:r,rest:s,events:i}}function RB(n,e){let{el:t,nextEl:i,prevEl:r,paginationEl:s,scrollbarEl:o,swiper:a}=n;_C(e)&&i&&r&&(a.params.navigation.nextEl=i,a.originalParams.navigation.nextEl=i,a.params.navigation.prevEl=r,a.originalParams.navigation.prevEl=r),gC(e)&&s&&(a.params.pagination.el=s,a.originalParams.pagination.el=s),mC(e)&&o&&(a.params.scrollbar.el=o,a.originalParams.scrollbar.el=o),a.init(t)}function PB(n,e,t,i,r){const s=[];if(!e)return s;const o=l=>{s.indexOf(l)<0&&s.push(l)};if(t&&i){const l=i.map(r),c=t.map(r);l.join("")!==c.join("")&&o("children"),i.length!==t.length&&o("children")}return pC.filter(l=>l[0]==="_").map(l=>l.replace(/_/,"")).forEach(l=>{if(l in n&&l in e)if(Ws(n[l])&&Ws(e[l])){const c=Object.keys(n[l]),u=Object.keys(e[l]);c.length!==u.length?o(l):(c.forEach(h=>{n[l][h]!==e[l][h]&&o(l)}),u.forEach(h=>{n[l][h]!==e[l][h]&&o(l)}))}else n[l]!==e[l]&&o(l)}),s}const OB=n=>{!n||n.destroyed||!n.params.virtual||n.params.virtual&&!n.params.virtual.enabled||(n.updateSlides(),n.updateProgress(),n.updateSlidesClasses(),n.parallax&&n.params.parallax&&n.params.parallax.enabled&&n.parallax.setTranslate())};function sf(n,e,t){n===void 0&&(n={});const i=[],r={"container-start":[],"container-end":[],"wrapper-start":[],"wrapper-end":[]},s=(o,a)=>{Array.isArray(o)&&o.forEach(l=>{const c=typeof l.type=="symbol";a==="default"&&(a="container-end"),c&&l.children?s(l.children,a):l.type&&(l.type.name==="SwiperSlide"||l.type.name==="AsyncComponentWrapper")?i.push(l):r[a]&&r[a].push(l)})};return Object.keys(n).forEach(o=>{if(typeof n[o]!="function")return;const a=n[o]();s(a,o)}),t.value=e.value,e.value=i,{slides:i,slots:r}}function kB(n,e,t){if(!t)return null;const i=u=>{let h=u;return u<0?h=e.length+u:h>=e.length&&(h=h-e.length),h},r=n.value.isHorizontal()?{[n.value.rtlTranslate?"right":"left"]:`${t.offset}px`}:{top:`${t.offset}px`},{from:s,to:o}=t,a=n.value.params.loop?-e.length:0,l=n.value.params.loop?e.length*2:e.length,c=[];for(let u=a;u<l;u+=1)u>=s&&u<=o&&c.push(e[i(u)]);return c.map(u=>(u.props||(u.props={}),u.props.style||(u.props.style={}),u.props.swiperRef=n,u.props.style=r,kn(u.type,{...u.props},u.children)))}const NB={name:"Swiper",props:{tag:{type:String,default:"div"},wrapperTag:{type:String,default:"div"},modules:{type:Array,default:void 0},init:{type:Boolean,default:void 0},direction:{type:String,default:void 0},oneWayMovement:{type:Boolean,default:void 0},swiperElementNodeName:{type:String,default:"SWIPER-CONTAINER"},touchEventsTarget:{type:String,default:void 0},initialSlide:{type:Number,default:void 0},speed:{type:Number,default:void 0},cssMode:{type:Boolean,default:void 0},updateOnWindowResize:{type:Boolean,default:void 0},resizeObserver:{type:Boolean,default:void 0},nested:{type:Boolean,default:void 0},focusableElements:{type:String,default:void 0},width:{type:Number,default:void 0},height:{type:Number,default:void 0},preventInteractionOnTransition:{type:Boolean,default:void 0},userAgent:{type:String,default:void 0},url:{type:String,default:void 0},edgeSwipeDetection:{type:[Boolean,String],default:void 0},edgeSwipeThreshold:{type:Number,default:void 0},autoHeight:{type:Boolean,default:void 0},setWrapperSize:{type:Boolean,default:void 0},virtualTranslate:{type:Boolean,default:void 0},effect:{type:String,default:void 0},breakpoints:{type:Object,default:void 0},spaceBetween:{type:[Number,String],default:void 0},slidesPerView:{type:[Number,String],default:void 0},maxBackfaceHiddenSlides:{type:Number,default:void 0},slidesPerGroup:{type:Number,default:void 0},slidesPerGroupSkip:{type:Number,default:void 0},slidesPerGroupAuto:{type:Boolean,default:void 0},centeredSlides:{type:Boolean,default:void 0},centeredSlidesBounds:{type:Boolean,default:void 0},slidesOffsetBefore:{type:Number,default:void 0},slidesOffsetAfter:{type:Number,default:void 0},normalizeSlideIndex:{type:Boolean,default:void 0},centerInsufficientSlides:{type:Boolean,default:void 0},watchOverflow:{type:Boolean,default:void 0},roundLengths:{type:Boolean,default:void 0},touchRatio:{type:Number,default:void 0},touchAngle:{type:Number,default:void 0},simulateTouch:{type:Boolean,default:void 0},shortSwipes:{type:Boolean,default:void 0},longSwipes:{type:Boolean,default:void 0},longSwipesRatio:{type:Number,default:void 0},longSwipesMs:{type:Number,default:void 0},followFinger:{type:Boolean,default:void 0},allowTouchMove:{type:Boolean,default:void 0},threshold:{type:Number,default:void 0},touchMoveStopPropagation:{type:Boolean,default:void 0},touchStartPreventDefault:{type:Boolean,default:void 0},touchStartForcePreventDefault:{type:Boolean,default:void 0},touchReleaseOnEdges:{type:Boolean,default:void 0},uniqueNavElements:{type:Boolean,default:void 0},resistance:{type:Boolean,default:void 0},resistanceRatio:{type:Number,default:void 0},watchSlidesProgress:{type:Boolean,default:void 0},grabCursor:{type:Boolean,default:void 0},preventClicks:{type:Boolean,default:void 0},preventClicksPropagation:{type:Boolean,default:void 0},slideToClickedSlide:{type:Boolean,default:void 0},loop:{type:Boolean,default:void 0},loopedSlides:{type:Number,default:void 0},loopPreventsSliding:{type:Boolean,default:void 0},rewind:{type:Boolean,default:void 0},allowSlidePrev:{type:Boolean,default:void 0},allowSlideNext:{type:Boolean,default:void 0},swipeHandler:{type:Boolean,default:void 0},noSwiping:{type:Boolean,default:void 0},noSwipingClass:{type:String,default:void 0},noSwipingSelector:{type:String,default:void 0},passiveListeners:{type:Boolean,default:void 0},containerModifierClass:{type:String,default:void 0},slideClass:{type:String,default:void 0},slideActiveClass:{type:String,default:void 0},slideVisibleClass:{type:String,default:void 0},slideFullyVisibleClass:{type:String,default:void 0},slideBlankClass:{type:String,default:void 0},slideNextClass:{type:String,default:void 0},slidePrevClass:{type:String,default:void 0},wrapperClass:{type:String,default:void 0},lazyPreloaderClass:{type:String,default:void 0},lazyPreloadPrevNext:{type:Number,default:void 0},runCallbacksOnInit:{type:Boolean,default:void 0},observer:{type:Boolean,default:void 0},observeParents:{type:Boolean,default:void 0},observeSlideChildren:{type:Boolean,default:void 0},a11y:{type:[Boolean,Object],default:void 0},autoplay:{type:[Boolean,Object],default:void 0},controller:{type:Object,default:void 0},coverflowEffect:{type:Object,default:void 0},cubeEffect:{type:Object,default:void 0},fadeEffect:{type:Object,default:void 0},flipEffect:{type:Object,default:void 0},creativeEffect:{type:Object,default:void 0},cardsEffect:{type:Object,default:void 0},hashNavigation:{type:[Boolean,Object],default:void 0},history:{type:[Boolean,Object],default:void 0},keyboard:{type:[Boolean,Object],default:void 0},mousewheel:{type:[Boolean,Object],default:void 0},navigation:{type:[Boolean,Object],default:void 0},pagination:{type:[Boolean,Object],default:void 0},parallax:{type:[Boolean,Object],default:void 0},scrollbar:{type:[Boolean,Object],default:void 0},thumbs:{type:Object,default:void 0},virtual:{type:[Boolean,Object],default:void 0},zoom:{type:[Boolean,Object],default:void 0},grid:{type:[Object],default:void 0},freeMode:{type:[Boolean,Object],default:void 0},enabled:{type:Boolean,default:void 0}},emits:["_beforeBreakpoint","_containerClasses","_slideClass","_slideClasses","_swiper","_freeModeNoMomentumRelease","activeIndexChange","afterInit","autoplay","autoplayStart","autoplayStop","autoplayPause","autoplayResume","autoplayTimeLeft","beforeDestroy","beforeInit","beforeLoopFix","beforeResize","beforeSlideChangeStart","beforeTransitionStart","breakpoint","breakpointsBase","changeDirection","click","disable","doubleTap","doubleClick","destroy","enable","fromEdge","hashChange","hashSet","init","keyPress","lock","loopFix","momentumBounce","navigationHide","navigationShow","navigationPrev","navigationNext","observerUpdate","orientationchange","paginationHide","paginationRender","paginationShow","paginationUpdate","progress","reachBeginning","reachEnd","realIndexChange","resize","scroll","scrollbarDragEnd","scrollbarDragMove","scrollbarDragStart","setTransition","setTranslate","slidesUpdated","slideChange","slideChangeTransitionEnd","slideChangeTransitionStart","slideNextTransitionEnd","slideNextTransitionStart","slidePrevTransitionEnd","slidePrevTransitionStart","slideResetTransitionStart","slideResetTransitionEnd","sliderMove","sliderFirstMove","slidesLengthChange","slidesGridLengthChange","snapGridLengthChange","snapIndexChange","swiper","tap","toEdge","touchEnd","touchMove","touchMoveOpposite","touchStart","transitionEnd","transitionStart","unlock","update","virtualUpdate","zoomChange"],setup(n,e){let{slots:t,emit:i}=e;const{tag:r,wrapperTag:s}=n,o=Zt("swiper"),a=Zt(null),l=Zt(!1),c=Zt(!1),u=Zt(null),h=Zt(null),f=Zt(null),d={value:[]},_={value:[]},p=Zt(null),g=Zt(null),m=Zt(null),T=Zt(null),{params:w,passedParams:S}=Q0(n,!1);sf(t,d,_),f.value=S,_.value=d.value;const E=()=>{sf(t,d,_),l.value=!0};w.onAny=function(x){for(var A=arguments.length,k=new Array(A>1?A-1:0),D=1;D<A;D++)k[D-1]=arguments[D];i(x,...k)},Object.assign(w.on,{_beforeBreakpoint:E,_containerClasses(x,A){o.value=A}});const I={...w};if(delete I.wrapperClass,h.value=new dm(I),h.value.virtual&&h.value.params.virtual.enabled){h.value.virtual.slides=d.value;const x={cache:!1,slides:d.value,renderExternal:A=>{a.value=A},renderExternalUpdate:!1};Vo(h.value.params.virtual,x),Vo(h.value.originalParams.virtual,x)}A_(()=>{!c.value&&h.value&&(h.value.emitSlidesClasses(),c.value=!0);const{passedParams:x}=Q0(n,!1),A=PB(x,f.value,d.value,_.value,k=>k.props&&k.props.key);f.value=x,(A.length||l.value)&&h.value&&!h.value.destroyed&&xB({swiper:h.value,slides:d.value,passedParams:x,changedParams:A,nextEl:p.value,prevEl:g.value,scrollbarEl:T.value,paginationEl:m.value}),l.value=!1}),Co("swiper",h),As(a,()=>{b_(()=>{OB(h.value)})}),C_(()=>{u.value&&(RB({el:u.value,nextEl:p.value,prevEl:g.value,paginationEl:m.value,scrollbarEl:T.value,swiper:h.value},w),i("swiper",h.value))}),x_(()=>{h.value&&!h.value.destroyed&&h.value.destroy(!0,!1)});function P(x){return w.virtual?kB(h,x,a.value):(x.forEach((A,k)=>{A.props||(A.props={}),A.props.swiperRef=h,A.props.swiperSlideIndex=k}),x)}return()=>{const{slides:x,slots:A}=sf(t,d,_);return kn(r,{ref:u,class:yC(o.value)},[A["container-start"],kn(s,{class:AB(w.wrapperClass)},[A["wrapper-start"],P(x),A["wrapper-end"]]),_C(n)&&[kn("div",{ref:g,class:"swiper-button-prev"}),kn("div",{ref:p,class:"swiper-button-next"})],mC(n)&&kn("div",{ref:T,class:"swiper-scrollbar"}),gC(n)&&kn("div",{ref:m,class:"swiper-pagination"}),A["container-end"]])}}},MB={name:"SwiperSlide",props:{tag:{type:String,default:"div"},swiperRef:{type:Object,required:!1},swiperSlideIndex:{type:Number,default:void 0,required:!1},zoom:{type:Boolean,default:void 0,required:!1},lazy:{type:Boolean,default:!1,required:!1},virtualIndex:{type:[String,Number],default:void 0}},setup(n,e){let{slots:t}=e,i=!1;const{swiperRef:r}=n,s=Zt(null),o=Zt("swiper-slide"),a=Zt(!1);function l(h,f,d){f===s.value&&(o.value=d)}C_(()=>{!r||!r.value||(r.value.on("_slideClass",l),i=!0)}),lT(()=>{i||!r||!r.value||(r.value.on("_slideClass",l),i=!0)}),A_(()=>{!s.value||!r||!r.value||(typeof n.swiperSlideIndex<"u"&&(s.value.swiperSlideIndex=n.swiperSlideIndex),r.value.destroyed&&o.value!=="swiper-slide"&&(o.value="swiper-slide"))}),x_(()=>{!r||!r.value||r.value.off("_slideClass",l)});const c=Wn(()=>({isActive:o.value.indexOf("swiper-slide-active")>=0,isVisible:o.value.indexOf("swiper-slide-visible")>=0,isPrev:o.value.indexOf("swiper-slide-prev")>=0,isNext:o.value.indexOf("swiper-slide-next")>=0}));Co("swiperSlide",c);const u=()=>{a.value=!0};return()=>kn(n.tag,{class:yC(`${o.value}`),ref:s,"data-swiper-slide-index":typeof n.virtualIndex>"u"&&r&&r.value&&r.value.params.loop?n.swiperSlideIndex:n.virtualIndex,onLoadCapture:u},n.zoom?kn("div",{class:"swiper-zoom-container","data-swiper-zoom":typeof n.zoom=="number"?n.zoom:void 0},[t.default&&t.default(c.value),n.lazy&&!a.value&&kn("div",{class:"swiper-lazy-preloader"})]):[t.default&&t.default(c.value),n.lazy&&!a.value&&kn("div",{class:"swiper-lazy-preloader"})])}},DB={props:{program:Object},data(){return{}},methods:{}},LB=n=>(qi("data-v-9d2bd72c"),n=n(),Hi(),n),VB={class:"program-item"},FB=["src"],UB={class:"program-item__text"},$B={class:"program-item__name"},BB={class:"program-item__date"},zB=LB(()=>j("button",{class:"program-item__button btn-reset"},"Посмотреть описание",-1));function jB(n,e,t,i,r,s){return Te(),Ge("div",VB,[j("img",{class:"program-item__image",src:t.program.img,alt:"Обложка программы"},null,8,FB),j("div",UB,[j("div",$B,Zn(t.program.name),1),j("div",BB,Zn(t.program.date),1)]),zB,j("button",{class:"program-item__button btn-reset",onClick:e[0]||(e[0]=o=>n.$emit("open"))}," Записаться на программу ")])}const GB=pt(DB,[["render",jB],["__scopeId","data-v-9d2bd72c"]]),qB={props:{visible:{type:Boolean,default:!1}},data(){return{formData:{name:"",lastname:"",message:""}}},methods:{submitForm(){}},setup(){return{}}},vC=n=>(qi("data-v-402f0eda"),n=n(),Hi(),n),HB={key:0,class:"modal"},WB={class:"modal__content"},KB=vC(()=>j("h2",{class:"modal__title"},"Запишись на одну из программ!",-1)),YB=vC(()=>j("button",{class:"modal__submit btn-reset",type:"submit"}," Записаться ",-1));function XB(n,e,t,i,r,s){return t.visible?(Te(),Ge("div",HB,[j("div",WB,[j("span",{class:"modal__close",onClick:e[0]||(e[0]=o=>n.$emit("close"))},"×"),KB,j("form",{class:"modal__form",onSubmit:e[3]||(e[3]=jx((...o)=>s.submitForm&&s.submitForm(...o),["prevent"]))},[Wm(j("input",{class:"modal__input input-reset",type:"text","onUpdate:modelValue":e[1]||(e[1]=o=>r.formData.name=o),placeholder:"Имя",required:""},null,512),[[gy,r.formData.name]]),Wm(j("input",{class:"modal__input input-reset",type:"email","onUpdate:modelValue":e[2]||(e[2]=o=>r.formData.lastname=o),placeholder:"Фамилия",required:""},null,512),[[gy,r.formData.lastname]]),YB],32)])])):Ho("",!0)}const QB=pt(qB,[["render",XB],["__scopeId","data-v-402f0eda"]]),JB={components:{Swiper:NB,SwiperSlide:MB,ModalForm:QB,ProgramItem:GB},data(){return{programs:[]}},setup(){return{showModal:Zt(!1)}},created(){this.getPrograms()},methods:{async getPrograms(){const n=AI(Kg(om,"programs"));(await sF(n)).forEach(t=>{this.programs.push(t.data())})}}},ZB=n=>(qi("data-v-3f863d8c"),n=n(),Hi(),n),e4=ZB(()=>j("h2",{class:"afisha__title"},"Программы",-1));function t4(n,e,t,i,r,s){const o=it("program-item"),a=it("SwiperSlide"),l=it("Swiper"),c=it("modal-form");return Te(),Ge(Lt,null,[e4,$e(l,{class:"afisha__swiper","slides-per-view":3,loop:!0},{default:ci(()=>[(Te(!0),Ge(Lt,null,pa(r.programs,u=>(Te(),ei(a,{class:"afisha__slide",key:u.id},{default:ci(()=>[$e(o,{onOpen:e[0]||(e[0]=h=>i.showModal=!0),program:u},null,8,["program"])]),_:2},1024))),128))]),_:1}),$e(c,{visible:i.showModal,onClose:e[1]||(e[1]=u=>i.showModal=!1)},null,8,["visible"])],64)}const n4=pt(JB,[["render",t4],["__scopeId","data-v-3f863d8c"]]),i4={components:{FooterSection:WI,ProgramList:n4},data(){return{}},setup(){return{}},methods:{}},r4={class:"afisha"};function s4(n,e,t,i,r,s){const o=it("program-list");return Te(),Ge("section",r4,[$e(o)])}const o4=pt(i4,[["render",s4],["__scopeId","data-v-a0ad526b"]]);function Zi(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function wC(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,n.__proto__=e}/*!
 * GSAP 3.12.5
 * https://gsap.com
 *
 * @license Copyright 2008-2024, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var Fn={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},oa={duration:.5,overwrite:!1,delay:0},fm,dn,ct,Qn=1e8,nt=1/Qn,jp=Math.PI*2,a4=jp/4,l4=0,TC=Math.sqrt,c4=Math.cos,u4=Math.sin,zt=function(e){return typeof e=="string"},gt=function(e){return typeof e=="function"},dr=function(e){return typeof e=="number"},pm=function(e){return typeof e>"u"},Gi=function(e){return typeof e=="object"},wn=function(e){return e!==!1},_m=function(){return typeof window<"u"},Qc=function(e){return gt(e)||zt(e)},EC=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},fn=Array.isArray,Gp=/(?:-?\.?\d|\.)+/gi,SC=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,wo=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,of=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,bC=/[+-]=-?[.\d]+/,IC=/[^,'"\[\]\s]+/gi,h4=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,ht,Ai,qp,gm,$n={},th={},CC,AC=function(e){return(th=Ks(e,$n))&&Cn},mm=function(e,t){return console.warn("Invalid property",e,"set to",t,"Missing plugin? gsap.registerPlugin()")},Xl=function(e,t){return!t&&console.warn(e)},xC=function(e,t){return e&&($n[e]=t)&&th&&(th[e]=t)||$n},Ql=function(){return 0},d4={suppressEvents:!0,isStart:!0,kill:!1},fu={suppressEvents:!0,kill:!1},f4={suppressEvents:!0},ym={},Gr=[],Hp={},RC,On={},af={},J0=30,pu=[],vm="",wm=function(e){var t=e[0],i,r;if(Gi(t)||gt(t)||(e=[e]),!(i=(t._gsap||{}).harness)){for(r=pu.length;r--&&!pu[r].targetTest(t););i=pu[r]}for(r=e.length;r--;)e[r]&&(e[r]._gsap||(e[r]._gsap=new ZC(e[r],i)))||e.splice(r,1);return e},ks=function(e){return e._gsap||wm(Jn(e))[0]._gsap},PC=function(e,t,i){return(i=e[t])&&gt(i)?e[t]():pm(i)&&e.getAttribute&&e.getAttribute(t)||i},Tn=function(e,t){return(e=e.split(",")).forEach(t)||e},Tt=function(e){return Math.round(e*1e5)/1e5||0},Vt=function(e){return Math.round(e*1e7)/1e7||0},Fo=function(e,t){var i=t.charAt(0),r=parseFloat(t.substr(2));return e=parseFloat(e),i==="+"?e+r:i==="-"?e-r:i==="*"?e*r:e/r},p4=function(e,t){for(var i=t.length,r=0;e.indexOf(t[r])<0&&++r<i;);return r<i},nh=function(){var e=Gr.length,t=Gr.slice(0),i,r;for(Hp={},Gr.length=0,i=0;i<e;i++)r=t[i],r&&r._lazy&&(r.render(r._lazy[0],r._lazy[1],!0)._lazy=0)},OC=function(e,t,i,r){Gr.length&&!dn&&nh(),e.render(t,i,r||dn&&t<0&&(e._initted||e._startAt)),Gr.length&&!dn&&nh()},kC=function(e){var t=parseFloat(e);return(t||t===0)&&(e+"").match(IC).length<2?t:zt(e)?e.trim():e},NC=function(e){return e},ni=function(e,t){for(var i in t)i in e||(e[i]=t[i]);return e},_4=function(e){return function(t,i){for(var r in i)r in t||r==="duration"&&e||r==="ease"||(t[r]=i[r])}},Ks=function(e,t){for(var i in t)e[i]=t[i];return e},Z0=function n(e,t){for(var i in t)i!=="__proto__"&&i!=="constructor"&&i!=="prototype"&&(e[i]=Gi(t[i])?n(e[i]||(e[i]={}),t[i]):t[i]);return e},ih=function(e,t){var i={},r;for(r in e)r in t||(i[r]=e[r]);return i},vl=function(e){var t=e.parent||ht,i=e.keyframes?_4(fn(e.keyframes)):ni;if(wn(e.inherit))for(;t;)i(e,t.vars.defaults),t=t.parent||t._dp;return e},g4=function(e,t){for(var i=e.length,r=i===t.length;r&&i--&&e[i]===t[i];);return i<0},MC=function(e,t,i,r,s){i===void 0&&(i="_first"),r===void 0&&(r="_last");var o=e[r],a;if(s)for(a=t[s];o&&o[s]>a;)o=o._prev;return o?(t._next=o._next,o._next=t):(t._next=e[i],e[i]=t),t._next?t._next._prev=t:e[r]=t,t._prev=o,t.parent=t._dp=e,t},od=function(e,t,i,r){i===void 0&&(i="_first"),r===void 0&&(r="_last");var s=t._prev,o=t._next;s?s._next=o:e[i]===t&&(e[i]=o),o?o._prev=s:e[r]===t&&(e[r]=s),t._next=t._prev=t.parent=null},Qr=function(e,t){e.parent&&(!t||e.parent.autoRemoveChildren)&&e.parent.remove&&e.parent.remove(e),e._act=0},Ns=function(e,t){if(e&&(!t||t._end>e._dur||t._start<0))for(var i=e;i;)i._dirty=1,i=i.parent;return e},m4=function(e){for(var t=e.parent;t&&t.parent;)t._dirty=1,t.totalDuration(),t=t.parent;return e},Wp=function(e,t,i,r){return e._startAt&&(dn?e._startAt.revert(fu):e.vars.immediateRender&&!e.vars.autoRevert||e._startAt.render(t,!0,r))},y4=function n(e){return!e||e._ts&&n(e.parent)},ew=function(e){return e._repeat?aa(e._tTime,e=e.duration()+e._rDelay)*e:0},aa=function(e,t){var i=Math.floor(e/=t);return e&&i===e?i-1:i},rh=function(e,t){return(e-t._start)*t._ts+(t._ts>=0?0:t._dirty?t.totalDuration():t._tDur)},ad=function(e){return e._end=Vt(e._start+(e._tDur/Math.abs(e._ts||e._rts||nt)||0))},ld=function(e,t){var i=e._dp;return i&&i.smoothChildTiming&&e._ts&&(e._start=Vt(i._time-(e._ts>0?t/e._ts:((e._dirty?e.totalDuration():e._tDur)-t)/-e._ts)),ad(e),i._dirty||Ns(i,e)),e},DC=function(e,t){var i;if((t._time||!t._dur&&t._initted||t._start<e._time&&(t._dur||!t.add))&&(i=rh(e.rawTime(),t),(!t._dur||xc(0,t.totalDuration(),i)-t._tTime>nt)&&t.render(i,!0)),Ns(e,t)._dp&&e._initted&&e._time>=e._dur&&e._ts){if(e._dur<e.duration())for(i=e;i._dp;)i.rawTime()>=0&&i.totalTime(i._tTime),i=i._dp;e._zTime=-nt}},ki=function(e,t,i,r){return t.parent&&Qr(t),t._start=Vt((dr(i)?i:i||e!==ht?Hn(e,i,t):e._time)+t._delay),t._end=Vt(t._start+(t.totalDuration()/Math.abs(t.timeScale())||0)),MC(e,t,"_first","_last",e._sort?"_start":0),Kp(t)||(e._recent=t),r||DC(e,t),e._ts<0&&ld(e,e._tTime),e},LC=function(e,t){return($n.ScrollTrigger||mm("scrollTrigger",t))&&$n.ScrollTrigger.create(t,e)},VC=function(e,t,i,r,s){if(Em(e,t,s),!e._initted)return 1;if(!i&&e._pt&&!dn&&(e._dur&&e.vars.lazy!==!1||!e._dur&&e.vars.lazy)&&RC!==Nn.frame)return Gr.push(e),e._lazy=[s,r],1},v4=function n(e){var t=e.parent;return t&&t._ts&&t._initted&&!t._lock&&(t.rawTime()<0||n(t))},Kp=function(e){var t=e.data;return t==="isFromStart"||t==="isStart"},w4=function(e,t,i,r){var s=e.ratio,o=t<0||!t&&(!e._start&&v4(e)&&!(!e._initted&&Kp(e))||(e._ts<0||e._dp._ts<0)&&!Kp(e))?0:1,a=e._rDelay,l=0,c,u,h;if(a&&e._repeat&&(l=xc(0,e._tDur,t),u=aa(l,a),e._yoyo&&u&1&&(o=1-o),u!==aa(e._tTime,a)&&(s=1-o,e.vars.repeatRefresh&&e._initted&&e.invalidate())),o!==s||dn||r||e._zTime===nt||!t&&e._zTime){if(!e._initted&&VC(e,t,r,i,l))return;for(h=e._zTime,e._zTime=t||(i?nt:0),i||(i=t&&!h),e.ratio=o,e._from&&(o=1-o),e._time=0,e._tTime=l,c=e._pt;c;)c.r(o,c.d),c=c._next;t<0&&Wp(e,t,i,!0),e._onUpdate&&!i&&Dn(e,"onUpdate"),l&&e._repeat&&!i&&e.parent&&Dn(e,"onRepeat"),(t>=e._tDur||t<0)&&e.ratio===o&&(o&&Qr(e,1),!i&&!dn&&(Dn(e,o?"onComplete":"onReverseComplete",!0),e._prom&&e._prom()))}else e._zTime||(e._zTime=t)},T4=function(e,t,i){var r;if(i>t)for(r=e._first;r&&r._start<=i;){if(r.data==="isPause"&&r._start>t)return r;r=r._next}else for(r=e._last;r&&r._start>=i;){if(r.data==="isPause"&&r._start<t)return r;r=r._prev}},la=function(e,t,i,r){var s=e._repeat,o=Vt(t)||0,a=e._tTime/e._tDur;return a&&!r&&(e._time*=o/e._dur),e._dur=o,e._tDur=s?s<0?1e10:Vt(o*(s+1)+e._rDelay*s):o,a>0&&!r&&ld(e,e._tTime=e._tDur*a),e.parent&&ad(e),i||Ns(e.parent,e),e},tw=function(e){return e instanceof gn?Ns(e):la(e,e._dur)},E4={_start:0,endTime:Ql,totalDuration:Ql},Hn=function n(e,t,i){var r=e.labels,s=e._recent||E4,o=e.duration()>=Qn?s.endTime(!1):e._dur,a,l,c;return zt(t)&&(isNaN(t)||t in r)?(l=t.charAt(0),c=t.substr(-1)==="%",a=t.indexOf("="),l==="<"||l===">"?(a>=0&&(t=t.replace(/=/,"")),(l==="<"?s._start:s.endTime(s._repeat>=0))+(parseFloat(t.substr(1))||0)*(c?(a<0?s:i).totalDuration()/100:1)):a<0?(t in r||(r[t]=o),r[t]):(l=parseFloat(t.charAt(a-1)+t.substr(a+1)),c&&i&&(l=l/100*(fn(i)?i[0]:i).totalDuration()),a>1?n(e,t.substr(0,a-1),i)+l:o+l)):t==null?o:+t},wl=function(e,t,i){var r=dr(t[1]),s=(r?2:1)+(e<2?0:1),o=t[s],a,l;if(r&&(o.duration=t[1]),o.parent=i,e){for(a=o,l=i;l&&!("immediateRender"in a);)a=l.vars.defaults||{},l=wn(l.vars.inherit)&&l.parent;o.immediateRender=wn(a.immediateRender),e<2?o.runBackwards=1:o.startAt=t[s-1]}return new xt(t[0],o,t[s+1])},rs=function(e,t){return e||e===0?t(e):t},xc=function(e,t,i){return i<e?e:i>t?t:i},ln=function(e,t){return!zt(e)||!(t=h4.exec(e))?"":t[1]},S4=function(e,t,i){return rs(i,function(r){return xc(e,t,r)})},Yp=[].slice,FC=function(e,t){return e&&Gi(e)&&"length"in e&&(!t&&!e.length||e.length-1 in e&&Gi(e[0]))&&!e.nodeType&&e!==Ai},b4=function(e,t,i){return i===void 0&&(i=[]),e.forEach(function(r){var s;return zt(r)&&!t||FC(r,1)?(s=i).push.apply(s,Jn(r)):i.push(r)})||i},Jn=function(e,t,i){return ct&&!t&&ct.selector?ct.selector(e):zt(e)&&!i&&(qp||!ca())?Yp.call((t||gm).querySelectorAll(e),0):fn(e)?b4(e,i):FC(e)?Yp.call(e,0):e?[e]:[]},Xp=function(e){return e=Jn(e)[0]||Xl("Invalid scope")||{},function(t){var i=e.current||e.nativeElement||e;return Jn(t,i.querySelectorAll?i:i===e?Xl("Invalid scope")||gm.createElement("div"):e)}},UC=function(e){return e.sort(function(){return .5-Math.random()})},$C=function(e){if(gt(e))return e;var t=Gi(e)?e:{each:e},i=Ms(t.ease),r=t.from||0,s=parseFloat(t.base)||0,o={},a=r>0&&r<1,l=isNaN(r)||a,c=t.axis,u=r,h=r;return zt(r)?u=h={center:.5,edges:.5,end:1}[r]||0:!a&&l&&(u=r[0],h=r[1]),function(f,d,_){var p=(_||t).length,g=o[p],m,T,w,S,E,I,P,x,A;if(!g){if(A=t.grid==="auto"?0:(t.grid||[1,Qn])[1],!A){for(P=-Qn;P<(P=_[A++].getBoundingClientRect().left)&&A<p;);A<p&&A--}for(g=o[p]=[],m=l?Math.min(A,p)*u-.5:r%A,T=A===Qn?0:l?p*h/A-.5:r/A|0,P=0,x=Qn,I=0;I<p;I++)w=I%A-m,S=T-(I/A|0),g[I]=E=c?Math.abs(c==="y"?S:w):TC(w*w+S*S),E>P&&(P=E),E<x&&(x=E);r==="random"&&UC(g),g.max=P-x,g.min=x,g.v=p=(parseFloat(t.amount)||parseFloat(t.each)*(A>p?p-1:c?c==="y"?p/A:A:Math.max(A,p/A))||0)*(r==="edges"?-1:1),g.b=p<0?s-p:s,g.u=ln(t.amount||t.each)||0,i=i&&p<0?XC(i):i}return p=(g[f]-g.min)/g.max||0,Vt(g.b+(i?i(p):p)*g.v)+g.u}},Qp=function(e){var t=Math.pow(10,((e+"").split(".")[1]||"").length);return function(i){var r=Vt(Math.round(parseFloat(i)/e)*e*t);return(r-r%1)/t+(dr(i)?0:ln(i))}},BC=function(e,t){var i=fn(e),r,s;return!i&&Gi(e)&&(r=i=e.radius||Qn,e.values?(e=Jn(e.values),(s=!dr(e[0]))&&(r*=r)):e=Qp(e.increment)),rs(t,i?gt(e)?function(o){return s=e(o),Math.abs(s-o)<=r?s:o}:function(o){for(var a=parseFloat(s?o.x:o),l=parseFloat(s?o.y:0),c=Qn,u=0,h=e.length,f,d;h--;)s?(f=e[h].x-a,d=e[h].y-l,f=f*f+d*d):f=Math.abs(e[h]-a),f<c&&(c=f,u=h);return u=!r||c<=r?e[u]:o,s||u===o||dr(o)?u:u+ln(o)}:Qp(e))},zC=function(e,t,i,r){return rs(fn(e)?!t:i===!0?!!(i=0):!r,function(){return fn(e)?e[~~(Math.random()*e.length)]:(i=i||1e-5)&&(r=i<1?Math.pow(10,(i+"").length-2):1)&&Math.floor(Math.round((e-i/2+Math.random()*(t-e+i*.99))/i)*i*r)/r})},I4=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return function(r){return t.reduce(function(s,o){return o(s)},r)}},C4=function(e,t){return function(i){return e(parseFloat(i))+(t||ln(i))}},A4=function(e,t,i){return GC(e,t,0,1,i)},jC=function(e,t,i){return rs(i,function(r){return e[~~t(r)]})},x4=function n(e,t,i){var r=t-e;return fn(e)?jC(e,n(0,e.length),t):rs(i,function(s){return(r+(s-e)%r)%r+e})},R4=function n(e,t,i){var r=t-e,s=r*2;return fn(e)?jC(e,n(0,e.length-1),t):rs(i,function(o){return o=(s+(o-e)%s)%s||0,e+(o>r?s-o:o)})},Jl=function(e){for(var t=0,i="",r,s,o,a;~(r=e.indexOf("random(",t));)o=e.indexOf(")",r),a=e.charAt(r+7)==="[",s=e.substr(r+7,o-r-7).match(a?IC:Gp),i+=e.substr(t,r-t)+zC(a?s:+s[0],a?0:+s[1],+s[2]||1e-5),t=o+1;return i+e.substr(t,e.length-t)},GC=function(e,t,i,r,s){var o=t-e,a=r-i;return rs(s,function(l){return i+((l-e)/o*a||0)})},P4=function n(e,t,i,r){var s=isNaN(e+t)?0:function(d){return(1-d)*e+d*t};if(!s){var o=zt(e),a={},l,c,u,h,f;if(i===!0&&(r=1)&&(i=null),o)e={p:e},t={p:t};else if(fn(e)&&!fn(t)){for(u=[],h=e.length,f=h-2,c=1;c<h;c++)u.push(n(e[c-1],e[c]));h--,s=function(_){_*=h;var p=Math.min(f,~~_);return u[p](_-p)},i=t}else r||(e=Ks(fn(e)?[]:{},e));if(!u){for(l in t)Tm.call(a,e,l,"get",t[l]);s=function(_){return Im(_,a)||(o?e.p:e)}}}return rs(i,s)},nw=function(e,t,i){var r=e.labels,s=Qn,o,a,l;for(o in r)a=r[o]-t,a<0==!!i&&a&&s>(a=Math.abs(a))&&(l=o,s=a);return l},Dn=function(e,t,i){var r=e.vars,s=r[t],o=ct,a=e._ctx,l,c,u;if(s)return l=r[t+"Params"],c=r.callbackScope||e,i&&Gr.length&&nh(),a&&(ct=a),u=l?s.apply(c,l):s.call(c),ct=o,u},Xa=function(e){return Qr(e),e.scrollTrigger&&e.scrollTrigger.kill(!!dn),e.progress()<1&&Dn(e,"onInterrupt"),e},To,qC=[],HC=function(e){if(e)if(e=!e.name&&e.default||e,_m()||e.headless){var t=e.name,i=gt(e),r=t&&!i&&e.init?function(){this._props=[]}:e,s={init:Ql,render:Im,add:Tm,kill:H4,modifier:q4,rawVars:0},o={targetTest:0,get:0,getSetter:bm,aliases:{},register:0};if(ca(),e!==r){if(On[t])return;ni(r,ni(ih(e,s),o)),Ks(r.prototype,Ks(s,ih(e,o))),On[r.prop=t]=r,e.targetTest&&(pu.push(r),ym[t]=1),t=(t==="css"?"CSS":t.charAt(0).toUpperCase()+t.substr(1))+"Plugin"}xC(t,r),e.register&&e.register(Cn,r,En)}else qC.push(e)},Ze=255,Qa={aqua:[0,Ze,Ze],lime:[0,Ze,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,Ze],navy:[0,0,128],white:[Ze,Ze,Ze],olive:[128,128,0],yellow:[Ze,Ze,0],orange:[Ze,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[Ze,0,0],pink:[Ze,192,203],cyan:[0,Ze,Ze],transparent:[Ze,Ze,Ze,0]},lf=function(e,t,i){return e+=e<0?1:e>1?-1:0,(e*6<1?t+(i-t)*e*6:e<.5?i:e*3<2?t+(i-t)*(2/3-e)*6:t)*Ze+.5|0},WC=function(e,t,i){var r=e?dr(e)?[e>>16,e>>8&Ze,e&Ze]:0:Qa.black,s,o,a,l,c,u,h,f,d,_;if(!r){if(e.substr(-1)===","&&(e=e.substr(0,e.length-1)),Qa[e])r=Qa[e];else if(e.charAt(0)==="#"){if(e.length<6&&(s=e.charAt(1),o=e.charAt(2),a=e.charAt(3),e="#"+s+s+o+o+a+a+(e.length===5?e.charAt(4)+e.charAt(4):"")),e.length===9)return r=parseInt(e.substr(1,6),16),[r>>16,r>>8&Ze,r&Ze,parseInt(e.substr(7),16)/255];e=parseInt(e.substr(1),16),r=[e>>16,e>>8&Ze,e&Ze]}else if(e.substr(0,3)==="hsl"){if(r=_=e.match(Gp),!t)l=+r[0]%360/360,c=+r[1]/100,u=+r[2]/100,o=u<=.5?u*(c+1):u+c-u*c,s=u*2-o,r.length>3&&(r[3]*=1),r[0]=lf(l+1/3,s,o),r[1]=lf(l,s,o),r[2]=lf(l-1/3,s,o);else if(~e.indexOf("="))return r=e.match(SC),i&&r.length<4&&(r[3]=1),r}else r=e.match(Gp)||Qa.transparent;r=r.map(Number)}return t&&!_&&(s=r[0]/Ze,o=r[1]/Ze,a=r[2]/Ze,h=Math.max(s,o,a),f=Math.min(s,o,a),u=(h+f)/2,h===f?l=c=0:(d=h-f,c=u>.5?d/(2-h-f):d/(h+f),l=h===s?(o-a)/d+(o<a?6:0):h===o?(a-s)/d+2:(s-o)/d+4,l*=60),r[0]=~~(l+.5),r[1]=~~(c*100+.5),r[2]=~~(u*100+.5)),i&&r.length<4&&(r[3]=1),r},KC=function(e){var t=[],i=[],r=-1;return e.split(qr).forEach(function(s){var o=s.match(wo)||[];t.push.apply(t,o),i.push(r+=o.length+1)}),t.c=i,t},iw=function(e,t,i){var r="",s=(e+r).match(qr),o=t?"hsla(":"rgba(",a=0,l,c,u,h;if(!s)return e;if(s=s.map(function(f){return(f=WC(f,t,1))&&o+(t?f[0]+","+f[1]+"%,"+f[2]+"%,"+f[3]:f.join(","))+")"}),i&&(u=KC(e),l=i.c,l.join(r)!==u.c.join(r)))for(c=e.replace(qr,"1").split(wo),h=c.length-1;a<h;a++)r+=c[a]+(~l.indexOf(a)?s.shift()||o+"0,0,0,0)":(u.length?u:s.length?s:i).shift());if(!c)for(c=e.split(qr),h=c.length-1;a<h;a++)r+=c[a]+s[a];return r+c[h]},qr=function(){var n="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",e;for(e in Qa)n+="|"+e+"\\b";return new RegExp(n+")","gi")}(),O4=/hsl[a]?\(/,YC=function(e){var t=e.join(" "),i;if(qr.lastIndex=0,qr.test(t))return i=O4.test(t),e[1]=iw(e[1],i),e[0]=iw(e[0],i,KC(e[1])),!0},Zl,Nn=function(){var n=Date.now,e=500,t=33,i=n(),r=i,s=1e3/240,o=s,a=[],l,c,u,h,f,d,_=function p(g){var m=n()-r,T=g===!0,w,S,E,I;if((m>e||m<0)&&(i+=m-t),r+=m,E=r-i,w=E-o,(w>0||T)&&(I=++h.frame,f=E-h.time*1e3,h.time=E=E/1e3,o+=w+(w>=s?4:s-w),S=1),T||(l=c(p)),S)for(d=0;d<a.length;d++)a[d](E,f,I,g)};return h={time:0,frame:0,tick:function(){_(!0)},deltaRatio:function(g){return f/(1e3/(g||60))},wake:function(){CC&&(!qp&&_m()&&(Ai=qp=window,gm=Ai.document||{},$n.gsap=Cn,(Ai.gsapVersions||(Ai.gsapVersions=[])).push(Cn.version),AC(th||Ai.GreenSockGlobals||!Ai.gsap&&Ai||{}),qC.forEach(HC)),u=typeof requestAnimationFrame<"u"&&requestAnimationFrame,l&&h.sleep(),c=u||function(g){return setTimeout(g,o-h.time*1e3+1|0)},Zl=1,_(2))},sleep:function(){(u?cancelAnimationFrame:clearTimeout)(l),Zl=0,c=Ql},lagSmoothing:function(g,m){e=g||1/0,t=Math.min(m||33,e)},fps:function(g){s=1e3/(g||240),o=h.time*1e3+s},add:function(g,m,T){var w=m?function(S,E,I,P){g(S,E,I,P),h.remove(w)}:g;return h.remove(g),a[T?"unshift":"push"](w),ca(),w},remove:function(g,m){~(m=a.indexOf(g))&&a.splice(m,1)&&d>=m&&d--},_listeners:a},h}(),ca=function(){return!Zl&&Nn.wake()},Pe={},k4=/^[\d.\-M][\d.\-,\s]/,N4=/["']/g,M4=function(e){for(var t={},i=e.substr(1,e.length-3).split(":"),r=i[0],s=1,o=i.length,a,l,c;s<o;s++)l=i[s],a=s!==o-1?l.lastIndexOf(","):l.length,c=l.substr(0,a),t[r]=isNaN(c)?c.replace(N4,"").trim():+c,r=l.substr(a+1).trim();return t},D4=function(e){var t=e.indexOf("(")+1,i=e.indexOf(")"),r=e.indexOf("(",t);return e.substring(t,~r&&r<i?e.indexOf(")",i+1):i)},L4=function(e){var t=(e+"").split("("),i=Pe[t[0]];return i&&t.length>1&&i.config?i.config.apply(null,~e.indexOf("{")?[M4(t[1])]:D4(e).split(",").map(kC)):Pe._CE&&k4.test(e)?Pe._CE("",e):i},XC=function(e){return function(t){return 1-e(1-t)}},QC=function n(e,t){for(var i=e._first,r;i;)i instanceof gn?n(i,t):i.vars.yoyoEase&&(!i._yoyo||!i._repeat)&&i._yoyo!==t&&(i.timeline?n(i.timeline,t):(r=i._ease,i._ease=i._yEase,i._yEase=r,i._yoyo=t)),i=i._next},Ms=function(e,t){return e&&(gt(e)?e:Pe[e]||L4(e))||t},no=function(e,t,i,r){i===void 0&&(i=function(l){return 1-t(1-l)}),r===void 0&&(r=function(l){return l<.5?t(l*2)/2:1-t((1-l)*2)/2});var s={easeIn:t,easeOut:i,easeInOut:r},o;return Tn(e,function(a){Pe[a]=$n[a]=s,Pe[o=a.toLowerCase()]=i;for(var l in s)Pe[o+(l==="easeIn"?".in":l==="easeOut"?".out":".inOut")]=Pe[a+"."+l]=s[l]}),s},JC=function(e){return function(t){return t<.5?(1-e(1-t*2))/2:.5+e((t-.5)*2)/2}},cf=function n(e,t,i){var r=t>=1?t:1,s=(i||(e?.3:.45))/(t<1?t:1),o=s/jp*(Math.asin(1/r)||0),a=function(u){return u===1?1:r*Math.pow(2,-10*u)*u4((u-o)*s)+1},l=e==="out"?a:e==="in"?function(c){return 1-a(1-c)}:JC(a);return s=jp/s,l.config=function(c,u){return n(e,c,u)},l},uf=function n(e,t){t===void 0&&(t=1.70158);var i=function(o){return o?--o*o*((t+1)*o+t)+1:0},r=e==="out"?i:e==="in"?function(s){return 1-i(1-s)}:JC(i);return r.config=function(s){return n(e,s)},r};Tn("Linear,Quad,Cubic,Quart,Quint,Strong",function(n,e){var t=e<5?e+1:e;no(n+",Power"+(t-1),e?function(i){return Math.pow(i,t)}:function(i){return i},function(i){return 1-Math.pow(1-i,t)},function(i){return i<.5?Math.pow(i*2,t)/2:1-Math.pow((1-i)*2,t)/2})});Pe.Linear.easeNone=Pe.none=Pe.Linear.easeIn;no("Elastic",cf("in"),cf("out"),cf());(function(n,e){var t=1/e,i=2*t,r=2.5*t,s=function(a){return a<t?n*a*a:a<i?n*Math.pow(a-1.5/e,2)+.75:a<r?n*(a-=2.25/e)*a+.9375:n*Math.pow(a-2.625/e,2)+.984375};no("Bounce",function(o){return 1-s(1-o)},s)})(7.5625,2.75);no("Expo",function(n){return n?Math.pow(2,10*(n-1)):0});no("Circ",function(n){return-(TC(1-n*n)-1)});no("Sine",function(n){return n===1?1:-c4(n*a4)+1});no("Back",uf("in"),uf("out"),uf());Pe.SteppedEase=Pe.steps=$n.SteppedEase={config:function(e,t){e===void 0&&(e=1);var i=1/e,r=e+(t?0:1),s=t?1:0,o=1-nt;return function(a){return((r*xc(0,o,a)|0)+s)*i}}};oa.ease=Pe["quad.out"];Tn("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(n){return vm+=n+","+n+"Params,"});var ZC=function(e,t){this.id=l4++,e._gsap=this,this.target=e,this.harness=t,this.get=t?t.get:PC,this.set=t?t.getSetter:bm},ec=function(){function n(t){this.vars=t,this._delay=+t.delay||0,(this._repeat=t.repeat===1/0?-2:t.repeat||0)&&(this._rDelay=t.repeatDelay||0,this._yoyo=!!t.yoyo||!!t.yoyoEase),this._ts=1,la(this,+t.duration,1,1),this.data=t.data,ct&&(this._ctx=ct,ct.data.push(this)),Zl||Nn.wake()}var e=n.prototype;return e.delay=function(i){return i||i===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+i-this._delay),this._delay=i,this):this._delay},e.duration=function(i){return arguments.length?this.totalDuration(this._repeat>0?i+(i+this._rDelay)*this._repeat:i):this.totalDuration()&&this._dur},e.totalDuration=function(i){return arguments.length?(this._dirty=0,la(this,this._repeat<0?i:(i-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},e.totalTime=function(i,r){if(ca(),!arguments.length)return this._tTime;var s=this._dp;if(s&&s.smoothChildTiming&&this._ts){for(ld(this,i),!s._dp||s.parent||DC(s,this);s&&s.parent;)s.parent._time!==s._start+(s._ts>=0?s._tTime/s._ts:(s.totalDuration()-s._tTime)/-s._ts)&&s.totalTime(s._tTime,!0),s=s.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&i<this._tDur||this._ts<0&&i>0||!this._tDur&&!i)&&ki(this._dp,this,this._start-this._delay)}return(this._tTime!==i||!this._dur&&!r||this._initted&&Math.abs(this._zTime)===nt||!i&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=i),OC(this,i,r)),this},e.time=function(i,r){return arguments.length?this.totalTime(Math.min(this.totalDuration(),i+ew(this))%(this._dur+this._rDelay)||(i?this._dur:0),r):this._time},e.totalProgress=function(i,r){return arguments.length?this.totalTime(this.totalDuration()*i,r):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>0?1:0},e.progress=function(i,r){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-i:i)+ew(this),r):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},e.iteration=function(i,r){var s=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(i-1)*s,r):this._repeat?aa(this._tTime,s)+1:1},e.timeScale=function(i,r){if(!arguments.length)return this._rts===-nt?0:this._rts;if(this._rts===i)return this;var s=this.parent&&this._ts?rh(this.parent._time,this):this._tTime;return this._rts=+i||0,this._ts=this._ps||i===-nt?0:this._rts,this.totalTime(xc(-Math.abs(this._delay),this._tDur,s),r!==!1),ad(this),m4(this)},e.paused=function(i){return arguments.length?(this._ps!==i&&(this._ps=i,i?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(ca(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==nt&&(this._tTime-=nt)))),this):this._ps},e.startTime=function(i){if(arguments.length){this._start=i;var r=this.parent||this._dp;return r&&(r._sort||!this.parent)&&ki(r,this,i-this._delay),this}return this._start},e.endTime=function(i){return this._start+(wn(i)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},e.rawTime=function(i){var r=this.parent||this._dp;return r?i&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?rh(r.rawTime(i),this):this._tTime:this._tTime},e.revert=function(i){i===void 0&&(i=f4);var r=dn;return dn=i,(this._initted||this._startAt)&&(this.timeline&&this.timeline.revert(i),this.totalTime(-.01,i.suppressEvents)),this.data!=="nested"&&i.kill!==!1&&this.kill(),dn=r,this},e.globalTime=function(i){for(var r=this,s=arguments.length?i:r.rawTime();r;)s=r._start+s/(Math.abs(r._ts)||1),r=r._dp;return!this.parent&&this._sat?this._sat.globalTime(i):s},e.repeat=function(i){return arguments.length?(this._repeat=i===1/0?-2:i,tw(this)):this._repeat===-2?1/0:this._repeat},e.repeatDelay=function(i){if(arguments.length){var r=this._time;return this._rDelay=i,tw(this),r?this.time(r):this}return this._rDelay},e.yoyo=function(i){return arguments.length?(this._yoyo=i,this):this._yoyo},e.seek=function(i,r){return this.totalTime(Hn(this,i),wn(r))},e.restart=function(i,r){return this.play().totalTime(i?-this._delay:0,wn(r))},e.play=function(i,r){return i!=null&&this.seek(i,r),this.reversed(!1).paused(!1)},e.reverse=function(i,r){return i!=null&&this.seek(i||this.totalDuration(),r),this.reversed(!0).paused(!1)},e.pause=function(i,r){return i!=null&&this.seek(i,r),this.paused(!0)},e.resume=function(){return this.paused(!1)},e.reversed=function(i){return arguments.length?(!!i!==this.reversed()&&this.timeScale(-this._rts||(i?-nt:0)),this):this._rts<0},e.invalidate=function(){return this._initted=this._act=0,this._zTime=-nt,this},e.isActive=function(){var i=this.parent||this._dp,r=this._start,s;return!!(!i||this._ts&&this._initted&&i.isActive()&&(s=i.rawTime(!0))>=r&&s<this.endTime(!0)-nt)},e.eventCallback=function(i,r,s){var o=this.vars;return arguments.length>1?(r?(o[i]=r,s&&(o[i+"Params"]=s),i==="onUpdate"&&(this._onUpdate=r)):delete o[i],this):o[i]},e.then=function(i){var r=this;return new Promise(function(s){var o=gt(i)?i:NC,a=function(){var c=r.then;r.then=null,gt(o)&&(o=o(r))&&(o.then||o===r)&&(r.then=c),s(o),r.then=c};r._initted&&r.totalProgress()===1&&r._ts>=0||!r._tTime&&r._ts<0?a():r._prom=a})},e.kill=function(){Xa(this)},n}();ni(ec.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-nt,_prom:0,_ps:!1,_rts:1});var gn=function(n){wC(e,n);function e(i,r){var s;return i===void 0&&(i={}),s=n.call(this,i)||this,s.labels={},s.smoothChildTiming=!!i.smoothChildTiming,s.autoRemoveChildren=!!i.autoRemoveChildren,s._sort=wn(i.sortChildren),ht&&ki(i.parent||ht,Zi(s),r),i.reversed&&s.reverse(),i.paused&&s.paused(!0),i.scrollTrigger&&LC(Zi(s),i.scrollTrigger),s}var t=e.prototype;return t.to=function(r,s,o){return wl(0,arguments,this),this},t.from=function(r,s,o){return wl(1,arguments,this),this},t.fromTo=function(r,s,o,a){return wl(2,arguments,this),this},t.set=function(r,s,o){return s.duration=0,s.parent=this,vl(s).repeatDelay||(s.repeat=0),s.immediateRender=!!s.immediateRender,new xt(r,s,Hn(this,o),1),this},t.call=function(r,s,o){return ki(this,xt.delayedCall(0,r,s),o)},t.staggerTo=function(r,s,o,a,l,c,u){return o.duration=s,o.stagger=o.stagger||a,o.onComplete=c,o.onCompleteParams=u,o.parent=this,new xt(r,o,Hn(this,l)),this},t.staggerFrom=function(r,s,o,a,l,c,u){return o.runBackwards=1,vl(o).immediateRender=wn(o.immediateRender),this.staggerTo(r,s,o,a,l,c,u)},t.staggerFromTo=function(r,s,o,a,l,c,u,h){return a.startAt=o,vl(a).immediateRender=wn(a.immediateRender),this.staggerTo(r,s,a,l,c,u,h)},t.render=function(r,s,o){var a=this._time,l=this._dirty?this.totalDuration():this._tDur,c=this._dur,u=r<=0?0:Vt(r),h=this._zTime<0!=r<0&&(this._initted||!c),f,d,_,p,g,m,T,w,S,E,I,P;if(this!==ht&&u>l&&r>=0&&(u=l),u!==this._tTime||o||h){if(a!==this._time&&c&&(u+=this._time-a,r+=this._time-a),f=u,S=this._start,w=this._ts,m=!w,h&&(c||(a=this._zTime),(r||!s)&&(this._zTime=r)),this._repeat){if(I=this._yoyo,g=c+this._rDelay,this._repeat<-1&&r<0)return this.totalTime(g*100+r,s,o);if(f=Vt(u%g),u===l?(p=this._repeat,f=c):(p=~~(u/g),p&&p===u/g&&(f=c,p--),f>c&&(f=c)),E=aa(this._tTime,g),!a&&this._tTime&&E!==p&&this._tTime-E*g-this._dur<=0&&(E=p),I&&p&1&&(f=c-f,P=1),p!==E&&!this._lock){var x=I&&E&1,A=x===(I&&p&1);if(p<E&&(x=!x),a=x?0:u%c?c:u,this._lock=1,this.render(a||(P?0:Vt(p*g)),s,!c)._lock=0,this._tTime=u,!s&&this.parent&&Dn(this,"onRepeat"),this.vars.repeatRefresh&&!P&&(this.invalidate()._lock=1),a&&a!==this._time||m!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(c=this._dur,l=this._tDur,A&&(this._lock=2,a=x?c:-1e-4,this.render(a,!0),this.vars.repeatRefresh&&!P&&this.invalidate()),this._lock=0,!this._ts&&!m)return this;QC(this,P)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(T=T4(this,Vt(a),Vt(f)),T&&(u-=f-(f=T._start))),this._tTime=u,this._time=f,this._act=!w,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=r,a=0),!a&&f&&!s&&!p&&(Dn(this,"onStart"),this._tTime!==u))return this;if(f>=a&&r>=0)for(d=this._first;d;){if(_=d._next,(d._act||f>=d._start)&&d._ts&&T!==d){if(d.parent!==this)return this.render(r,s,o);if(d.render(d._ts>0?(f-d._start)*d._ts:(d._dirty?d.totalDuration():d._tDur)+(f-d._start)*d._ts,s,o),f!==this._time||!this._ts&&!m){T=0,_&&(u+=this._zTime=-nt);break}}d=_}else{d=this._last;for(var k=r<0?r:f;d;){if(_=d._prev,(d._act||k<=d._end)&&d._ts&&T!==d){if(d.parent!==this)return this.render(r,s,o);if(d.render(d._ts>0?(k-d._start)*d._ts:(d._dirty?d.totalDuration():d._tDur)+(k-d._start)*d._ts,s,o||dn&&(d._initted||d._startAt)),f!==this._time||!this._ts&&!m){T=0,_&&(u+=this._zTime=k?-nt:nt);break}}d=_}}if(T&&!s&&(this.pause(),T.render(f>=a?0:-nt)._zTime=f>=a?1:-1,this._ts))return this._start=S,ad(this),this.render(r,s,o);this._onUpdate&&!s&&Dn(this,"onUpdate",!0),(u===l&&this._tTime>=this.totalDuration()||!u&&a)&&(S===this._start||Math.abs(w)!==Math.abs(this._ts))&&(this._lock||((r||!c)&&(u===l&&this._ts>0||!u&&this._ts<0)&&Qr(this,1),!s&&!(r<0&&!a)&&(u||a||!l)&&(Dn(this,u===l&&r>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(u<l&&this.timeScale()>0)&&this._prom())))}return this},t.add=function(r,s){var o=this;if(dr(s)||(s=Hn(this,s,r)),!(r instanceof ec)){if(fn(r))return r.forEach(function(a){return o.add(a,s)}),this;if(zt(r))return this.addLabel(r,s);if(gt(r))r=xt.delayedCall(0,r);else return this}return this!==r?ki(this,r,s):this},t.getChildren=function(r,s,o,a){r===void 0&&(r=!0),s===void 0&&(s=!0),o===void 0&&(o=!0),a===void 0&&(a=-Qn);for(var l=[],c=this._first;c;)c._start>=a&&(c instanceof xt?s&&l.push(c):(o&&l.push(c),r&&l.push.apply(l,c.getChildren(!0,s,o)))),c=c._next;return l},t.getById=function(r){for(var s=this.getChildren(1,1,1),o=s.length;o--;)if(s[o].vars.id===r)return s[o]},t.remove=function(r){return zt(r)?this.removeLabel(r):gt(r)?this.killTweensOf(r):(od(this,r),r===this._recent&&(this._recent=this._last),Ns(this))},t.totalTime=function(r,s){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=Vt(Nn.time-(this._ts>0?r/this._ts:(this.totalDuration()-r)/-this._ts))),n.prototype.totalTime.call(this,r,s),this._forcing=0,this):this._tTime},t.addLabel=function(r,s){return this.labels[r]=Hn(this,s),this},t.removeLabel=function(r){return delete this.labels[r],this},t.addPause=function(r,s,o){var a=xt.delayedCall(0,s||Ql,o);return a.data="isPause",this._hasPause=1,ki(this,a,Hn(this,r))},t.removePause=function(r){var s=this._first;for(r=Hn(this,r);s;)s._start===r&&s.data==="isPause"&&Qr(s),s=s._next},t.killTweensOf=function(r,s,o){for(var a=this.getTweensOf(r,o),l=a.length;l--;)Dr!==a[l]&&a[l].kill(r,s);return this},t.getTweensOf=function(r,s){for(var o=[],a=Jn(r),l=this._first,c=dr(s),u;l;)l instanceof xt?p4(l._targets,a)&&(c?(!Dr||l._initted&&l._ts)&&l.globalTime(0)<=s&&l.globalTime(l.totalDuration())>s:!s||l.isActive())&&o.push(l):(u=l.getTweensOf(a,s)).length&&o.push.apply(o,u),l=l._next;return o},t.tweenTo=function(r,s){s=s||{};var o=this,a=Hn(o,r),l=s,c=l.startAt,u=l.onStart,h=l.onStartParams,f=l.immediateRender,d,_=xt.to(o,ni({ease:s.ease||"none",lazy:!1,immediateRender:!1,time:a,overwrite:"auto",duration:s.duration||Math.abs((a-(c&&"time"in c?c.time:o._time))/o.timeScale())||nt,onStart:function(){if(o.pause(),!d){var g=s.duration||Math.abs((a-(c&&"time"in c?c.time:o._time))/o.timeScale());_._dur!==g&&la(_,g,0,1).render(_._time,!0,!0),d=1}u&&u.apply(_,h||[])}},s));return f?_.render(0):_},t.tweenFromTo=function(r,s,o){return this.tweenTo(s,ni({startAt:{time:Hn(this,r)}},o))},t.recent=function(){return this._recent},t.nextLabel=function(r){return r===void 0&&(r=this._time),nw(this,Hn(this,r))},t.previousLabel=function(r){return r===void 0&&(r=this._time),nw(this,Hn(this,r),1)},t.currentLabel=function(r){return arguments.length?this.seek(r,!0):this.previousLabel(this._time+nt)},t.shiftChildren=function(r,s,o){o===void 0&&(o=0);for(var a=this._first,l=this.labels,c;a;)a._start>=o&&(a._start+=r,a._end+=r),a=a._next;if(s)for(c in l)l[c]>=o&&(l[c]+=r);return Ns(this)},t.invalidate=function(r){var s=this._first;for(this._lock=0;s;)s.invalidate(r),s=s._next;return n.prototype.invalidate.call(this,r)},t.clear=function(r){r===void 0&&(r=!0);for(var s=this._first,o;s;)o=s._next,this.remove(s),s=o;return this._dp&&(this._time=this._tTime=this._pTime=0),r&&(this.labels={}),Ns(this)},t.totalDuration=function(r){var s=0,o=this,a=o._last,l=Qn,c,u,h;if(arguments.length)return o.timeScale((o._repeat<0?o.duration():o.totalDuration())/(o.reversed()?-r:r));if(o._dirty){for(h=o.parent;a;)c=a._prev,a._dirty&&a.totalDuration(),u=a._start,u>l&&o._sort&&a._ts&&!o._lock?(o._lock=1,ki(o,a,u-a._delay,1)._lock=0):l=u,u<0&&a._ts&&(s-=u,(!h&&!o._dp||h&&h.smoothChildTiming)&&(o._start+=u/o._ts,o._time-=u,o._tTime-=u),o.shiftChildren(-u,!1,-1/0),l=0),a._end>s&&a._ts&&(s=a._end),a=c;la(o,o===ht&&o._time>s?o._time:s,1,1),o._dirty=0}return o._tDur},e.updateRoot=function(r){if(ht._ts&&(OC(ht,rh(r,ht)),RC=Nn.frame),Nn.frame>=J0){J0+=Fn.autoSleep||120;var s=ht._first;if((!s||!s._ts)&&Fn.autoSleep&&Nn._listeners.length<2){for(;s&&!s._ts;)s=s._next;s||Nn.sleep()}}},e}(ec);ni(gn.prototype,{_lock:0,_hasPause:0,_forcing:0});var V4=function(e,t,i,r,s,o,a){var l=new En(this._pt,e,t,0,1,sA,null,s),c=0,u=0,h,f,d,_,p,g,m,T;for(l.b=i,l.e=r,i+="",r+="",(m=~r.indexOf("random("))&&(r=Jl(r)),o&&(T=[i,r],o(T,e,t),i=T[0],r=T[1]),f=i.match(of)||[];h=of.exec(r);)_=h[0],p=r.substring(c,h.index),d?d=(d+1)%5:p.substr(-5)==="rgba("&&(d=1),_!==f[u++]&&(g=parseFloat(f[u-1])||0,l._pt={_next:l._pt,p:p||u===1?p:",",s:g,c:_.charAt(1)==="="?Fo(g,_)-g:parseFloat(_)-g,m:d&&d<4?Math.round:0},c=of.lastIndex);return l.c=c<r.length?r.substring(c,r.length):"",l.fp=a,(bC.test(r)||m)&&(l.e=0),this._pt=l,l},Tm=function(e,t,i,r,s,o,a,l,c,u){gt(r)&&(r=r(s||0,e,o));var h=e[t],f=i!=="get"?i:gt(h)?c?e[t.indexOf("set")||!gt(e["get"+t.substr(3)])?t:"get"+t.substr(3)](c):e[t]():h,d=gt(h)?c?z4:iA:Sm,_;if(zt(r)&&(~r.indexOf("random(")&&(r=Jl(r)),r.charAt(1)==="="&&(_=Fo(f,r)+(ln(f)||0),(_||_===0)&&(r=_))),!u||f!==r||Jp)return!isNaN(f*r)&&r!==""?(_=new En(this._pt,e,t,+f||0,r-(f||0),typeof h=="boolean"?G4:rA,0,d),c&&(_.fp=c),a&&_.modifier(a,this,e),this._pt=_):(!h&&!(t in e)&&mm(t,r),V4.call(this,e,t,f,r,d,l||Fn.stringFilter,c))},F4=function(e,t,i,r,s){if(gt(e)&&(e=Tl(e,s,t,i,r)),!Gi(e)||e.style&&e.nodeType||fn(e)||EC(e))return zt(e)?Tl(e,s,t,i,r):e;var o={},a;for(a in e)o[a]=Tl(e[a],s,t,i,r);return o},eA=function(e,t,i,r,s,o){var a,l,c,u;if(On[e]&&(a=new On[e]).init(s,a.rawVars?t[e]:F4(t[e],r,s,o,i),i,r,o)!==!1&&(i._pt=l=new En(i._pt,s,e,0,1,a.render,a,0,a.priority),i!==To))for(c=i._ptLookup[i._targets.indexOf(s)],u=a._props.length;u--;)c[a._props[u]]=l;return a},Dr,Jp,Em=function n(e,t,i){var r=e.vars,s=r.ease,o=r.startAt,a=r.immediateRender,l=r.lazy,c=r.onUpdate,u=r.runBackwards,h=r.yoyoEase,f=r.keyframes,d=r.autoRevert,_=e._dur,p=e._startAt,g=e._targets,m=e.parent,T=m&&m.data==="nested"?m.vars.targets:g,w=e._overwrite==="auto"&&!fm,S=e.timeline,E,I,P,x,A,k,D,W,N,de,fe,ne,Z;if(S&&(!f||!s)&&(s="none"),e._ease=Ms(s,oa.ease),e._yEase=h?XC(Ms(h===!0?s:h,oa.ease)):0,h&&e._yoyo&&!e._repeat&&(h=e._yEase,e._yEase=e._ease,e._ease=h),e._from=!S&&!!r.runBackwards,!S||f&&!r.stagger){if(W=g[0]?ks(g[0]).harness:0,ne=W&&r[W.prop],E=ih(r,ym),p&&(p._zTime<0&&p.progress(1),t<0&&u&&a&&!d?p.render(-1,!0):p.revert(u&&_?fu:d4),p._lazy=0),o){if(Qr(e._startAt=xt.set(g,ni({data:"isStart",overwrite:!1,parent:m,immediateRender:!0,lazy:!p&&wn(l),startAt:null,delay:0,onUpdate:c&&function(){return Dn(e,"onUpdate")},stagger:0},o))),e._startAt._dp=0,e._startAt._sat=e,t<0&&(dn||!a&&!d)&&e._startAt.revert(fu),a&&_&&t<=0&&i<=0){t&&(e._zTime=t);return}}else if(u&&_&&!p){if(t&&(a=!1),P=ni({overwrite:!1,data:"isFromStart",lazy:a&&!p&&wn(l),immediateRender:a,stagger:0,parent:m},E),ne&&(P[W.prop]=ne),Qr(e._startAt=xt.set(g,P)),e._startAt._dp=0,e._startAt._sat=e,t<0&&(dn?e._startAt.revert(fu):e._startAt.render(-1,!0)),e._zTime=t,!a)n(e._startAt,nt,nt);else if(!t)return}for(e._pt=e._ptCache=0,l=_&&wn(l)||l&&!_,I=0;I<g.length;I++){if(A=g[I],D=A._gsap||wm(g)[I]._gsap,e._ptLookup[I]=de={},Hp[D.id]&&Gr.length&&nh(),fe=T===g?I:T.indexOf(A),W&&(N=new W).init(A,ne||E,e,fe,T)!==!1&&(e._pt=x=new En(e._pt,A,N.name,0,1,N.render,N,0,N.priority),N._props.forEach(function(he){de[he]=x}),N.priority&&(k=1)),!W||ne)for(P in E)On[P]&&(N=eA(P,E,e,fe,A,T))?N.priority&&(k=1):de[P]=x=Tm.call(e,A,P,"get",E[P],fe,T,0,r.stringFilter);e._op&&e._op[I]&&e.kill(A,e._op[I]),w&&e._pt&&(Dr=e,ht.killTweensOf(A,de,e.globalTime(t)),Z=!e.parent,Dr=0),e._pt&&l&&(Hp[D.id]=1)}k&&oA(e),e._onInit&&e._onInit(e)}e._onUpdate=c,e._initted=(!e._op||e._pt)&&!Z,f&&t<=0&&S.render(Qn,!0,!0)},U4=function(e,t,i,r,s,o,a,l){var c=(e._pt&&e._ptCache||(e._ptCache={}))[t],u,h,f,d;if(!c)for(c=e._ptCache[t]=[],f=e._ptLookup,d=e._targets.length;d--;){if(u=f[d][t],u&&u.d&&u.d._pt)for(u=u.d._pt;u&&u.p!==t&&u.fp!==t;)u=u._next;if(!u)return Jp=1,e.vars[t]="+=0",Em(e,a),Jp=0,l?Xl(t+" not eligible for reset"):1;c.push(u)}for(d=c.length;d--;)h=c[d],u=h._pt||h,u.s=(r||r===0)&&!s?r:u.s+(r||0)+o*u.c,u.c=i-u.s,h.e&&(h.e=Tt(i)+ln(h.e)),h.b&&(h.b=u.s+ln(h.b))},$4=function(e,t){var i=e[0]?ks(e[0]).harness:0,r=i&&i.aliases,s,o,a,l;if(!r)return t;s=Ks({},t);for(o in r)if(o in s)for(l=r[o].split(","),a=l.length;a--;)s[l[a]]=s[o];return s},B4=function(e,t,i,r){var s=t.ease||r||"power1.inOut",o,a;if(fn(t))a=i[e]||(i[e]=[]),t.forEach(function(l,c){return a.push({t:c/(t.length-1)*100,v:l,e:s})});else for(o in t)a=i[o]||(i[o]=[]),o==="ease"||a.push({t:parseFloat(e),v:t[o],e:s})},Tl=function(e,t,i,r,s){return gt(e)?e.call(t,i,r,s):zt(e)&&~e.indexOf("random(")?Jl(e):e},tA=vm+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",nA={};Tn(tA+",id,stagger,delay,duration,paused,scrollTrigger",function(n){return nA[n]=1});var xt=function(n){wC(e,n);function e(i,r,s,o){var a;typeof r=="number"&&(s.duration=r,r=s,s=null),a=n.call(this,o?r:vl(r))||this;var l=a.vars,c=l.duration,u=l.delay,h=l.immediateRender,f=l.stagger,d=l.overwrite,_=l.keyframes,p=l.defaults,g=l.scrollTrigger,m=l.yoyoEase,T=r.parent||ht,w=(fn(i)||EC(i)?dr(i[0]):"length"in r)?[i]:Jn(i),S,E,I,P,x,A,k,D;if(a._targets=w.length?wm(w):Xl("GSAP target "+i+" not found. https://gsap.com",!Fn.nullTargetWarn)||[],a._ptLookup=[],a._overwrite=d,_||f||Qc(c)||Qc(u)){if(r=a.vars,S=a.timeline=new gn({data:"nested",defaults:p||{},targets:T&&T.data==="nested"?T.vars.targets:w}),S.kill(),S.parent=S._dp=Zi(a),S._start=0,f||Qc(c)||Qc(u)){if(P=w.length,k=f&&$C(f),Gi(f))for(x in f)~tA.indexOf(x)&&(D||(D={}),D[x]=f[x]);for(E=0;E<P;E++)I=ih(r,nA),I.stagger=0,m&&(I.yoyoEase=m),D&&Ks(I,D),A=w[E],I.duration=+Tl(c,Zi(a),E,A,w),I.delay=(+Tl(u,Zi(a),E,A,w)||0)-a._delay,!f&&P===1&&I.delay&&(a._delay=u=I.delay,a._start+=u,I.delay=0),S.to(A,I,k?k(E,A,w):0),S._ease=Pe.none;S.duration()?c=u=0:a.timeline=0}else if(_){vl(ni(S.vars.defaults,{ease:"none"})),S._ease=Ms(_.ease||r.ease||"none");var W=0,N,de,fe;if(fn(_))_.forEach(function(ne){return S.to(w,ne,">")}),S.duration();else{I={};for(x in _)x==="ease"||x==="easeEach"||B4(x,_[x],I,_.easeEach);for(x in I)for(N=I[x].sort(function(ne,Z){return ne.t-Z.t}),W=0,E=0;E<N.length;E++)de=N[E],fe={ease:de.e,duration:(de.t-(E?N[E-1].t:0))/100*c},fe[x]=de.v,S.to(w,fe,W),W+=fe.duration;S.duration()<c&&S.to({},{duration:c-S.duration()})}}c||a.duration(c=S.duration())}else a.timeline=0;return d===!0&&!fm&&(Dr=Zi(a),ht.killTweensOf(w),Dr=0),ki(T,Zi(a),s),r.reversed&&a.reverse(),r.paused&&a.paused(!0),(h||!c&&!_&&a._start===Vt(T._time)&&wn(h)&&y4(Zi(a))&&T.data!=="nested")&&(a._tTime=-nt,a.render(Math.max(0,-u)||0)),g&&LC(Zi(a),g),a}var t=e.prototype;return t.render=function(r,s,o){var a=this._time,l=this._tDur,c=this._dur,u=r<0,h=r>l-nt&&!u?l:r<nt?0:r,f,d,_,p,g,m,T,w,S;if(!c)w4(this,r,s,o);else if(h!==this._tTime||!r||o||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==u){if(f=h,w=this.timeline,this._repeat){if(p=c+this._rDelay,this._repeat<-1&&u)return this.totalTime(p*100+r,s,o);if(f=Vt(h%p),h===l?(_=this._repeat,f=c):(_=~~(h/p),_&&_===Vt(h/p)&&(f=c,_--),f>c&&(f=c)),m=this._yoyo&&_&1,m&&(S=this._yEase,f=c-f),g=aa(this._tTime,p),f===a&&!o&&this._initted&&_===g)return this._tTime=h,this;_!==g&&(w&&this._yEase&&QC(w,m),this.vars.repeatRefresh&&!m&&!this._lock&&this._time!==p&&this._initted&&(this._lock=o=1,this.render(Vt(p*_),!0).invalidate()._lock=0))}if(!this._initted){if(VC(this,u?r:f,o,s,h))return this._tTime=0,this;if(a!==this._time&&!(o&&this.vars.repeatRefresh&&_!==g))return this;if(c!==this._dur)return this.render(r,s,o)}if(this._tTime=h,this._time=f,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=T=(S||this._ease)(f/c),this._from&&(this.ratio=T=1-T),f&&!a&&!s&&!_&&(Dn(this,"onStart"),this._tTime!==h))return this;for(d=this._pt;d;)d.r(T,d.d),d=d._next;w&&w.render(r<0?r:w._dur*w._ease(f/this._dur),s,o)||this._startAt&&(this._zTime=r),this._onUpdate&&!s&&(u&&Wp(this,r,s,o),Dn(this,"onUpdate")),this._repeat&&_!==g&&this.vars.onRepeat&&!s&&this.parent&&Dn(this,"onRepeat"),(h===this._tDur||!h)&&this._tTime===h&&(u&&!this._onUpdate&&Wp(this,r,!0,!0),(r||!c)&&(h===this._tDur&&this._ts>0||!h&&this._ts<0)&&Qr(this,1),!s&&!(u&&!a)&&(h||a||m)&&(Dn(this,h===l?"onComplete":"onReverseComplete",!0),this._prom&&!(h<l&&this.timeScale()>0)&&this._prom()))}return this},t.targets=function(){return this._targets},t.invalidate=function(r){return(!r||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(r),n.prototype.invalidate.call(this,r)},t.resetTo=function(r,s,o,a,l){Zl||Nn.wake(),this._ts||this.play();var c=Math.min(this._dur,(this._dp._time-this._start)*this._ts),u;return this._initted||Em(this,c),u=this._ease(c/this._dur),U4(this,r,s,o,a,u,c,l)?this.resetTo(r,s,o,a,1):(ld(this,0),this.parent||MC(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},t.kill=function(r,s){if(s===void 0&&(s="all"),!r&&(!s||s==="all"))return this._lazy=this._pt=0,this.parent?Xa(this):this;if(this.timeline){var o=this.timeline.totalDuration();return this.timeline.killTweensOf(r,s,Dr&&Dr.vars.overwrite!==!0)._first||Xa(this),this.parent&&o!==this.timeline.totalDuration()&&la(this,this._dur*this.timeline._tDur/o,0,1),this}var a=this._targets,l=r?Jn(r):a,c=this._ptLookup,u=this._pt,h,f,d,_,p,g,m;if((!s||s==="all")&&g4(a,l))return s==="all"&&(this._pt=0),Xa(this);for(h=this._op=this._op||[],s!=="all"&&(zt(s)&&(p={},Tn(s,function(T){return p[T]=1}),s=p),s=$4(a,s)),m=a.length;m--;)if(~l.indexOf(a[m])){f=c[m],s==="all"?(h[m]=s,_=f,d={}):(d=h[m]=h[m]||{},_=s);for(p in _)g=f&&f[p],g&&((!("kill"in g.d)||g.d.kill(p)===!0)&&od(this,g,"_pt"),delete f[p]),d!=="all"&&(d[p]=1)}return this._initted&&!this._pt&&u&&Xa(this),this},e.to=function(r,s){return new e(r,s,arguments[2])},e.from=function(r,s){return wl(1,arguments)},e.delayedCall=function(r,s,o,a){return new e(s,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:r,onComplete:s,onReverseComplete:s,onCompleteParams:o,onReverseCompleteParams:o,callbackScope:a})},e.fromTo=function(r,s,o){return wl(2,arguments)},e.set=function(r,s){return s.duration=0,s.repeatDelay||(s.repeat=0),new e(r,s)},e.killTweensOf=function(r,s,o){return ht.killTweensOf(r,s,o)},e}(ec);ni(xt.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0});Tn("staggerTo,staggerFrom,staggerFromTo",function(n){xt[n]=function(){var e=new gn,t=Yp.call(arguments,0);return t.splice(n==="staggerFromTo"?5:4,0,0),e[n].apply(e,t)}});var Sm=function(e,t,i){return e[t]=i},iA=function(e,t,i){return e[t](i)},z4=function(e,t,i,r){return e[t](r.fp,i)},j4=function(e,t,i){return e.setAttribute(t,i)},bm=function(e,t){return gt(e[t])?iA:pm(e[t])&&e.setAttribute?j4:Sm},rA=function(e,t){return t.set(t.t,t.p,Math.round((t.s+t.c*e)*1e6)/1e6,t)},G4=function(e,t){return t.set(t.t,t.p,!!(t.s+t.c*e),t)},sA=function(e,t){var i=t._pt,r="";if(!e&&t.b)r=t.b;else if(e===1&&t.e)r=t.e;else{for(;i;)r=i.p+(i.m?i.m(i.s+i.c*e):Math.round((i.s+i.c*e)*1e4)/1e4)+r,i=i._next;r+=t.c}t.set(t.t,t.p,r,t)},Im=function(e,t){for(var i=t._pt;i;)i.r(e,i.d),i=i._next},q4=function(e,t,i,r){for(var s=this._pt,o;s;)o=s._next,s.p===r&&s.modifier(e,t,i),s=o},H4=function(e){for(var t=this._pt,i,r;t;)r=t._next,t.p===e&&!t.op||t.op===e?od(this,t,"_pt"):t.dep||(i=1),t=r;return!i},W4=function(e,t,i,r){r.mSet(e,t,r.m.call(r.tween,i,r.mt),r)},oA=function(e){for(var t=e._pt,i,r,s,o;t;){for(i=t._next,r=s;r&&r.pr>t.pr;)r=r._next;(t._prev=r?r._prev:o)?t._prev._next=t:s=t,(t._next=r)?r._prev=t:o=t,t=i}e._pt=s},En=function(){function n(t,i,r,s,o,a,l,c,u){this.t=i,this.s=s,this.c=o,this.p=r,this.r=a||rA,this.d=l||this,this.set=c||Sm,this.pr=u||0,this._next=t,t&&(t._prev=this)}var e=n.prototype;return e.modifier=function(i,r,s){this.mSet=this.mSet||this.set,this.set=W4,this.m=i,this.mt=s,this.tween=r},n}();Tn(vm+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(n){return ym[n]=1});$n.TweenMax=$n.TweenLite=xt;$n.TimelineLite=$n.TimelineMax=gn;ht=new gn({sortChildren:!1,defaults:oa,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0});Fn.stringFilter=YC;var Ds=[],_u={},K4=[],rw=0,Y4=0,hf=function(e){return(_u[e]||K4).map(function(t){return t()})},Zp=function(){var e=Date.now(),t=[];e-rw>2&&(hf("matchMediaInit"),Ds.forEach(function(i){var r=i.queries,s=i.conditions,o,a,l,c;for(a in r)o=Ai.matchMedia(r[a]).matches,o&&(l=1),o!==s[a]&&(s[a]=o,c=1);c&&(i.revert(),l&&t.push(i))}),hf("matchMediaRevert"),t.forEach(function(i){return i.onMatch(i,function(r){return i.add(null,r)})}),rw=e,hf("matchMedia"))},aA=function(){function n(t,i){this.selector=i&&Xp(i),this.data=[],this._r=[],this.isReverted=!1,this.id=Y4++,t&&this.add(t)}var e=n.prototype;return e.add=function(i,r,s){gt(i)&&(s=r,r=i,i=gt);var o=this,a=function(){var c=ct,u=o.selector,h;return c&&c!==o&&c.data.push(o),s&&(o.selector=Xp(s)),ct=o,h=r.apply(o,arguments),gt(h)&&o._r.push(h),ct=c,o.selector=u,o.isReverted=!1,h};return o.last=a,i===gt?a(o,function(l){return o.add(null,l)}):i?o[i]=a:a},e.ignore=function(i){var r=ct;ct=null,i(this),ct=r},e.getTweens=function(){var i=[];return this.data.forEach(function(r){return r instanceof n?i.push.apply(i,r.getTweens()):r instanceof xt&&!(r.parent&&r.parent.data==="nested")&&i.push(r)}),i},e.clear=function(){this._r.length=this.data.length=0},e.kill=function(i,r){var s=this;if(i?function(){for(var a=s.getTweens(),l=s.data.length,c;l--;)c=s.data[l],c.data==="isFlip"&&(c.revert(),c.getChildren(!0,!0,!1).forEach(function(u){return a.splice(a.indexOf(u),1)}));for(a.map(function(u){return{g:u._dur||u._delay||u._sat&&!u._sat.vars.immediateRender?u.globalTime(0):-1/0,t:u}}).sort(function(u,h){return h.g-u.g||-1/0}).forEach(function(u){return u.t.revert(i)}),l=s.data.length;l--;)c=s.data[l],c instanceof gn?c.data!=="nested"&&(c.scrollTrigger&&c.scrollTrigger.revert(),c.kill()):!(c instanceof xt)&&c.revert&&c.revert(i);s._r.forEach(function(u){return u(i,s)}),s.isReverted=!0}():this.data.forEach(function(a){return a.kill&&a.kill()}),this.clear(),r)for(var o=Ds.length;o--;)Ds[o].id===this.id&&Ds.splice(o,1)},e.revert=function(i){this.kill(i||{})},n}(),X4=function(){function n(t){this.contexts=[],this.scope=t,ct&&ct.data.push(this)}var e=n.prototype;return e.add=function(i,r,s){Gi(i)||(i={matches:i});var o=new aA(0,s||this.scope),a=o.conditions={},l,c,u;ct&&!o.selector&&(o.selector=ct.selector),this.contexts.push(o),r=o.add("onMatch",r),o.queries=i;for(c in i)c==="all"?u=1:(l=Ai.matchMedia(i[c]),l&&(Ds.indexOf(o)<0&&Ds.push(o),(a[c]=l.matches)&&(u=1),l.addListener?l.addListener(Zp):l.addEventListener("change",Zp)));return u&&r(o,function(h){return o.add(null,h)}),this},e.revert=function(i){this.kill(i||{})},e.kill=function(i){this.contexts.forEach(function(r){return r.kill(i,!0)})},n}(),sh={registerPlugin:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];t.forEach(function(r){return HC(r)})},timeline:function(e){return new gn(e)},getTweensOf:function(e,t){return ht.getTweensOf(e,t)},getProperty:function(e,t,i,r){zt(e)&&(e=Jn(e)[0]);var s=ks(e||{}).get,o=i?NC:kC;return i==="native"&&(i=""),e&&(t?o((On[t]&&On[t].get||s)(e,t,i,r)):function(a,l,c){return o((On[a]&&On[a].get||s)(e,a,l,c))})},quickSetter:function(e,t,i){if(e=Jn(e),e.length>1){var r=e.map(function(u){return Cn.quickSetter(u,t,i)}),s=r.length;return function(u){for(var h=s;h--;)r[h](u)}}e=e[0]||{};var o=On[t],a=ks(e),l=a.harness&&(a.harness.aliases||{})[t]||t,c=o?function(u){var h=new o;To._pt=0,h.init(e,i?u+i:u,To,0,[e]),h.render(1,h),To._pt&&Im(1,To)}:a.set(e,l);return o?c:function(u){return c(e,l,i?u+i:u,a,1)}},quickTo:function(e,t,i){var r,s=Cn.to(e,Ks((r={},r[t]="+=0.1",r.paused=!0,r),i||{})),o=function(l,c,u){return s.resetTo(t,l,c,u)};return o.tween=s,o},isTweening:function(e){return ht.getTweensOf(e,!0).length>0},defaults:function(e){return e&&e.ease&&(e.ease=Ms(e.ease,oa.ease)),Z0(oa,e||{})},config:function(e){return Z0(Fn,e||{})},registerEffect:function(e){var t=e.name,i=e.effect,r=e.plugins,s=e.defaults,o=e.extendTimeline;(r||"").split(",").forEach(function(a){return a&&!On[a]&&!$n[a]&&Xl(t+" effect requires "+a+" plugin.")}),af[t]=function(a,l,c){return i(Jn(a),ni(l||{},s),c)},o&&(gn.prototype[t]=function(a,l,c){return this.add(af[t](a,Gi(l)?l:(c=l)&&{},this),c)})},registerEase:function(e,t){Pe[e]=Ms(t)},parseEase:function(e,t){return arguments.length?Ms(e,t):Pe},getById:function(e){return ht.getById(e)},exportRoot:function(e,t){e===void 0&&(e={});var i=new gn(e),r,s;for(i.smoothChildTiming=wn(e.smoothChildTiming),ht.remove(i),i._dp=0,i._time=i._tTime=ht._time,r=ht._first;r;)s=r._next,(t||!(!r._dur&&r instanceof xt&&r.vars.onComplete===r._targets[0]))&&ki(i,r,r._start-r._delay),r=s;return ki(ht,i,0),i},context:function(e,t){return e?new aA(e,t):ct},matchMedia:function(e){return new X4(e)},matchMediaRefresh:function(){return Ds.forEach(function(e){var t=e.conditions,i,r;for(r in t)t[r]&&(t[r]=!1,i=1);i&&e.revert()})||Zp()},addEventListener:function(e,t){var i=_u[e]||(_u[e]=[]);~i.indexOf(t)||i.push(t)},removeEventListener:function(e,t){var i=_u[e],r=i&&i.indexOf(t);r>=0&&i.splice(r,1)},utils:{wrap:x4,wrapYoyo:R4,distribute:$C,random:zC,snap:BC,normalize:A4,getUnit:ln,clamp:S4,splitColor:WC,toArray:Jn,selector:Xp,mapRange:GC,pipe:I4,unitize:C4,interpolate:P4,shuffle:UC},install:AC,effects:af,ticker:Nn,updateRoot:gn.updateRoot,plugins:On,globalTimeline:ht,core:{PropTween:En,globals:xC,Tween:xt,Timeline:gn,Animation:ec,getCache:ks,_removeLinkedListItem:od,reverting:function(){return dn},context:function(e){return e&&ct&&(ct.data.push(e),e._ctx=ct),ct},suppressOverwrites:function(e){return fm=e}}};Tn("to,from,fromTo,delayedCall,set,killTweensOf",function(n){return sh[n]=xt[n]});Nn.add(gn.updateRoot);To=sh.to({},{duration:0});var Q4=function(e,t){for(var i=e._pt;i&&i.p!==t&&i.op!==t&&i.fp!==t;)i=i._next;return i},J4=function(e,t){var i=e._targets,r,s,o;for(r in t)for(s=i.length;s--;)o=e._ptLookup[s][r],o&&(o=o.d)&&(o._pt&&(o=Q4(o,r)),o&&o.modifier&&o.modifier(t[r],e,i[s],r))},df=function(e,t){return{name:e,rawVars:1,init:function(r,s,o){o._onInit=function(a){var l,c;if(zt(s)&&(l={},Tn(s,function(u){return l[u]=1}),s=l),t){l={};for(c in s)l[c]=t(s[c]);s=l}J4(a,s)}}}},Cn=sh.registerPlugin({name:"attr",init:function(e,t,i,r,s){var o,a,l;this.tween=i;for(o in t)l=e.getAttribute(o)||"",a=this.add(e,"setAttribute",(l||0)+"",t[o],r,s,0,0,o),a.op=o,a.b=l,this._props.push(o)},render:function(e,t){for(var i=t._pt;i;)dn?i.set(i.t,i.p,i.b,i):i.r(e,i.d),i=i._next}},{name:"endArray",init:function(e,t){for(var i=t.length;i--;)this.add(e,i,e[i]||0,t[i],0,0,0,0,0,1)}},df("roundProps",Qp),df("modifiers"),df("snap",BC))||sh;xt.version=gn.version=Cn.version="3.12.5";CC=1;_m()&&ca();Pe.Power0;Pe.Power1;Pe.Power2;Pe.Power3;Pe.Power4;Pe.Linear;Pe.Quad;Pe.Cubic;Pe.Quart;Pe.Quint;Pe.Strong;Pe.Elastic;Pe.Back;Pe.SteppedEase;Pe.Bounce;Pe.Sine;Pe.Expo;Pe.Circ;/*!
 * CSSPlugin 3.12.5
 * https://gsap.com
 *
 * Copyright 2008-2024, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var sw,Lr,Uo,Cm,bs,ow,Am,Z4=function(){return typeof window<"u"},fr={},_s=180/Math.PI,$o=Math.PI/180,lo=Math.atan2,aw=1e8,xm=/([A-Z])/g,e9=/(left|right|width|margin|padding|x)/i,t9=/[\s,\(]\S/,Vi={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},e_=function(e,t){return t.set(t.t,t.p,Math.round((t.s+t.c*e)*1e4)/1e4+t.u,t)},n9=function(e,t){return t.set(t.t,t.p,e===1?t.e:Math.round((t.s+t.c*e)*1e4)/1e4+t.u,t)},i9=function(e,t){return t.set(t.t,t.p,e?Math.round((t.s+t.c*e)*1e4)/1e4+t.u:t.b,t)},r9=function(e,t){var i=t.s+t.c*e;t.set(t.t,t.p,~~(i+(i<0?-.5:.5))+t.u,t)},lA=function(e,t){return t.set(t.t,t.p,e?t.e:t.b,t)},cA=function(e,t){return t.set(t.t,t.p,e!==1?t.b:t.e,t)},s9=function(e,t,i){return e.style[t]=i},o9=function(e,t,i){return e.style.setProperty(t,i)},a9=function(e,t,i){return e._gsap[t]=i},l9=function(e,t,i){return e._gsap.scaleX=e._gsap.scaleY=i},c9=function(e,t,i,r,s){var o=e._gsap;o.scaleX=o.scaleY=i,o.renderTransform(s,o)},u9=function(e,t,i,r,s){var o=e._gsap;o[t]=i,o.renderTransform(s,o)},ft="transform",Sn=ft+"Origin",h9=function n(e,t){var i=this,r=this.target,s=r.style,o=r._gsap;if(e in fr&&s){if(this.tfm=this.tfm||{},e!=="transform")e=Vi[e]||e,~e.indexOf(",")?e.split(",").forEach(function(a){return i.tfm[a]=er(r,a)}):this.tfm[e]=o.x?o[e]:er(r,e),e===Sn&&(this.tfm.zOrigin=o.zOrigin);else return Vi.transform.split(",").forEach(function(a){return n.call(i,a,t)});if(this.props.indexOf(ft)>=0)return;o.svg&&(this.svgo=r.getAttribute("data-svg-origin"),this.props.push(Sn,t,"")),e=ft}(s||t)&&this.props.push(e,t,s[e])},uA=function(e){e.translate&&(e.removeProperty("translate"),e.removeProperty("scale"),e.removeProperty("rotate"))},d9=function(){var e=this.props,t=this.target,i=t.style,r=t._gsap,s,o;for(s=0;s<e.length;s+=3)e[s+1]?t[e[s]]=e[s+2]:e[s+2]?i[e[s]]=e[s+2]:i.removeProperty(e[s].substr(0,2)==="--"?e[s]:e[s].replace(xm,"-$1").toLowerCase());if(this.tfm){for(o in this.tfm)r[o]=this.tfm[o];r.svg&&(r.renderTransform(),t.setAttribute("data-svg-origin",this.svgo||"")),s=Am(),(!s||!s.isStart)&&!i[ft]&&(uA(i),r.zOrigin&&i[Sn]&&(i[Sn]+=" "+r.zOrigin+"px",r.zOrigin=0,r.renderTransform()),r.uncache=1)}},hA=function(e,t){var i={target:e,props:[],revert:d9,save:h9};return e._gsap||Cn.core.getCache(e),t&&t.split(",").forEach(function(r){return i.save(r)}),i},dA,t_=function(e,t){var i=Lr.createElementNS?Lr.createElementNS((t||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),e):Lr.createElement(e);return i&&i.style?i:Lr.createElement(e)},Ui=function n(e,t,i){var r=getComputedStyle(e);return r[t]||r.getPropertyValue(t.replace(xm,"-$1").toLowerCase())||r.getPropertyValue(t)||!i&&n(e,ua(t)||t,1)||""},lw="O,Moz,ms,Ms,Webkit".split(","),ua=function(e,t,i){var r=t||bs,s=r.style,o=5;if(e in s&&!i)return e;for(e=e.charAt(0).toUpperCase()+e.substr(1);o--&&!(lw[o]+e in s););return o<0?null:(o===3?"ms":o>=0?lw[o]:"")+e},n_=function(){Z4()&&window.document&&(sw=window,Lr=sw.document,Uo=Lr.documentElement,bs=t_("div")||{style:{}},t_("div"),ft=ua(ft),Sn=ft+"Origin",bs.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",dA=!!ua("perspective"),Am=Cn.core.reverting,Cm=1)},ff=function n(e){var t=t_("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),i=this.parentNode,r=this.nextSibling,s=this.style.cssText,o;if(Uo.appendChild(t),t.appendChild(this),this.style.display="block",e)try{o=this.getBBox(),this._gsapBBox=this.getBBox,this.getBBox=n}catch{}else this._gsapBBox&&(o=this._gsapBBox());return i&&(r?i.insertBefore(this,r):i.appendChild(this)),Uo.removeChild(t),this.style.cssText=s,o},cw=function(e,t){for(var i=t.length;i--;)if(e.hasAttribute(t[i]))return e.getAttribute(t[i])},fA=function(e){var t;try{t=e.getBBox()}catch{t=ff.call(e,!0)}return t&&(t.width||t.height)||e.getBBox===ff||(t=ff.call(e,!0)),t&&!t.width&&!t.x&&!t.y?{x:+cw(e,["x","cx","x1"])||0,y:+cw(e,["y","cy","y1"])||0,width:0,height:0}:t},pA=function(e){return!!(e.getCTM&&(!e.parentNode||e.ownerSVGElement)&&fA(e))},Ys=function(e,t){if(t){var i=e.style,r;t in fr&&t!==Sn&&(t=ft),i.removeProperty?(r=t.substr(0,2),(r==="ms"||t.substr(0,6)==="webkit")&&(t="-"+t),i.removeProperty(r==="--"?t:t.replace(xm,"-$1").toLowerCase())):i.removeAttribute(t)}},Vr=function(e,t,i,r,s,o){var a=new En(e._pt,t,i,0,1,o?cA:lA);return e._pt=a,a.b=r,a.e=s,e._props.push(i),a},uw={deg:1,rad:1,turn:1},f9={grid:1,flex:1},Jr=function n(e,t,i,r){var s=parseFloat(i)||0,o=(i+"").trim().substr((s+"").length)||"px",a=bs.style,l=e9.test(t),c=e.tagName.toLowerCase()==="svg",u=(c?"client":"offset")+(l?"Width":"Height"),h=100,f=r==="px",d=r==="%",_,p,g,m;if(r===o||!s||uw[r]||uw[o])return s;if(o!=="px"&&!f&&(s=n(e,t,i,"px")),m=e.getCTM&&pA(e),(d||o==="%")&&(fr[t]||~t.indexOf("adius")))return _=m?e.getBBox()[l?"width":"height"]:e[u],Tt(d?s/_*h:s/100*_);if(a[l?"width":"height"]=h+(f?o:r),p=~t.indexOf("adius")||r==="em"&&e.appendChild&&!c?e:e.parentNode,m&&(p=(e.ownerSVGElement||{}).parentNode),(!p||p===Lr||!p.appendChild)&&(p=Lr.body),g=p._gsap,g&&d&&g.width&&l&&g.time===Nn.time&&!g.uncache)return Tt(s/g.width*h);if(d&&(t==="height"||t==="width")){var T=e.style[t];e.style[t]=h+r,_=e[u],T?e.style[t]=T:Ys(e,t)}else(d||o==="%")&&!f9[Ui(p,"display")]&&(a.position=Ui(e,"position")),p===e&&(a.position="static"),p.appendChild(bs),_=bs[u],p.removeChild(bs),a.position="absolute";return l&&d&&(g=ks(p),g.time=Nn.time,g.width=p[u]),Tt(f?_*s/h:_&&s?h/_*s:0)},er=function(e,t,i,r){var s;return Cm||n_(),t in Vi&&t!=="transform"&&(t=Vi[t],~t.indexOf(",")&&(t=t.split(",")[0])),fr[t]&&t!=="transform"?(s=nc(e,r),s=t!=="transformOrigin"?s[t]:s.svg?s.origin:ah(Ui(e,Sn))+" "+s.zOrigin+"px"):(s=e.style[t],(!s||s==="auto"||r||~(s+"").indexOf("calc("))&&(s=oh[t]&&oh[t](e,t,i)||Ui(e,t)||PC(e,t)||(t==="opacity"?1:0))),i&&!~(s+"").trim().indexOf(" ")?Jr(e,t,s,i)+i:s},p9=function(e,t,i,r){if(!i||i==="none"){var s=ua(t,e,1),o=s&&Ui(e,s,1);o&&o!==i?(t=s,i=o):t==="borderColor"&&(i=Ui(e,"borderTopColor"))}var a=new En(this._pt,e.style,t,0,1,sA),l=0,c=0,u,h,f,d,_,p,g,m,T,w,S,E;if(a.b=i,a.e=r,i+="",r+="",r==="auto"&&(p=e.style[t],e.style[t]=r,r=Ui(e,t)||r,p?e.style[t]=p:Ys(e,t)),u=[i,r],YC(u),i=u[0],r=u[1],f=i.match(wo)||[],E=r.match(wo)||[],E.length){for(;h=wo.exec(r);)g=h[0],T=r.substring(l,h.index),_?_=(_+1)%5:(T.substr(-5)==="rgba("||T.substr(-5)==="hsla(")&&(_=1),g!==(p=f[c++]||"")&&(d=parseFloat(p)||0,S=p.substr((d+"").length),g.charAt(1)==="="&&(g=Fo(d,g)+S),m=parseFloat(g),w=g.substr((m+"").length),l=wo.lastIndex-w.length,w||(w=w||Fn.units[t]||S,l===r.length&&(r+=w,a.e+=w)),S!==w&&(d=Jr(e,t,p,w)||0),a._pt={_next:a._pt,p:T||c===1?T:",",s:d,c:m-d,m:_&&_<4||t==="zIndex"?Math.round:0});a.c=l<r.length?r.substring(l,r.length):""}else a.r=t==="display"&&r==="none"?cA:lA;return bC.test(r)&&(a.e=0),this._pt=a,a},hw={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},_9=function(e){var t=e.split(" "),i=t[0],r=t[1]||"50%";return(i==="top"||i==="bottom"||r==="left"||r==="right")&&(e=i,i=r,r=e),t[0]=hw[i]||i,t[1]=hw[r]||r,t.join(" ")},g9=function(e,t){if(t.tween&&t.tween._time===t.tween._dur){var i=t.t,r=i.style,s=t.u,o=i._gsap,a,l,c;if(s==="all"||s===!0)r.cssText="",l=1;else for(s=s.split(","),c=s.length;--c>-1;)a=s[c],fr[a]&&(l=1,a=a==="transformOrigin"?Sn:ft),Ys(i,a);l&&(Ys(i,ft),o&&(o.svg&&i.removeAttribute("transform"),nc(i,1),o.uncache=1,uA(r)))}},oh={clearProps:function(e,t,i,r,s){if(s.data!=="isFromStart"){var o=e._pt=new En(e._pt,t,i,0,0,g9);return o.u=r,o.pr=-10,o.tween=s,e._props.push(i),1}}},tc=[1,0,0,1,0,0],_A={},gA=function(e){return e==="matrix(1, 0, 0, 1, 0, 0)"||e==="none"||!e},dw=function(e){var t=Ui(e,ft);return gA(t)?tc:t.substr(7).match(SC).map(Tt)},Rm=function(e,t){var i=e._gsap||ks(e),r=e.style,s=dw(e),o,a,l,c;return i.svg&&e.getAttribute("transform")?(l=e.transform.baseVal.consolidate().matrix,s=[l.a,l.b,l.c,l.d,l.e,l.f],s.join(",")==="1,0,0,1,0,0"?tc:s):(s===tc&&!e.offsetParent&&e!==Uo&&!i.svg&&(l=r.display,r.display="block",o=e.parentNode,(!o||!e.offsetParent)&&(c=1,a=e.nextElementSibling,Uo.appendChild(e)),s=dw(e),l?r.display=l:Ys(e,"display"),c&&(a?o.insertBefore(e,a):o?o.appendChild(e):Uo.removeChild(e))),t&&s.length>6?[s[0],s[1],s[4],s[5],s[12],s[13]]:s)},i_=function(e,t,i,r,s,o){var a=e._gsap,l=s||Rm(e,!0),c=a.xOrigin||0,u=a.yOrigin||0,h=a.xOffset||0,f=a.yOffset||0,d=l[0],_=l[1],p=l[2],g=l[3],m=l[4],T=l[5],w=t.split(" "),S=parseFloat(w[0])||0,E=parseFloat(w[1])||0,I,P,x,A;i?l!==tc&&(P=d*g-_*p)&&(x=S*(g/P)+E*(-p/P)+(p*T-g*m)/P,A=S*(-_/P)+E*(d/P)-(d*T-_*m)/P,S=x,E=A):(I=fA(e),S=I.x+(~w[0].indexOf("%")?S/100*I.width:S),E=I.y+(~(w[1]||w[0]).indexOf("%")?E/100*I.height:E)),r||r!==!1&&a.smooth?(m=S-c,T=E-u,a.xOffset=h+(m*d+T*p)-m,a.yOffset=f+(m*_+T*g)-T):a.xOffset=a.yOffset=0,a.xOrigin=S,a.yOrigin=E,a.smooth=!!r,a.origin=t,a.originIsAbsolute=!!i,e.style[Sn]="0px 0px",o&&(Vr(o,a,"xOrigin",c,S),Vr(o,a,"yOrigin",u,E),Vr(o,a,"xOffset",h,a.xOffset),Vr(o,a,"yOffset",f,a.yOffset)),e.setAttribute("data-svg-origin",S+" "+E)},nc=function(e,t){var i=e._gsap||new ZC(e);if("x"in i&&!t&&!i.uncache)return i;var r=e.style,s=i.scaleX<0,o="px",a="deg",l=getComputedStyle(e),c=Ui(e,Sn)||"0",u,h,f,d,_,p,g,m,T,w,S,E,I,P,x,A,k,D,W,N,de,fe,ne,Z,he,St,bt,Se,_e,He,Ce,Gt;return u=h=f=p=g=m=T=w=S=0,d=_=1,i.svg=!!(e.getCTM&&pA(e)),l.translate&&((l.translate!=="none"||l.scale!=="none"||l.rotate!=="none")&&(r[ft]=(l.translate!=="none"?"translate3d("+(l.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(l.rotate!=="none"?"rotate("+l.rotate+") ":"")+(l.scale!=="none"?"scale("+l.scale.split(" ").join(",")+") ":"")+(l[ft]!=="none"?l[ft]:"")),r.scale=r.rotate=r.translate="none"),P=Rm(e,i.svg),i.svg&&(i.uncache?(he=e.getBBox(),c=i.xOrigin-he.x+"px "+(i.yOrigin-he.y)+"px",Z=""):Z=!t&&e.getAttribute("data-svg-origin"),i_(e,Z||c,!!Z||i.originIsAbsolute,i.smooth!==!1,P)),E=i.xOrigin||0,I=i.yOrigin||0,P!==tc&&(D=P[0],W=P[1],N=P[2],de=P[3],u=fe=P[4],h=ne=P[5],P.length===6?(d=Math.sqrt(D*D+W*W),_=Math.sqrt(de*de+N*N),p=D||W?lo(W,D)*_s:0,T=N||de?lo(N,de)*_s+p:0,T&&(_*=Math.abs(Math.cos(T*$o))),i.svg&&(u-=E-(E*D+I*N),h-=I-(E*W+I*de))):(Gt=P[6],He=P[7],bt=P[8],Se=P[9],_e=P[10],Ce=P[11],u=P[12],h=P[13],f=P[14],x=lo(Gt,_e),g=x*_s,x&&(A=Math.cos(-x),k=Math.sin(-x),Z=fe*A+bt*k,he=ne*A+Se*k,St=Gt*A+_e*k,bt=fe*-k+bt*A,Se=ne*-k+Se*A,_e=Gt*-k+_e*A,Ce=He*-k+Ce*A,fe=Z,ne=he,Gt=St),x=lo(-N,_e),m=x*_s,x&&(A=Math.cos(-x),k=Math.sin(-x),Z=D*A-bt*k,he=W*A-Se*k,St=N*A-_e*k,Ce=de*k+Ce*A,D=Z,W=he,N=St),x=lo(W,D),p=x*_s,x&&(A=Math.cos(x),k=Math.sin(x),Z=D*A+W*k,he=fe*A+ne*k,W=W*A-D*k,ne=ne*A-fe*k,D=Z,fe=he),g&&Math.abs(g)+Math.abs(p)>359.9&&(g=p=0,m=180-m),d=Tt(Math.sqrt(D*D+W*W+N*N)),_=Tt(Math.sqrt(ne*ne+Gt*Gt)),x=lo(fe,ne),T=Math.abs(x)>2e-4?x*_s:0,S=Ce?1/(Ce<0?-Ce:Ce):0),i.svg&&(Z=e.getAttribute("transform"),i.forceCSS=e.setAttribute("transform","")||!gA(Ui(e,ft)),Z&&e.setAttribute("transform",Z))),Math.abs(T)>90&&Math.abs(T)<270&&(s?(d*=-1,T+=p<=0?180:-180,p+=p<=0?180:-180):(_*=-1,T+=T<=0?180:-180)),t=t||i.uncache,i.x=u-((i.xPercent=u&&(!t&&i.xPercent||(Math.round(e.offsetWidth/2)===Math.round(-u)?-50:0)))?e.offsetWidth*i.xPercent/100:0)+o,i.y=h-((i.yPercent=h&&(!t&&i.yPercent||(Math.round(e.offsetHeight/2)===Math.round(-h)?-50:0)))?e.offsetHeight*i.yPercent/100:0)+o,i.z=f+o,i.scaleX=Tt(d),i.scaleY=Tt(_),i.rotation=Tt(p)+a,i.rotationX=Tt(g)+a,i.rotationY=Tt(m)+a,i.skewX=T+a,i.skewY=w+a,i.transformPerspective=S+o,(i.zOrigin=parseFloat(c.split(" ")[2])||!t&&i.zOrigin||0)&&(r[Sn]=ah(c)),i.xOffset=i.yOffset=0,i.force3D=Fn.force3D,i.renderTransform=i.svg?y9:dA?mA:m9,i.uncache=0,i},ah=function(e){return(e=e.split(" "))[0]+" "+e[1]},pf=function(e,t,i){var r=ln(t);return Tt(parseFloat(t)+parseFloat(Jr(e,"x",i+"px",r)))+r},m9=function(e,t){t.z="0px",t.rotationY=t.rotationX="0deg",t.force3D=0,mA(e,t)},cs="0deg",Ua="0px",us=") ",mA=function(e,t){var i=t||this,r=i.xPercent,s=i.yPercent,o=i.x,a=i.y,l=i.z,c=i.rotation,u=i.rotationY,h=i.rotationX,f=i.skewX,d=i.skewY,_=i.scaleX,p=i.scaleY,g=i.transformPerspective,m=i.force3D,T=i.target,w=i.zOrigin,S="",E=m==="auto"&&e&&e!==1||m===!0;if(w&&(h!==cs||u!==cs)){var I=parseFloat(u)*$o,P=Math.sin(I),x=Math.cos(I),A;I=parseFloat(h)*$o,A=Math.cos(I),o=pf(T,o,P*A*-w),a=pf(T,a,-Math.sin(I)*-w),l=pf(T,l,x*A*-w+w)}g!==Ua&&(S+="perspective("+g+us),(r||s)&&(S+="translate("+r+"%, "+s+"%) "),(E||o!==Ua||a!==Ua||l!==Ua)&&(S+=l!==Ua||E?"translate3d("+o+", "+a+", "+l+") ":"translate("+o+", "+a+us),c!==cs&&(S+="rotate("+c+us),u!==cs&&(S+="rotateY("+u+us),h!==cs&&(S+="rotateX("+h+us),(f!==cs||d!==cs)&&(S+="skew("+f+", "+d+us),(_!==1||p!==1)&&(S+="scale("+_+", "+p+us),T.style[ft]=S||"translate(0, 0)"},y9=function(e,t){var i=t||this,r=i.xPercent,s=i.yPercent,o=i.x,a=i.y,l=i.rotation,c=i.skewX,u=i.skewY,h=i.scaleX,f=i.scaleY,d=i.target,_=i.xOrigin,p=i.yOrigin,g=i.xOffset,m=i.yOffset,T=i.forceCSS,w=parseFloat(o),S=parseFloat(a),E,I,P,x,A;l=parseFloat(l),c=parseFloat(c),u=parseFloat(u),u&&(u=parseFloat(u),c+=u,l+=u),l||c?(l*=$o,c*=$o,E=Math.cos(l)*h,I=Math.sin(l)*h,P=Math.sin(l-c)*-f,x=Math.cos(l-c)*f,c&&(u*=$o,A=Math.tan(c-u),A=Math.sqrt(1+A*A),P*=A,x*=A,u&&(A=Math.tan(u),A=Math.sqrt(1+A*A),E*=A,I*=A)),E=Tt(E),I=Tt(I),P=Tt(P),x=Tt(x)):(E=h,x=f,I=P=0),(w&&!~(o+"").indexOf("px")||S&&!~(a+"").indexOf("px"))&&(w=Jr(d,"x",o,"px"),S=Jr(d,"y",a,"px")),(_||p||g||m)&&(w=Tt(w+_-(_*E+p*P)+g),S=Tt(S+p-(_*I+p*x)+m)),(r||s)&&(A=d.getBBox(),w=Tt(w+r/100*A.width),S=Tt(S+s/100*A.height)),A="matrix("+E+","+I+","+P+","+x+","+w+","+S+")",d.setAttribute("transform",A),T&&(d.style[ft]=A)},v9=function(e,t,i,r,s){var o=360,a=zt(s),l=parseFloat(s)*(a&&~s.indexOf("rad")?_s:1),c=l-r,u=r+c+"deg",h,f;return a&&(h=s.split("_")[1],h==="short"&&(c%=o,c!==c%(o/2)&&(c+=c<0?o:-o)),h==="cw"&&c<0?c=(c+o*aw)%o-~~(c/o)*o:h==="ccw"&&c>0&&(c=(c-o*aw)%o-~~(c/o)*o)),e._pt=f=new En(e._pt,t,i,r,c,n9),f.e=u,f.u="deg",e._props.push(i),f},fw=function(e,t){for(var i in t)e[i]=t[i];return e},w9=function(e,t,i){var r=fw({},i._gsap),s="perspective,force3D,transformOrigin,svgOrigin",o=i.style,a,l,c,u,h,f,d,_;r.svg?(c=i.getAttribute("transform"),i.setAttribute("transform",""),o[ft]=t,a=nc(i,1),Ys(i,ft),i.setAttribute("transform",c)):(c=getComputedStyle(i)[ft],o[ft]=t,a=nc(i,1),o[ft]=c);for(l in fr)c=r[l],u=a[l],c!==u&&s.indexOf(l)<0&&(d=ln(c),_=ln(u),h=d!==_?Jr(i,l,c,_):parseFloat(c),f=parseFloat(u),e._pt=new En(e._pt,a,l,h,f-h,e_),e._pt.u=_||0,e._props.push(l));fw(a,r)};Tn("padding,margin,Width,Radius",function(n,e){var t="Top",i="Right",r="Bottom",s="Left",o=(e<3?[t,i,r,s]:[t+s,t+i,r+i,r+s]).map(function(a){return e<2?n+a:"border"+a+n});oh[e>1?"border"+n:n]=function(a,l,c,u,h){var f,d;if(arguments.length<4)return f=o.map(function(_){return er(a,_,c)}),d=f.join(" "),d.split(f[0]).length===5?f[0]:d;f=(u+"").split(" "),d={},o.forEach(function(_,p){return d[_]=f[p]=f[p]||f[(p-1)/2|0]}),a.init(l,d,h)}});var yA={name:"css",register:n_,targetTest:function(e){return e.style&&e.nodeType},init:function(e,t,i,r,s){var o=this._props,a=e.style,l=i.vars.startAt,c,u,h,f,d,_,p,g,m,T,w,S,E,I,P,x;Cm||n_(),this.styles=this.styles||hA(e),x=this.styles.props,this.tween=i;for(p in t)if(p!=="autoRound"&&(u=t[p],!(On[p]&&eA(p,t,i,r,e,s)))){if(d=typeof u,_=oh[p],d==="function"&&(u=u.call(i,r,e,s),d=typeof u),d==="string"&&~u.indexOf("random(")&&(u=Jl(u)),_)_(this,e,p,u,i)&&(P=1);else if(p.substr(0,2)==="--")c=(getComputedStyle(e).getPropertyValue(p)+"").trim(),u+="",qr.lastIndex=0,qr.test(c)||(g=ln(c),m=ln(u)),m?g!==m&&(c=Jr(e,p,c,m)+m):g&&(u+=g),this.add(a,"setProperty",c,u,r,s,0,0,p),o.push(p),x.push(p,0,a[p]);else if(d!=="undefined"){if(l&&p in l?(c=typeof l[p]=="function"?l[p].call(i,r,e,s):l[p],zt(c)&&~c.indexOf("random(")&&(c=Jl(c)),ln(c+"")||c==="auto"||(c+=Fn.units[p]||ln(er(e,p))||""),(c+"").charAt(1)==="="&&(c=er(e,p))):c=er(e,p),f=parseFloat(c),T=d==="string"&&u.charAt(1)==="="&&u.substr(0,2),T&&(u=u.substr(2)),h=parseFloat(u),p in Vi&&(p==="autoAlpha"&&(f===1&&er(e,"visibility")==="hidden"&&h&&(f=0),x.push("visibility",0,a.visibility),Vr(this,a,"visibility",f?"inherit":"hidden",h?"inherit":"hidden",!h)),p!=="scale"&&p!=="transform"&&(p=Vi[p],~p.indexOf(",")&&(p=p.split(",")[0]))),w=p in fr,w){if(this.styles.save(p),S||(E=e._gsap,E.renderTransform&&!t.parseTransform||nc(e,t.parseTransform),I=t.smoothOrigin!==!1&&E.smooth,S=this._pt=new En(this._pt,a,ft,0,1,E.renderTransform,E,0,-1),S.dep=1),p==="scale")this._pt=new En(this._pt,E,"scaleY",E.scaleY,(T?Fo(E.scaleY,T+h):h)-E.scaleY||0,e_),this._pt.u=0,o.push("scaleY",p),p+="X";else if(p==="transformOrigin"){x.push(Sn,0,a[Sn]),u=_9(u),E.svg?i_(e,u,0,I,0,this):(m=parseFloat(u.split(" ")[2])||0,m!==E.zOrigin&&Vr(this,E,"zOrigin",E.zOrigin,m),Vr(this,a,p,ah(c),ah(u)));continue}else if(p==="svgOrigin"){i_(e,u,1,I,0,this);continue}else if(p in _A){v9(this,E,p,f,T?Fo(f,T+u):u);continue}else if(p==="smoothOrigin"){Vr(this,E,"smooth",E.smooth,u);continue}else if(p==="force3D"){E[p]=u;continue}else if(p==="transform"){w9(this,u,e);continue}}else p in a||(p=ua(p)||p);if(w||(h||h===0)&&(f||f===0)&&!t9.test(u)&&p in a)g=(c+"").substr((f+"").length),h||(h=0),m=ln(u)||(p in Fn.units?Fn.units[p]:g),g!==m&&(f=Jr(e,p,c,m)),this._pt=new En(this._pt,w?E:a,p,f,(T?Fo(f,T+h):h)-f,!w&&(m==="px"||p==="zIndex")&&t.autoRound!==!1?r9:e_),this._pt.u=m||0,g!==m&&m!=="%"&&(this._pt.b=c,this._pt.r=i9);else if(p in a)p9.call(this,e,p,c,T?T+u:u);else if(p in e)this.add(e,p,c||e[p],T?T+u:u,r,s);else if(p!=="parseTransform"){mm(p,u);continue}w||(p in a?x.push(p,0,a[p]):x.push(p,1,c||e[p])),o.push(p)}}P&&oA(this)},render:function(e,t){if(t.tween._time||!Am())for(var i=t._pt;i;)i.r(e,i.d),i=i._next;else t.styles.revert()},get:er,aliases:Vi,getSetter:function(e,t,i){var r=Vi[t];return r&&r.indexOf(",")<0&&(t=r),t in fr&&t!==Sn&&(e._gsap.x||er(e,"x"))?i&&ow===i?t==="scale"?l9:a9:(ow=i||{})&&(t==="scale"?c9:u9):e.style&&!pm(e.style[t])?s9:~t.indexOf("-")?o9:bm(e,t)},core:{_removeProperty:Ys,_getMatrix:Rm}};Cn.utils.checkPrefix=ua;Cn.core.getStyleSaver=hA;(function(n,e,t,i){var r=Tn(n+","+e+","+t,function(s){fr[s]=1});Tn(e,function(s){Fn.units[s]="deg",_A[s]=1}),Vi[r[13]]=n+","+e,Tn(i,function(s){var o=s.split(":");Vi[o[1]]=r[o[0]]})})("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY");Tn("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(n){Fn.units[n]="px"});Cn.registerPlugin(yA);var r_=Cn.registerPlugin(yA)||Cn;r_.core.Tween;/*!
 * matrix 3.12.5
 * https://gsap.com
 *
 * Copyright 2008-2024, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var sr,Ls,Pm,cd,Ja,gu,lh,El,fi="transform",s_=fi+"Origin",vA,wA=function(e){var t=e.ownerDocument||e;for(!(fi in e.style)&&("msTransform"in e.style)&&(fi="msTransform",s_=fi+"Origin");t.parentNode&&(t=t.parentNode););if(Ls=window,lh=new Xs,t){sr=t,Pm=t.documentElement,cd=t.body,El=sr.createElementNS("http://www.w3.org/2000/svg","g"),El.style.transform="none";var i=t.createElement("div"),r=t.createElement("div"),s=t&&(t.body||t.firstElementChild);s&&s.appendChild&&(s.appendChild(i),i.appendChild(r),i.setAttribute("style","position:static;transform:translate3d(0,0,1px)"),vA=r.offsetParent!==i,s.removeChild(i))}return t},T9=function(e){for(var t,i;e&&e!==cd;)i=e._gsap,i&&i.uncache&&i.get(e,"x"),i&&!i.scaleX&&!i.scaleY&&i.renderTransform&&(i.scaleX=i.scaleY=1e-4,i.renderTransform(1,i),t?t.push(i):t=[i]),e=e.parentNode;return t},TA=[],EA=[],E9=function(){return Ls.pageYOffset||sr.scrollTop||Pm.scrollTop||cd.scrollTop||0},S9=function(){return Ls.pageXOffset||sr.scrollLeft||Pm.scrollLeft||cd.scrollLeft||0},Om=function(e){return e.ownerSVGElement||((e.tagName+"").toLowerCase()==="svg"?e:null)},b9=function n(e){if(Ls.getComputedStyle(e).position==="fixed")return!0;if(e=e.parentNode,e&&e.nodeType===1)return n(e)},_f=function n(e,t){if(e.parentNode&&(sr||wA(e))){var i=Om(e),r=i?i.getAttribute("xmlns")||"http://www.w3.org/2000/svg":"http://www.w3.org/1999/xhtml",s=i?t?"rect":"g":"div",o=t!==2?0:100,a=t===3?100:0,l="position:absolute;display:block;pointer-events:none;margin:0;padding:0;",c=sr.createElementNS?sr.createElementNS(r.replace(/^https/,"http"),s):sr.createElement(s);return t&&(i?(gu||(gu=n(e)),c.setAttribute("width",.01),c.setAttribute("height",.01),c.setAttribute("transform","translate("+o+","+a+")"),gu.appendChild(c)):(Ja||(Ja=n(e),Ja.style.cssText=l),c.style.cssText=l+"width:0.1px;height:0.1px;top:"+a+"px;left:"+o+"px",Ja.appendChild(c))),c}throw"Need document and parent."},I9=function(e){for(var t=new Xs,i=0;i<e.numberOfItems;i++)t.multiply(e.getItem(i).matrix);return t},C9=function(e){var t=e.getCTM(),i;return t||(i=e.style[fi],e.style[fi]="none",e.appendChild(El),t=El.getCTM(),e.removeChild(El),i?e.style[fi]=i:e.style.removeProperty(fi.replace(/([A-Z])/g,"-$1").toLowerCase())),t||lh.clone()},A9=function(e,t){var i=Om(e),r=e===i,s=i?TA:EA,o=e.parentNode,a,l,c,u,h,f;if(e===Ls)return e;if(s.length||s.push(_f(e,1),_f(e,2),_f(e,3)),a=i?gu:Ja,i)r?(c=C9(e),u=-c.e/c.a,h=-c.f/c.d,l=lh):e.getBBox?(c=e.getBBox(),l=e.transform?e.transform.baseVal:{},l=l.numberOfItems?l.numberOfItems>1?I9(l):l.getItem(0).matrix:lh,u=l.a*c.x+l.c*c.y,h=l.b*c.x+l.d*c.y):(l=new Xs,u=h=0),t&&e.tagName.toLowerCase()==="g"&&(u=h=0),(r?i:o).appendChild(a),a.setAttribute("transform","matrix("+l.a+","+l.b+","+l.c+","+l.d+","+(l.e+u)+","+(l.f+h)+")");else{if(u=h=0,vA)for(l=e.offsetParent,c=e;c&&(c=c.parentNode)&&c!==l&&c.parentNode;)(Ls.getComputedStyle(c)[fi]+"").length>4&&(u=c.offsetLeft,h=c.offsetTop,c=0);if(f=Ls.getComputedStyle(e),f.position!=="absolute"&&f.position!=="fixed")for(l=e.offsetParent;o&&o!==l;)u+=o.scrollLeft||0,h+=o.scrollTop||0,o=o.parentNode;c=a.style,c.top=e.offsetTop-h+"px",c.left=e.offsetLeft-u+"px",c[fi]=f[fi],c[s_]=f[s_],c.position=f.position==="fixed"?"fixed":"absolute",e.parentNode.appendChild(a)}return a},gf=function(e,t,i,r,s,o,a){return e.a=t,e.b=i,e.c=r,e.d=s,e.e=o,e.f=a,e},Xs=function(){function n(t,i,r,s,o,a){t===void 0&&(t=1),i===void 0&&(i=0),r===void 0&&(r=0),s===void 0&&(s=1),o===void 0&&(o=0),a===void 0&&(a=0),gf(this,t,i,r,s,o,a)}var e=n.prototype;return e.inverse=function(){var i=this.a,r=this.b,s=this.c,o=this.d,a=this.e,l=this.f,c=i*o-r*s||1e-10;return gf(this,o/c,-r/c,-s/c,i/c,(s*l-o*a)/c,-(i*l-r*a)/c)},e.multiply=function(i){var r=this.a,s=this.b,o=this.c,a=this.d,l=this.e,c=this.f,u=i.a,h=i.c,f=i.b,d=i.d,_=i.e,p=i.f;return gf(this,u*r+f*o,u*s+f*a,h*r+d*o,h*s+d*a,l+_*r+p*o,c+_*s+p*a)},e.clone=function(){return new n(this.a,this.b,this.c,this.d,this.e,this.f)},e.equals=function(i){var r=this.a,s=this.b,o=this.c,a=this.d,l=this.e,c=this.f;return r===i.a&&s===i.b&&o===i.c&&a===i.d&&l===i.e&&c===i.f},e.apply=function(i,r){r===void 0&&(r={});var s=i.x,o=i.y,a=this.a,l=this.b,c=this.c,u=this.d,h=this.e,f=this.f;return r.x=s*a+o*c+h||0,r.y=s*l+o*u+f||0,r},n}();function ms(n,e,t,i){if(!n||!n.parentNode||(sr||wA(n)).documentElement===n)return new Xs;var r=T9(n),s=Om(n),o=s?TA:EA,a=A9(n,t),l=o[0].getBoundingClientRect(),c=o[1].getBoundingClientRect(),u=o[2].getBoundingClientRect(),h=a.parentNode,f=!i&&b9(n),d=new Xs((c.left-l.left)/100,(c.top-l.top)/100,(u.left-l.left)/100,(u.top-l.top)/100,l.left+(f?0:S9()),l.top+(f?0:E9()));if(h.removeChild(a),r)for(l=r.length;l--;)c=r[l],c.scaleX=c.scaleY=0,c.renderTransform(1,c);return e?d.inverse():d}function pw(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function x9(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,n.__proto__=e}var xe,et,Mn,mi,or,mf,tr,o_,Za,Fr,SA,a_,ic,km,el,si,tl,mu,bA,l_,ch=0,IA=function(){return typeof window<"u"},CA=function(){return xe||IA()&&(xe=window.gsap)&&xe.registerPlugin&&xe},Pr=function(e){return typeof e=="function"},Sl=function(e){return typeof e=="object"},ai=function(e){return typeof e>"u"},yu=function(){return!1},bl="transform",c_="transformOrigin",br=function(e){return Math.round(e*1e4)/1e4},$a=Array.isArray,Jc=function(e,t){var i=Mn.createElementNS?Mn.createElementNS((t||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),e):Mn.createElement(e);return i.style?i:Mn.createElement(e)},_w=180/Math.PI,hs=1e20,R9=new Xs,Ir=Date.now||function(){return new Date().getTime()},Vs=[],Bo={},P9=0,O9=/^(?:a|input|textarea|button|select)$/i,gw=0,co={},Ji={},AA=function(e,t){var i={},r;for(r in e)i[r]=t?e[r]*t:e[r];return i},k9=function(e,t){for(var i in t)i in e||(e[i]=t[i]);return e},mw=function n(e,t){for(var i=e.length,r;i--;)t?e[i].style.touchAction=t:e[i].style.removeProperty("touch-action"),r=e[i].children,r&&r.length&&n(r,t)},xA=function(){return Vs.forEach(function(e){return e()})},N9=function(e){Vs.push(e),Vs.length===1&&xe.ticker.add(xA)},yw=function(){return!Vs.length&&xe.ticker.remove(xA)},vw=function(e){for(var t=Vs.length;t--;)Vs[t]===e&&Vs.splice(t,1);xe.to(yw,{overwrite:!0,delay:15,duration:0,onComplete:yw,data:"_draggable"})},M9=function(e,t){for(var i in t)i in e||(e[i]=t[i]);return e},kt=function(e,t,i,r){if(e.addEventListener){var s=ic[t];r=r||(SA?{passive:!1}:null),e.addEventListener(s||t,i,r),s&&t!==s&&e.addEventListener(t,i,r)}},It=function(e,t,i,r){if(e.removeEventListener){var s=ic[t];e.removeEventListener(s||t,i,r),s&&t!==s&&e.removeEventListener(t,i,r)}},Gn=function(e){e.preventDefault&&e.preventDefault(),e.preventManipulation&&e.preventManipulation()},D9=function(e,t){for(var i=e.length;i--;)if(e[i].identifier===t)return!0},L9=function n(e){km=e.touches&&ch<e.touches.length,It(e.target,"touchend",n)},ww=function(e){km=e.touches&&ch<e.touches.length,kt(e.target,"touchend",L9)},zo=function(e){return et.pageYOffset||e.scrollTop||e.documentElement.scrollTop||e.body.scrollTop||0},jo=function(e){return et.pageXOffset||e.scrollLeft||e.documentElement.scrollLeft||e.body.scrollLeft||0},Tw=function n(e,t){kt(e,"scroll",t),ha(e.parentNode)||n(e.parentNode,t)},Ew=function n(e,t){It(e,"scroll",t),ha(e.parentNode)||n(e.parentNode,t)},ha=function(e){return!e||e===mi||e.nodeType===9||e===Mn.body||e===et||!e.nodeType||!e.parentNode},Sw=function(e,t){var i=t==="x"?"Width":"Height",r="scroll"+i,s="client"+i;return Math.max(0,ha(e)?Math.max(mi[r],or[r])-(et["inner"+i]||mi[s]||or[s]):e[r]-e[s])},yf=function n(e,t){var i=Sw(e,"x"),r=Sw(e,"y");ha(e)?e=Ji:n(e.parentNode,t),e._gsMaxScrollX=i,e._gsMaxScrollY=r,t||(e._gsScrollX=e.scrollLeft||0,e._gsScrollY=e.scrollTop||0)},vf=function(e,t,i){var r=e.style;r&&(ai(r[t])&&(t=Za(t,e)||t),i==null?r.removeProperty&&r.removeProperty(t.replace(/([A-Z])/g,"-$1").toLowerCase()):r[t]=i)},rc=function(e){return et.getComputedStyle(e instanceof Element?e:e.host||(e.parentNode||{}).host||e)},ds={},uo=function(e){if(e===et)return ds.left=ds.top=0,ds.width=ds.right=mi.clientWidth||e.innerWidth||or.clientWidth||0,ds.height=ds.bottom=(e.innerHeight||0)-20<mi.clientHeight?mi.clientHeight:e.innerHeight||or.clientHeight||0,ds;var t=e.ownerDocument||Mn,i=ai(e.pageX)?!e.nodeType&&!ai(e.left)&&!ai(e.top)?e:Fr(e)[0].getBoundingClientRect():{left:e.pageX-jo(t),top:e.pageY-zo(t),right:e.pageX-jo(t)+1,bottom:e.pageY-zo(t)+1};return ai(i.right)&&!ai(i.width)?(i.right=i.left+i.width,i.bottom=i.top+i.height):ai(i.width)&&(i={width:i.right-i.left,height:i.bottom-i.top,right:i.right,left:i.left,bottom:i.bottom,top:i.top}),i},wt=function(e,t,i){var r=e.vars,s=r[i],o=e._listeners[t],a;return Pr(s)&&(a=s.apply(r.callbackScope||e,r[i+"Params"]||[e.pointerEvent])),o&&e.dispatchEvent(t)===!1&&(a=!1),a},bw=function(e,t){var i=Fr(e)[0],r,s,o;return!i.nodeType&&i!==et?ai(e.left)?(s=e.min||e.minX||e.minRotation||0,r=e.min||e.minY||0,{left:s,top:r,width:(e.max||e.maxX||e.maxRotation||0)-s,height:(e.max||e.maxY||0)-r}):(o={x:0,y:0},{left:e.left-o.x,top:e.top-o.y,width:e.width,height:e.height}):V9(i,t)},qn={},V9=function(e,t){t=Fr(t)[0];var i=e.getBBox&&e.ownerSVGElement,r=e.ownerDocument||Mn,s,o,a,l,c,u,h,f,d,_,p,g,m;if(e===et)a=zo(r),s=jo(r),o=s+(r.documentElement.clientWidth||e.innerWidth||r.body.clientWidth||0),l=a+((e.innerHeight||0)-20<r.documentElement.clientHeight?r.documentElement.clientHeight:e.innerHeight||r.body.clientHeight||0);else{if(t===et||ai(t))return e.getBoundingClientRect();s=a=0,i?(_=e.getBBox(),p=_.width,g=_.height):(e.viewBox&&(_=e.viewBox.baseVal)&&(s=_.x||0,a=_.y||0,p=_.width,g=_.height),p||(m=rc(e),_=m.boxSizing==="border-box",p=(parseFloat(m.width)||e.clientWidth||0)+(_?0:parseFloat(m.borderLeftWidth)+parseFloat(m.borderRightWidth)),g=(parseFloat(m.height)||e.clientHeight||0)+(_?0:parseFloat(m.borderTopWidth)+parseFloat(m.borderBottomWidth)))),o=p,l=g}return e===t?{left:s,top:a,width:o-s,height:l-a}:(c=ms(t,!0).multiply(ms(e)),u=c.apply({x:s,y:a}),h=c.apply({x:o,y:a}),f=c.apply({x:o,y:l}),d=c.apply({x:s,y:l}),s=Math.min(u.x,h.x,f.x,d.x),a=Math.min(u.y,h.y,f.y,d.y),{left:s,top:a,width:Math.max(u.x,h.x,f.x,d.x)-s,height:Math.max(u.y,h.y,f.y,d.y)-a})},wf=function(e,t,i,r,s,o){var a={},l,c,u;if(t)if(s!==1&&t instanceof Array){if(a.end=l=[],u=t.length,Sl(t[0]))for(c=0;c<u;c++)l[c]=AA(t[c],s);else for(c=0;c<u;c++)l[c]=t[c]*s;i+=1.1,r-=1.1}else Pr(t)?a.end=function(h){var f=t.call(e,h),d,_;if(s!==1)if(Sl(f)){d={};for(_ in f)d[_]=f[_]*s;f=d}else f*=s;return f}:a.end=t;return(i||i===0)&&(a.max=i),(r||r===0)&&(a.min=r),o&&(a.velocity=0),a},F9=function n(e){var t;return!e||!e.getAttribute||e===or?!1:(t=e.getAttribute("data-clickable"))==="true"||t!=="false"&&(O9.test(e.nodeName+"")||e.getAttribute("contentEditable")==="true")?!0:n(e.parentNode)},Zc=function(e,t){for(var i=e.length,r;i--;)r=e[i],r.ondragstart=r.onselectstart=t?null:yu,xe.set(r,{lazy:!0,userSelect:t?"text":"none"})},U9=function n(e){if(rc(e).position==="fixed")return!0;if(e=e.parentNode,e&&e.nodeType===1)return n(e)},RA,u_,$9=function(e,t){e=xe.utils.toArray(e)[0],t=t||{};var i=document.createElement("div"),r=i.style,s=e.firstChild,o=0,a=0,l=e.scrollTop,c=e.scrollLeft,u=e.scrollWidth,h=e.scrollHeight,f=0,d=0,_=0,p,g,m,T,w,S;RA&&t.force3D!==!1?(w="translate3d(",S="px,0px)"):bl&&(w="translate(",S="px)"),this.scrollTop=function(E,I){if(!arguments.length)return-this.top();this.top(-E,I)},this.scrollLeft=function(E,I){if(!arguments.length)return-this.left();this.left(-E,I)},this.left=function(E,I){if(!arguments.length)return-(e.scrollLeft+a);var P=e.scrollLeft-c,x=a;if((P>2||P<-2)&&!I){c=e.scrollLeft,xe.killTweensOf(this,{left:1,scrollLeft:1}),this.left(-c),t.onKill&&t.onKill();return}E=-E,E<0?(a=E-.5|0,E=0):E>d?(a=E-d|0,E=d):a=0,(a||x)&&(this._skip||(r[bl]=w+-a+"px,"+-o+S),a+f>=0&&(r.paddingRight=a+f+"px")),e.scrollLeft=E|0,c=e.scrollLeft},this.top=function(E,I){if(!arguments.length)return-(e.scrollTop+o);var P=e.scrollTop-l,x=o;if((P>2||P<-2)&&!I){l=e.scrollTop,xe.killTweensOf(this,{top:1,scrollTop:1}),this.top(-l),t.onKill&&t.onKill();return}E=-E,E<0?(o=E-.5|0,E=0):E>_?(o=E-_|0,E=_):o=0,(o||x)&&(this._skip||(r[bl]=w+-a+"px,"+-o+S)),e.scrollTop=E|0,l=e.scrollTop},this.maxScrollTop=function(){return _},this.maxScrollLeft=function(){return d},this.disable=function(){for(s=i.firstChild;s;)T=s.nextSibling,e.appendChild(s),s=T;e===i.parentNode&&e.removeChild(i)},this.enable=function(){if(s=e.firstChild,s!==i){for(;s;)T=s.nextSibling,i.appendChild(s),s=T;e.appendChild(i),this.calibrate()}},this.calibrate=function(E){var I=e.clientWidth===p,P,x,A;l=e.scrollTop,c=e.scrollLeft,!(I&&e.clientHeight===g&&i.offsetHeight===m&&u===e.scrollWidth&&h===e.scrollHeight&&!E)&&((o||a)&&(x=this.left(),A=this.top(),this.left(-e.scrollLeft),this.top(-e.scrollTop)),P=rc(e),(!I||E)&&(r.display="block",r.width="auto",r.paddingRight="0px",f=Math.max(0,e.scrollWidth-e.clientWidth),f&&(f+=parseFloat(P.paddingLeft)+(u_?parseFloat(P.paddingRight):0))),r.display="inline-block",r.position="relative",r.overflow="visible",r.verticalAlign="top",r.boxSizing="content-box",r.width="100%",r.paddingRight=f+"px",u_&&(r.paddingBottom=P.paddingBottom),p=e.clientWidth,g=e.clientHeight,u=e.scrollWidth,h=e.scrollHeight,d=e.scrollWidth-p,_=e.scrollHeight-g,m=i.offsetHeight,r.display="block",(x||A)&&(this.left(x),this.top(A)))},this.content=i,this.element=e,this._skip=!1,this.enable()},Tf=function(e){if(IA()&&document.body){var t=window&&window.navigator;et=window,Mn=document,mi=Mn.documentElement,or=Mn.body,mf=Jc("div"),mu=!!window.PointerEvent,tr=Jc("div"),tr.style.cssText="visibility:hidden;height:1px;top:-1px;pointer-events:none;position:relative;clear:both;cursor:grab",tl=tr.style.cursor==="grab"?"grab":"move",el=t&&t.userAgent.toLowerCase().indexOf("android")!==-1,a_="ontouchstart"in mi&&"orientation"in et||t&&(t.MaxTouchPoints>0||t.msMaxTouchPoints>0),u_=function(){var i=Jc("div"),r=Jc("div"),s=r.style,o=or,a;return s.display="inline-block",s.position="relative",i.style.cssText="width:90px;height:40px;padding:10px;overflow:auto;visibility:hidden",i.appendChild(r),o.appendChild(i),a=r.offsetHeight+18>i.scrollHeight,o.removeChild(i),a}(),ic=function(i){for(var r=i.split(","),s=("onpointerdown"in mf?"pointerdown,pointermove,pointerup,pointercancel":"onmspointerdown"in mf?"MSPointerDown,MSPointerMove,MSPointerUp,MSPointerCancel":i).split(","),o={},a=4;--a>-1;)o[r[a]]=s[a],o[s[a]]=r[a];try{mi.addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){SA=1}}))}catch{}return o}("touchstart,touchmove,touchend,touchcancel"),kt(Mn,"touchcancel",yu),kt(et,"touchmove",yu),or&&or.addEventListener("touchstart",yu),kt(Mn,"contextmenu",function(){for(var i in Bo)Bo[i].isPressed&&Bo[i].endDrag()}),xe=o_=CA()}xe?(si=xe.plugins.inertia,bA=xe.core.context||function(){},Za=xe.utils.checkPrefix,bl=Za(bl),c_=Za(c_),Fr=xe.utils.toArray,l_=xe.core.getStyleSaver,RA=!!Za("perspective")):e&&console.warn("Please gsap.registerPlugin(Draggable)")},B9=function(){function n(t){this._listeners={},this.target=t||this}var e=n.prototype;return e.addEventListener=function(i,r){var s=this._listeners[i]||(this._listeners[i]=[]);~s.indexOf(r)||s.push(r)},e.removeEventListener=function(i,r){var s=this._listeners[i],o=s&&s.indexOf(r);o>=0&&s.splice(o,1)},e.dispatchEvent=function(i){var r=this,s;return(this._listeners[i]||[]).forEach(function(o){return o.call(r,{type:i,target:r.target})===!1&&(s=!1)}),s},n}(),da=function(n){x9(e,n);function e(t,i){var r;r=n.call(this)||this,o_||Tf(1),t=Fr(t)[0],r.styles=l_&&l_(t,"transform,left,top"),si||(si=xe.plugins.inertia),r.vars=i=AA(i||{}),r.target=t,r.x=r.y=r.rotation=0,r.dragResistance=parseFloat(i.dragResistance)||0,r.edgeResistance=isNaN(i.edgeResistance)?1:parseFloat(i.edgeResistance)||0,r.lockAxis=i.lockAxis,r.autoScroll=i.autoScroll||0,r.lockedAxis=null,r.allowEventDefault=!!i.allowEventDefault,xe.getProperty(t,"x");var s=(i.type||"x,y").toLowerCase(),o=~s.indexOf("x")||~s.indexOf("y"),a=s.indexOf("rotation")!==-1,l=a?"rotation":o?"x":"left",c=o?"y":"top",u=!!(~s.indexOf("x")||~s.indexOf("left")||s==="scroll"),h=!!(~s.indexOf("y")||~s.indexOf("top")||s==="scroll"),f=i.minimumMovement||2,d=pw(r),_=Fr(i.trigger||i.handle||t),p={},g=0,m=!1,T=i.autoScrollMarginTop||40,w=i.autoScrollMarginRight||40,S=i.autoScrollMarginBottom||40,E=i.autoScrollMarginLeft||40,I=i.clickableTest||F9,P=0,x=t._gsap||xe.core.getCache(t),A=U9(t),k=function(b,F){return parseFloat(x.get(t,b,F))},D=t.ownerDocument||Mn,W,N,de,fe,ne,Z,he,St,bt,Se,_e,He,Ce,Gt,We,M,q,K,te,be,Fe,y,v,C,L,O,$,Y,z,H,V,ee,ae,oe=function(b){return Gn(b),b.stopImmediatePropagation&&b.stopImmediatePropagation(),!1},le=function ue(b){if(d.autoScroll&&d.isDragging&&(m||q)){var F=t,R=d.autoScroll*15,B,J,ie,Ie,ce,Xe,Oe,Qe;for(m=!1,Ji.scrollTop=et.pageYOffset!=null?et.pageYOffset:D.documentElement.scrollTop!=null?D.documentElement.scrollTop:D.body.scrollTop,Ji.scrollLeft=et.pageXOffset!=null?et.pageXOffset:D.documentElement.scrollLeft!=null?D.documentElement.scrollLeft:D.body.scrollLeft,Ie=d.pointerX-Ji.scrollLeft,ce=d.pointerY-Ji.scrollTop;F&&!J;)J=ha(F.parentNode),B=J?Ji:F.parentNode,ie=J?{bottom:Math.max(mi.clientHeight,et.innerHeight||0),right:Math.max(mi.clientWidth,et.innerWidth||0),left:0,top:0}:B.getBoundingClientRect(),Xe=Oe=0,h&&(Qe=B._gsMaxScrollY-B.scrollTop,Qe<0?Oe=Qe:ce>ie.bottom-S&&Qe?(m=!0,Oe=Math.min(Qe,R*(1-Math.max(0,ie.bottom-ce)/S)|0)):ce<ie.top+T&&B.scrollTop&&(m=!0,Oe=-Math.min(B.scrollTop,R*(1-Math.max(0,ce-ie.top)/T)|0)),Oe&&(B.scrollTop+=Oe)),u&&(Qe=B._gsMaxScrollX-B.scrollLeft,Qe<0?Xe=Qe:Ie>ie.right-w&&Qe?(m=!0,Xe=Math.min(Qe,R*(1-Math.max(0,ie.right-Ie)/w)|0)):Ie<ie.left+E&&B.scrollLeft&&(m=!0,Xe=-Math.min(B.scrollLeft,R*(1-Math.max(0,Ie-ie.left)/E)|0)),Xe&&(B.scrollLeft+=Xe)),J&&(Xe||Oe)&&(et.scrollTo(B.scrollLeft,B.scrollTop),Ra(d.pointerX+Xe,d.pointerY+Oe)),F=B}if(q){var yt=d.x,Qt=d.y;a?(d.deltaX=yt-parseFloat(x.rotation),d.rotation=yt,x.rotation=yt+"deg",x.renderTransform(1,x)):N?(h&&(d.deltaY=Qt-N.top(),N.top(Qt)),u&&(d.deltaX=yt-N.left(),N.left(yt))):o?(h&&(d.deltaY=Qt-parseFloat(x.y),x.y=Qt+"px"),u&&(d.deltaX=yt-parseFloat(x.x),x.x=yt+"px"),x.renderTransform(1,x)):(h&&(d.deltaY=Qt-parseFloat(t.style.top||0),t.style.top=Qt+"px"),u&&(d.deltaX=yt-parseFloat(t.style.left||0),t.style.left=yt+"px")),St&&!b&&!Y&&(Y=!0,wt(d,"drag","onDrag")===!1&&(u&&(d.x-=d.deltaX),h&&(d.y-=d.deltaY),ue(!0)),Y=!1)}q=!1},ye=function(b,F){var R=d.x,B=d.y,J,ie;t._gsap||(x=xe.core.getCache(t)),x.uncache&&xe.getProperty(t,"x"),o?(d.x=parseFloat(x.x),d.y=parseFloat(x.y)):a?d.x=d.rotation=parseFloat(x.rotation):N?(d.y=N.top(),d.x=N.left()):(d.y=parseFloat(t.style.top||(ie=rc(t))&&ie.top)||0,d.x=parseFloat(t.style.left||(ie||{}).left)||0),(te||be||Fe)&&!F&&(d.isDragging||d.isThrowing)&&(Fe&&(co.x=d.x,co.y=d.y,J=Fe(co),J.x!==d.x&&(d.x=J.x,q=!0),J.y!==d.y&&(d.y=J.y,q=!0)),te&&(J=te(d.x),J!==d.x&&(d.x=J,a&&(d.rotation=J),q=!0)),be&&(J=be(d.y),J!==d.y&&(d.y=J),q=!0)),q&&le(!0),b||(d.deltaX=d.x-R,d.deltaY=d.y-B,wt(d,"throwupdate","onThrowUpdate"))},Ue=function(b,F,R,B){return F==null&&(F=-hs),R==null&&(R=hs),Pr(b)?function(J){var ie=d.isPressed?1-d.edgeResistance:1;return b.call(d,(J>R?R+(J-R)*ie:J<F?F+(J-F)*ie:J)*B)*B}:$a(b)?function(J){for(var ie=b.length,Ie=0,ce=hs,Xe,Oe;--ie>-1;)Xe=b[ie],Oe=Xe-J,Oe<0&&(Oe=-Oe),Oe<ce&&Xe>=F&&Xe<=R&&(Ie=ie,ce=Oe);return b[Ie]}:isNaN(b)?function(J){return J}:function(){return b*B}},tt=function(b,F,R,B,J,ie,Ie){return ie=ie&&ie<hs?ie*ie:hs,Pr(b)?function(ce){var Xe=d.isPressed?1-d.edgeResistance:1,Oe=ce.x,Qe=ce.y,yt,Qt,Yi;return ce.x=Oe=Oe>R?R+(Oe-R)*Xe:Oe<F?F+(Oe-F)*Xe:Oe,ce.y=Qe=Qe>J?J+(Qe-J)*Xe:Qe<B?B+(Qe-B)*Xe:Qe,yt=b.call(d,ce),yt!==ce&&(ce.x=yt.x,ce.y=yt.y),Ie!==1&&(ce.x*=Ie,ce.y*=Ie),ie<hs&&(Qt=ce.x-Oe,Yi=ce.y-Qe,Qt*Qt+Yi*Yi>ie&&(ce.x=Oe,ce.y=Qe)),ce}:$a(b)?function(ce){for(var Xe=b.length,Oe=0,Qe=hs,yt,Qt,Yi,jn;--Xe>-1;)Yi=b[Xe],yt=Yi.x-ce.x,Qt=Yi.y-ce.y,jn=yt*yt+Qt*Qt,jn<Qe&&(Oe=Xe,Qe=jn);return Qe<=ie?b[Oe]:ce}:function(ce){return ce}},_t=function(){var b,F,R,B;he=!1,N?(N.calibrate(),d.minX=_e=-N.maxScrollLeft(),d.minY=Ce=-N.maxScrollTop(),d.maxX=Se=d.maxY=He=0,he=!0):i.bounds&&(b=bw(i.bounds,t.parentNode),a?(d.minX=_e=b.left,d.maxX=Se=b.left+b.width,d.minY=Ce=d.maxY=He=0):!ai(i.bounds.maxX)||!ai(i.bounds.maxY)?(b=i.bounds,d.minX=_e=b.minX,d.minY=Ce=b.minY,d.maxX=Se=b.maxX,d.maxY=He=b.maxY):(F=bw(t,t.parentNode),d.minX=_e=Math.round(k(l,"px")+b.left-F.left),d.minY=Ce=Math.round(k(c,"px")+b.top-F.top),d.maxX=Se=Math.round(_e+(b.width-F.width)),d.maxY=He=Math.round(Ce+(b.height-F.height))),_e>Se&&(d.minX=Se,d.maxX=Se=_e,_e=d.minX),Ce>He&&(d.minY=He,d.maxY=He=Ce,Ce=d.minY),a&&(d.minRotation=_e,d.maxRotation=Se),he=!0),i.liveSnap&&(R=i.liveSnap===!0?i.snap||{}:i.liveSnap,B=$a(R)||Pr(R),a?(te=Ue(B?R:R.rotation,_e,Se,1),be=null):R.points?Fe=tt(B?R:R.points,_e,Se,Ce,He,R.radius,N?-1:1):(u&&(te=Ue(B?R:R.x||R.left||R.scrollLeft,_e,Se,N?-1:1)),h&&(be=Ue(B?R:R.y||R.top||R.scrollTop,Ce,He,N?-1:1))))},xn=function(){d.isThrowing=!1,wt(d,"throwcomplete","onThrowComplete")},mr=function(){d.isThrowing=!1},io=function(b,F){var R,B,J,ie;b&&si?(b===!0&&(R=i.snap||i.liveSnap||{},B=$a(R)||Pr(R),b={resistance:(i.throwResistance||i.resistance||1e3)/(a?10:1)},a?b.rotation=wf(d,B?R:R.rotation,Se,_e,1,F):(u&&(b[l]=wf(d,B?R:R.points||R.x||R.left,Se,_e,N?-1:1,F||d.lockedAxis==="x")),h&&(b[c]=wf(d,B?R:R.points||R.y||R.top,He,Ce,N?-1:1,F||d.lockedAxis==="y")),(R.points||$a(R)&&Sl(R[0]))&&(b.linkedProps=l+","+c,b.radius=R.radius))),d.isThrowing=!0,ie=isNaN(i.overshootTolerance)?i.edgeResistance===1?0:1-d.edgeResistance+.2:i.overshootTolerance,b.duration||(b.duration={max:Math.max(i.minDuration||0,"maxDuration"in i?i.maxDuration:2),min:isNaN(i.minDuration)?ie===0||Sl(b)&&b.resistance>1e3?0:.5:i.minDuration,overshoot:ie}),d.tween=J=xe.to(N||t,{inertia:b,data:"_draggable",inherit:!1,onComplete:xn,onInterrupt:mr,onUpdate:i.fastMode?wt:ye,onUpdateParams:i.fastMode?[d,"onthrowupdate","onThrowUpdate"]:R&&R.radius?[!1,!0]:[]}),i.fastMode||(N&&(N._skip=!0),J.render(1e9,!0,!0),ye(!0,!0),d.endX=d.x,d.endY=d.y,a&&(d.endRotation=d.x),J.play(0),ye(!0,!0),N&&(N._skip=!1))):he&&d.applyBounds()},yr=function(b){var F=C,R;C=ms(t.parentNode,!0),b&&d.isPressed&&!C.equals(F||new Xs)&&(R=F.inverse().apply({x:de,y:fe}),C.apply(R,R),de=R.x,fe=R.y),C.equals(R9)&&(C=null)},ss=function(){var b=1-d.edgeResistance,F=A?jo(D):0,R=A?zo(D):0,B,J,ie;o&&(x.x=k(l,"px")+"px",x.y=k(c,"px")+"px",x.renderTransform()),yr(!1),qn.x=d.pointerX-F,qn.y=d.pointerY-R,C&&C.apply(qn,qn),de=qn.x,fe=qn.y,q&&(Ra(d.pointerX,d.pointerY),le(!0)),ee=ms(t),N?(_t(),Z=N.top(),ne=N.left()):(Ot()?(ye(!0,!0),_t()):d.applyBounds(),a?(B=t.ownerSVGElement?[x.xOrigin-t.getBBox().x,x.yOrigin-t.getBBox().y]:(rc(t)[c_]||"0 0").split(" "),M=d.rotationOrigin=ms(t).apply({x:parseFloat(B[0])||0,y:parseFloat(B[1])||0}),ye(!0,!0),J=d.pointerX-M.x-F,ie=M.y-d.pointerY+R,ne=d.x,Z=d.y=Math.atan2(ie,J)*_w):(Z=k(c,"px"),ne=k(l,"px"))),he&&b&&(ne>Se?ne=Se+(ne-Se)/b:ne<_e&&(ne=_e-(_e-ne)/b),a||(Z>He?Z=He+(Z-He)/b:Z<Ce&&(Z=Ce-(Ce-Z)/b))),d.startX=ne=br(ne),d.startY=Z=br(Z)},Ot=function(){return d.tween&&d.tween.isActive()},zn=function(){tr.parentNode&&!Ot()&&!d.isDragging&&tr.parentNode.removeChild(tr)},vr=function(b,F){var R;if(!W||d.isPressed||!b||(b.type==="mousedown"||b.type==="pointerdown")&&!F&&Ir()-P<30&&ic[d.pointerEvent.type]){V&&b&&W&&Gn(b);return}if(L=Ot(),ae=!1,d.pointerEvent=b,ic[b.type]?(v=~b.type.indexOf("touch")?b.currentTarget||b.target:D,kt(v,"touchend",ii),kt(v,"touchmove",os),kt(v,"touchcancel",ii),kt(D,"touchstart",ww)):(v=null,kt(D,"mousemove",os)),$=null,(!mu||!v)&&(kt(D,"mouseup",ii),b&&b.target&&kt(b.target,"mouseup",ii)),y=I.call(d,b.target)&&i.dragClickables===!1&&!F,y){kt(b.target,"change",ii),wt(d,"pressInit","onPressInit"),wt(d,"press","onPress"),Zc(_,!0),V=!1;return}if(O=!v||u===h||d.vars.allowNativeTouchScrolling===!1||d.vars.allowContextMenu&&b&&(b.ctrlKey||b.which>2)?!1:u?"y":"x",V=!O&&!d.allowEventDefault,V&&(Gn(b),kt(et,"touchforcechange",Gn)),b.changedTouches?(b=Gt=b.changedTouches[0],We=b.identifier):b.pointerId?We=b.pointerId:Gt=We=null,ch++,N9(le),fe=d.pointerY=b.pageY,de=d.pointerX=b.pageX,wt(d,"pressInit","onPressInit"),(O||d.autoScroll)&&yf(t.parentNode),t.parentNode&&d.autoScroll&&!N&&!a&&t.parentNode._gsMaxScrollX&&!tr.parentNode&&!t.getBBox&&(tr.style.width=t.parentNode.scrollWidth+"px",t.parentNode.appendChild(tr)),ss(),d.tween&&d.tween.kill(),d.isThrowing=!1,xe.killTweensOf(N||t,p,!0),N&&xe.killTweensOf(t,{scrollTo:1},!0),d.tween=d.lockedAxis=null,(i.zIndexBoost||!a&&!N&&i.zIndexBoost!==!1)&&(t.style.zIndex=e.zIndex++),d.isPressed=!0,St=!!(i.onDrag||d._listeners.drag),bt=!!(i.onMove||d._listeners.move),i.cursor!==!1||i.activeCursor)for(R=_.length;--R>-1;)xe.set(_[R],{cursor:i.activeCursor||i.cursor||(tl==="grab"?"grabbing":tl)});wt(d,"press","onPress")},os=function(b){var F=b,R,B,J,ie,Ie,ce;if(!W||km||!d.isPressed||!b){V&&b&&W&&Gn(b);return}if(d.pointerEvent=b,R=b.changedTouches,R){if(b=R[0],b!==Gt&&b.identifier!==We){for(ie=R.length;--ie>-1&&(b=R[ie]).identifier!==We&&b.target!==t;);if(ie<0)return}}else if(b.pointerId&&We&&b.pointerId!==We)return;if(v&&O&&!$&&(qn.x=b.pageX-(A?jo(D):0),qn.y=b.pageY-(A?zo(D):0),C&&C.apply(qn,qn),B=qn.x,J=qn.y,Ie=Math.abs(B-de),ce=Math.abs(J-fe),(Ie!==ce&&(Ie>f||ce>f)||el&&O===$)&&($=Ie>ce&&u?"x":"y",O&&$!==O&&kt(et,"touchforcechange",Gn),d.vars.lockAxisOnTouchScroll!==!1&&u&&h&&(d.lockedAxis=$==="x"?"y":"x",Pr(d.vars.onLockAxis)&&d.vars.onLockAxis.call(d,F)),el&&O===$))){ii(F);return}!d.allowEventDefault&&(!O||$&&O!==$)&&F.cancelable!==!1?(Gn(F),V=!0):V&&(V=!1),d.autoScroll&&(m=!0),Ra(b.pageX,b.pageY,bt)},Ra=function(b,F,R){var B=1-d.dragResistance,J=1-d.edgeResistance,ie=d.pointerX,Ie=d.pointerY,ce=Z,Xe=d.x,Oe=d.y,Qe=d.endX,yt=d.endY,Qt=d.endRotation,Yi=q,jn,wr,qt,vt,ud,ri;d.pointerX=b,d.pointerY=F,A&&(b-=jo(D),F-=zo(D)),a?(vt=Math.atan2(M.y-F,b-M.x)*_w,ud=d.y-vt,ud>180?(Z-=360,d.y=vt):ud<-180&&(Z+=360,d.y=vt),d.x!==ne||Math.abs(Z-vt)>f?(d.y=vt,qt=ne+(Z-vt)*B):qt=ne):(C&&(ri=b*C.a+F*C.c+C.e,F=b*C.b+F*C.d+C.f,b=ri),wr=F-fe,jn=b-de,wr<f&&wr>-f&&(wr=0),jn<f&&jn>-f&&(jn=0),(d.lockAxis||d.lockedAxis)&&(jn||wr)&&(ri=d.lockedAxis,ri||(d.lockedAxis=ri=u&&Math.abs(jn)>Math.abs(wr)?"y":h?"x":null,ri&&Pr(d.vars.onLockAxis)&&d.vars.onLockAxis.call(d,d.pointerEvent)),ri==="y"?wr=0:ri==="x"&&(jn=0)),qt=br(ne+jn*B),vt=br(Z+wr*B)),(te||be||Fe)&&(d.x!==qt||d.y!==vt&&!a)&&(Fe&&(co.x=qt,co.y=vt,ri=Fe(co),qt=br(ri.x),vt=br(ri.y)),te&&(qt=br(te(qt))),be&&(vt=br(be(vt)))),he&&(qt>Se?qt=Se+Math.round((qt-Se)*J):qt<_e&&(qt=_e+Math.round((qt-_e)*J)),a||(vt>He?vt=Math.round(He+(vt-He)*J):vt<Ce&&(vt=Math.round(Ce+(vt-Ce)*J)))),(d.x!==qt||d.y!==vt&&!a)&&(a?(d.endRotation=d.x=d.endX=qt,q=!0):(h&&(d.y=d.endY=vt,q=!0),u&&(d.x=d.endX=qt,q=!0)),!R||wt(d,"move","onMove")!==!1?!d.isDragging&&d.isPressed&&(d.isDragging=ae=!0,wt(d,"dragstart","onDragStart")):(d.pointerX=ie,d.pointerY=Ie,Z=ce,d.x=Xe,d.y=Oe,d.endX=Qe,d.endY=yt,d.endRotation=Qt,q=Yi))},ii=function ue(b,F){if(!W||!d.isPressed||b&&We!=null&&!F&&(b.pointerId&&b.pointerId!==We&&b.target!==t||b.changedTouches&&!D9(b.changedTouches,We))){V&&b&&W&&Gn(b);return}d.isPressed=!1;var R=b,B=d.isDragging,J=d.vars.allowContextMenu&&b&&(b.ctrlKey||b.which>2),ie=xe.delayedCall(.001,zn),Ie,ce,Xe,Oe,Qe;if(v?(It(v,"touchend",ue),It(v,"touchmove",os),It(v,"touchcancel",ue),It(D,"touchstart",ww)):It(D,"mousemove",os),It(et,"touchforcechange",Gn),(!mu||!v)&&(It(D,"mouseup",ue),b&&b.target&&It(b.target,"mouseup",ue)),q=!1,B&&(g=gw=Ir(),d.isDragging=!1),vw(le),y&&!J){b&&(It(b.target,"change",ue),d.pointerEvent=R),Zc(_,!1),wt(d,"release","onRelease"),wt(d,"click","onClick"),y=!1;return}for(ce=_.length;--ce>-1;)vf(_[ce],"cursor",i.cursor||(i.cursor!==!1?tl:null));if(ch--,b){if(Ie=b.changedTouches,Ie&&(b=Ie[0],b!==Gt&&b.identifier!==We)){for(ce=Ie.length;--ce>-1&&(b=Ie[ce]).identifier!==We&&b.target!==t;);if(ce<0&&!F)return}d.pointerEvent=R,d.pointerX=b.pageX,d.pointerY=b.pageY}return J&&R?(Gn(R),V=!0,wt(d,"release","onRelease")):R&&!B?(V=!1,L&&(i.snap||i.bounds)&&io(i.inertia||i.throwProps),wt(d,"release","onRelease"),(!el||R.type!=="touchmove")&&R.type.indexOf("cancel")===-1&&(wt(d,"click","onClick"),Ir()-P<300&&wt(d,"doubleclick","onDoubleClick"),Oe=R.target||t,P=Ir(),Qe=function(){P!==z&&d.enabled()&&!d.isPressed&&!R.defaultPrevented&&(Oe.click?Oe.click():D.createEvent&&(Xe=D.createEvent("MouseEvents"),Xe.initMouseEvent("click",!0,!0,et,1,d.pointerEvent.screenX,d.pointerEvent.screenY,d.pointerX,d.pointerY,!1,!1,!1,!1,0,null),Oe.dispatchEvent(Xe)))},!el&&!R.defaultPrevented&&xe.delayedCall(.05,Qe))):(io(i.inertia||i.throwProps),!d.allowEventDefault&&R&&(i.dragClickables!==!1||!I.call(d,R.target))&&B&&(!O||$&&O===$)&&R.cancelable!==!1?(V=!0,Gn(R)):V=!1,wt(d,"release","onRelease")),Ot()&&ie.duration(d.tween.duration()),B&&wt(d,"dragend","onDragEnd"),!0},Rc=function(b){if(b&&d.isDragging&&!N){var F=b.target||t.parentNode,R=F.scrollLeft-F._gsScrollX,B=F.scrollTop-F._gsScrollY;(R||B)&&(C?(de-=R*C.a+B*C.c,fe-=B*C.d+R*C.b):(de-=R,fe-=B),F._gsScrollX+=R,F._gsScrollY+=B,Ra(d.pointerX,d.pointerY))}},Mm=function(b){var F=Ir(),R=F-P<100,B=F-g<50,J=R&&z===P,ie=d.pointerEvent&&d.pointerEvent.defaultPrevented,Ie=R&&H===P,ce=b.isTrusted||b.isTrusted==null&&R&&J;if((J||B&&d.vars.suppressClickOnDrag!==!1)&&b.stopImmediatePropagation&&b.stopImmediatePropagation(),R&&!(d.pointerEvent&&d.pointerEvent.defaultPrevented)&&(!J||ce&&!Ie)){ce&&J&&(H=P),z=P;return}(d.isPressed||B||R)&&(!ce||!b.detail||!R||ie)&&Gn(b),!R&&!B&&!ae&&(b&&b.target&&(d.pointerEvent=b),wt(d,"click","onClick"))},Dm=function(b){return C?{x:b.x*C.a+b.y*C.c+C.e,y:b.x*C.b+b.y*C.d+C.f}:{x:b.x,y:b.y}};return K=e.get(t),K&&K.kill(),r.startDrag=function(ue,b){var F,R,B,J;vr(ue||d.pointerEvent,!0),b&&!d.hitTest(ue||d.pointerEvent)&&(F=uo(ue||d.pointerEvent),R=uo(t),B=Dm({x:F.left+F.width/2,y:F.top+F.height/2}),J=Dm({x:R.left+R.width/2,y:R.top+R.height/2}),de-=B.x-J.x,fe-=B.y-J.y),d.isDragging||(d.isDragging=ae=!0,wt(d,"dragstart","onDragStart"))},r.drag=os,r.endDrag=function(ue){return ii(ue||d.pointerEvent,!0)},r.timeSinceDrag=function(){return d.isDragging?0:(Ir()-g)/1e3},r.timeSinceClick=function(){return(Ir()-P)/1e3},r.hitTest=function(ue,b){return e.hitTest(d.target,ue,b)},r.getDirection=function(ue,b){var F=ue==="velocity"&&si?ue:Sl(ue)&&!a?"element":"start",R,B,J,ie,Ie,ce;return F==="element"&&(Ie=uo(d.target),ce=uo(ue)),R=F==="start"?d.x-ne:F==="velocity"?si.getVelocity(t,l):Ie.left+Ie.width/2-(ce.left+ce.width/2),a?R<0?"counter-clockwise":"clockwise":(b=b||2,B=F==="start"?d.y-Z:F==="velocity"?si.getVelocity(t,c):Ie.top+Ie.height/2-(ce.top+ce.height/2),J=Math.abs(R/B),ie=J<1/b?"":R<0?"left":"right",J<b&&(ie!==""&&(ie+="-"),ie+=B<0?"up":"down"),ie)},r.applyBounds=function(ue,b){var F,R,B,J,ie,Ie;if(ue&&i.bounds!==ue)return i.bounds=ue,d.update(!0,b);if(ye(!0),_t(),he&&!Ot()){if(F=d.x,R=d.y,F>Se?F=Se:F<_e&&(F=_e),R>He?R=He:R<Ce&&(R=Ce),(d.x!==F||d.y!==R)&&(B=!0,d.x=d.endX=F,a?d.endRotation=F:d.y=d.endY=R,q=!0,le(!0),d.autoScroll&&!d.isDragging))for(yf(t.parentNode),J=t,Ji.scrollTop=et.pageYOffset!=null?et.pageYOffset:D.documentElement.scrollTop!=null?D.documentElement.scrollTop:D.body.scrollTop,Ji.scrollLeft=et.pageXOffset!=null?et.pageXOffset:D.documentElement.scrollLeft!=null?D.documentElement.scrollLeft:D.body.scrollLeft;J&&!Ie;)Ie=ha(J.parentNode),ie=Ie?Ji:J.parentNode,h&&ie.scrollTop>ie._gsMaxScrollY&&(ie.scrollTop=ie._gsMaxScrollY),u&&ie.scrollLeft>ie._gsMaxScrollX&&(ie.scrollLeft=ie._gsMaxScrollX),J=ie;d.isThrowing&&(B||d.endX>Se||d.endX<_e||d.endY>He||d.endY<Ce)&&io(i.inertia||i.throwProps,B)}return d},r.update=function(ue,b,F){if(b&&d.isPressed){var R=ms(t),B=ee.apply({x:d.x-ne,y:d.y-Z}),J=ms(t.parentNode,!0);J.apply({x:R.e-B.x,y:R.f-B.y},B),d.x-=B.x-J.e,d.y-=B.y-J.f,le(!0),ss()}var ie=d.x,Ie=d.y;return yr(!b),ue?d.applyBounds():(q&&F&&le(!0),ye(!0)),b&&(Ra(d.pointerX,d.pointerY),q&&le(!0)),d.isPressed&&!b&&(u&&Math.abs(ie-d.x)>.01||h&&Math.abs(Ie-d.y)>.01&&!a)&&ss(),d.autoScroll&&(yf(t.parentNode,d.isDragging),m=d.isDragging,le(!0),Ew(t,Rc),Tw(t,Rc)),d},r.enable=function(ue){var b={lazy:!0},F,R,B;if(i.cursor!==!1&&(b.cursor=i.cursor||tl),xe.utils.checkPrefix("touchCallout")&&(b.touchCallout="none"),ue!=="soft"){for(mw(_,u===h?"none":i.allowNativeTouchScrolling&&t.scrollHeight===t.clientHeight==(t.scrollWidth===t.clientHeight)||i.allowEventDefault?"manipulation":u?"pan-y":"pan-x"),R=_.length;--R>-1;)B=_[R],mu||kt(B,"mousedown",vr),kt(B,"touchstart",vr),kt(B,"click",Mm,!0),xe.set(B,b),B.getBBox&&B.ownerSVGElement&&u!==h&&xe.set(B.ownerSVGElement,{touchAction:i.allowNativeTouchScrolling||i.allowEventDefault?"manipulation":u?"pan-y":"pan-x"}),i.allowContextMenu||kt(B,"contextmenu",oe);Zc(_,!1)}return Tw(t,Rc),W=!0,si&&ue!=="soft"&&si.track(N||t,o?"x,y":a?"rotation":"top,left"),t._gsDragID=F="d"+P9++,Bo[F]=d,N&&(N.enable(),N.element._gsDragID=F),(i.bounds||a)&&ss(),i.bounds&&d.applyBounds(),d},r.disable=function(ue){for(var b=d.isDragging,F=_.length,R;--F>-1;)vf(_[F],"cursor",null);if(ue!=="soft"){for(mw(_,null),F=_.length;--F>-1;)R=_[F],vf(R,"touchCallout",null),It(R,"mousedown",vr),It(R,"touchstart",vr),It(R,"click",Mm,!0),It(R,"contextmenu",oe);Zc(_,!0),v&&(It(v,"touchcancel",ii),It(v,"touchend",ii),It(v,"touchmove",os)),It(D,"mouseup",ii),It(D,"mousemove",os)}return Ew(t,Rc),W=!1,si&&ue!=="soft"&&(si.untrack(N||t,o?"x,y":a?"rotation":"top,left"),d.tween&&d.tween.kill()),N&&N.disable(),vw(le),d.isDragging=d.isPressed=y=!1,b&&wt(d,"dragend","onDragEnd"),d},r.enabled=function(ue,b){return arguments.length?ue?d.enable(b):d.disable(b):W},r.kill=function(){return d.isThrowing=!1,d.tween&&d.tween.kill(),d.disable(),xe.set(_,{clearProps:"userSelect"}),delete Bo[t._gsDragID],d},r.revert=function(){this.kill(),this.styles&&this.styles.revert()},~s.indexOf("scroll")&&(N=r.scrollProxy=new $9(t,k9({onKill:function(){d.isPressed&&ii(null)}},i)),t.style.overflowY=h&&!a_?"auto":"hidden",t.style.overflowX=u&&!a_?"auto":"hidden",t=N.content),a?p.rotation=1:(u&&(p[l]=1),h&&(p[c]=1)),x.force3D="force3D"in i?i.force3D:!0,bA(pw(r)),r.enable(),r}return e.register=function(i){xe=i,Tf()},e.create=function(i,r){return o_||Tf(!0),Fr(i).map(function(s){return new e(s,r)})},e.get=function(i){return Bo[(Fr(i)[0]||{})._gsDragID]},e.timeSinceDrag=function(){return(Ir()-gw)/1e3},e.hitTest=function(i,r,s){if(i===r)return!1;var o=uo(i),a=uo(r),l=o.top,c=o.left,u=o.right,h=o.bottom,f=o.width,d=o.height,_=a.left>u||a.right<c||a.top>h||a.bottom<l,p,g,m;return _||!s?!_:(m=(s+"").indexOf("%")!==-1,s=parseFloat(s)||0,p={left:Math.max(c,a.left),top:Math.max(l,a.top)},p.width=Math.min(u,a.right)-p.left,p.height=Math.min(h,a.bottom)-p.top,p.width<0||p.height<0?!1:m?(s*=.01,g=p.width*p.height,g>=f*d*s||g>=a.width*a.height*s):p.width>s&&p.height>s)},e}(B9);M9(da.prototype,{pointerX:0,pointerY:0,startX:0,startY:0,deltaX:0,deltaY:0,isDragging:!1,isPressed:!1});da.zIndex=1e3;da.version="3.12.5";CA()&&xe.registerPlugin(da);const z9="/museum-rock/img/svg/exhibitions-close.svg",j9={props:{block:Object}},PA=n=>(qi("data-v-a87b29ce"),n=n(),Hi(),n),G9={class:"exhibitions-gallery__item"},q9=["src"],H9={class:"exhibitions-gallery__item-mask"},W9=PA(()=>j("img",{src:z9,alt:"Крест",class:"exhibitions-gallery__item-close"},null,-1)),K9={class:"exhibitions-gallery__item-text"},Y9={class:"exhibitions-gallery__item-title"},X9={class:"exhibitions-gallery__item-description"},Q9=PA(()=>j("span",null,"Подробнее",-1));function J9(n,e,t,i,r,s){const o=it("router-link");return Te(),Ge("div",G9,[j("img",{src:`${t.block.image}`,alt:"Категория экспонатов"},null,8,q9),j("div",H9,[W9,j("div",K9,[j("h3",Y9,Zn(t.block.title),1),j("p",X9,Zn(t.block.description),1),$e(o,{to:`/exhibitions/categories/${t.block.id}`,class:"exhibitions-gallery__item-button"},{default:ci(()=>[Q9]),_:1},8,["to"])])])])}const Z9=pt(j9,[["render",J9],["__scopeId","data-v-a87b29ce"]]),ez={components:{MyLoader:um,ExhibitionsGalleryBlock:Z9},data(){return{timesToRepeat:16,draggableInstance:null,itemActiveElement:null}},methods:{...sd({fetchExhibitions:"exhibitions/fetchExhibitions"}),createDraggable(){this.draggableInstance=da.create(".exhibitions-gallery__list",{bounds:document.querySelector(".exhibitions-gallery"),inertia:!0})[0]},destroyDraggable(){this.draggableInstance&&this.draggableInstance.destroy()},centerItem(n){if(this.itemActiveElement){if(this.$refs.draggableContainer!==null&&this.$refs.draggableContainer!==void 0){const e=this.$refs.draggableSection;this.$refs.draggableContainer.children[n].classList.remove("exhibitions-gallery__item-active"),e.classList.remove("exhibitions-gallery-active"),this.draggableInstance.enabled(!0),this.itemActiveElement=null}}else{const e=this.$refs.draggableSection,t=this.$refs.draggableContainer,i=t.children[n];this.itemActiveElement=i;const r=i.getBoundingClientRect(),s=window.innerWidth/2,o=window.innerHeight/2;i.classList.add("exhibitions-gallery__item-active"),e.classList.add("exhibitions-gallery-active");const a=this.draggableInstance.x-(r.left-s)-r.width/2,l=this.draggableInstance.y-(r.top-o)-r.height/2;requestAnimationFrame(()=>{r_.to(t,{x:a,y:l,duration:.5})}),this.draggableInstance.enabled(!1)}}},mounted(){this.fetchExhibitions(),this.$nextTick(()=>{r_.registerPlugin(da),this.createDraggable()})},beforeDestroy(){this.destroyDraggable()},computed:{...rd({isLoading:n=>n.exhibitions.isLoading,exhibitions:n=>n.exhibitions.exhibitions}),multipliedItems(){let n=[];for(let e=0;e<this.timesToRepeat;e++)n=n.concat(this.exhibitions);return n}}},tz=n=>(qi("data-v-21a90f5a"),n=n(),Hi(),n),nz={ref:"draggableSection",class:"exhibitions-gallery"},iz={class:"exhibitions-gallery__title"},rz=tz(()=>j("span",null,"Все экспонаты",-1));function sz(n,e,t,i,r,s){const o=it("my-loader"),a=it("exhibitions-gallery-block"),l=it("router-link");return Te(),Ge("section",nz,[j("h1",iz,[qo(" Музей камня "),j("span",{class:pi(["exhibitions-gallery__loading",{loading:n.isLoading}])},[$e(o)],2)]),j("div",{ref:"draggableContainer",class:pi(["exhibitions-gallery__list",{loading:n.isLoading}])},[(Te(!0),Ge(Lt,null,pa(s.multipliedItems,(c,u)=>(Te(),ei(a,{key:c.id,onClick:h=>s.centerItem(u),block:c},null,8,["onClick","block"]))),128))],2),j("div",{class:pi(["exhibitions-gallery__button",{loading:n.isLoading}])},[n.exhibitions[0]?(Te(),ei(l,{key:0,to:`/exhibitions/categories/${n.exhibitions[0].id}`,class:"exhibitions-gallery__button-item"},{default:ci(()=>[rz]),_:1},8,["to"])):Ho("",!0)],2)],512)}const oz=pt(ez,[["render",sz],["__scopeId","data-v-21a90f5a"]]),az={components:{ExhibitionsGallery:oz}};function lz(n,e,t,i,r,s){const o=it("exhibitions-gallery");return Te(),ei(o)}const cz=pt(az,[["render",lz]]),uz={data(){return{activeSection:0}},methods:{toggleSection(n){n===this.activeSection?this.activeSection=0:this.activeSection=n}}},Nm=n=>(qi("data-v-3b5947d7"),n=n(),Hi(),n),hz={class:"hero"},dz={class:"hero__inner"},fz={class:"hero__wrapper"},pz={class:"hero__master"},_z=bT('<div class="hero__section" data-v-3b5947d7><div style="width:1100px;margin:0px auto;position:relative;" data-v-3b5947d7><div class="hero__info" data-v-3b5947d7><div data-v-3b5947d7><svg width="80" height="64" viewBox="0 0 152 138" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-3b5947d7><path d="M91.98 39.04H.53v98.31h31.62V66.57h28.21v70.78h31.62V66.57h28.22v70.78h31.64V66.47l-14.68-27.43H91.98ZM132.12 28.34 117.44.92H.95v27.53h131.17v-.1Z" fill="#4F4898" data-v-3b5947d7></path></svg></div><p data-v-3b5947d7><span data-v-3b5947d7>Креативное пространство, которое объединяет культурные события города, кофейню, галерею современного искусства и шоурум с изделиями красноярских производителей в одном месте.</span></p></div></div></div>',1),gz=Nm(()=>j("div",{style:{width:"1100px",margin:"0px auto",position:"relative"}},[j("div",{class:"hero__info"},[j("h3",null,[j("span",null,"Галерея")]),j("p",null," Выставочное пространство, где мы показываем современное искусство и другие кретивные направления. Экспозиции обновляются раз в месяц. Работы доступны к приобретению. "),j("a",{href:"/gallery"},"Перейти")])],-1)),mz=[gz],yz=Nm(()=>j("div",{style:{width:"1100px",margin:"0px auto",position:"relative"}},[j("div",{class:"hero__info"},[j("h3",null,[j("span",null,"Онлайн шоурум")]),j("p",null," Здесь представлены товары, созданные мастерами Красноярского края. Знакомьтесь с брендами и приобретайте онлайн. "),j("a",{href:"/showroom"},"Перейти")])],-1)),vz=[yz],wz=Nm(()=>j("div",{style:{width:"1100px",margin:"0px auto",position:"relative"}},[j("div",{class:"hero__info"},[j("h3",null,[j("span",null,"Оффлайн шоурум")]),j("p",null," Пространство, где можно найти эксклюзивные вещи красноярских производителей, выбрать особенный подарок или порадовать себя сибирскими брендами высокого уровня. ")])],-1)),Tz=[wz];function Ez(n,e,t,i,r,s){return Te(),Ge("section",hz,[j("div",dz,[j("div",fz,[j("div",pz,[_z,j("div",{class:pi(["hero__section",{"hero__section-active":r.activeSection===1,"hero__section-previous":r.activeSection!==1&&r.activeSection!==0}]),onClick:e[0]||(e[0]=o=>s.toggleSection(1))},mz,2),j("div",{class:pi(["hero__section",{"hero__section-active":r.activeSection===2,"hero__section-previous":r.activeSection==3}]),onClick:e[1]||(e[1]=o=>s.toggleSection(2))},vz,2),j("div",{class:pi(["hero__section",{"hero__section-active":r.activeSection===3}]),onClick:e[2]||(e[2]=o=>s.toggleSection(3))},Tz,2)])])])])}const Sz=pt(uz,[["render",Ez],["__scopeId","data-v-3b5947d7"]]),bz={components:{HeadSection:Sz}};function Iz(n,e,t,i,r,s){const o=it("head-section");return Te(),ei(o)}const Cz=pt(bz,[["render",Iz]]),Az=[{lastname:"Бочаров",name:"Л. Д.",imgUrl:"people1.jpg",description:"Родился в 1932 г. в Курской области. После службы в армии закончил Старооскольский геологоразведочный техникум по специальности гидрогеолог. С 1956 по 1967 года работал в полевых геологических партиях. После окончания Магнитогорского горно-металлургического института получил диплом по специальности инженер химик-технолог. С 1967 по 2003 год работал на комбинате «Магнезит» в должности начальника лаборатории физико-механических исследований,ведущего инженера, начальника специализированной лаборатории физико-химических испытаний. Автор и соавтор 7 изобретений, 70 научных статей, опубликованных в технических журналах и сборниках. Соавтор книги по качеству огнеупоров."},{lastname:"Рассахацкая",name:"Ирина Григорьевна",imgUrl:"people2.jpg",description:'Педагог и краедев родилась 7 мая 1942 г. в Сатке. Окончила естественно-географическое отделение Челябинского государственного педагогического института в 1966 году. После этого работала в различных учебных заведениях, преподавая историю и географию. Благодаря инициативе Ирины Григорьевны в 1982 году был создан первый в Саткинском районе школьный геологический музей, в котором собраны образцы минералов и горных пород региона, а также геологическая библиотека. За свой вклад в геологоразведку и образование Ирина Григорьевна многократно награждалась различными грамотами и дипломами. В 1990 году стала научным сотрудником отдела "Природа" Саткинского краеведческого музея, где активно занималась сбором и изучением материалов о природе региона.'},{lastname:"Юровских",name:"Владимир Иванович",imgUrl:"people3.jpg",description:"Оснаватель саткинского юношеского геологического движения родился 12 июля 1933 г. в Копейске. Он родился в 1933 году в Копейске, Челябинская область. Окончив Челябинский государственный педагогический институт в 1959 году, он стал учителем истории в посёлке Сулея, а затем переехал в Сатку, где преподавал в школе рабочей молодёжи. С 1964 года Юровских возглавил геологический кружок в Сатке, став организатором «Клуба юных геологов» и юношеской геологической партии. Они начали создавать отряды юных геологов и геолого-поисковые экспедиции, исследуя Саткинский и Катав-Ивановский районы на предмет полезных ископаемых. Также Юровских организовал камнерезный кружок, который выполнял заказы для различных предприятий."}],xz={props:{item:Object}},Rz=n=>(qi("data-v-9e70e826"),n=n(),Hi(),n),Pz={class:"people-item"},Oz=["src"],kz={class:"people-item__text"},Nz={class:"people-item__name"},Mz=Rz(()=>j("br",null,null,-1)),Dz={class:"people-item__date"};function Lz(n,e,t,i,r,s){return Te(),Ge("div",Pz,[j("img",{class:"people-item__image",src:"img/people1.jpg",alt:"Обложка программы"},null,8,Oz),j("div",kz,[j("div",Nz,[qo(Zn(t.item.lastname)+" ",1),Mz,qo(" "+Zn(t.item.name),1)]),j("div",Dz,Zn(t.item.description),1)])])}const Vz=pt(xz,[["render",Lz],["__scopeId","data-v-9e70e826"]]),Fz={components:{PeopleItem:Vz},data(){return{people:[]}},mounted(){this.people=Az}},Uz={class:"people-list"};function $z(n,e,t,i,r,s){const o=it("people-item");return Te(),Ge("div",Uz,[(Te(!0),Ge(Lt,null,pa(r.people,a=>(Te(),ei(o,{item:a,key:a.name},null,8,["item"]))),128))])}const Bz=pt(Fz,[["render",$z],["__scopeId","data-v-c988ccfb"]]),zz={components:{PeopleList:Bz}},jz=n=>(qi("data-v-5be45179"),n=n(),Hi(),n),Gz={class:"people"},qz={class:"container"},Hz=jz(()=>j("h2",{class:"people__title"},"Основатели",-1));function Wz(n,e,t,i,r,s){const o=it("people-list");return Te(),Ge("section",Gz,[j("div",qz,[Hz,$e(o)])])}const Kz=pt(zz,[["render",Wz],["__scopeId","data-v-5be45179"]]),Yz={components:{PeopleSection:Kz}};function Xz(n,e,t,i,r,s){const o=it("people-section");return Te(),ei(o)}const Qz=pt(Yz,[["render",Xz]]),Jz={data(){return{}},props:{event:Object},methods:{}},Zz={class:"timeline-item grid"},e3={key:0,class:"timeline-item__cap"},t3={class:"timeline-item__block"},n3={class:"timeline-item__year"},i3={class:"timeline-item__title"},r3={class:"timeline-item__description"};function s3(n,e,t,i,r,s){return Te(),Ge("div",Zz,[t.event.id%2?(Te(),Ge("div",e3)):Ho("",!0),j("div",t3,[j("div",n3,Zn(t.event.year),1),j("h3",i3,Zn(t.event.name),1),j("p",r3,Zn(t.event.description),1)])])}const o3=pt(Jz,[["render",s3],["__scopeId","data-v-16358549"]]),a3={components:{TimelineItem:o3,MyLoader:um},data(){return{}},mounted(){this.fetchEvents()},computed:{...rd({isLoading:n=>n.timeline.isLoading,events:n=>n.timeline.events})},methods:{...sd({fetchEvents:"timeline/fetchEvents"})}},l3=n=>(qi("data-v-d2f73013"),n=n(),Hi(),n),c3={class:"timeline"},u3={class:"container"},h3={key:0,class:"timeline__inner"},d3=l3(()=>j("div",{class:"timeline__stick"},null,-1)),f3={key:1,class:"timeline__loader"};function p3(n,e,t,i,r,s){const o=it("timeline-item"),a=it("my-loader");return Te(),Ge("section",c3,[j("div",u3,[n.isLoading?(Te(),Ge("div",f3,[$e(a)])):(Te(),Ge("div",h3,[(Te(!0),Ge(Lt,null,pa(n.events,l=>(Te(),ei(o,{key:l.id,event:l},null,8,["event"]))),128)),d3]))])])}const _3=pt(a3,[["render",p3],["__scopeId","data-v-d2f73013"]]),g3={components:{TimelineSection:_3}};function m3(n,e,t,i,r,s){const o=it("timeline-section");return Te(),ei(o)}const y3=pt(g3,[["render",m3]]),v3=[{path:"/",component:Cz,name:"Home"},{path:"/exhibitions",component:cz},{path:"/exhibitions/categories",component:XU,children:[{path:":id",component:a$}]},{path:"/people",component:Qz},{path:"/timeline",component:y3},{path:"/afisha",component:o4}],OA=H2({history:T2("/museum-rock"),routes:v3});OA.beforeEach((n,e,t)=>{n.matched.length===0?t({name:"Home"}):t()});const w3={state:()=>({exhibitions:[],isLoading:!0}),mutations:{setLoading(n,e){n.isLoading=e},setExhibitions(n,e){n.exhibitions=e}},actions:{fetchExhibitions({commit:n}){const e=Kg(om,"exhibitions");OI(e,t=>{const i=t.docs.map((r,s)=>{const o=r.data(),a=o.items.map((l,c)=>({...l,id:c}));return{...o,id:s,items:a}});n("setExhibitions",i),setTimeout(()=>{n("setLoading",!1)},800)})}},namespaced:!0},T3={state:()=>({events:[],isLoading:!0}),mutations:{setLoading(n,e){n.isLoading=e},setEvents(n,e){n.events=e}},actions:{fetchEvents({commit:n}){const e=AI(Kg(om,"timeline"),nF("year"));OI(e,t=>{const i=t.docs.map((r,s)=>({...r.data(),id:s}));n("setEvents",i),setTimeout(()=>{n("setLoading",!1)},800)})}},namespaced:!0},E3=BU({modules:{exhibitions:w3,timeline:T3}}),S3=Hx(bU);S3.use(LF,{firebaseApp:KI}).use(OA).use(E3).mount("#app");
