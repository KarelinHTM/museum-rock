(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function t(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=t(r);fetch(r.href,s)}})();/**
* @vue/shared v3.4.25
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function c_(n,e){const t=new Set(n.split(","));return e?i=>t.has(i.toLowerCase()):i=>t.has(i)}const it={},Eo=[],Xn=()=>{},xA=()=>!1,ch=n=>n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&(n.charCodeAt(2)>122||n.charCodeAt(2)<97),u_=n=>n.startsWith("onUpdate:"),Ut=Object.assign,h_=(n,e)=>{const t=n.indexOf(e);t>-1&&n.splice(t,1)},RA=Object.prototype.hasOwnProperty,De=(n,e)=>RA.call(n,e),ge=Array.isArray,So=n=>uh(n)==="[object Map]",ww=n=>uh(n)==="[object Set]",we=n=>typeof n=="function",Nt=n=>typeof n=="string",Xs=n=>typeof n=="symbol",ut=n=>n!==null&&typeof n=="object",Tw=n=>(ut(n)||we(n))&&we(n.then)&&we(n.catch),Ew=Object.prototype.toString,uh=n=>Ew.call(n),PA=n=>uh(n).slice(8,-1),Sw=n=>uh(n)==="[object Object]",d_=n=>Nt(n)&&n!=="NaN"&&n[0]!=="-"&&""+parseInt(n,10)===n,Za=c_(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),hh=n=>{const e=Object.create(null);return t=>e[t]||(e[t]=n(t))},OA=/-(\w)/g,Ui=hh(n=>n.replace(OA,(e,t)=>t?t.toUpperCase():"")),kA=/\B([A-Z])/g,da=hh(n=>n.replace(kA,"-$1").toLowerCase()),dh=hh(n=>n.charAt(0).toUpperCase()+n.slice(1)),cd=hh(n=>n?`on${dh(n)}`:""),Gr=(n,e)=>!Object.is(n,e),Jc=(n,e)=>{for(let t=0;t<n.length;t++)n[t](e)},bw=(n,e,t)=>{Object.defineProperty(n,e,{configurable:!0,enumerable:!1,value:t})},wf=n=>{const e=parseFloat(n);return isNaN(e)?n:e};let Om;const Iw=()=>Om||(Om=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function f_(n){if(ge(n)){const e={};for(let t=0;t<n.length;t++){const i=n[t],r=Nt(i)?LA(i):f_(i);if(r)for(const s in r)e[s]=r[s]}return e}else if(Nt(n)||ut(n))return n}const NA=/;(?![^(]*\))/g,MA=/:([^]+)/,DA=/\/\*[^]*?\*\//g;function LA(n){const e={};return n.replace(DA,"").split(NA).forEach(t=>{if(t){const i=t.split(MA);i.length>1&&(e[i[0].trim()]=i[1].trim())}}),e}function fi(n){let e="";if(Nt(n))e=n;else if(ge(n))for(let t=0;t<n.length;t++){const i=fi(n[t]);i&&(e+=i+" ")}else if(ut(n))for(const t in n)n[t]&&(e+=t+" ");return e.trim()}const VA="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",FA=c_(VA);function Cw(n){return!!n||n===""}const rr=n=>Nt(n)?n:n==null?"":ge(n)||ut(n)&&(n.toString===Ew||!we(n.toString))?JSON.stringify(n,Aw,2):String(n),Aw=(n,e)=>e&&e.__v_isRef?Aw(n,e.value):So(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((t,[i,r],s)=>(t[ud(i,s)+" =>"]=r,t),{})}:ww(e)?{[`Set(${e.size})`]:[...e.values()].map(t=>ud(t))}:Xs(e)?ud(e):ut(e)&&!ge(e)&&!Sw(e)?String(e):e,ud=(n,e="")=>{var t;return Xs(n)?`Symbol(${(t=n.description)!=null?t:e})`:n};/**
* @vue/reactivity v3.4.25
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let si;class UA{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this.parent=si,!e&&si&&(this.index=(si.scopes||(si.scopes=[])).push(this)-1)}get active(){return this._active}run(e){if(this._active){const t=si;try{return si=this,e()}finally{si=t}}}on(){si=this}off(){si=this.parent}stop(e){if(this._active){let t,i;for(t=0,i=this.effects.length;t<i;t++)this.effects[t].stop();for(t=0,i=this.cleanups.length;t<i;t++)this.cleanups[t]();if(this.scopes)for(t=0,i=this.scopes.length;t<i;t++)this.scopes[t].stop(!0);if(!this.detached&&this.parent&&!e){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.parent=void 0,this._active=!1}}}function $A(n,e=si){e&&e.active&&e.effects.push(n)}function BA(){return si}let bs;class p_{constructor(e,t,i,r){this.fn=e,this.trigger=t,this.scheduler=i,this.active=!0,this.deps=[],this._dirtyLevel=4,this._trackId=0,this._runnings=0,this._shouldSchedule=!1,this._depsLength=0,$A(this,r)}get dirty(){if(this._dirtyLevel===2||this._dirtyLevel===3){this._dirtyLevel=1,Qr();for(let e=0;e<this._depsLength;e++){const t=this.deps[e];if(t.computed&&(zA(t.computed),this._dirtyLevel>=4))break}this._dirtyLevel===1&&(this._dirtyLevel=0),Jr()}return this._dirtyLevel>=4}set dirty(e){this._dirtyLevel=e?4:0}run(){if(this._dirtyLevel=0,!this.active)return this.fn();let e=Vr,t=bs;try{return Vr=!0,bs=this,this._runnings++,km(this),this.fn()}finally{Nm(this),this._runnings--,bs=t,Vr=e}}stop(){var e;this.active&&(km(this),Nm(this),(e=this.onStop)==null||e.call(this),this.active=!1)}}function zA(n){return n.value}function km(n){n._trackId++,n._depsLength=0}function Nm(n){if(n.deps.length>n._depsLength){for(let e=n._depsLength;e<n.deps.length;e++)xw(n.deps[e],n);n.deps.length=n._depsLength}}function xw(n,e){const t=n.get(e);t!==void 0&&e._trackId!==t&&(n.delete(e),n.size===0&&n.cleanup())}let Vr=!0,Tf=0;const Rw=[];function Qr(){Rw.push(Vr),Vr=!1}function Jr(){const n=Rw.pop();Vr=n===void 0?!0:n}function __(){Tf++}function g_(){for(Tf--;!Tf&&Ef.length;)Ef.shift()()}function Pw(n,e,t){if(e.get(n)!==n._trackId){e.set(n,n._trackId);const i=n.deps[n._depsLength];i!==e?(i&&xw(i,n),n.deps[n._depsLength++]=e):n._depsLength++}}const Ef=[];function Ow(n,e,t){__();for(const i of n.keys()){let r;i._dirtyLevel<e&&(r??(r=n.get(i)===i._trackId))&&(i._shouldSchedule||(i._shouldSchedule=i._dirtyLevel===0),i._dirtyLevel=e),i._shouldSchedule&&(r??(r=n.get(i)===i._trackId))&&(i.trigger(),(!i._runnings||i.allowRecurse)&&i._dirtyLevel!==2&&(i._shouldSchedule=!1,i.scheduler&&Ef.push(i.scheduler)))}g_()}const kw=(n,e)=>{const t=new Map;return t.cleanup=n,t.computed=e,t},Sf=new WeakMap,Is=Symbol(""),bf=Symbol("");function bn(n,e,t){if(Vr&&bs){let i=Sf.get(n);i||Sf.set(n,i=new Map);let r=i.get(t);r||i.set(t,r=kw(()=>i.delete(t))),Pw(bs,r)}}function sr(n,e,t,i,r,s){const o=Sf.get(n);if(!o)return;let a=[];if(e==="clear")a=[...o.values()];else if(t==="length"&&ge(n)){const l=Number(i);o.forEach((c,u)=>{(u==="length"||!Xs(u)&&u>=l)&&a.push(c)})}else switch(t!==void 0&&a.push(o.get(t)),e){case"add":ge(n)?d_(t)&&a.push(o.get("length")):(a.push(o.get(Is)),So(n)&&a.push(o.get(bf)));break;case"delete":ge(n)||(a.push(o.get(Is)),So(n)&&a.push(o.get(bf)));break;case"set":So(n)&&a.push(o.get(Is));break}__();for(const l of a)l&&Ow(l,4);g_()}const jA=c_("__proto__,__v_isRef,__isVue"),Nw=new Set(Object.getOwnPropertyNames(Symbol).filter(n=>n!=="arguments"&&n!=="caller").map(n=>Symbol[n]).filter(Xs)),Mm=GA();function GA(){const n={};return["includes","indexOf","lastIndexOf"].forEach(e=>{n[e]=function(...t){const i=Ge(this);for(let s=0,o=this.length;s<o;s++)bn(i,"get",s+"");const r=i[e](...t);return r===-1||r===!1?i[e](...t.map(Ge)):r}}),["push","pop","shift","unshift","splice"].forEach(e=>{n[e]=function(...t){Qr(),__();const i=Ge(this)[e].apply(this,t);return g_(),Jr(),i}}),n}function HA(n){Xs(n)||(n=String(n));const e=Ge(this);return bn(e,"has",n),e.hasOwnProperty(n)}class Mw{constructor(e=!1,t=!1){this._isReadonly=e,this._isShallow=t}get(e,t,i){const r=this._isReadonly,s=this._isShallow;if(t==="__v_isReactive")return!r;if(t==="__v_isReadonly")return r;if(t==="__v_isShallow")return s;if(t==="__v_raw")return i===(r?s?r1:Fw:s?Vw:Lw).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(i)?e:void 0;const o=ge(e);if(!r){if(o&&De(Mm,t))return Reflect.get(Mm,t,i);if(t==="hasOwnProperty")return HA}const a=Reflect.get(e,t,i);return(Xs(t)?Nw.has(t):jA(t))||(r||bn(e,"get",t),s)?a:In(a)?o&&d_(t)?a:a.value:ut(a)?r?$w(a):tc(a):a}}class Dw extends Mw{constructor(e=!1){super(!1,e)}set(e,t,i,r){let s=e[t];if(!this._isShallow){const l=El(s);if(!mu(i)&&!El(i)&&(s=Ge(s),i=Ge(i)),!ge(e)&&In(s)&&!In(i))return l?!1:(s.value=i,!0)}const o=ge(e)&&d_(t)?Number(t)<e.length:De(e,t),a=Reflect.set(e,t,i,r);return e===Ge(r)&&(o?Gr(i,s)&&sr(e,"set",t,i):sr(e,"add",t,i)),a}deleteProperty(e,t){const i=De(e,t);e[t];const r=Reflect.deleteProperty(e,t);return r&&i&&sr(e,"delete",t,void 0),r}has(e,t){const i=Reflect.has(e,t);return(!Xs(t)||!Nw.has(t))&&bn(e,"has",t),i}ownKeys(e){return bn(e,"iterate",ge(e)?"length":Is),Reflect.ownKeys(e)}}class qA extends Mw{constructor(e=!1){super(!0,e)}set(e,t){return!0}deleteProperty(e,t){return!0}}const WA=new Dw,KA=new qA,YA=new Dw(!0);const m_=n=>n,fh=n=>Reflect.getPrototypeOf(n);function xc(n,e,t=!1,i=!1){n=n.__v_raw;const r=Ge(n),s=Ge(e);t||(Gr(e,s)&&bn(r,"get",e),bn(r,"get",s));const{has:o}=fh(r),a=i?m_:t?w_:Sl;if(o.call(r,e))return a(n.get(e));if(o.call(r,s))return a(n.get(s));n!==r&&n.get(e)}function Rc(n,e=!1){const t=this.__v_raw,i=Ge(t),r=Ge(n);return e||(Gr(n,r)&&bn(i,"has",n),bn(i,"has",r)),n===r?t.has(n):t.has(n)||t.has(r)}function Pc(n,e=!1){return n=n.__v_raw,!e&&bn(Ge(n),"iterate",Is),Reflect.get(n,"size",n)}function Dm(n){n=Ge(n);const e=Ge(this);return fh(e).has.call(e,n)||(e.add(n),sr(e,"add",n,n)),this}function Lm(n,e){e=Ge(e);const t=Ge(this),{has:i,get:r}=fh(t);let s=i.call(t,n);s||(n=Ge(n),s=i.call(t,n));const o=r.call(t,n);return t.set(n,e),s?Gr(e,o)&&sr(t,"set",n,e):sr(t,"add",n,e),this}function Vm(n){const e=Ge(this),{has:t,get:i}=fh(e);let r=t.call(e,n);r||(n=Ge(n),r=t.call(e,n)),i&&i.call(e,n);const s=e.delete(n);return r&&sr(e,"delete",n,void 0),s}function Fm(){const n=Ge(this),e=n.size!==0,t=n.clear();return e&&sr(n,"clear",void 0,void 0),t}function Oc(n,e){return function(i,r){const s=this,o=s.__v_raw,a=Ge(o),l=e?m_:n?w_:Sl;return!n&&bn(a,"iterate",Is),o.forEach((c,u)=>i.call(r,l(c),l(u),s))}}function kc(n,e,t){return function(...i){const r=this.__v_raw,s=Ge(r),o=So(s),a=n==="entries"||n===Symbol.iterator&&o,l=n==="keys"&&o,c=r[n](...i),u=t?m_:e?w_:Sl;return!e&&bn(s,"iterate",l?bf:Is),{next(){const{value:h,done:f}=c.next();return f?{value:h,done:f}:{value:a?[u(h[0]),u(h[1])]:u(h),done:f}},[Symbol.iterator](){return this}}}}function vr(n){return function(...e){return n==="delete"?!1:n==="clear"?void 0:this}}function XA(){const n={get(s){return xc(this,s)},get size(){return Pc(this)},has:Rc,add:Dm,set:Lm,delete:Vm,clear:Fm,forEach:Oc(!1,!1)},e={get(s){return xc(this,s,!1,!0)},get size(){return Pc(this)},has:Rc,add:Dm,set:Lm,delete:Vm,clear:Fm,forEach:Oc(!1,!0)},t={get(s){return xc(this,s,!0)},get size(){return Pc(this,!0)},has(s){return Rc.call(this,s,!0)},add:vr("add"),set:vr("set"),delete:vr("delete"),clear:vr("clear"),forEach:Oc(!0,!1)},i={get(s){return xc(this,s,!0,!0)},get size(){return Pc(this,!0)},has(s){return Rc.call(this,s,!0)},add:vr("add"),set:vr("set"),delete:vr("delete"),clear:vr("clear"),forEach:Oc(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(s=>{n[s]=kc(s,!1,!1),t[s]=kc(s,!0,!1),e[s]=kc(s,!1,!0),i[s]=kc(s,!0,!0)}),[n,t,e,i]}const[QA,JA,ZA,e1]=XA();function y_(n,e){const t=e?n?e1:ZA:n?JA:QA;return(i,r,s)=>r==="__v_isReactive"?!n:r==="__v_isReadonly"?n:r==="__v_raw"?i:Reflect.get(De(t,r)&&r in i?t:i,r,s)}const t1={get:y_(!1,!1)},n1={get:y_(!1,!0)},i1={get:y_(!0,!1)};const Lw=new WeakMap,Vw=new WeakMap,Fw=new WeakMap,r1=new WeakMap;function s1(n){switch(n){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function o1(n){return n.__v_skip||!Object.isExtensible(n)?0:s1(PA(n))}function tc(n){return El(n)?n:v_(n,!1,WA,t1,Lw)}function Uw(n){return v_(n,!1,YA,n1,Vw)}function $w(n){return v_(n,!0,KA,i1,Fw)}function v_(n,e,t,i,r){if(!ut(n)||n.__v_raw&&!(e&&n.__v_isReactive))return n;const s=r.get(n);if(s)return s;const o=o1(n);if(o===0)return n;const a=new Proxy(n,o===2?i:t);return r.set(n,a),a}function el(n){return El(n)?el(n.__v_raw):!!(n&&n.__v_isReactive)}function El(n){return!!(n&&n.__v_isReadonly)}function mu(n){return!!(n&&n.__v_isShallow)}function Bw(n){return n?!!n.__v_raw:!1}function Ge(n){const e=n&&n.__v_raw;return e?Ge(e):n}function a1(n){return Object.isExtensible(n)&&bw(n,"__v_skip",!0),n}const Sl=n=>ut(n)?tc(n):n,w_=n=>ut(n)?$w(n):n;class zw{constructor(e,t,i,r){this.getter=e,this._setter=t,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this.effect=new p_(()=>e(this._value),()=>Zc(this,this.effect._dirtyLevel===2?2:3)),this.effect.computed=this,this.effect.active=this._cacheable=!r,this.__v_isReadonly=i}get value(){const e=Ge(this);return(!e._cacheable||e.effect.dirty)&&Gr(e._value,e._value=e.effect.run())&&Zc(e,4),jw(e),e.effect._dirtyLevel>=2&&Zc(e,2),e._value}set value(e){this._setter(e)}get _dirty(){return this.effect.dirty}set _dirty(e){this.effect.dirty=e}}function l1(n,e,t=!1){let i,r;const s=we(n);return s?(i=n,r=Xn):(i=n.get,r=n.set),new zw(i,r,s||!r,t)}function jw(n){var e;Vr&&bs&&(n=Ge(n),Pw(bs,(e=n.dep)!=null?e:n.dep=kw(()=>n.dep=void 0,n instanceof zw?n:void 0)))}function Zc(n,e=4,t){n=Ge(n);const i=n.dep;i&&Ow(i,e)}function In(n){return!!(n&&n.__v_isRef===!0)}function Zt(n){return Gw(n,!1)}function c1(n){return Gw(n,!0)}function Gw(n,e){return In(n)?n:new u1(n,e)}class u1{constructor(e,t){this.__v_isShallow=t,this.dep=void 0,this.__v_isRef=!0,this._rawValue=t?e:Ge(e),this._value=t?e:Sl(e)}get value(){return jw(this),this._value}set value(e){const t=this.__v_isShallow||mu(e)||El(e);e=t?e:Ge(e),Gr(e,this._rawValue)&&(this._rawValue=e,this._value=t?e:Sl(e),Zc(this,4))}}function bo(n){return In(n)?n.value:n}const h1={get:(n,e,t)=>bo(Reflect.get(n,e,t)),set:(n,e,t,i)=>{const r=n[e];return In(r)&&!In(t)?(r.value=t,!0):Reflect.set(n,e,t,i)}};function Hw(n){return el(n)?n:new Proxy(n,h1)}/**
* @vue/runtime-core v3.4.25
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Fr(n,e,t,i){try{return i?n(...i):n()}catch(r){ph(r,e,t)}}function pi(n,e,t,i){if(we(n)){const r=Fr(n,e,t,i);return r&&Tw(r)&&r.catch(s=>{ph(s,e,t)}),r}if(ge(n)){const r=[];for(let s=0;s<n.length;s++)r.push(pi(n[s],e,t,i));return r}}function ph(n,e,t,i=!0){const r=e?e.vnode:null;if(e){let s=e.parent;const o=e.proxy,a=`https://vuejs.org/error-reference/#runtime-${t}`;for(;s;){const c=s.ec;if(c){for(let u=0;u<c.length;u++)if(c[u](n,o,a)===!1)return}s=s.parent}const l=e.appContext.config.errorHandler;if(l){Qr(),Fr(l,null,10,[n,o,a]),Jr();return}}d1(n,t,r,i)}function d1(n,e,t,i=!0){console.error(n)}let bl=!1,If=!1;const sn=[];let xi=0;const Io=[];let br=null,_s=0;const qw=Promise.resolve();let T_=null;function E_(n){const e=T_||qw;return n?e.then(this?n.bind(this):n):e}function f1(n){let e=xi+1,t=sn.length;for(;e<t;){const i=e+t>>>1,r=sn[i],s=Il(r);s<n||s===n&&r.pre?e=i+1:t=i}return e}function S_(n){(!sn.length||!sn.includes(n,bl&&n.allowRecurse?xi+1:xi))&&(n.id==null?sn.push(n):sn.splice(f1(n.id),0,n),Ww())}function Ww(){!bl&&!If&&(If=!0,T_=qw.then(Yw))}function p1(n){const e=sn.indexOf(n);e>xi&&sn.splice(e,1)}function _1(n){ge(n)?Io.push(...n):(!br||!br.includes(n,n.allowRecurse?_s+1:_s))&&Io.push(n),Ww()}function Um(n,e,t=bl?xi+1:0){for(;t<sn.length;t++){const i=sn[t];if(i&&i.pre){if(n&&i.id!==n.uid)continue;sn.splice(t,1),t--,i()}}}function Kw(n){if(Io.length){const e=[...new Set(Io)].sort((t,i)=>Il(t)-Il(i));if(Io.length=0,br){br.push(...e);return}for(br=e,_s=0;_s<br.length;_s++)br[_s]();br=null,_s=0}}const Il=n=>n.id==null?1/0:n.id,g1=(n,e)=>{const t=Il(n)-Il(e);if(t===0){if(n.pre&&!e.pre)return-1;if(e.pre&&!n.pre)return 1}return t};function Yw(n){If=!1,bl=!0,sn.sort(g1);try{for(xi=0;xi<sn.length;xi++){const e=sn[xi];e&&e.active!==!1&&Fr(e,null,14)}}finally{xi=0,sn.length=0,Kw(),bl=!1,T_=null,(sn.length||Io.length)&&Yw()}}function m1(n,e,...t){if(n.isUnmounted)return;const i=n.vnode.props||it;let r=t;const s=e.startsWith("update:"),o=s&&e.slice(7);if(o&&o in i){const u=`${o==="modelValue"?"model":o}Modifiers`,{number:h,trim:f}=i[u]||it;f&&(r=t.map(d=>Nt(d)?d.trim():d)),h&&(r=t.map(wf))}let a,l=i[a=cd(e)]||i[a=cd(Ui(e))];!l&&s&&(l=i[a=cd(da(e))]),l&&pi(l,n,6,r);const c=i[a+"Once"];if(c){if(!n.emitted)n.emitted={};else if(n.emitted[a])return;n.emitted[a]=!0,pi(c,n,6,r)}}function Xw(n,e,t=!1){const i=e.emitsCache,r=i.get(n);if(r!==void 0)return r;const s=n.emits;let o={},a=!1;if(!we(n)){const l=c=>{const u=Xw(c,e,!0);u&&(a=!0,Ut(o,u))};!t&&e.mixins.length&&e.mixins.forEach(l),n.extends&&l(n.extends),n.mixins&&n.mixins.forEach(l)}return!s&&!a?(ut(n)&&i.set(n,null),null):(ge(s)?s.forEach(l=>o[l]=null):Ut(o,s),ut(n)&&i.set(n,o),o)}function _h(n,e){return!n||!ch(e)?!1:(e=e.slice(2).replace(/Once$/,""),De(n,e[0].toLowerCase()+e.slice(1))||De(n,da(e))||De(n,e))}let vn=null,gh=null;function yu(n){const e=vn;return vn=n,gh=n&&n.type.__scopeId||null,e}function Zr(n){gh=n}function es(){gh=null}function li(n,e=vn,t){if(!e||n._n)return n;const i=(...r)=>{i._d&&Qm(-1);const s=yu(e);let o;try{o=n(...r)}finally{yu(s),i._d&&Qm(1)}return o};return i._n=!0,i._c=!0,i._d=!0,i}function hd(n){const{type:e,vnode:t,proxy:i,withProxy:r,propsOptions:[s],slots:o,attrs:a,emit:l,render:c,renderCache:u,props:h,data:f,setupState:d,ctx:_,inheritAttrs:p}=n,g=yu(n);let m,T;try{if(t.shapeFlag&4){const S=r||i,E=S;m=Ai(c.call(E,S,u,h,d,f,_)),T=a}else{const S=e;m=Ai(S.length>1?S(h,{attrs:a,slots:o,emit:l}):S(h,null)),T=e.props?a:y1(a)}}catch(S){il.length=0,ph(S,n,1),m=je(Vs)}let w=m;if(T&&p!==!1){const S=Object.keys(T),{shapeFlag:E}=w;S.length&&E&7&&(s&&S.some(u_)&&(T=v1(T,s)),w=Go(w,T))}return t.dirs&&(w=Go(w),w.dirs=w.dirs?w.dirs.concat(t.dirs):t.dirs),t.transition&&(w.transition=t.transition),m=w,yu(g),m}const y1=n=>{let e;for(const t in n)(t==="class"||t==="style"||ch(t))&&((e||(e={}))[t]=n[t]);return e},v1=(n,e)=>{const t={};for(const i in n)(!u_(i)||!(i.slice(9)in e))&&(t[i]=n[i]);return t};function w1(n,e,t){const{props:i,children:r,component:s}=n,{props:o,children:a,patchFlag:l}=e,c=s.emitsOptions;if(e.dirs||e.transition)return!0;if(t&&l>=0){if(l&1024)return!0;if(l&16)return i?$m(i,o,c):!!o;if(l&8){const u=e.dynamicProps;for(let h=0;h<u.length;h++){const f=u[h];if(o[f]!==i[f]&&!_h(c,f))return!0}}}else return(r||a)&&(!a||!a.$stable)?!0:i===o?!1:i?o?$m(i,o,c):!0:!!o;return!1}function $m(n,e,t){const i=Object.keys(e);if(i.length!==Object.keys(n).length)return!0;for(let r=0;r<i.length;r++){const s=i[r];if(e[s]!==n[s]&&!_h(t,s))return!0}return!1}function T1({vnode:n,parent:e},t){for(;e;){const i=e.subTree;if(i.suspense&&i.suspense.activeBranch===n&&(i.el=n.el),i===n)(n=e.vnode).el=t,e=e.parent;else break}}const Qw="components";function ot(n,e){return S1(Qw,n,!0,e)||n}const E1=Symbol.for("v-ndc");function S1(n,e,t=!0,i=!1){const r=vn||on;if(r){const s=r.type;if(n===Qw){const a=dx(s,!1);if(a&&(a===e||a===Ui(e)||a===dh(Ui(e))))return s}const o=Bm(r[n]||s[n],e)||Bm(r.appContext[n],e);return!o&&i?s:o}}function Bm(n,e){return n&&(n[e]||n[Ui(e)]||n[dh(Ui(e))])}const b1=n=>n.__isSuspense;function I1(n,e){e&&e.pendingBranch?ge(n)?e.effects.push(...n):e.effects.push(n):_1(n)}const C1=Symbol.for("v-scx"),A1=()=>or(C1),Nc={};function Cs(n,e,t){return Jw(n,e,t)}function Jw(n,e,{immediate:t,deep:i,flush:r,once:s,onTrack:o,onTrigger:a}=it){if(e&&s){const I=e;e=(...P)=>{I(...P),E()}}const l=on,c=I=>i===!0?I:ms(I,i===!1?1:void 0);let u,h=!1,f=!1;if(In(n)?(u=()=>n.value,h=mu(n)):el(n)?(u=()=>c(n),h=!0):ge(n)?(f=!0,h=n.some(I=>el(I)||mu(I)),u=()=>n.map(I=>{if(In(I))return I.value;if(el(I))return c(I);if(we(I))return Fr(I,l,2)})):we(n)?e?u=()=>Fr(n,l,2):u=()=>(d&&d(),pi(n,l,3,[_])):u=Xn,e&&i){const I=u;u=()=>ms(I())}let d,_=I=>{d=w.onStop=()=>{Fr(I,l,4),d=w.onStop=void 0}},p;if(wh)if(_=Xn,e?t&&pi(e,l,3,[u(),f?[]:void 0,_]):u(),r==="sync"){const I=A1();p=I.__watcherHandles||(I.__watcherHandles=[])}else return Xn;let g=f?new Array(n.length).fill(Nc):Nc;const m=()=>{if(!(!w.active||!w.dirty))if(e){const I=w.run();(i||h||(f?I.some((P,x)=>Gr(P,g[x])):Gr(I,g)))&&(d&&d(),pi(e,l,3,[I,g===Nc?void 0:f&&g[0]===Nc?[]:g,_]),g=I)}else w.run()};m.allowRecurse=!!e;let T;r==="sync"?T=m:r==="post"?T=()=>yn(m,l&&l.suspense):(m.pre=!0,l&&(m.id=l.uid),T=()=>S_(m));const w=new p_(u,Xn,T),S=BA(),E=()=>{w.stop(),S&&h_(S.effects,w)};return e?t?m():g=w.run():r==="post"?yn(w.run.bind(w),l&&l.suspense):w.run(),p&&p.push(E),E}function x1(n,e,t){const i=this.proxy,r=Nt(n)?n.includes(".")?Zw(i,n):()=>i[n]:n.bind(i,i);let s;we(e)?s=e:(s=e.handler,t=e);const o=ic(this),a=Jw(r,s.bind(i),t);return o(),a}function Zw(n,e){const t=e.split(".");return()=>{let i=n;for(let r=0;r<t.length&&i;r++)i=i[t[r]];return i}}function ms(n,e,t=0,i){if(!ut(n)||n.__v_skip)return n;if(e&&e>0){if(t>=e)return n;t++}if(i=i||new Set,i.has(n))return n;if(i.add(n),In(n))ms(n.value,e,t,i);else if(ge(n))for(let r=0;r<n.length;r++)ms(n[r],e,t,i);else if(ww(n)||So(n))n.forEach(r=>{ms(r,e,t,i)});else if(Sw(n))for(const r in n)ms(n[r],e,t,i);return n}function zm(n,e){if(vn===null)return n;const t=Th(vn)||vn.proxy,i=n.dirs||(n.dirs=[]);for(let r=0;r<e.length;r++){let[s,o,a,l=it]=e[r];s&&(we(s)&&(s={mounted:s,updated:s}),s.deep&&ms(o),i.push({dir:s,instance:t,value:o,oldValue:void 0,arg:a,modifiers:l}))}return n}function os(n,e,t,i){const r=n.dirs,s=e&&e.dirs;for(let o=0;o<r.length;o++){const a=r[o];s&&(a.oldValue=s[o].value);let l=a.dir[i];l&&(Qr(),pi(l,t,8,[n.el,a,n,e]),Jr())}}/*! #__NO_SIDE_EFFECTS__ */function eT(n,e){return we(n)?Ut({name:n.name},e,{setup:n}):n}const eu=n=>!!n.type.__asyncLoader,tT=n=>n.type.__isKeepAlive;function R1(n,e){nT(n,"a",e)}function P1(n,e){nT(n,"da",e)}function nT(n,e,t=on){const i=n.__wdc||(n.__wdc=()=>{let r=t;for(;r;){if(r.isDeactivated)return;r=r.parent}return n()});if(mh(e,i,t),t){let r=t.parent;for(;r&&r.parent;)tT(r.parent.vnode)&&O1(i,e,t,r),r=r.parent}}function O1(n,e,t,i){const r=mh(e,n,i,!0);rT(()=>{h_(i[e],r)},t)}function mh(n,e,t=on,i=!1){if(t){const r=t[n]||(t[n]=[]),s=e.__weh||(e.__weh=(...o)=>{if(t.isUnmounted)return;Qr();const a=ic(t),l=pi(e,t,n,o);return a(),Jr(),l});return i?r.unshift(s):r.push(s),s}}const dr=n=>(e,t=on)=>(!wh||n==="sp")&&mh(n,(...i)=>e(...i),t),k1=dr("bm"),b_=dr("m"),iT=dr("bu"),I_=dr("u"),C_=dr("bum"),rT=dr("um"),N1=dr("sp"),M1=dr("rtg"),D1=dr("rtc");function L1(n,e=on){mh("ec",n,e)}function nc(n,e,t,i){let r;const s=t&&t[i];if(ge(n)||Nt(n)){r=new Array(n.length);for(let o=0,a=n.length;o<a;o++)r[o]=e(n[o],o,void 0,s&&s[o])}else if(typeof n=="number"){r=new Array(n);for(let o=0;o<n;o++)r[o]=e(o+1,o,void 0,s&&s[o])}else if(ut(n))if(n[Symbol.iterator])r=Array.from(n,(o,a)=>e(o,a,void 0,s&&s[a]));else{const o=Object.keys(n);r=new Array(o.length);for(let a=0,l=o.length;a<l;a++){const c=o[a];r[a]=e(n[c],c,a,s&&s[a])}}else r=[];return t&&(t[i]=r),r}const Cf=n=>n?wT(n)?Th(n)||n.proxy:Cf(n.parent):null,tl=Ut(Object.create(null),{$:n=>n,$el:n=>n.vnode.el,$data:n=>n.data,$props:n=>n.props,$attrs:n=>n.attrs,$slots:n=>n.slots,$refs:n=>n.refs,$parent:n=>Cf(n.parent),$root:n=>Cf(n.root),$emit:n=>n.emit,$options:n=>A_(n),$forceUpdate:n=>n.f||(n.f=()=>{n.effect.dirty=!0,S_(n.update)}),$nextTick:n=>n.n||(n.n=E_.bind(n.proxy)),$watch:n=>x1.bind(n)}),dd=(n,e)=>n!==it&&!n.__isScriptSetup&&De(n,e),V1={get({_:n},e){if(e==="__v_skip")return!0;const{ctx:t,setupState:i,data:r,props:s,accessCache:o,type:a,appContext:l}=n;let c;if(e[0]!=="$"){const d=o[e];if(d!==void 0)switch(d){case 1:return i[e];case 2:return r[e];case 4:return t[e];case 3:return s[e]}else{if(dd(i,e))return o[e]=1,i[e];if(r!==it&&De(r,e))return o[e]=2,r[e];if((c=n.propsOptions[0])&&De(c,e))return o[e]=3,s[e];if(t!==it&&De(t,e))return o[e]=4,t[e];Af&&(o[e]=0)}}const u=tl[e];let h,f;if(u)return e==="$attrs"&&bn(n.attrs,"get",""),u(n);if((h=a.__cssModules)&&(h=h[e]))return h;if(t!==it&&De(t,e))return o[e]=4,t[e];if(f=l.config.globalProperties,De(f,e))return f[e]},set({_:n},e,t){const{data:i,setupState:r,ctx:s}=n;return dd(r,e)?(r[e]=t,!0):i!==it&&De(i,e)?(i[e]=t,!0):De(n.props,e)||e[0]==="$"&&e.slice(1)in n?!1:(s[e]=t,!0)},has({_:{data:n,setupState:e,accessCache:t,ctx:i,appContext:r,propsOptions:s}},o){let a;return!!t[o]||n!==it&&De(n,o)||dd(e,o)||(a=s[0])&&De(a,o)||De(i,o)||De(tl,o)||De(r.config.globalProperties,o)},defineProperty(n,e,t){return t.get!=null?n._.accessCache[e]=0:De(t,"value")&&this.set(n,e,t.value,null),Reflect.defineProperty(n,e,t)}};function jm(n){return ge(n)?n.reduce((e,t)=>(e[t]=null,e),{}):n}let Af=!0;function F1(n){const e=A_(n),t=n.proxy,i=n.ctx;Af=!1,e.beforeCreate&&Gm(e.beforeCreate,n,"bc");const{data:r,computed:s,methods:o,watch:a,provide:l,inject:c,created:u,beforeMount:h,mounted:f,beforeUpdate:d,updated:_,activated:p,deactivated:g,beforeDestroy:m,beforeUnmount:T,destroyed:w,unmounted:S,render:E,renderTracked:I,renderTriggered:P,errorCaptured:x,serverPrefetch:A,expose:k,inheritAttrs:D,components:W,directives:N,filters:de}=e;if(c&&U1(c,i,null),o)for(const Z in o){const he=o[Z];we(he)&&(i[Z]=he.bind(t))}if(r){const Z=r.call(t,t);ut(Z)&&(n.data=tc(Z))}if(Af=!0,s)for(const Z in s){const he=s[Z],St=we(he)?he.bind(t,t):we(he.get)?he.get.bind(t,t):Xn,bt=!we(he)&&we(he.set)?he.set.bind(t):Xn,Ee=Kn({get:St,set:bt});Object.defineProperty(i,Z,{enumerable:!0,configurable:!0,get:()=>Ee.value,set:_e=>Ee.value=_e})}if(a)for(const Z in a)sT(a[Z],i,t,Z);if(l){const Z=we(l)?l.call(t):l;Reflect.ownKeys(Z).forEach(he=>{Co(he,Z[he])})}u&&Gm(u,n,"c");function ne(Z,he){ge(he)?he.forEach(St=>Z(St.bind(t))):he&&Z(he.bind(t))}if(ne(k1,h),ne(b_,f),ne(iT,d),ne(I_,_),ne(R1,p),ne(P1,g),ne(L1,x),ne(D1,I),ne(M1,P),ne(C_,T),ne(rT,S),ne(N1,A),ge(k))if(k.length){const Z=n.exposed||(n.exposed={});k.forEach(he=>{Object.defineProperty(Z,he,{get:()=>t[he],set:St=>t[he]=St})})}else n.exposed||(n.exposed={});E&&n.render===Xn&&(n.render=E),D!=null&&(n.inheritAttrs=D),W&&(n.components=W),N&&(n.directives=N)}function U1(n,e,t=Xn){ge(n)&&(n=xf(n));for(const i in n){const r=n[i];let s;ut(r)?"default"in r?s=or(r.from||i,r.default,!0):s=or(r.from||i):s=or(r),In(s)?Object.defineProperty(e,i,{enumerable:!0,configurable:!0,get:()=>s.value,set:o=>s.value=o}):e[i]=s}}function Gm(n,e,t){pi(ge(n)?n.map(i=>i.bind(e.proxy)):n.bind(e.proxy),e,t)}function sT(n,e,t,i){const r=i.includes(".")?Zw(t,i):()=>t[i];if(Nt(n)){const s=e[n];we(s)&&Cs(r,s)}else if(we(n))Cs(r,n.bind(t));else if(ut(n))if(ge(n))n.forEach(s=>sT(s,e,t,i));else{const s=we(n.handler)?n.handler.bind(t):e[n.handler];we(s)&&Cs(r,s,n)}}function A_(n){const e=n.type,{mixins:t,extends:i}=e,{mixins:r,optionsCache:s,config:{optionMergeStrategies:o}}=n.appContext,a=s.get(e);let l;return a?l=a:!r.length&&!t&&!i?l=e:(l={},r.length&&r.forEach(c=>vu(l,c,o,!0)),vu(l,e,o)),ut(e)&&s.set(e,l),l}function vu(n,e,t,i=!1){const{mixins:r,extends:s}=e;s&&vu(n,s,t,!0),r&&r.forEach(o=>vu(n,o,t,!0));for(const o in e)if(!(i&&o==="expose")){const a=$1[o]||t&&t[o];n[o]=a?a(n[o],e[o]):e[o]}return n}const $1={data:Hm,props:qm,emits:qm,methods:Fa,computed:Fa,beforeCreate:_n,created:_n,beforeMount:_n,mounted:_n,beforeUpdate:_n,updated:_n,beforeDestroy:_n,beforeUnmount:_n,destroyed:_n,unmounted:_n,activated:_n,deactivated:_n,errorCaptured:_n,serverPrefetch:_n,components:Fa,directives:Fa,watch:z1,provide:Hm,inject:B1};function Hm(n,e){return e?n?function(){return Ut(we(n)?n.call(this,this):n,we(e)?e.call(this,this):e)}:e:n}function B1(n,e){return Fa(xf(n),xf(e))}function xf(n){if(ge(n)){const e={};for(let t=0;t<n.length;t++)e[n[t]]=n[t];return e}return n}function _n(n,e){return n?[...new Set([].concat(n,e))]:e}function Fa(n,e){return n?Ut(Object.create(null),n,e):e}function qm(n,e){return n?ge(n)&&ge(e)?[...new Set([...n,...e])]:Ut(Object.create(null),jm(n),jm(e??{})):e}function z1(n,e){if(!n)return e;if(!e)return n;const t=Ut(Object.create(null),n);for(const i in e)t[i]=_n(n[i],e[i]);return t}function oT(){return{app:null,config:{isNativeTag:xA,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let j1=0;function G1(n,e){return function(i,r=null){we(i)||(i=Ut({},i)),r!=null&&!ut(r)&&(r=null);const s=oT(),o=new WeakSet;let a=!1;const l=s.app={_uid:j1++,_component:i,_props:r,_container:null,_context:s,_instance:null,version:px,get config(){return s.config},set config(c){},use(c,...u){return o.has(c)||(c&&we(c.install)?(o.add(c),c.install(l,...u)):we(c)&&(o.add(c),c(l,...u))),l},mixin(c){return s.mixins.includes(c)||s.mixins.push(c),l},component(c,u){return u?(s.components[c]=u,l):s.components[c]},directive(c,u){return u?(s.directives[c]=u,l):s.directives[c]},mount(c,u,h){if(!a){const f=je(i,r);return f.appContext=s,h===!0?h="svg":h===!1&&(h=void 0),u&&e?e(f,c):n(f,c,h),a=!0,l._container=c,c.__vue_app__=l,Th(f.component)||f.component.proxy}},unmount(){a&&(n(null,l._container),delete l._container.__vue_app__)},provide(c,u){return s.provides[c]=u,l},runWithContext(c){const u=nl;nl=l;try{return c()}finally{nl=u}}};return l}}let nl=null;function Co(n,e){if(on){let t=on.provides;const i=on.parent&&on.parent.provides;i===t&&(t=on.provides=Object.create(i)),t[n]=e}}function or(n,e,t=!1){const i=on||vn;if(i||nl){const r=i?i.parent==null?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides:nl._context.provides;if(r&&n in r)return r[n];if(arguments.length>1)return t&&we(e)?e.call(i&&i.proxy):e}}const aT={},lT=()=>Object.create(aT),cT=n=>Object.getPrototypeOf(n)===aT;function H1(n,e,t,i=!1){const r={},s=lT();n.propsDefaults=Object.create(null),uT(n,e,r,s);for(const o in n.propsOptions[0])o in r||(r[o]=void 0);t?n.props=i?r:Uw(r):n.type.props?n.props=r:n.props=s,n.attrs=s}function q1(n,e,t,i){const{props:r,attrs:s,vnode:{patchFlag:o}}=n,a=Ge(r),[l]=n.propsOptions;let c=!1;if((i||o>0)&&!(o&16)){if(o&8){const u=n.vnode.dynamicProps;for(let h=0;h<u.length;h++){let f=u[h];if(_h(n.emitsOptions,f))continue;const d=e[f];if(l)if(De(s,f))d!==s[f]&&(s[f]=d,c=!0);else{const _=Ui(f);r[_]=Rf(l,a,_,d,n,!1)}else d!==s[f]&&(s[f]=d,c=!0)}}}else{uT(n,e,r,s)&&(c=!0);let u;for(const h in a)(!e||!De(e,h)&&((u=da(h))===h||!De(e,u)))&&(l?t&&(t[h]!==void 0||t[u]!==void 0)&&(r[h]=Rf(l,a,h,void 0,n,!0)):delete r[h]);if(s!==a)for(const h in s)(!e||!De(e,h))&&(delete s[h],c=!0)}c&&sr(n.attrs,"set","")}function uT(n,e,t,i){const[r,s]=n.propsOptions;let o=!1,a;if(e)for(let l in e){if(Za(l))continue;const c=e[l];let u;r&&De(r,u=Ui(l))?!s||!s.includes(u)?t[u]=c:(a||(a={}))[u]=c:_h(n.emitsOptions,l)||(!(l in i)||c!==i[l])&&(i[l]=c,o=!0)}if(s){const l=Ge(t),c=a||it;for(let u=0;u<s.length;u++){const h=s[u];t[h]=Rf(r,l,h,c[h],n,!De(c,h))}}return o}function Rf(n,e,t,i,r,s){const o=n[t];if(o!=null){const a=De(o,"default");if(a&&i===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&we(l)){const{propsDefaults:c}=r;if(t in c)i=c[t];else{const u=ic(r);i=c[t]=l.call(null,e),u()}}else i=l}o[0]&&(s&&!a?i=!1:o[1]&&(i===""||i===da(t))&&(i=!0))}return i}function hT(n,e,t=!1){const i=e.propsCache,r=i.get(n);if(r)return r;const s=n.props,o={},a=[];let l=!1;if(!we(n)){const u=h=>{l=!0;const[f,d]=hT(h,e,!0);Ut(o,f),d&&a.push(...d)};!t&&e.mixins.length&&e.mixins.forEach(u),n.extends&&u(n.extends),n.mixins&&n.mixins.forEach(u)}if(!s&&!l)return ut(n)&&i.set(n,Eo),Eo;if(ge(s))for(let u=0;u<s.length;u++){const h=Ui(s[u]);Wm(h)&&(o[h]=it)}else if(s)for(const u in s){const h=Ui(u);if(Wm(h)){const f=s[u],d=o[h]=ge(f)||we(f)?{type:f}:Ut({},f);if(d){const _=Xm(Boolean,d.type),p=Xm(String,d.type);d[0]=_>-1,d[1]=p<0||_<p,(_>-1||De(d,"default"))&&a.push(h)}}}const c=[o,a];return ut(n)&&i.set(n,c),c}function Wm(n){return n[0]!=="$"&&!Za(n)}function Km(n){return n===null?"null":typeof n=="function"?n.name||"":typeof n=="object"&&n.constructor&&n.constructor.name||""}function Ym(n,e){return Km(n)===Km(e)}function Xm(n,e){return ge(e)?e.findIndex(t=>Ym(t,n)):we(e)&&Ym(e,n)?0:-1}const dT=n=>n[0]==="_"||n==="$stable",x_=n=>ge(n)?n.map(Ai):[Ai(n)],W1=(n,e,t)=>{if(e._n)return e;const i=li((...r)=>x_(e(...r)),t);return i._c=!1,i},fT=(n,e,t)=>{const i=n._ctx;for(const r in n){if(dT(r))continue;const s=n[r];if(we(s))e[r]=W1(r,s,i);else if(s!=null){const o=x_(s);e[r]=()=>o}}},pT=(n,e)=>{const t=x_(e);n.slots.default=()=>t},K1=(n,e)=>{const t=n.slots=lT();if(n.vnode.shapeFlag&32){const i=e._;i?(Ut(t,e),bw(t,"_",i)):fT(e,t)}else e&&pT(n,e)},Y1=(n,e,t)=>{const{vnode:i,slots:r}=n;let s=!0,o=it;if(i.shapeFlag&32){const a=e._;a?t&&a===1?s=!1:(Ut(r,e),!t&&a===1&&delete r._):(s=!e.$stable,fT(e,r)),o=e}else e&&(pT(n,e),o={default:1});if(s)for(const a in r)!dT(a)&&o[a]==null&&delete r[a]};function Pf(n,e,t,i,r=!1){if(ge(n)){n.forEach((f,d)=>Pf(f,e&&(ge(e)?e[d]:e),t,i,r));return}if(eu(i)&&!r)return;const s=i.shapeFlag&4?Th(i.component)||i.component.proxy:i.el,o=r?null:s,{i:a,r:l}=n,c=e&&e.r,u=a.refs===it?a.refs={}:a.refs,h=a.setupState;if(c!=null&&c!==l&&(Nt(c)?(u[c]=null,De(h,c)&&(h[c]=null)):In(c)&&(c.value=null)),we(l))Fr(l,a,12,[o,u]);else{const f=Nt(l),d=In(l);if(f||d){const _=()=>{if(n.f){const p=f?De(h,l)?h[l]:u[l]:l.value;r?ge(p)&&h_(p,s):ge(p)?p.includes(s)||p.push(s):f?(u[l]=[s],De(h,l)&&(h[l]=u[l])):(l.value=[s],n.k&&(u[n.k]=l.value))}else f?(u[l]=o,De(h,l)&&(h[l]=o)):d&&(l.value=o,n.k&&(u[n.k]=o))};o?(_.id=-1,yn(_,t)):_()}}}const yn=I1;function X1(n){return Q1(n)}function Q1(n,e){const t=Iw();t.__VUE__=!0;const{insert:i,remove:r,patchProp:s,createElement:o,createText:a,createComment:l,setText:c,setElementText:u,parentNode:h,nextSibling:f,setScopeId:d=Xn,insertStaticContent:_}=n,p=(y,v,C,L=null,O=null,$=null,Y=void 0,z=null,q=!!v.dynamicChildren)=>{if(y===v)return;y&&!Aa(y,v)&&(L=M(y),_e(y,O,$,!0),y=null),v.patchFlag===-2&&(q=!1,v.dynamicChildren=null);const{type:V,ref:ee,shapeFlag:ae}=v;switch(V){case yh:g(y,v,C,L);break;case Vs:m(y,v,C,L);break;case tu:y==null&&T(v,C,L,Y);break;case qt:W(y,v,C,L,O,$,Y,z,q);break;default:ae&1?E(y,v,C,L,O,$,Y,z,q):ae&6?N(y,v,C,L,O,$,Y,z,q):(ae&64||ae&128)&&V.process(y,v,C,L,O,$,Y,z,q,te)}ee!=null&&O&&Pf(ee,y&&y.ref,$,v||y,!v)},g=(y,v,C,L)=>{if(y==null)i(v.el=a(v.children),C,L);else{const O=v.el=y.el;v.children!==y.children&&c(O,v.children)}},m=(y,v,C,L)=>{y==null?i(v.el=l(v.children||""),C,L):v.el=y.el},T=(y,v,C,L)=>{[y.el,y.anchor]=_(y.children,v,C,L,y.el,y.anchor)},w=({el:y,anchor:v},C,L)=>{let O;for(;y&&y!==v;)O=f(y),i(y,C,L),y=O;i(v,C,L)},S=({el:y,anchor:v})=>{let C;for(;y&&y!==v;)C=f(y),r(y),y=C;r(v)},E=(y,v,C,L,O,$,Y,z,q)=>{v.type==="svg"?Y="svg":v.type==="math"&&(Y="mathml"),y==null?I(v,C,L,O,$,Y,z,q):A(y,v,O,$,Y,z,q)},I=(y,v,C,L,O,$,Y,z)=>{let q,V;const{props:ee,shapeFlag:ae,transition:oe,dirs:le}=y;if(q=y.el=o(y.type,$,ee&&ee.is,ee),ae&8?u(q,y.children):ae&16&&x(y.children,q,null,L,O,fd(y,$),Y,z),le&&os(y,null,L,"created"),P(q,y,y.scopeId,Y,L),ee){for(const Ue in ee)Ue!=="value"&&!Za(Ue)&&s(q,Ue,null,ee[Ue],$,y.children,L,O,qe);"value"in ee&&s(q,"value",null,ee.value,$),(V=ee.onVnodeBeforeMount)&&Ii(V,L,y)}le&&os(y,null,L,"beforeMount");const ye=J1(O,oe);ye&&oe.beforeEnter(q),i(q,v,C),((V=ee&&ee.onVnodeMounted)||ye||le)&&yn(()=>{V&&Ii(V,L,y),ye&&oe.enter(q),le&&os(y,null,L,"mounted")},O)},P=(y,v,C,L,O)=>{if(C&&d(y,C),L)for(let $=0;$<L.length;$++)d(y,L[$]);if(O){let $=O.subTree;if(v===$){const Y=O.vnode;P(y,Y,Y.scopeId,Y.slotScopeIds,O.parent)}}},x=(y,v,C,L,O,$,Y,z,q=0)=>{for(let V=q;V<y.length;V++){const ee=y[V]=z?Ir(y[V]):Ai(y[V]);p(null,ee,v,C,L,O,$,Y,z)}},A=(y,v,C,L,O,$,Y)=>{const z=v.el=y.el;let{patchFlag:q,dynamicChildren:V,dirs:ee}=v;q|=y.patchFlag&16;const ae=y.props||it,oe=v.props||it;let le;if(C&&as(C,!1),(le=oe.onVnodeBeforeUpdate)&&Ii(le,C,v,y),ee&&os(v,y,C,"beforeUpdate"),C&&as(C,!0),V?k(y.dynamicChildren,V,z,C,L,fd(v,O),$):Y||he(y,v,z,null,C,L,fd(v,O),$,!1),q>0){if(q&16)D(z,v,ae,oe,C,L,O);else if(q&2&&ae.class!==oe.class&&s(z,"class",null,oe.class,O),q&4&&s(z,"style",ae.style,oe.style,O),q&8){const ye=v.dynamicProps;for(let Ue=0;Ue<ye.length;Ue++){const et=ye[Ue],_t=ae[et],xn=oe[et];(xn!==_t||et==="value")&&s(z,et,_t,xn,O,y.children,C,L,qe)}}q&1&&y.children!==v.children&&u(z,v.children)}else!Y&&V==null&&D(z,v,ae,oe,C,L,O);((le=oe.onVnodeUpdated)||ee)&&yn(()=>{le&&Ii(le,C,v,y),ee&&os(v,y,C,"updated")},L)},k=(y,v,C,L,O,$,Y)=>{for(let z=0;z<v.length;z++){const q=y[z],V=v[z],ee=q.el&&(q.type===qt||!Aa(q,V)||q.shapeFlag&70)?h(q.el):C;p(q,V,ee,null,L,O,$,Y,!0)}},D=(y,v,C,L,O,$,Y)=>{if(C!==L){if(C!==it)for(const z in C)!Za(z)&&!(z in L)&&s(y,z,C[z],null,Y,v.children,O,$,qe);for(const z in L){if(Za(z))continue;const q=L[z],V=C[z];q!==V&&z!=="value"&&s(y,z,V,q,Y,v.children,O,$,qe)}"value"in L&&s(y,"value",C.value,L.value,Y)}},W=(y,v,C,L,O,$,Y,z,q)=>{const V=v.el=y?y.el:a(""),ee=v.anchor=y?y.anchor:a("");let{patchFlag:ae,dynamicChildren:oe,slotScopeIds:le}=v;le&&(z=z?z.concat(le):le),y==null?(i(V,C,L),i(ee,C,L),x(v.children||[],C,ee,O,$,Y,z,q)):ae>0&&ae&64&&oe&&y.dynamicChildren?(k(y.dynamicChildren,oe,C,O,$,Y,z),(v.key!=null||O&&v===O.subTree)&&_T(y,v,!0)):he(y,v,C,ee,O,$,Y,z,q)},N=(y,v,C,L,O,$,Y,z,q)=>{v.slotScopeIds=z,y==null?v.shapeFlag&512?O.ctx.activate(v,C,L,Y,q):de(v,C,L,O,$,Y,q):fe(y,v,q)},de=(y,v,C,L,O,$,Y)=>{const z=y.component=ax(y,L,O);if(tT(y)&&(z.ctx.renderer=te),lx(z),z.asyncDep){if(O&&O.registerDep(z,ne),!y.el){const q=z.subTree=je(Vs);m(null,q,v,C)}}else ne(z,y,v,C,O,$,Y)},fe=(y,v,C)=>{const L=v.component=y.component;if(w1(y,v,C))if(L.asyncDep&&!L.asyncResolved){Z(L,v,C);return}else L.next=v,p1(L.update),L.effect.dirty=!0,L.update();else v.el=y.el,L.vnode=v},ne=(y,v,C,L,O,$,Y)=>{const z=()=>{if(y.isMounted){let{next:ee,bu:ae,u:oe,parent:le,vnode:ye}=y;{const _r=gT(y);if(_r){ee&&(ee.el=ye.el,Z(y,ee,Y)),_r.asyncDep.then(()=>{y.isUnmounted||z()});return}}let Ue=ee,et;as(y,!1),ee?(ee.el=ye.el,Z(y,ee,Y)):ee=ye,ae&&Jc(ae),(et=ee.props&&ee.props.onVnodeBeforeUpdate)&&Ii(et,le,ee,ye),as(y,!0);const _t=hd(y),xn=y.subTree;y.subTree=_t,p(xn,_t,h(xn.el),M(xn),y,O,$),ee.el=_t.el,Ue===null&&T1(y,_t.el),oe&&yn(oe,O),(et=ee.props&&ee.props.onVnodeUpdated)&&yn(()=>Ii(et,le,ee,ye),O)}else{let ee;const{el:ae,props:oe}=v,{bm:le,m:ye,parent:Ue}=y,et=eu(v);if(as(y,!1),le&&Jc(le),!et&&(ee=oe&&oe.onVnodeBeforeMount)&&Ii(ee,Ue,v),as(y,!0),ae&&Fe){const _t=()=>{y.subTree=hd(y),Fe(ae,y.subTree,y,O,null)};et?v.type.__asyncLoader().then(()=>!y.isUnmounted&&_t()):_t()}else{const _t=y.subTree=hd(y);p(null,_t,C,L,y,O,$),v.el=_t.el}if(ye&&yn(ye,O),!et&&(ee=oe&&oe.onVnodeMounted)){const _t=v;yn(()=>Ii(ee,Ue,_t),O)}(v.shapeFlag&256||Ue&&eu(Ue.vnode)&&Ue.vnode.shapeFlag&256)&&y.a&&yn(y.a,O),y.isMounted=!0,v=C=L=null}},q=y.effect=new p_(z,Xn,()=>S_(V),y.scope),V=y.update=()=>{q.dirty&&q.run()};V.id=y.uid,as(y,!0),V()},Z=(y,v,C)=>{v.component=y;const L=y.vnode.props;y.vnode=v,y.next=null,q1(y,v.props,L,C),Y1(y,v.children,C),Qr(),Um(y),Jr()},he=(y,v,C,L,O,$,Y,z,q=!1)=>{const V=y&&y.children,ee=y?y.shapeFlag:0,ae=v.children,{patchFlag:oe,shapeFlag:le}=v;if(oe>0){if(oe&128){bt(V,ae,C,L,O,$,Y,z,q);return}else if(oe&256){St(V,ae,C,L,O,$,Y,z,q);return}}le&8?(ee&16&&qe(V,O,$),ae!==V&&u(C,ae)):ee&16?le&16?bt(V,ae,C,L,O,$,Y,z,q):qe(V,O,$,!0):(ee&8&&u(C,""),le&16&&x(ae,C,L,O,$,Y,z,q))},St=(y,v,C,L,O,$,Y,z,q)=>{y=y||Eo,v=v||Eo;const V=y.length,ee=v.length,ae=Math.min(V,ee);let oe;for(oe=0;oe<ae;oe++){const le=v[oe]=q?Ir(v[oe]):Ai(v[oe]);p(y[oe],le,C,null,O,$,Y,z,q)}V>ee?qe(y,O,$,!0,!1,ae):x(v,C,L,O,$,Y,z,q,ae)},bt=(y,v,C,L,O,$,Y,z,q)=>{let V=0;const ee=v.length;let ae=y.length-1,oe=ee-1;for(;V<=ae&&V<=oe;){const le=y[V],ye=v[V]=q?Ir(v[V]):Ai(v[V]);if(Aa(le,ye))p(le,ye,C,null,O,$,Y,z,q);else break;V++}for(;V<=ae&&V<=oe;){const le=y[ae],ye=v[oe]=q?Ir(v[oe]):Ai(v[oe]);if(Aa(le,ye))p(le,ye,C,null,O,$,Y,z,q);else break;ae--,oe--}if(V>ae){if(V<=oe){const le=oe+1,ye=le<ee?v[le].el:L;for(;V<=oe;)p(null,v[V]=q?Ir(v[V]):Ai(v[V]),C,ye,O,$,Y,z,q),V++}}else if(V>oe)for(;V<=ae;)_e(y[V],O,$,!0),V++;else{const le=V,ye=V,Ue=new Map;for(V=ye;V<=oe;V++){const Ot=v[V]=q?Ir(v[V]):Ai(v[V]);Ot.key!=null&&Ue.set(Ot.key,V)}let et,_t=0;const xn=oe-ye+1;let _r=!1,io=0;const gr=new Array(xn);for(V=0;V<xn;V++)gr[V]=0;for(V=le;V<=ae;V++){const Ot=y[V];if(_t>=xn){_e(Ot,O,$,!0);continue}let jn;if(Ot.key!=null)jn=Ue.get(Ot.key);else for(et=ye;et<=oe;et++)if(gr[et-ye]===0&&Aa(Ot,v[et])){jn=et;break}jn===void 0?_e(Ot,O,$,!0):(gr[jn-ye]=V+1,jn>=io?io=jn:_r=!0,p(Ot,v[jn],C,null,O,$,Y,z,q),_t++)}const rs=_r?Z1(gr):Eo;for(et=rs.length-1,V=xn-1;V>=0;V--){const Ot=ye+V,jn=v[Ot],mr=Ot+1<ee?v[Ot+1].el:L;gr[V]===0?p(null,jn,C,mr,O,$,Y,z,q):_r&&(et<0||V!==rs[et]?Ee(jn,C,mr,2):et--)}}},Ee=(y,v,C,L,O=null)=>{const{el:$,type:Y,transition:z,children:q,shapeFlag:V}=y;if(V&6){Ee(y.component.subTree,v,C,L);return}if(V&128){y.suspense.move(v,C,L);return}if(V&64){Y.move(y,v,C,te);return}if(Y===qt){i($,v,C);for(let ae=0;ae<q.length;ae++)Ee(q[ae],v,C,L);i(y.anchor,v,C);return}if(Y===tu){w(y,v,C);return}if(L!==2&&V&1&&z)if(L===0)z.beforeEnter($),i($,v,C),yn(()=>z.enter($),O);else{const{leave:ae,delayLeave:oe,afterLeave:le}=z,ye=()=>i($,v,C),Ue=()=>{ae($,()=>{ye(),le&&le()})};oe?oe($,ye,Ue):Ue()}else i($,v,C)},_e=(y,v,C,L=!1,O=!1)=>{const{type:$,props:Y,ref:z,children:q,dynamicChildren:V,shapeFlag:ee,patchFlag:ae,dirs:oe}=y;if(z!=null&&Pf(z,null,C,y,!0),ee&256){v.ctx.deactivate(y);return}const le=ee&1&&oe,ye=!eu(y);let Ue;if(ye&&(Ue=Y&&Y.onVnodeBeforeUnmount)&&Ii(Ue,v,y),ee&6)jt(y.component,C,L);else{if(ee&128){y.suspense.unmount(C,L);return}le&&os(y,null,v,"beforeUnmount"),ee&64?y.type.remove(y,v,C,O,te,L):V&&($!==qt||ae>0&&ae&64)?qe(V,v,C,!1,!0):($===qt&&ae&384||!O&&ee&16)&&qe(q,v,C),L&&He(y)}(ye&&(Ue=Y&&Y.onVnodeUnmounted)||le)&&yn(()=>{Ue&&Ii(Ue,v,y),le&&os(y,null,v,"unmounted")},C)},He=y=>{const{type:v,el:C,anchor:L,transition:O}=y;if(v===qt){Ce(C,L);return}if(v===tu){S(y);return}const $=()=>{r(C),O&&!O.persisted&&O.afterLeave&&O.afterLeave()};if(y.shapeFlag&1&&O&&!O.persisted){const{leave:Y,delayLeave:z}=O,q=()=>Y(C,$);z?z(y.el,$,q):q()}else $()},Ce=(y,v)=>{let C;for(;y!==v;)C=f(y),r(y),y=C;r(v)},jt=(y,v,C)=>{const{bum:L,scope:O,update:$,subTree:Y,um:z}=y;L&&Jc(L),O.stop(),$&&($.active=!1,_e(Y,y,v,C)),z&&yn(z,v),yn(()=>{y.isUnmounted=!0},v),v&&v.pendingBranch&&!v.isUnmounted&&y.asyncDep&&!y.asyncResolved&&y.suspenseId===v.pendingId&&(v.deps--,v.deps===0&&v.resolve())},qe=(y,v,C,L=!1,O=!1,$=0)=>{for(let Y=$;Y<y.length;Y++)_e(y[Y],v,C,L,O)},M=y=>y.shapeFlag&6?M(y.component.subTree):y.shapeFlag&128?y.suspense.next():f(y.anchor||y.el);let j=!1;const K=(y,v,C)=>{y==null?v._vnode&&_e(v._vnode,null,null,!0):p(v._vnode||null,y,v,null,null,null,C),j||(j=!0,Um(),Kw(),j=!1),v._vnode=y},te={p,um:_e,m:Ee,r:He,mt:de,mc:x,pc:he,pbc:k,n:M,o:n};let Se,Fe;return e&&([Se,Fe]=e(te)),{render:K,hydrate:Se,createApp:G1(K,Se)}}function fd({type:n,props:e},t){return t==="svg"&&n==="foreignObject"||t==="mathml"&&n==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:t}function as({effect:n,update:e},t){n.allowRecurse=e.allowRecurse=t}function J1(n,e){return(!n||n&&!n.pendingBranch)&&e&&!e.persisted}function _T(n,e,t=!1){const i=n.children,r=e.children;if(ge(i)&&ge(r))for(let s=0;s<i.length;s++){const o=i[s];let a=r[s];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=r[s]=Ir(r[s]),a.el=o.el),t||_T(o,a)),a.type===yh&&(a.el=o.el)}}function Z1(n){const e=n.slice(),t=[0];let i,r,s,o,a;const l=n.length;for(i=0;i<l;i++){const c=n[i];if(c!==0){if(r=t[t.length-1],n[r]<c){e[i]=r,t.push(i);continue}for(s=0,o=t.length-1;s<o;)a=s+o>>1,n[t[a]]<c?s=a+1:o=a;c<n[t[s]]&&(s>0&&(e[i]=t[s-1]),t[s]=i)}}for(s=t.length,o=t[s-1];s-- >0;)t[s]=o,o=e[o];return t}function gT(n){const e=n.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:gT(e)}const ex=n=>n.__isTeleport,qt=Symbol.for("v-fgt"),yh=Symbol.for("v-txt"),Vs=Symbol.for("v-cmt"),tu=Symbol.for("v-stc"),il=[];let ci=null;function Ie(n=!1){il.push(ci=n?null:[])}function tx(){il.pop(),ci=il[il.length-1]||null}let Cl=1;function Qm(n){Cl+=n}function mT(n){return n.dynamicChildren=Cl>0?ci||Eo:null,tx(),Cl>0&&ci&&ci.push(n),n}function at(n,e,t,i,r,s){return mT(H(n,e,t,i,r,s,!0))}function Un(n,e,t,i,r){return mT(je(n,e,t,i,r,!0))}function Of(n){return n?n.__v_isVNode===!0:!1}function Aa(n,e){return n.type===e.type&&n.key===e.key}const yT=({key:n})=>n??null,nu=({ref:n,ref_key:e,ref_for:t})=>(typeof n=="number"&&(n=""+n),n!=null?Nt(n)||In(n)||we(n)?{i:vn,r:n,k:e,f:!!t}:n:null);function H(n,e=null,t=null,i=0,r=null,s=n===qt?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:n,props:e,key:e&&yT(e),ref:e&&nu(e),scopeId:gh,slotScopeIds:null,children:t,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:i,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:vn};return a?(R_(l,t),s&128&&n.normalize(l)):t&&(l.shapeFlag|=Nt(t)?8:16),Cl>0&&!o&&ci&&(l.patchFlag>0||s&6)&&l.patchFlag!==32&&ci.push(l),l}const je=nx;function nx(n,e=null,t=null,i=0,r=null,s=!1){if((!n||n===E1)&&(n=Vs),Of(n)){const a=Go(n,e,!0);return t&&R_(a,t),Cl>0&&!s&&ci&&(a.shapeFlag&6?ci[ci.indexOf(n)]=a:ci.push(a)),a.patchFlag|=-2,a}if(fx(n)&&(n=n.__vccOpts),e){e=ix(e);let{class:a,style:l}=e;a&&!Nt(a)&&(e.class=fi(a)),ut(l)&&(Bw(l)&&!ge(l)&&(l=Ut({},l)),e.style=f_(l))}const o=Nt(n)?1:b1(n)?128:ex(n)?64:ut(n)?4:we(n)?2:0;return H(n,e,t,i,r,o,s,!0)}function ix(n){return n?Bw(n)||cT(n)?Ut({},n):n:null}function Go(n,e,t=!1){const{props:i,ref:r,patchFlag:s,children:o}=n,a=e?rx(i||{},e):i;return{__v_isVNode:!0,__v_skip:!0,type:n.type,props:a,key:a&&yT(a),ref:e&&e.ref?t&&r?ge(r)?r.concat(nu(e)):[r,nu(e)]:nu(e):r,scopeId:n.scopeId,slotScopeIds:n.slotScopeIds,children:o,target:n.target,targetAnchor:n.targetAnchor,staticCount:n.staticCount,shapeFlag:n.shapeFlag,patchFlag:e&&n.type!==qt?s===-1?16:s|16:s,dynamicProps:n.dynamicProps,dynamicChildren:n.dynamicChildren,appContext:n.appContext,dirs:n.dirs,transition:n.transition,component:n.component,suspense:n.suspense,ssContent:n.ssContent&&Go(n.ssContent),ssFallback:n.ssFallback&&Go(n.ssFallback),el:n.el,anchor:n.anchor,ctx:n.ctx,ce:n.ce}}function vh(n=" ",e=0){return je(yh,null,n,e)}function vT(n,e){const t=je(tu,null,n);return t.staticCount=e,t}function Ho(n="",e=!1){return e?(Ie(),Un(Vs,null,n)):je(Vs,null,n)}function Ai(n){return n==null||typeof n=="boolean"?je(Vs):ge(n)?je(qt,null,n.slice()):typeof n=="object"?Ir(n):je(yh,null,String(n))}function Ir(n){return n.el===null&&n.patchFlag!==-1||n.memo?n:Go(n)}function R_(n,e){let t=0;const{shapeFlag:i}=n;if(e==null)e=null;else if(ge(e))t=16;else if(typeof e=="object")if(i&65){const r=e.default;r&&(r._c&&(r._d=!1),R_(n,r()),r._c&&(r._d=!0));return}else{t=32;const r=e._;!r&&!cT(e)?e._ctx=vn:r===3&&vn&&(vn.slots._===1?e._=1:(e._=2,n.patchFlag|=1024))}else we(e)?(e={default:e,_ctx:vn},t=32):(e=String(e),i&64?(t=16,e=[vh(e)]):t=8);n.children=e,n.shapeFlag|=t}function rx(...n){const e={};for(let t=0;t<n.length;t++){const i=n[t];for(const r in i)if(r==="class")e.class!==i.class&&(e.class=fi([e.class,i.class]));else if(r==="style")e.style=f_([e.style,i.style]);else if(ch(r)){const s=e[r],o=i[r];o&&s!==o&&!(ge(s)&&s.includes(o))&&(e[r]=s?[].concat(s,o):o)}else r!==""&&(e[r]=i[r])}return e}function Ii(n,e,t,i=null){pi(n,e,7,[t,i])}const sx=oT();let ox=0;function ax(n,e,t){const i=n.type,r=(e?e.appContext:n.appContext)||sx,s={uid:ox++,vnode:n,type:i,parent:e,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,scope:new UA(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(r.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:hT(i,r),emitsOptions:Xw(i,r),emit:null,emitted:null,propsDefaults:it,inheritAttrs:i.inheritAttrs,ctx:it,data:it,props:it,attrs:it,slots:it,refs:it,setupState:it,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:t,suspenseId:t?t.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=e?e.root:s,s.emit=m1.bind(null,s),n.ce&&n.ce(s),s}let on=null,wu,kf;{const n=Iw(),e=(t,i)=>{let r;return(r=n[t])||(r=n[t]=[]),r.push(i),s=>{r.length>1?r.forEach(o=>o(s)):r[0](s)}};wu=e("__VUE_INSTANCE_SETTERS__",t=>on=t),kf=e("__VUE_SSR_SETTERS__",t=>wh=t)}const ic=n=>{const e=on;return wu(n),n.scope.on(),()=>{n.scope.off(),wu(e)}},Jm=()=>{on&&on.scope.off(),wu(null)};function wT(n){return n.vnode.shapeFlag&4}let wh=!1;function lx(n,e=!1){e&&kf(e);const{props:t,children:i}=n.vnode,r=wT(n);H1(n,t,r,e),K1(n,i);const s=r?cx(n,e):void 0;return e&&kf(!1),s}function cx(n,e){const t=n.type;n.accessCache=Object.create(null),n.proxy=new Proxy(n.ctx,V1);const{setup:i}=t;if(i){const r=n.setupContext=i.length>1?hx(n):null,s=ic(n);Qr();const o=Fr(i,n,0,[n.props,r]);if(Jr(),s(),Tw(o)){if(o.then(Jm,Jm),e)return o.then(a=>{Zm(n,a,e)}).catch(a=>{ph(a,n,0)});n.asyncDep=o}else Zm(n,o,e)}else TT(n,e)}function Zm(n,e,t){we(e)?n.type.__ssrInlineRender?n.ssrRender=e:n.render=e:ut(e)&&(n.setupState=Hw(e)),TT(n,t)}let ey;function TT(n,e,t){const i=n.type;if(!n.render){if(!e&&ey&&!i.render){const r=i.template||A_(n).template;if(r){const{isCustomElement:s,compilerOptions:o}=n.appContext.config,{delimiters:a,compilerOptions:l}=i,c=Ut(Ut({isCustomElement:s,delimiters:a},o),l);i.render=ey(r,c)}}n.render=i.render||Xn}{const r=ic(n);Qr();try{F1(n)}finally{Jr(),r()}}}const ux={get(n,e){return bn(n,"get",""),n[e]}};function hx(n){const e=t=>{n.exposed=t||{}};return{attrs:new Proxy(n.attrs,ux),slots:n.slots,emit:n.emit,expose:e}}function Th(n){if(n.exposed)return n.exposeProxy||(n.exposeProxy=new Proxy(Hw(a1(n.exposed)),{get(e,t){if(t in e)return e[t];if(t in tl)return tl[t](n)},has(e,t){return t in e||t in tl}}))}function dx(n,e=!0){return we(n)?n.displayName||n.name:n.name||e&&n.__name}function fx(n){return we(n)&&"__vccOpts"in n}const Kn=(n,e)=>l1(n,e,wh);function kn(n,e,t){const i=arguments.length;return i===2?ut(e)&&!ge(e)?Of(e)?je(n,null,[e]):je(n,e):je(n,null,e):(i>3?t=Array.prototype.slice.call(arguments,2):i===3&&Of(t)&&(t=[t]),je(n,e,t))}const px="3.4.25";/**
* @vue/runtime-dom v3.4.25
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const _x="http://www.w3.org/2000/svg",gx="http://www.w3.org/1998/Math/MathML",Cr=typeof document<"u"?document:null,ty=Cr&&Cr.createElement("template"),mx={insert:(n,e,t)=>{e.insertBefore(n,t||null)},remove:n=>{const e=n.parentNode;e&&e.removeChild(n)},createElement:(n,e,t,i)=>{const r=e==="svg"?Cr.createElementNS(_x,n):e==="mathml"?Cr.createElementNS(gx,n):Cr.createElement(n,t?{is:t}:void 0);return n==="select"&&i&&i.multiple!=null&&r.setAttribute("multiple",i.multiple),r},createText:n=>Cr.createTextNode(n),createComment:n=>Cr.createComment(n),setText:(n,e)=>{n.nodeValue=e},setElementText:(n,e)=>{n.textContent=e},parentNode:n=>n.parentNode,nextSibling:n=>n.nextSibling,querySelector:n=>Cr.querySelector(n),setScopeId(n,e){n.setAttribute(e,"")},insertStaticContent(n,e,t,i,r,s){const o=t?t.previousSibling:e.lastChild;if(r&&(r===s||r.nextSibling))for(;e.insertBefore(r.cloneNode(!0),t),!(r===s||!(r=r.nextSibling)););else{ty.innerHTML=i==="svg"?`<svg>${n}</svg>`:i==="mathml"?`<math>${n}</math>`:n;const a=ty.content;if(i==="svg"||i==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}e.insertBefore(a,t)}return[o?o.nextSibling:e.firstChild,t?t.previousSibling:e.lastChild]}},yx=Symbol("_vtc");function vx(n,e,t){const i=n[yx];i&&(e=(e?[e,...i]:[...i]).join(" ")),e==null?n.removeAttribute("class"):t?n.setAttribute("class",e):n.className=e}const ny=Symbol("_vod"),wx=Symbol("_vsh"),Tx=Symbol(""),Ex=/(^|;)\s*display\s*:/;function Sx(n,e,t){const i=n.style,r=Nt(t);let s=!1;if(t&&!r){if(e)if(Nt(e))for(const o of e.split(";")){const a=o.slice(0,o.indexOf(":")).trim();t[a]==null&&iu(i,a,"")}else for(const o in e)t[o]==null&&iu(i,o,"");for(const o in t)o==="display"&&(s=!0),iu(i,o,t[o])}else if(r){if(e!==t){const o=i[Tx];o&&(t+=";"+o),i.cssText=t,s=Ex.test(t)}}else e&&n.removeAttribute("style");ny in n&&(n[ny]=s?i.display:"",n[wx]&&(i.display="none"))}const iy=/\s*!important$/;function iu(n,e,t){if(ge(t))t.forEach(i=>iu(n,e,i));else if(t==null&&(t=""),e.startsWith("--"))n.setProperty(e,t);else{const i=bx(n,e);iy.test(t)?n.setProperty(da(i),t.replace(iy,""),"important"):n[i]=t}}const ry=["Webkit","Moz","ms"],pd={};function bx(n,e){const t=pd[e];if(t)return t;let i=Ui(e);if(i!=="filter"&&i in n)return pd[e]=i;i=dh(i);for(let r=0;r<ry.length;r++){const s=ry[r]+i;if(s in n)return pd[e]=s}return e}const sy="http://www.w3.org/1999/xlink";function Ix(n,e,t,i,r){if(i&&e.startsWith("xlink:"))t==null?n.removeAttributeNS(sy,e.slice(6,e.length)):n.setAttributeNS(sy,e,t);else{const s=FA(e);t==null||s&&!Cw(t)?n.removeAttribute(e):n.setAttribute(e,s?"":t)}}function Cx(n,e,t,i,r,s,o){if(e==="innerHTML"||e==="textContent"){i&&o(i,r,s),n[e]=t??"";return}const a=n.tagName;if(e==="value"&&a!=="PROGRESS"&&!a.includes("-")){const c=a==="OPTION"?n.getAttribute("value")||"":n.value,u=t??"";(c!==u||!("_value"in n))&&(n.value=u),t==null&&n.removeAttribute(e),n._value=t;return}let l=!1;if(t===""||t==null){const c=typeof n[e];c==="boolean"?t=Cw(t):t==null&&c==="string"?(t="",l=!0):c==="number"&&(t=0,l=!0)}try{n[e]=t}catch{}l&&n.removeAttribute(e)}function ho(n,e,t,i){n.addEventListener(e,t,i)}function Ax(n,e,t,i){n.removeEventListener(e,t,i)}const oy=Symbol("_vei");function xx(n,e,t,i,r=null){const s=n[oy]||(n[oy]={}),o=s[e];if(i&&o)o.value=i;else{const[a,l]=Rx(e);if(i){const c=s[e]=kx(i,r);ho(n,a,c,l)}else o&&(Ax(n,a,o,l),s[e]=void 0)}}const ay=/(?:Once|Passive|Capture)$/;function Rx(n){let e;if(ay.test(n)){e={};let i;for(;i=n.match(ay);)n=n.slice(0,n.length-i[0].length),e[i[0].toLowerCase()]=!0}return[n[2]===":"?n.slice(3):da(n.slice(2)),e]}let _d=0;const Px=Promise.resolve(),Ox=()=>_d||(Px.then(()=>_d=0),_d=Date.now());function kx(n,e){const t=i=>{if(!i._vts)i._vts=Date.now();else if(i._vts<=t.attached)return;pi(Nx(i,t.value),e,5,[i])};return t.value=n,t.attached=Ox(),t}function Nx(n,e){if(ge(e)){const t=n.stopImmediatePropagation;return n.stopImmediatePropagation=()=>{t.call(n),n._stopped=!0},e.map(i=>r=>!r._stopped&&i&&i(r))}else return e}const ly=n=>n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&n.charCodeAt(2)>96&&n.charCodeAt(2)<123,Mx=(n,e,t,i,r,s,o,a,l)=>{const c=r==="svg";e==="class"?vx(n,i,c):e==="style"?Sx(n,t,i):ch(e)?u_(e)||xx(n,e,t,i,o):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):Dx(n,e,i,c))?Cx(n,e,i,s,o,a,l):(e==="true-value"?n._trueValue=i:e==="false-value"&&(n._falseValue=i),Ix(n,e,i,c))};function Dx(n,e,t,i){if(i)return!!(e==="innerHTML"||e==="textContent"||e in n&&ly(e)&&we(t));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&n.tagName==="INPUT"||e==="type"&&n.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const r=n.tagName;if(r==="IMG"||r==="VIDEO"||r==="CANVAS"||r==="SOURCE")return!1}return ly(e)&&Nt(t)?!1:e in n}const cy=n=>{const e=n.props["onUpdate:modelValue"]||!1;return ge(e)?t=>Jc(e,t):e};function Lx(n){n.target.composing=!0}function uy(n){const e=n.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const gd=Symbol("_assign"),hy={created(n,{modifiers:{lazy:e,trim:t,number:i}},r){n[gd]=cy(r);const s=i||r.props&&r.props.type==="number";ho(n,e?"change":"input",o=>{if(o.target.composing)return;let a=n.value;t&&(a=a.trim()),s&&(a=wf(a)),n[gd](a)}),t&&ho(n,"change",()=>{n.value=n.value.trim()}),e||(ho(n,"compositionstart",Lx),ho(n,"compositionend",uy),ho(n,"change",uy))},mounted(n,{value:e}){n.value=e??""},beforeUpdate(n,{value:e,modifiers:{lazy:t,trim:i,number:r}},s){if(n[gd]=cy(s),n.composing)return;const o=(r||n.type==="number")&&!/^0\d/.test(n.value)?wf(n.value):n.value,a=e??"";o!==a&&(document.activeElement===n&&n.type!=="range"&&(t||i&&n.value.trim()===a)||(n.value=a))}},Vx=["ctrl","shift","alt","meta"],Fx={stop:n=>n.stopPropagation(),prevent:n=>n.preventDefault(),self:n=>n.target!==n.currentTarget,ctrl:n=>!n.ctrlKey,shift:n=>!n.shiftKey,alt:n=>!n.altKey,meta:n=>!n.metaKey,left:n=>"button"in n&&n.button!==0,middle:n=>"button"in n&&n.button!==1,right:n=>"button"in n&&n.button!==2,exact:(n,e)=>Vx.some(t=>n[`${t}Key`]&&!e.includes(t))},Ux=(n,e)=>{const t=n._withMods||(n._withMods={}),i=e.join(".");return t[i]||(t[i]=(r,...s)=>{for(let o=0;o<e.length;o++){const a=Fx[e[o]];if(a&&a(r,e))return}return n(r,...s)})},$x=Ut({patchProp:Mx},mx);let dy;function Bx(){return dy||(dy=X1($x))}const zx=(...n)=>{const e=Bx().createApp(...n),{mount:t}=e;return e.mount=i=>{const r=Gx(i);if(!r)return;const s=e._component;!we(s)&&!s.render&&!s.template&&(s.template=r.innerHTML),r.innerHTML="";const o=t(r,!1,jx(r));return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),o},e};function jx(n){if(n instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&n instanceof MathMLElement)return"mathml"}function Gx(n){return Nt(n)?document.querySelector(n):n}var fy={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ET={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X=function(n,e){if(!n)throw fa(e)},fa=function(n){return new Error("Firebase Database ("+ET.SDK_VERSION+") INTERNAL ASSERT FAILED: "+n)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ST=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let r=n.charCodeAt(i);r<128?e[t++]=r:r<2048?(e[t++]=r>>6|192,e[t++]=r&63|128):(r&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=r>>18|240,e[t++]=r>>12&63|128,e[t++]=r>>6&63|128,e[t++]=r&63|128):(e[t++]=r>>12|224,e[t++]=r>>6&63|128,e[t++]=r&63|128)}return e},Hx=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const r=n[t++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const s=n[t++];e[i++]=String.fromCharCode((r&31)<<6|s&63)}else if(r>239&&r<365){const s=n[t++],o=n[t++],a=n[t++],l=((r&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[i++]=String.fromCharCode(55296+(l>>10)),e[i++]=String.fromCharCode(56320+(l&1023))}else{const s=n[t++],o=n[t++];e[i++]=String.fromCharCode((r&15)<<12|(s&63)<<6|o&63)}}return e.join("")},Eh={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<n.length;r+=3){const s=n[r],o=r+1<n.length,a=o?n[r+1]:0,l=r+2<n.length,c=l?n[r+2]:0,u=s>>2,h=(s&3)<<4|a>>4;let f=(a&15)<<2|c>>6,d=c&63;l||(d=64,o||(f=64)),i.push(t[u],t[h],t[f],t[d])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(ST(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):Hx(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<n.length;){const s=t[n.charAt(r++)],a=r<n.length?t[n.charAt(r)]:0;++r;const c=r<n.length?t[n.charAt(r)]:64;++r;const h=r<n.length?t[n.charAt(r)]:64;if(++r,s==null||a==null||c==null||h==null)throw new qx;const f=s<<2|a>>4;if(i.push(f),c!==64){const d=a<<4&240|c>>2;if(i.push(d),h!==64){const _=c<<6&192|h;i.push(_)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class qx extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const bT=function(n){const e=ST(n);return Eh.encodeByteArray(e,!0)},Tu=function(n){return bT(n).replace(/\./g,"")},Eu=function(n){try{return Eh.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wx(n){return IT(void 0,n)}function IT(n,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const t=e;return new Date(t.getTime());case Object:n===void 0&&(n={});break;case Array:n=[];break;default:return e}for(const t in e)!e.hasOwnProperty(t)||!Kx(t)||(n[t]=IT(n[t],e[t]));return n}function Kx(n){return n!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yx(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xx=()=>Yx().__FIREBASE_DEFAULTS__,Qx=()=>{if(typeof process>"u"||typeof fy>"u")return;const n=fy.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},Jx=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&Eu(n[1]);return e&&JSON.parse(e)},Sh=()=>{try{return Xx()||Qx()||Jx()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Zx=n=>{var e,t;return(t=(e=Sh())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},CT=n=>{const e=Zx(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},AT=()=>{var n;return(n=Sh())===null||n===void 0?void 0:n.config},eR=n=>{var e;return(e=Sh())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Al{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xT(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",r=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Tu(JSON.stringify(t)),Tu(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mi(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function P_(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(mi())}function tR(){var n;const e=(n=Sh())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function nR(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function RT(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function PT(){return ET.NODE_ADMIN===!0}function iR(){return!tR()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function OT(){try{return typeof indexedDB=="object"}catch{return!1}}function rR(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},r.onupgradeneeded=()=>{t=!1},r.onerror=()=>{var s;e(((s=r.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sR="FirebaseError";class fr extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=sR,Object.setPrototypeOf(this,fr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,pa.prototype.create)}}class pa{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},r=`${this.service}/${e}`,s=this.errors[e],o=s?oR(s,i):"Error",a=`${this.serviceName}: ${o} (${r}).`;return new fr(r,a,i)}}function oR(n,e){return n.replace(aR,(t,i)=>{const r=e[i];return r!=null?String(r):`<${i}?>`})}const aR=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xl(n){return JSON.parse(n)}function Kt(n){return JSON.stringify(n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kT=function(n){let e={},t={},i={},r="";try{const s=n.split(".");e=xl(Eu(s[0])||""),t=xl(Eu(s[1])||""),r=s[2],i=t.d||{},delete t.d}catch{}return{header:e,claims:t,data:i,signature:r}},lR=function(n){const e=kT(n),t=e.claims;return!!t&&typeof t=="object"&&t.hasOwnProperty("iat")},cR=function(n){const e=kT(n).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pr(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function qo(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]}function py(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Su(n,e,t){const i={};for(const r in n)Object.prototype.hasOwnProperty.call(n,r)&&(i[r]=e.call(t,n[r],r,n));return i}function Nf(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const r of t){if(!i.includes(r))return!1;const s=n[r],o=e[r];if(_y(s)&&_y(o)){if(!Nf(s,o))return!1}else if(s!==o)return!1}for(const r of i)if(!t.includes(r))return!1;return!0}function _y(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O_(n){const e=[];for(const[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uR{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const i=this.W_;if(typeof e=="string")for(let h=0;h<16;h++)i[h]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let h=0;h<16;h++)i[h]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let h=16;h<80;h++){const f=i[h-3]^i[h-8]^i[h-14]^i[h-16];i[h]=(f<<1|f>>>31)&4294967295}let r=this.chain_[0],s=this.chain_[1],o=this.chain_[2],a=this.chain_[3],l=this.chain_[4],c,u;for(let h=0;h<80;h++){h<40?h<20?(c=a^s&(o^a),u=1518500249):(c=s^o^a,u=1859775393):h<60?(c=s&o|a&(s|o),u=2400959708):(c=s^o^a,u=3395469782);const f=(r<<5|r>>>27)+c+l+u+i[h]&4294967295;l=a,a=o,o=(s<<30|s>>>2)&4294967295,s=r,r=f}this.chain_[0]=this.chain_[0]+r&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295}update(e,t){if(e==null)return;t===void 0&&(t=e.length);const i=t-this.blockSize;let r=0;const s=this.buf_;let o=this.inbuf_;for(;r<t;){if(o===0)for(;r<=i;)this.compress_(e,r),r+=this.blockSize;if(typeof e=="string"){for(;r<t;)if(s[o]=e.charCodeAt(r),++o,++r,o===this.blockSize){this.compress_(s),o=0;break}}else for(;r<t;)if(s[o]=e[r],++o,++r,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=t}digest(){const e=[];let t=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let r=this.blockSize-1;r>=56;r--)this.buf_[r]=t&255,t/=256;this.compress_(this.buf_);let i=0;for(let r=0;r<5;r++)for(let s=24;s>=0;s-=8)e[i]=this.chain_[r]>>s&255,++i;return e}}function hR(n,e){const t=new dR(n,e);return t.subscribe.bind(t)}class dR{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let r;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");fR(e,["next","error","complete"])?r=e:r={next:e,error:t,complete:i},r.next===void 0&&(r.next=md),r.error===void 0&&(r.error=md),r.complete===void 0&&(r.complete=md);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function fR(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function md(){}function pR(n,e){return`${n} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _R=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let r=n.charCodeAt(i);if(r>=55296&&r<=56319){const s=r-55296;i++,X(i<n.length,"Surrogate pair missing trail surrogate.");const o=n.charCodeAt(i)-56320;r=65536+(s<<10)+o}r<128?e[t++]=r:r<2048?(e[t++]=r>>6|192,e[t++]=r&63|128):r<65536?(e[t++]=r>>12|224,e[t++]=r>>6&63|128,e[t++]=r&63|128):(e[t++]=r>>18|240,e[t++]=r>>12&63|128,e[t++]=r>>6&63|128,e[t++]=r&63|128)}return e},bh=function(n){let e=0;for(let t=0;t<n.length;t++){const i=n.charCodeAt(t);i<128?e++:i<2048?e+=2:i>=55296&&i<=56319?(e+=4,t++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yi(n){return n&&n._delegate?n._delegate:n}class vi{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ds="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gR{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new Al;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:t});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(yR(e))try{this.getOrInitializeService({instanceIdentifier:ds})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(t);try{const s=this.getOrInitializeService({instanceIdentifier:r});i.resolve(s)}catch{}}}}clearInstance(e=ds){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ds){return this.instances.has(e)}getOptions(e=ds){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);i===a&&o.resolve(r)}return r}onInit(e,t){var i;const r=this.normalizeInstanceIdentifier(t),s=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;s.add(e),this.onInitCallbacks.set(r,s);const o=this.instances.get(r);return o&&e(o,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const r of i)try{r(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:mR(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=ds){return this.component?this.component.multipleInstances?e:ds:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function mR(n){return n===ds?void 0:n}function yR(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vR{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new gR(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ae;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Ae||(Ae={}));const wR={debug:Ae.DEBUG,verbose:Ae.VERBOSE,info:Ae.INFO,warn:Ae.WARN,error:Ae.ERROR,silent:Ae.SILENT},TR=Ae.INFO,ER={[Ae.DEBUG]:"log",[Ae.VERBOSE]:"log",[Ae.INFO]:"info",[Ae.WARN]:"warn",[Ae.ERROR]:"error"},SR=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),r=ER[e];if(r)console[r](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class rc{constructor(e){this.name=e,this._logLevel=TR,this._logHandler=SR,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ae))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?wR[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ae.DEBUG,...e),this._logHandler(this,Ae.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ae.VERBOSE,...e),this._logHandler(this,Ae.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ae.INFO,...e),this._logHandler(this,Ae.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ae.WARN,...e),this._logHandler(this,Ae.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ae.ERROR,...e),this._logHandler(this,Ae.ERROR,...e)}}const bR=(n,e)=>e.some(t=>n instanceof t);let gy,my;function IR(){return gy||(gy=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function CR(){return my||(my=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const NT=new WeakMap,Mf=new WeakMap,MT=new WeakMap,yd=new WeakMap,k_=new WeakMap;function AR(n){const e=new Promise((t,i)=>{const r=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{t(Ur(n.result)),r()},o=()=>{i(n.error),r()};n.addEventListener("success",s),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&NT.set(t,n)}).catch(()=>{}),k_.set(e,n),e}function xR(n){if(Mf.has(n))return;const e=new Promise((t,i)=>{const r=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{t(),r()},o=()=>{i(n.error||new DOMException("AbortError","AbortError")),r()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});Mf.set(n,e)}let Df={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Mf.get(n);if(e==="objectStoreNames")return n.objectStoreNames||MT.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Ur(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function RR(n){Df=n(Df)}function PR(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call(vd(this),e,...t);return MT.set(i,e.sort?e.sort():[e]),Ur(i)}:CR().includes(n)?function(...e){return n.apply(vd(this),e),Ur(NT.get(this))}:function(...e){return Ur(n.apply(vd(this),e))}}function OR(n){return typeof n=="function"?PR(n):(n instanceof IDBTransaction&&xR(n),bR(n,IR())?new Proxy(n,Df):n)}function Ur(n){if(n instanceof IDBRequest)return AR(n);if(yd.has(n))return yd.get(n);const e=OR(n);return e!==n&&(yd.set(n,e),k_.set(e,n)),e}const vd=n=>k_.get(n);function kR(n,e,{blocked:t,upgrade:i,blocking:r,terminated:s}={}){const o=indexedDB.open(n,e),a=Ur(o);return i&&o.addEventListener("upgradeneeded",l=>{i(Ur(o.result),l.oldVersion,l.newVersion,Ur(o.transaction),l)}),t&&o.addEventListener("blocked",l=>t(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),r&&l.addEventListener("versionchange",c=>r(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const NR=["get","getKey","getAll","getAllKeys","count"],MR=["put","add","delete","clear"],wd=new Map;function yy(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(wd.get(e))return wd.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,r=MR.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(r||NR.includes(t)))return;const s=async function(o,...a){const l=this.transaction(o,r?"readwrite":"readonly");let c=l.store;return i&&(c=c.index(a.shift())),(await Promise.all([c[t](...a),r&&l.done]))[0]};return wd.set(e,s),s}RR(n=>({...n,get:(e,t,i)=>yy(e,t)||n.get(e,t,i),has:(e,t)=>!!yy(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DR{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(LR(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function LR(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Lf="@firebase/app",vy="0.10.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fs=new rc("@firebase/app"),VR="@firebase/app-compat",FR="@firebase/analytics-compat",UR="@firebase/analytics",$R="@firebase/app-check-compat",BR="@firebase/app-check",zR="@firebase/auth",jR="@firebase/auth-compat",GR="@firebase/database",HR="@firebase/database-compat",qR="@firebase/functions",WR="@firebase/functions-compat",KR="@firebase/installations",YR="@firebase/installations-compat",XR="@firebase/messaging",QR="@firebase/messaging-compat",JR="@firebase/performance",ZR="@firebase/performance-compat",eP="@firebase/remote-config",tP="@firebase/remote-config-compat",nP="@firebase/storage",iP="@firebase/storage-compat",rP="@firebase/firestore",sP="@firebase/firestore-compat",oP="firebase",aP="10.11.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vf="[DEFAULT]",lP={[Lf]:"fire-core",[VR]:"fire-core-compat",[UR]:"fire-analytics",[FR]:"fire-analytics-compat",[BR]:"fire-app-check",[$R]:"fire-app-check-compat",[zR]:"fire-auth",[jR]:"fire-auth-compat",[GR]:"fire-rtdb",[HR]:"fire-rtdb-compat",[qR]:"fire-fn",[WR]:"fire-fn-compat",[KR]:"fire-iid",[YR]:"fire-iid-compat",[XR]:"fire-fcm",[QR]:"fire-fcm-compat",[JR]:"fire-perf",[ZR]:"fire-perf-compat",[eP]:"fire-rc",[tP]:"fire-rc-compat",[nP]:"fire-gcs",[iP]:"fire-gcs-compat",[rP]:"fire-fst",[sP]:"fire-fst-compat","fire-js":"fire-js",[oP]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bu=new Map,cP=new Map,Ff=new Map;function wy(n,e){try{n.container.addComponent(e)}catch(t){Fs.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function $i(n){const e=n.name;if(Ff.has(e))return Fs.debug(`There were multiple attempts to register component ${e}.`),!1;Ff.set(e,n);for(const t of bu.values())wy(t,n);for(const t of cP.values())wy(t,n);return!0}function DT(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Ua(n){return n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uP={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},$r=new pa("app","Firebase",uP);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hP{constructor(e,t,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new vi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw $r.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _a=aP;function LT(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const i=Object.assign({name:Vf,automaticDataCollectionEnabled:!1},e),r=i.name;if(typeof r!="string"||!r)throw $r.create("bad-app-name",{appName:String(r)});if(t||(t=AT()),!t)throw $r.create("no-options");const s=bu.get(r);if(s){if(Nf(t,s.options)&&Nf(i,s.config))return s;throw $r.create("duplicate-app",{appName:r})}const o=new vR(r);for(const l of Ff.values())o.addComponent(l);const a=new hP(t,i,o);return bu.set(r,a),a}function VT(n=Vf){const e=bu.get(n);if(!e&&n===Vf&&AT())return LT();if(!e)throw $r.create("no-app",{appName:n});return e}function Ln(n,e,t){var i;let r=(i=lP[n])!==null&&i!==void 0?i:n;t&&(r+=`-${t}`);const s=r.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${r}" with version "${e}":`];s&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Fs.warn(a.join(" "));return}$i(new vi(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dP="firebase-heartbeat-database",fP=1,Rl="firebase-heartbeat-store";let Td=null;function FT(){return Td||(Td=kR(dP,fP,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Rl)}catch(t){console.warn(t)}}}}).catch(n=>{throw $r.create("idb-open",{originalErrorMessage:n.message})})),Td}async function pP(n){try{const t=(await FT()).transaction(Rl),i=await t.objectStore(Rl).get(UT(n));return await t.done,i}catch(e){if(e instanceof fr)Fs.warn(e.message);else{const t=$r.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Fs.warn(t.message)}}}async function Ty(n,e){try{const i=(await FT()).transaction(Rl,"readwrite");await i.objectStore(Rl).put(e,UT(n)),await i.done}catch(t){if(t instanceof fr)Fs.warn(t.message);else{const i=$r.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Fs.warn(i.message)}}}function UT(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _P=1024,gP=30*24*60*60*1e3;class mP{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new vP(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Ey();if(!(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:r}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=gP}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Ey(),{heartbeatsToSend:i,unsentEntries:r}=yP(this._heartbeatsCache.heartbeats),s=Tu(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}}function Ey(){return new Date().toISOString().substring(0,10)}function yP(n,e=_P){const t=[];let i=n.slice();for(const r of n){const s=t.find(o=>o.agent===r.agent);if(s){if(s.dates.push(r.date),Sy(t)>e){s.dates.pop();break}}else if(t.push({agent:r.agent,dates:[r.date]}),Sy(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class vP{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return OT()?rR().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await pP(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const r=await this.read();return Ty(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const r=await this.read();return Ty(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Sy(n){return Tu(JSON.stringify({version:2,heartbeats:n})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wP(n){$i(new vi("platform-logger",e=>new DR(e),"PRIVATE")),$i(new vi("heartbeat",e=>new mP(e),"PRIVATE")),Ln(Lf,vy,n),Ln(Lf,vy,"esm2017"),Ln("fire-js","")}wP("");function $T(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(t[i[r]]=n[i[r]]);return t}function BT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const TP=BT,zT=new pa("auth","Firebase",BT());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iu=new rc("@firebase/auth");function EP(n,...e){Iu.logLevel<=Ae.WARN&&Iu.warn(`Auth (${_a}): ${n}`,...e)}function ru(n,...e){Iu.logLevel<=Ae.ERROR&&Iu.error(`Auth (${_a}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function by(n,...e){throw N_(n,...e)}function jT(n,...e){return N_(n,...e)}function GT(n,e,t){const i=Object.assign(Object.assign({},TP()),{[e]:t});return new pa("auth","Firebase",i).create(e,{appName:n.name})}function su(n){return GT(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function N_(n,...e){if(typeof n!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return zT.create(n,...e)}function $e(n,e,...t){if(!n)throw N_(e,...t)}function rl(n){const e="INTERNAL ASSERTION FAILED: "+n;throw ru(e),new Error(e)}function Cu(n,e){n||rl(e)}function SP(){return Iy()==="http:"||Iy()==="https:"}function Iy(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bP(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(SP()||nR()||"connection"in navigator)?navigator.onLine:!0}function IP(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sc{constructor(e,t){this.shortDelay=e,this.longDelay=t,Cu(t>e,"Short delay should be less than long delay!"),this.isMobile=P_()||RT()}get(){return bP()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CP(n,e){Cu(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HT{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;rl("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;rl("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;rl("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AP={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xP=new sc(3e4,6e4);function qT(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function Ih(n,e,t,i,r={}){return WT(n,r,async()=>{let s={},o={};i&&(e==="GET"?o=i:s={body:JSON.stringify(i)});const a=O_(Object.assign({key:n.config.apiKey},o)).slice(1),l=await n._getAdditionalHeaders();return l["Content-Type"]="application/json",n.languageCode&&(l["X-Firebase-Locale"]=n.languageCode),HT.fetch()(KT(n,n.config.apiHost,t,a),Object.assign({method:e,headers:l,referrerPolicy:"no-referrer"},s))})}async function WT(n,e,t){n._canInitEmulator=!1;const i=Object.assign(Object.assign({},AP),e);try{const r=new RP(n),s=await Promise.race([t(),r.promise]);r.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw Mc(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Mc(n,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Mc(n,"email-already-in-use",o);if(l==="USER_DISABLED")throw Mc(n,"user-disabled",o);const u=i[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw GT(n,u,c);by(n,u)}}catch(r){if(r instanceof fr)throw r;by(n,"network-request-failed",{message:String(r)})}}function KT(n,e,t,i){const r=`${e}${t}?${i}`;return n.config.emulator?CP(n.config,r):`${n.config.apiScheme}://${r}`}class RP{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(jT(this.auth,"network-request-failed")),xP.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Mc(n,e,t){const i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const r=jT(n,e,i);return r.customData._tokenResponse=t,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PP(n,e){return Ih(n,"POST","/v1/accounts:delete",e)}async function YT(n,e){return Ih(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sl(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function OP(n,e=!1){const t=yi(n),i=await t.getIdToken(e),r=XT(i);$e(r&&r.exp&&r.auth_time&&r.iat,t.auth,"internal-error");const s=typeof r.firebase=="object"?r.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:r,token:i,authTime:sl(Ed(r.auth_time)),issuedAtTime:sl(Ed(r.iat)),expirationTime:sl(Ed(r.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Ed(n){return Number(n)*1e3}function XT(n){const[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return ru("JWT malformed, contained fewer than 3 sections"),null;try{const r=Eu(t);return r?JSON.parse(r):(ru("Failed to decode base64 JWT payload"),null)}catch(r){return ru("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function Cy(n){const e=XT(n);return $e(e,"internal-error"),$e(typeof e.exp<"u","internal-error"),$e(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Uf(n,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof fr&&kP(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function kP({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NP{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const r=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $f{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=sl(this.lastLoginAt),this.creationTime=sl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Au(n){var e;const t=n.auth,i=await n.getIdToken(),r=await Uf(n,YT(t,{idToken:i}));$e(r==null?void 0:r.users.length,t,"internal-error");const s=r.users[0];n._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?QT(s.providerUserInfo):[],a=DP(n.providerData,o),l=n.isAnonymous,c=!(n.email&&s.passwordHash)&&!(a!=null&&a.length),u=l?c:!1,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new $f(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(n,h)}async function MP(n){const e=yi(n);await Au(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function DP(n,e){return[...n.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function QT(n){return n.map(e=>{var{providerId:t}=e,i=$T(e,["providerId"]);return{providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LP(n,e){const t=await WT(n,{},async()=>{const i=O_({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:s}=n.config,o=KT(n,r,"/v1/token",`key=${s}`),a=await n._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",HT.fetch()(o,{method:"POST",headers:a,body:i})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function VP(n,e){return Ih(n,"POST","/v2/accounts:revokeToken",qT(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ao{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){$e(e.idToken,"internal-error"),$e(typeof e.idToken<"u","internal-error"),$e(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Cy(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){$e(e.length!==0,"internal-error");const t=Cy(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:($e(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:r,expiresIn:s}=await LP(e,t);this.updateTokensAndExpiration(i,r,Number(s))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:r,expirationTime:s}=t,o=new Ao;return i&&($e(typeof i=="string","internal-error",{appName:e}),o.refreshToken=i),r&&($e(typeof r=="string","internal-error",{appName:e}),o.accessToken=r),s&&($e(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ao,this.toJSON())}_performRefresh(){return rl("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wr(n,e){$e(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Rr{constructor(e){var{uid:t,auth:i,stsTokenManager:r}=e,s=$T(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new NP(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new $f(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await Uf(this,this.stsTokenManager.getToken(this.auth,e));return $e(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return OP(this,e)}reload(){return MP(this)}_assign(e){this!==e&&($e(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Rr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){$e(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await Au(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ua(this.auth.app))return Promise.reject(su(this.auth));const e=await this.getIdToken();return await Uf(this,PP(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var i,r,s,o,a,l,c,u;const h=(i=t.displayName)!==null&&i!==void 0?i:void 0,f=(r=t.email)!==null&&r!==void 0?r:void 0,d=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,_=(o=t.photoURL)!==null&&o!==void 0?o:void 0,p=(a=t.tenantId)!==null&&a!==void 0?a:void 0,g=(l=t._redirectEventId)!==null&&l!==void 0?l:void 0,m=(c=t.createdAt)!==null&&c!==void 0?c:void 0,T=(u=t.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:w,emailVerified:S,isAnonymous:E,providerData:I,stsTokenManager:P}=t;$e(w&&P,e,"internal-error");const x=Ao.fromJSON(this.name,P);$e(typeof w=="string",e,"internal-error"),wr(h,e.name),wr(f,e.name),$e(typeof S=="boolean",e,"internal-error"),$e(typeof E=="boolean",e,"internal-error"),wr(d,e.name),wr(_,e.name),wr(p,e.name),wr(g,e.name),wr(m,e.name),wr(T,e.name);const A=new Rr({uid:w,auth:e,email:f,emailVerified:S,displayName:h,isAnonymous:E,photoURL:_,phoneNumber:d,tenantId:p,stsTokenManager:x,createdAt:m,lastLoginAt:T});return I&&Array.isArray(I)&&(A.providerData=I.map(k=>Object.assign({},k))),g&&(A._redirectEventId=g),A}static async _fromIdTokenResponse(e,t,i=!1){const r=new Ao;r.updateFromServerResponse(t);const s=new Rr({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:i});return await Au(s),s}static async _fromGetAccountInfoResponse(e,t,i){const r=t.users[0];$e(r.localId!==void 0,"internal-error");const s=r.providerUserInfo!==void 0?QT(r.providerUserInfo):[],o=!(r.email&&r.passwordHash)&&!(s!=null&&s.length),a=new Ao;a.updateFromIdToken(i);const l=new Rr({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:s,metadata:new $f(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ay=new Map;function ys(n){Cu(n instanceof Function,"Expected a class definition");let e=Ay.get(n);return e?(Cu(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,Ay.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JT{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}JT.type="NONE";const xy=JT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sd(n,e,t){return`firebase:${n}:${e}:${t}`}class xo{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:r,name:s}=this.auth;this.fullUserKey=Sd(this.userKey,r.apiKey,s),this.fullPersistenceKey=Sd("persistence",r.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Rr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new xo(ys(xy),e,i);const r=(await Promise.all(t.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=r[0]||ys(xy);const o=Sd(i,e.config.apiKey,e.name);let a=null;for(const c of t)try{const u=await c._get(o);if(u){const h=Rr._fromJSON(e,u);c!==s&&(a=h),s=c;break}}catch{}const l=r.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new xo(s,e,i):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(t.map(async c=>{if(c!==s)try{await c._remove(o)}catch{}})),new xo(s,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ry(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(BP(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(FP(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(jP(e))return"Blackberry";if(GP(e))return"Webos";if(UP(e))return"Safari";if((e.includes("chrome/")||$P(e))&&!e.includes("edge/"))return"Chrome";if(zP(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function FP(n=mi()){return/firefox\//i.test(n)}function UP(n=mi()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function $P(n=mi()){return/crios\//i.test(n)}function BP(n=mi()){return/iemobile/i.test(n)}function zP(n=mi()){return/android/i.test(n)}function jP(n=mi()){return/blackberry/i.test(n)}function GP(n=mi()){return/webos/i.test(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZT(n,e=[]){let t;switch(n){case"Browser":t=Ry(mi());break;case"Worker":t=`${Ry(mi())}-${n}`;break;default:t=n}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${_a}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HP{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});i.onAbort=t,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const r of t)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qP(n,e={}){return Ih(n,"GET","/v2/passwordPolicy",qT(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WP=6;class KP{constructor(e){var t,i,r,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=o.minPasswordLength)!==null&&t!==void 0?t:WP,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(r=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&r!==void 0?r:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,i,r,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(t=l.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),l.isValid&&(l.isValid=(i=l.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(r=l.containsLowercaseLetter)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,r,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YP{constructor(e,t,i,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Py(this),this.idTokenSubscription=new Py(this),this.beforeStateQueue=new HP(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=zT,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ys(t)),this._initializationPromise=this.queue(async()=>{var i,r;if(!this._deleted&&(this.persistenceManager=await xo.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((r=this.currentUser)===null||r===void 0?void 0:r.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await YT(this,{idToken:e}),i=await Rr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Ua(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let r=i,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=r==null?void 0:r._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(r=l.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return $e(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Au(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=IP()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ua(this.app))return Promise.reject(su(this));const t=e?yi(e):null;return t&&$e(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&$e(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ua(this.app)?Promise.reject(su(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ua(this.app)?Promise.reject(su(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ys(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await qP(this),t=new KP(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new pa("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await VP(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ys(e)||this._popupRedirectResolver;$e(t,this,"argument-error"),this.redirectPersistenceManager=await xo.create(this,[ys(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,r){if(this._deleted)return()=>{};const s=typeof t=="function"?t:t.next.bind(t);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if($e(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof t=="function"){const l=e.addObserver(t,i,r);return()=>{o=!0,l()}}else{const l=e.addObserver(t);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return $e(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=ZT(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(t["X-Firebase-Client"]=i);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&EP(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function XP(n){return yi(n)}class Py{constructor(e){this.auth=e,this.observer=null,this.addObserver=hR(t=>this.observer=t)}get next(){return $e(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function QP(n,e){const t=(e==null?void 0:e.persistence)||[],i=(Array.isArray(t)?t:[t]).map(ys);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}new sc(3e4,6e4);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new sc(2e3,1e4);/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new sc(3e4,6e4);/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new sc(5e3,15e3);var Oy="@firebase/auth",ky="1.7.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JP{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){$e(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZP(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function eO(n){$i(new vi("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=i.options;$e(o&&!o.includes(":"),"invalid-api-key",{appName:i.name});const l={apiKey:o,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ZT(n)},c=new YP(i,r,s,l);return QP(c,t),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),$i(new vi("auth-internal",e=>{const t=XP(e.getProvider("auth").getImmediate());return(i=>new JP(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ln(Oy,ky,ZP(n)),Ln(Oy,ky,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tO=5*60;eR("authIdTokenMaxAge");eO("Browser");/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nO=new Map,iO={activated:!1,tokenObservers:[]};function wi(n){return nO.get(n)||Object.assign({},iO)}const Ny={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rO{constructor(e,t,i,r,s){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=i,this.lowerBound=r,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=r,r>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(e){this.stop();try{this.pending=new Al,this.pending.promise.catch(t=>{}),await sO(this.getNextRun(e)),this.pending.resolve(),await this.pending.promise,this.pending=new Al,this.pending.promise.catch(t=>{}),await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}function sO(n){return new Promise(e=>{setTimeout(e,n)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oO={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},xu=new pa("appCheck","AppCheck",oO);function eE(n){if(!wi(n).activated)throw xu.create("use-before-activation",{appName:n.name})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aO="firebase-app-check-database",lO=1,Bf="firebase-app-check-store";let Dc=null;function cO(){return Dc||(Dc=new Promise((n,e)=>{try{const t=indexedDB.open(aO,lO);t.onsuccess=i=>{n(i.target.result)},t.onerror=i=>{var r;e(xu.create("storage-open",{originalErrorMessage:(r=i.target.error)===null||r===void 0?void 0:r.message}))},t.onupgradeneeded=i=>{const r=i.target.result;switch(i.oldVersion){case 0:r.createObjectStore(Bf,{keyPath:"compositeKey"})}}}catch(t){e(xu.create("storage-open",{originalErrorMessage:t==null?void 0:t.message}))}}),Dc)}function uO(n,e){return hO(dO(n),e)}async function hO(n,e){const i=(await cO()).transaction(Bf,"readwrite"),s=i.objectStore(Bf).put({compositeKey:n,value:e});return new Promise((o,a)=>{s.onsuccess=l=>{o()},i.onerror=l=>{var c;a(xu.create("storage-set",{originalErrorMessage:(c=l.target.error)===null||c===void 0?void 0:c.message}))}})}function dO(n){return`${n.options.appId}-${n.name}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zf=new rc("@firebase/app-check");function My(n,e){return OT()?uO(n,e).catch(t=>{zf.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fO={error:"UNKNOWN_ERROR"};function pO(n){return Eh.encodeString(JSON.stringify(n),!1)}async function jf(n,e=!1){const t=n.app;eE(t);const i=wi(t);let r=i.token,s;if(r&&!$a(r)&&(i.token=void 0,r=void 0),!r){const l=await i.cachedTokenPromise;l&&($a(l)?r=l:await My(t,void 0))}if(!e&&r&&$a(r))return{token:r.token};let o=!1;try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),o=!0),r=await wi(t).exchangeTokenPromise}catch(l){l.code==="appCheck/throttled"?zf.warn(l.message):zf.error(l),s=l}let a;return r?s?$a(r)?a={token:r.token,internalError:s}:a=Ly(s):(a={token:r.token},i.token=r,await My(t,r)):a=Ly(s),o&&yO(t,a),a}async function _O(n){const e=n.app;eE(e);const{provider:t}=wi(e);{const{token:i}=await t.getToken();return{token:i}}}function gO(n,e,t,i){const{app:r}=n,s=wi(r),o={next:t,error:i,type:e};if(s.tokenObservers=[...s.tokenObservers,o],s.token&&$a(s.token)){const a=s.token;Promise.resolve().then(()=>{t({token:a.token}),Dy(n)}).catch(()=>{})}s.cachedTokenPromise.then(()=>Dy(n))}function tE(n,e){const t=wi(n),i=t.tokenObservers.filter(r=>r.next!==e);i.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=i}function Dy(n){const{app:e}=n,t=wi(e);let i=t.tokenRefresher;i||(i=mO(n),t.tokenRefresher=i),!i.isRunning()&&t.isTokenAutoRefreshEnabled&&i.start()}function mO(n){const{app:e}=n;return new rO(async()=>{const t=wi(e);let i;if(t.token?i=await jf(n,!0):i=await jf(n),i.error)throw i.error;if(i.internalError)throw i.internalError},()=>!0,()=>{const t=wi(e);if(t.token){let i=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5;const r=t.token.expireTimeMillis-5*60*1e3;return i=Math.min(i,r),Math.max(0,i-Date.now())}else return 0},Ny.RETRIAL_MIN_WAIT,Ny.RETRIAL_MAX_WAIT)}function yO(n,e){const t=wi(n).tokenObservers;for(const i of t)try{i.type==="EXTERNAL"&&e.error!=null?i.error(e.error):i.next(e)}catch{}}function $a(n){return n.expireTimeMillis-Date.now()>0}function Ly(n){return{token:pO(fO),error:n}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vO{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=wi(this.app);for(const t of e)tE(this.app,t.next);return Promise.resolve()}}function wO(n,e){return new vO(n,e)}function TO(n){return{getToken:e=>jf(n,e),getLimitedUseToken:()=>_O(n),addTokenListener:e=>gO(n,"INTERNAL",e),removeTokenListener:e=>tE(n.app,e)}}const EO="@firebase/app-check",SO="0.8.3",bO="app-check",Vy="app-check-internal";function IO(){$i(new vi(bO,n=>{const e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return wO(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(Vy).initialize()})),$i(new vi(Vy,n=>{const e=n.getProvider("app-check").getImmediate();return TO(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Ln(EO,SO)}IO();var CO="firebase",AO="10.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ln(CO,AO,"app");const xO=Symbol("firebaseApp");var Fy={};const Uy="@firebase/database",$y="1.0.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nE="";function RO(n){nE=n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PO{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){t==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Kt(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return t==null?null:xl(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OO{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){t==null?delete this.cache_[e]:this.cache_[e]=t}get(e){return pr(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iE=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new PO(e)}}catch{}return new OO},vs=iE("localStorage"),Gf=iE("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ro=new rc("@firebase/database"),kO=function(){let n=1;return function(){return n++}}(),rE=function(n){const e=_R(n),t=new uR;t.update(e);const i=t.digest();return Eh.encodeByteArray(i)},oc=function(...n){let e="";for(let t=0;t<n.length;t++){const i=n[t];Array.isArray(i)||i&&typeof i=="object"&&typeof i.length=="number"?e+=oc.apply(null,i):typeof i=="object"?e+=Kt(i):e+=i,e+=" "}return e};let As=null,By=!0;const NO=function(n,e){X(!e||n===!0||n===!1,"Can't turn on custom loggers persistently."),n===!0?(Ro.logLevel=Ae.VERBOSE,As=Ro.log.bind(Ro),e&&Gf.set("logging_enabled",!0)):typeof n=="function"?As=n:(As=null,Gf.remove("logging_enabled"))},tn=function(...n){if(By===!0&&(By=!1,As===null&&Gf.get("logging_enabled")===!0&&NO(!0)),As){const e=oc.apply(null,n);As(e)}},ac=function(n){return function(...e){tn(n,...e)}},Hf=function(...n){const e="FIREBASE INTERNAL ERROR: "+oc(...n);Ro.error(e)},Us=function(...n){const e=`FIREBASE FATAL ERROR: ${oc(...n)}`;throw Ro.error(e),new Error(e)},Vn=function(...n){const e="FIREBASE WARNING: "+oc(...n);Ro.warn(e)},MO=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Vn("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},sE=function(n){return typeof n=="number"&&(n!==n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},DO=function(n){if(document.readyState==="complete")n();else{let e=!1;const t=function(){if(!document.body){setTimeout(t,Math.floor(10));return}e||(e=!0,n())};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&t()}),window.attachEvent("onload",t))}},Wo="[MIN_NAME]",$s="[MAX_NAME]",ga=function(n,e){if(n===e)return 0;if(n===Wo||e===$s)return-1;if(e===Wo||n===$s)return 1;{const t=zy(n),i=zy(e);return t!==null?i!==null?t-i===0?n.length-e.length:t-i:-1:i!==null?1:n<e?-1:1}},LO=function(n,e){return n===e?0:n<e?-1:1},xa=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+Kt(e))},M_=function(n){if(typeof n!="object"||n===null)return Kt(n);const e=[];for(const i in n)e.push(i);e.sort();let t="{";for(let i=0;i<e.length;i++)i!==0&&(t+=","),t+=Kt(e[i]),t+=":",t+=M_(n[e[i]]);return t+="}",t},oE=function(n,e){const t=n.length;if(t<=e)return[n];const i=[];for(let r=0;r<t;r+=e)r+e>t?i.push(n.substring(r,t)):i.push(n.substring(r,r+e));return i};function ei(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const aE=function(n){X(!sE(n),"Invalid JSON number");const e=11,t=52,i=(1<<e-1)-1;let r,s,o,a,l;n===0?(s=0,o=0,r=1/n===-1/0?1:0):(r=n<0,n=Math.abs(n),n>=Math.pow(2,1-i)?(a=Math.min(Math.floor(Math.log(n)/Math.LN2),i),s=a+i,o=Math.round(n*Math.pow(2,t-a)-Math.pow(2,t))):(s=0,o=Math.round(n/Math.pow(2,1-i-t))));const c=[];for(l=t;l;l-=1)c.push(o%2?1:0),o=Math.floor(o/2);for(l=e;l;l-=1)c.push(s%2?1:0),s=Math.floor(s/2);c.push(r?1:0),c.reverse();const u=c.join("");let h="";for(l=0;l<64;l+=8){let f=parseInt(u.substr(l,8),2).toString(16);f.length===1&&(f="0"+f),h=h+f}return h.toLowerCase()},VO=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},FO=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"},UO=new RegExp("^-?(0*)\\d{1,10}$"),$O=-2147483648,BO=2147483647,zy=function(n){if(UO.test(n)){const e=Number(n);if(e>=$O&&e<=BO)return e}return null},lc=function(n){try{n()}catch(e){setTimeout(()=>{const t=e.stack||"";throw Vn("Exception was thrown by user callback.",t),e},Math.floor(0))}},zO=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},ol=function(n,e){const t=setTimeout(n,e);return typeof t=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):typeof t=="object"&&t.unref&&t.unref(),t};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jO{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t==null?void 0:t.getImmediate({optional:!0}),this.appCheck||t==null||t.get().then(i=>this.appCheck=i)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,i)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,i):t(null)},0)})}addTokenChangeListener(e){var t;(t=this.appCheckProvider)===null||t===void 0||t.get().then(i=>i.addTokenListener(e))}notifyForInvalidToken(){Vn(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GO{constructor(e,t,i){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(r=>this.auth_=r)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&t.code==="auth/token-not-initialized"?(tn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,i)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,i):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Vn(e)}}class qf{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}qf.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D_="5",lE="v",cE="s",uE="r",hE="f",dE=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,fE="ls",pE="p",Wf="ac",_E="websocket",gE="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HO{constructor(e,t,i,r,s=!1,o="",a=!1,l=!1){this.secure=t,this.namespace=i,this.webSocketOnly=r,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=l,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=vs.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&vs.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${t}`}}function qO(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams}function mE(n,e,t){X(typeof e=="string","typeof type must == string"),X(typeof t=="object","typeof params must == object");let i;if(e===_E)i=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else if(e===gE)i=(n.secure?"https://":"http://")+n.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);qO(n)&&(t.ns=n.namespace);const r=[];return ei(t,(s,o)=>{r.push(s+"="+o)}),i+r.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WO{constructor(){this.counters_={}}incrementCounter(e,t=1){pr(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return Wx(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bd={},Id={};function L_(n){const e=n.toString();return bd[e]||(bd[e]=new WO),bd[e]}function KO(n,e){const t=n.toString();return Id[t]||(Id[t]=e()),Id[t]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YO{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let r=0;r<i.length;++r)i[r]&&lc(()=>{this.onMessage_(i[r])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jy="start",XO="close",QO="pLPCommand",JO="pRTLPCB",yE="id",vE="pw",wE="ser",ZO="cb",ek="seg",tk="ts",nk="d",ik="dframe",TE=1870,EE=30,rk=TE-EE,sk=25e3,ok=3e4;class mo{constructor(e,t,i,r,s,o,a){this.connId=e,this.repoInfo=t,this.applicationId=i,this.appCheckToken=r,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=ac(e),this.stats_=L_(t),this.urlFn=l=>(this.appCheckToken&&(l[Wf]=this.appCheckToken),mE(t,gE,l))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new YO(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(ok)),DO(()=>{if(this.isClosed_)return;this.scriptTagHolder=new V_((...s)=>{const[o,a,l,c,u]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===jy)this.id=a,this.password=l;else if(o===XO)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{const[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const i={};i[jy]="t",i[wE]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(i[ZO]=this.scriptTagHolder.uniqueCallbackIdentifier),i[lE]=D_,this.transportSessionId&&(i[cE]=this.transportSessionId),this.lastSessionId&&(i[fE]=this.lastSessionId),this.applicationId&&(i[pE]=this.applicationId),this.appCheckToken&&(i[Wf]=this.appCheckToken),typeof location<"u"&&location.hostname&&dE.test(location.hostname)&&(i[uE]=hE);const r=this.urlFn(i);this.log_("Connecting via long-poll to "+r),this.scriptTagHolder.addTag(r,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){mo.forceAllow_=!0}static forceDisallow(){mo.forceDisallow_=!0}static isAvailable(){return mo.forceAllow_?!0:!mo.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!VO()&&!FO()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=Kt(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const i=bT(t),r=oE(i,rk);for(let s=0;s<r.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[s]),this.curSegmentNum++}addDisconnectPingFrame(e,t){this.myDisconnFrame=document.createElement("iframe");const i={};i[ik]="t",i[yE]=e,i[vE]=t,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=Kt(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class V_{constructor(e,t,i,r){this.onDisconnect=i,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=kO(),window[QO+this.uniqueCallbackIdentifier]=e,window[JO+this.uniqueCallbackIdentifier]=t,this.myIFrame=V_.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){tn("frame writing exception"),a.stack&&tn(a.stack),tn(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||tn("No IE domain setting required")}catch{const i=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[yE]=this.myID,e[vE]=this.myPW,e[wE]=this.currentSerial;let t=this.urlFn(e),i="",r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+EE+i.length<=TE;){const o=this.pendingSegs.shift();i=i+"&"+ek+r+"="+o.seg+"&"+tk+r+"="+o.ts+"&"+nk+r+"="+o.d,r++}return t=t+i,this.addLongPollTag_(t,this.currentSerial),!0}else return!1}enqueueSegment(e,t,i){this.pendingSegs.push({seg:e,ts:t,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const i=()=>{this.outstandingRequests.delete(t),this.newRequest_()},r=setTimeout(i,Math.floor(sk)),s=()=>{clearTimeout(r),i()};this.addTag(e,s)}addTag(e,t){setTimeout(()=>{try{if(!this.sendNewPolls)return;const i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=e,i.onload=i.onreadystatechange=function(){const r=i.readyState;(!r||r==="loaded"||r==="complete")&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),t())},i.onerror=()=>{tn("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ak=16384,lk=45e3;let Ru=null;typeof MozWebSocket<"u"?Ru=MozWebSocket:typeof WebSocket<"u"&&(Ru=WebSocket);class ai{constructor(e,t,i,r,s,o,a){this.connId=e,this.applicationId=i,this.appCheckToken=r,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=ac(this.connId),this.stats_=L_(t),this.connURL=ai.connectionURL_(t,o,a,r,i),this.nodeAdmin=t.nodeAdmin}static connectionURL_(e,t,i,r,s){const o={};return o[lE]=D_,typeof location<"u"&&location.hostname&&dE.test(location.hostname)&&(o[uE]=hE),t&&(o[cE]=t),i&&(o[fE]=i),r&&(o[Wf]=r),s&&(o[pE]=s),mE(e,_E,o)}open(e,t){this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,vs.set("previous_websocket_failure",!0);try{let i;PT(),this.mySock=new Ru(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const r=i.message||i.data;r&&this.log_(r),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const r=i.message||i.data;r&&this.log_(r),this.onClosed_()}}start(){}static forceDisallow(){ai.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const t=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(t);i&&i.length>1&&parseFloat(i[1])<4.4&&(e=!0)}return!e&&Ru!==null&&!ai.forceDisallow_}static previouslyFailed(){return vs.isInMemoryStorage||vs.get("previous_websocket_failure")===!0}markConnectionHealthy(){vs.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const t=this.frames.join("");this.frames=null;const i=xl(t);this.onMessage(i)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(X(this.frames===null,"We already have a frame buffer"),e.length<=6){const t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(t);else{const i=this.extractFrameCount_(t);i!==null&&this.appendFrame_(i)}}send(e){this.resetKeepAlive();const t=Kt(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const i=oE(t,ak);i.length>1&&this.sendString_(String(i.length));for(let r=0;r<i.length;r++)this.sendString_(i[r])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(lk))}sendString_(e){try{this.mySock.send(e)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}ai.responsesRequiredToBeHealthy=2;ai.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pl{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[mo,ai]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const t=ai&&ai.isAvailable();let i=t&&!ai.previouslyFailed();if(e.webSocketOnly&&(t||Vn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[ai];else{const r=this.transports_=[];for(const s of Pl.ALL_TRANSPORTS)s&&s.isAvailable()&&r.push(s);Pl.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Pl.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ck=6e4,uk=5e3,hk=10*1024,dk=100*1024,Cd="t",Gy="d",fk="s",Hy="r",pk="e",qy="o",Wy="a",Ky="n",Yy="p",_k="h";class gk{constructor(e,t,i,r,s,o,a,l,c,u){this.id=e,this.repoInfo_=t,this.applicationId_=i,this.appCheckToken_=r,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=l,this.onKill_=c,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=ac("c:"+this.id+":"),this.transportManager_=new Pl(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,i)},Math.floor(0));const r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=ol(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>dk?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>hk?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){const t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(Cd in e){const t=e[Cd];t===Wy?this.upgradeIfSecondaryHealthy_():t===Hy?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):t===qy&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=xa("t",e),i=xa("d",e);if(t==="c")this.onSecondaryControl_(i);else if(t==="d")this.pendingDataMessages.push(i);else throw new Error("Unknown protocol layer: "+t)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:Yy,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:Wy,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:Ky,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=xa("t",e),i=xa("d",e);t==="c"?this.onControl_(i):t==="d"&&this.onDataMessage_(i)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=xa(Cd,e);if(Gy in e){const i=e[Gy];if(t===_k){const r=Object.assign({},i);this.repoInfo_.isUsingEmulator&&(r.h=this.repoInfo_.host),this.onHandshake_(r)}else if(t===Ky){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else t===fk?this.onConnectionShutdown_(i):t===Hy?this.onReset_(i):t===pk?Hf("Server Error: "+i):t===qy?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Hf("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,i=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),D_!==i&&Vn("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,i),ol(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(ck))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):ol(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(uk))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:Yy,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(vs.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SE{put(e,t,i,r){}merge(e,t,i,r){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,i){}onDisconnectMerge(e,t,i){}onDisconnectCancel(e,t){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bE{constructor(e){this.allowedEvents_=e,this.listeners_={},X(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const i=[...this.listeners_[e]];for(let r=0;r<i.length;r++)i[r].callback.apply(i[r].context,t)}}on(e,t,i){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:i});const r=this.getInitialEvent(e);r&&t.apply(i,r)}off(e,t,i){this.validateEventType_(e);const r=this.listeners_[e]||[];for(let s=0;s<r.length;s++)if(r[s].callback===t&&(!i||i===r[s].context)){r.splice(s,1);return}}validateEventType_(e){X(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pu extends bE{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!P_()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Pu}getInitialEvent(e){return X(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xy=32,Qy=768;class lt{constructor(e,t){if(t===void 0){this.pieces_=e.split("/");let i=0;for(let r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[i]=this.pieces_[r],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)this.pieces_[t]!==""&&(e+="/"+this.pieces_[t]);return e||"/"}}function Qe(){return new lt("")}function Ne(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Hr(n){return n.pieces_.length-n.pieceNum_}function rt(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new lt(n.pieces_,e)}function IE(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function mk(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)n.pieces_[t]!==""&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}function CE(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function AE(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new lt(e,0)}function Vt(n,e){const t=[];for(let i=n.pieceNum_;i<n.pieces_.length;i++)t.push(n.pieces_[i]);if(e instanceof lt)for(let i=e.pieceNum_;i<e.pieces_.length;i++)t.push(e.pieces_[i]);else{const i=e.split("/");for(let r=0;r<i.length;r++)i[r].length>0&&t.push(i[r])}return new lt(t,0)}function Re(n){return n.pieceNum_>=n.pieces_.length}function Qn(n,e){const t=Ne(n),i=Ne(e);if(t===null)return e;if(t===i)return Qn(rt(n),rt(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function xE(n,e){if(Hr(n)!==Hr(e))return!1;for(let t=n.pieceNum_,i=e.pieceNum_;t<=n.pieces_.length;t++,i++)if(n.pieces_[t]!==e.pieces_[i])return!1;return!0}function ui(n,e){let t=n.pieceNum_,i=e.pieceNum_;if(Hr(n)>Hr(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[i])return!1;++t,++i}return!0}class yk{constructor(e,t){this.errorPrefix_=t,this.parts_=CE(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=bh(this.parts_[i]);RE(this)}}function vk(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=bh(e),RE(n)}function wk(n){const e=n.parts_.pop();n.byteLength_-=bh(e),n.parts_.length>0&&(n.byteLength_-=1)}function RE(n){if(n.byteLength_>Qy)throw new Error(n.errorPrefix_+"has a key path longer than "+Qy+" bytes ("+n.byteLength_+").");if(n.parts_.length>Xy)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+Xy+") or object contains a cycle "+fs(n))}function fs(n){return n.parts_.length===0?"":"in property '"+n.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F_ extends bE{constructor(){super(["visible"]);let e,t;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const i=!document[e];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}static getInstance(){return new F_}getInitialEvent(e){return X(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ra=1e3,Tk=60*5*1e3,Jy=30*1e3,Ek=1.3,Sk=3e4,bk="server_kill",Zy=3;class ar extends SE{constructor(e,t,i,r,s,o,a,l){if(super(),this.repoInfo_=e,this.applicationId_=t,this.onDataUpdate_=i,this.onConnectStatus_=r,this.onServerInfoUpdate_=s,this.authTokenProvider_=o,this.appCheckTokenProvider_=a,this.authOverride_=l,this.id=ar.nextPersistentConnectionId_++,this.log_=ac("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Ra,this.maxReconnectDelay_=Tk,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!PT())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");F_.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&Pu.getInstance().on("online",this.onOnline_,this)}sendRequest(e,t,i){const r=++this.requestNumber_,s={r,a:e,b:t};this.log_(Kt(s)),X(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),i&&(this.requestCBHash_[r]=i)}get(e){this.initConnection_();const t=new Al,r={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:o=>{const a=o.d;o.s==="ok"?t.resolve(a):t.reject(a)}};this.outstandingGets_.push(r),this.outstandingGetCount_++;const s=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(s),t.promise}listen(e,t,i,r){this.initConnection_();const s=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+s),this.listens.has(o)||this.listens.set(o,new Map),X(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),X(!this.listens.get(o).has(s),"listen() called twice for same path/queryId.");const a={onComplete:r,hashFn:t,query:e,tag:i};this.listens.get(o).set(s,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const t=this.outstandingGets_[e];this.sendRequest("g",t.request,i=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),t.onComplete&&t.onComplete(i)})}sendListen_(e){const t=e.query,i=t._path.toString(),r=t._queryIdentifier;this.log_("Listen on "+i+" for "+r);const s={p:i},o="q";e.tag&&(s.q=t._queryObject,s.t=e.tag),s.h=e.hashFn(),this.sendRequest(o,s,a=>{const l=a.d,c=a.s;ar.warnOnListenWarnings_(l,t),(this.listens.get(i)&&this.listens.get(i).get(r))===e&&(this.log_("listen response",a),c!=="ok"&&this.removeListen_(i,r),e.onComplete&&e.onComplete(c,l))})}static warnOnListenWarnings_(e,t){if(e&&typeof e=="object"&&pr(e,"w")){const i=qo(e,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const r='".indexOn": "'+t._queryParams.getIndex().toString()+'"',s=t._path.toString();Vn(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${r} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||cR(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=Jy)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,t=lR(e)?"auth":"gauth",i={cred:e};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(t,i,r=>{const s=r.s,o=r.d||"error";this.authToken_===e&&(s==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const t=e.s,i=e.d||"error";t==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(t,i)})}unlisten(e,t){const i=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+i+" "+r),X(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,r)&&this.connected_&&this.sendUnlisten_(i,r,e._queryObject,t)}sendUnlisten_(e,t,i,r){this.log_("Unlisten on "+e+" for "+t);const s={p:e},o="n";r&&(s.q=i,s.t=r),this.sendRequest(o,s)}onDisconnectPut(e,t,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:i})}onDisconnectMerge(e,t,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:i})}onDisconnectCancel(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}sendOnDisconnect_(e,t,i,r){const s={p:t,d:i};this.log_("onDisconnect "+e,s),this.sendRequest(e,s,o=>{r&&setTimeout(()=>{r(o.s,o.d)},Math.floor(0))})}put(e,t,i,r){this.putInternal("p",e,t,i,r)}merge(e,t,i,r){this.putInternal("m",e,t,i,r)}putInternal(e,t,i,r,s){this.initConnection_();const o={p:t,d:i};s!==void 0&&(o.h=s),this.outstandingPuts_.push({action:e,request:o,onComplete:r}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+t)}sendPut_(e){const t=this.outstandingPuts_[e].action,i=this.outstandingPuts_[e].request,r=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(t,i,s=>{this.log_(t+" response",s),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),r&&r(s.s,s.d)})}reportStats(e){if(this.connected_){const t={c:e};this.log_("reportStats",t),this.sendRequest("s",t,i=>{if(i.s!=="ok"){const s=i.d;this.log_("reportStats","Error sending stats: "+s)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+Kt(e));const t=e.r,i=this.requestCBHash_[t];i&&(delete this.requestCBHash_[t],i(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,t){this.log_("handleServerMessage",e,t),e==="d"?this.onDataUpdate_(t.p,t.d,!1,t.t):e==="m"?this.onDataUpdate_(t.p,t.d,!0,t.t):e==="c"?this.onListenRevoked_(t.p,t.q):e==="ac"?this.onAuthRevoked_(t.s,t.d):e==="apc"?this.onAppCheckRevoked_(t.s,t.d):e==="sd"?this.onSecurityDebugPacket_(t):Hf("Unrecognized action received from server: "+Kt(e)+`
Are you using the latest client?`)}onReady_(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){X(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Ra,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Ra,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>Sk&&(this.reconnectDelay_=Ra),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*Ek)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),t=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),r=this.id+":"+ar.nextConnectionId_++,s=this.lastSessionId;let o=!1,a=null;const l=function(){a?a.close():(o=!0,i())},c=function(h){X(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(h)};this.realtime_={close:l,sendRequest:c};const u=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[h,f]=await Promise.all([this.authTokenProvider_.getToken(u),this.appCheckTokenProvider_.getToken(u)]);o?tn("getToken() completed but was canceled"):(tn("getToken() completed. Creating connection."),this.authToken_=h&&h.accessToken,this.appCheckToken_=f&&f.token,a=new gk(r,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,t,i,d=>{Vn(d+" ("+this.repoInfo_.toString()+")"),this.interrupt(bk)},s))}catch(h){this.log_("Failed to get token: "+h),o||(this.repoInfo_.nodeAdmin&&Vn(h),l())}}}interrupt(e){tn("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){tn("Resuming connection for reason: "+e),delete this.interruptReasons_[e],py(this.interruptReasons_)&&(this.reconnectDelay_=Ra,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const t=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,t){let i;t?i=t.map(s=>M_(s)).join("$"):i="default";const r=this.removeListen_(e,i);r&&r.onComplete&&r.onComplete("permission_denied")}removeListen_(e,t){const i=new lt(e).toString();let r;if(this.listens.has(i)){const s=this.listens.get(i);r=s.get(t),s.delete(t),s.size===0&&this.listens.delete(i)}else r=void 0;return r}onAuthRevoked_(e,t){tn("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=Zy&&(this.reconnectDelay_=Jy,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,t){tn("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=Zy&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const t of e.values())this.sendListen_(t);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let t="js";e["sdk."+t+"."+nE.replace(/\./g,"-")]=1,P_()?e["framework.cordova"]=1:RT()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=Pu.getInstance().currentlyOnline();return py(this.interruptReasons_)&&e}}ar.nextPersistentConnectionId_=0;ar.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Me{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new Me(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ch{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const i=new Me(Wo,e),r=new Me(Wo,t);return this.compare(i,r)!==0}minPost(){return Me.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Lc;class PE extends Ch{static get __EMPTY_NODE(){return Lc}static set __EMPTY_NODE(e){Lc=e}compare(e,t){return ga(e.name,t.name)}isDefinedOn(e){throw fa("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return Me.MIN}maxPost(){return new Me($s,Lc)}makePost(e,t){return X(typeof e=="string","KeyIndex indexValue must always be a string."),new Me(e,Lc)}toString(){return".key"}}const Po=new PE;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Vc=class{constructor(e,t,i,r,s=null){this.isReverse_=r,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=t?i(e.key,t):1,r&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),t;if(this.resultGenerator_?t=this.resultGenerator_(e.key,e.value):t={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}},Rn=class Ba{constructor(e,t,i,r,s){this.key=e,this.value=t,this.color=i??Ba.RED,this.left=r??ki.EMPTY_NODE,this.right=s??ki.EMPTY_NODE}copy(e,t,i,r,s){return new Ba(e??this.key,t??this.value,i??this.color,r??this.left,s??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let r=this;const s=i(e,r.key);return s<0?r=r.copy(null,null,null,r.left.insert(e,t,i),null):s===0?r=r.copy(null,t,null,null,null):r=r.copy(null,null,null,null,r.right.insert(e,t,i)),r.fixUp_()}removeMin_(){if(this.left.isEmpty())return ki.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,t){let i,r;if(i=this,t(e,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),t(e,i.key)===0){if(i.right.isEmpty())return ki.EMPTY_NODE;r=i.right.min_(),i=i.copy(r.key,r.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,Ba.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,Ba.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}};Rn.RED=!0;Rn.BLACK=!1;class Ik{copy(e,t,i,r,s){return this}insert(e,t,i){return new Rn(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}let ki=class ou{constructor(e,t=ou.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new ou(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Rn.BLACK,null,null))}remove(e){return new ou(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Rn.BLACK,null,null))}get(e){let t,i=this.root_;for(;!i.isEmpty();){if(t=this.comparator_(e,i.key),t===0)return i.value;t<0?i=i.left:t>0&&(i=i.right)}return null}getPredecessorKey(e){let t,i=this.root_,r=null;for(;!i.isEmpty();)if(t=this.comparator_(e,i.key),t===0){if(i.left.isEmpty())return r?r.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}else t<0?i=i.left:t>0&&(r=i,i=i.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Vc(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new Vc(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new Vc(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new Vc(this.root_,null,this.comparator_,!0,e)}};ki.EMPTY_NODE=new Ik;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ck(n,e){return ga(n.name,e.name)}function U_(n,e){return ga(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Kf;function Ak(n){Kf=n}const OE=function(n){return typeof n=="number"?"number:"+aE(n):"string:"+n},kE=function(n){if(n.isLeafNode()){const e=n.val();X(typeof e=="string"||typeof e=="number"||typeof e=="object"&&pr(e,".sv"),"Priority must be a string or number.")}else X(n===Kf||n.isEmpty(),"priority of unexpected type.");X(n===Kf||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ev;class Mt{constructor(e,t=Mt.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=t,this.lazyHash_=null,X(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),kE(this.priorityNode_)}static set __childrenNodeConstructor(e){ev=e}static get __childrenNodeConstructor(){return ev}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new Mt(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:Mt.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return Re(e)?this:Ne(e)===".priority"?this.priorityNode_:Mt.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,t){return null}updateImmediateChild(e,t){return e===".priority"?this.updatePriority(t):t.isEmpty()&&e!==".priority"?this:Mt.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,t).updatePriority(this.priorityNode_)}updateChild(e,t){const i=Ne(e);return i===null?t:t.isEmpty()&&i!==".priority"?this:(X(i!==".priority"||Hr(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,Mt.__childrenNodeConstructor.EMPTY_NODE.updateChild(rt(e),t)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,t){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+OE(this.priorityNode_.val())+":");const t=typeof this.value_;e+=t+":",t==="number"?e+=aE(this.value_):e+=this.value_,this.lazyHash_=rE(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===Mt.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof Mt.__childrenNodeConstructor?-1:(X(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const t=typeof e.value_,i=typeof this.value_,r=Mt.VALUE_TYPE_ORDER.indexOf(t),s=Mt.VALUE_TYPE_ORDER.indexOf(i);return X(r>=0,"Unknown leaf type: "+t),X(s>=0,"Unknown leaf type: "+i),r===s?i==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:s-r}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}else return!1}}Mt.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let NE,ME;function xk(n){NE=n}function Rk(n){ME=n}class Pk extends Ch{compare(e,t){const i=e.node.getPriority(),r=t.node.getPriority(),s=i.compareTo(r);return s===0?ga(e.name,t.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return Me.MIN}maxPost(){return new Me($s,new Mt("[PRIORITY-POST]",ME))}makePost(e,t){const i=NE(e);return new Me(t,new Mt("[PRIORITY-POST]",i))}toString(){return".priority"}}const cn=new Pk;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ok=Math.log(2);class kk{constructor(e){const t=s=>parseInt(Math.log(s)/Ok,10),i=s=>parseInt(Array(s+1).join("1"),2);this.count=t(e+1),this.current_=this.count-1;const r=i(this.count);this.bits_=e+1&r}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Ou=function(n,e,t,i){n.sort(e);const r=function(l,c){const u=c-l;let h,f;if(u===0)return null;if(u===1)return h=n[l],f=t?t(h):h,new Rn(f,h.node,Rn.BLACK,null,null);{const d=parseInt(u/2,10)+l,_=r(l,d),p=r(d+1,c);return h=n[d],f=t?t(h):h,new Rn(f,h.node,Rn.BLACK,_,p)}},s=function(l){let c=null,u=null,h=n.length;const f=function(_,p){const g=h-_,m=h;h-=_;const T=r(g+1,m),w=n[g],S=t?t(w):w;d(new Rn(S,w.node,p,null,T))},d=function(_){c?(c.left=_,c=_):(u=_,c=_)};for(let _=0;_<l.count;++_){const p=l.nextBitIsOne(),g=Math.pow(2,l.count-(_+1));p?f(g,Rn.BLACK):(f(g,Rn.BLACK),f(g,Rn.RED))}return u},o=new kk(n.length),a=s(o);return new ki(i||e,a)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ad;const ro={};class Zi{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return X(ro&&cn,"ChildrenNode.ts has not been loaded"),Ad=Ad||new Zi({".priority":ro},{".priority":cn}),Ad}get(e){const t=qo(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof ki?t:null}hasIndex(e){return pr(this.indexSet_,e.toString())}addIndex(e,t){X(e!==Po,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const i=[];let r=!1;const s=t.getIterator(Me.Wrap);let o=s.getNext();for(;o;)r=r||e.isDefinedOn(o.node),i.push(o),o=s.getNext();let a;r?a=Ou(i,e.getCompare()):a=ro;const l=e.toString(),c=Object.assign({},this.indexSet_);c[l]=e;const u=Object.assign({},this.indexes_);return u[l]=a,new Zi(u,c)}addToIndexes(e,t){const i=Su(this.indexes_,(r,s)=>{const o=qo(this.indexSet_,s);if(X(o,"Missing index implementation for "+s),r===ro)if(o.isDefinedOn(e.node)){const a=[],l=t.getIterator(Me.Wrap);let c=l.getNext();for(;c;)c.name!==e.name&&a.push(c),c=l.getNext();return a.push(e),Ou(a,o.getCompare())}else return ro;else{const a=t.get(e.name);let l=r;return a&&(l=l.remove(new Me(e.name,a))),l.insert(e,e.node)}});return new Zi(i,this.indexSet_)}removeFromIndexes(e,t){const i=Su(this.indexes_,r=>{if(r===ro)return r;{const s=t.get(e.name);return s?r.remove(new Me(e.name,s)):r}});return new Zi(i,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Pa;class ze{constructor(e,t,i){this.children_=e,this.priorityNode_=t,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&kE(this.priorityNode_),this.children_.isEmpty()&&X(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Pa||(Pa=new ze(new ki(U_),null,Zi.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Pa}updatePriority(e){return this.children_.isEmpty()?this:new ze(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const t=this.children_.get(e);return t===null?Pa:t}}getChild(e){const t=Ne(e);return t===null?this:this.getImmediateChild(t).getChild(rt(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,t){if(X(t,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(t);{const i=new Me(e,t);let r,s;t.isEmpty()?(r=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(i,this.children_)):(r=this.children_.insert(e,t),s=this.indexMap_.addToIndexes(i,this.children_));const o=r.isEmpty()?Pa:this.priorityNode_;return new ze(r,o,s)}}updateChild(e,t){const i=Ne(e);if(i===null)return t;{X(Ne(e)!==".priority"||Hr(e)===1,".priority must be the last token in a path");const r=this.getImmediateChild(i).updateChild(rt(e),t);return this.updateImmediateChild(i,r)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const t={};let i=0,r=0,s=!0;if(this.forEachChild(cn,(o,a)=>{t[o]=a.val(e),i++,s&&ze.INTEGER_REGEXP_.test(o)?r=Math.max(r,Number(o)):s=!1}),!e&&s&&r<2*i){const o=[];for(const a in t)o[a]=t[a];return o}else return e&&!this.getPriority().isEmpty()&&(t[".priority"]=this.getPriority().val()),t}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+OE(this.getPriority().val())+":"),this.forEachChild(cn,(t,i)=>{const r=i.hash();r!==""&&(e+=":"+t+":"+r)}),this.lazyHash_=e===""?"":rE(e)}return this.lazyHash_}getPredecessorChildName(e,t,i){const r=this.resolveIndex_(i);if(r){const s=r.getPredecessorKey(new Me(e,t));return s?s.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const t=this.resolveIndex_(e);if(t){const i=t.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(e){const t=this.getFirstChildName(e);return t?new Me(t,this.children_.get(t)):null}getLastChildName(e){const t=this.resolveIndex_(e);if(t){const i=t.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(e){const t=this.getLastChildName(e);return t?new Me(t,this.children_.get(t)):null}forEachChild(e,t){const i=this.resolveIndex_(e);return i?i.inorderTraversal(r=>t(r.name,r.node)):this.children_.inorderTraversal(t)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,t){const i=this.resolveIndex_(t);if(i)return i.getIteratorFrom(e,r=>r);{const r=this.children_.getIteratorFrom(e.name,Me.Wrap);let s=r.peek();for(;s!=null&&t.compare(s,e)<0;)r.getNext(),s=r.peek();return r}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,t){const i=this.resolveIndex_(t);if(i)return i.getReverseIteratorFrom(e,r=>r);{const r=this.children_.getReverseIteratorFrom(e.name,Me.Wrap);let s=r.peek();for(;s!=null&&t.compare(s,e)>0;)r.getNext(),s=r.peek();return r}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===cc?-1:0}withIndex(e){if(e===Po||this.indexMap_.hasIndex(e))return this;{const t=this.indexMap_.addIndex(e,this.children_);return new ze(this.children_,this.priorityNode_,t)}}isIndexed(e){return e===Po||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const t=e;if(this.getPriority().equals(t.getPriority()))if(this.children_.count()===t.children_.count()){const i=this.getIterator(cn),r=t.getIterator(cn);let s=i.getNext(),o=r.getNext();for(;s&&o;){if(s.name!==o.name||!s.node.equals(o.node))return!1;s=i.getNext(),o=r.getNext()}return s===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===Po?null:this.indexMap_.get(e.toString())}}ze.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class Nk extends ze{constructor(){super(new ki(U_),ze.EMPTY_NODE,Zi.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return ze.EMPTY_NODE}isEmpty(){return!1}}const cc=new Nk;Object.defineProperties(Me,{MIN:{value:new Me(Wo,ze.EMPTY_NODE)},MAX:{value:new Me($s,cc)}});PE.__EMPTY_NODE=ze.EMPTY_NODE;Mt.__childrenNodeConstructor=ze;Ak(cc);Rk(cc);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mk=!0;function nn(n,e=null){if(n===null)return ze.EMPTY_NODE;if(typeof n=="object"&&".priority"in n&&(e=n[".priority"]),X(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof n=="object"&&".value"in n&&n[".value"]!==null&&(n=n[".value"]),typeof n!="object"||".sv"in n){const t=n;return new Mt(t,nn(e))}if(!(n instanceof Array)&&Mk){const t=[];let i=!1;if(ei(n,(o,a)=>{if(o.substring(0,1)!=="."){const l=nn(a);l.isEmpty()||(i=i||!l.getPriority().isEmpty(),t.push(new Me(o,l)))}}),t.length===0)return ze.EMPTY_NODE;const s=Ou(t,Ck,o=>o.name,U_);if(i){const o=Ou(t,cn.getCompare());return new ze(s,nn(e),new Zi({".priority":o},{".priority":cn}))}else return new ze(s,nn(e),Zi.Default)}else{let t=ze.EMPTY_NODE;return ei(n,(i,r)=>{if(pr(n,i)&&i.substring(0,1)!=="."){const s=nn(r);(s.isLeafNode()||!s.isEmpty())&&(t=t.updateImmediateChild(i,s))}}),t.updatePriority(nn(e))}}xk(nn);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dk extends Ch{constructor(e){super(),this.indexPath_=e,X(!Re(e)&&Ne(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const i=this.extractChild(e.node),r=this.extractChild(t.node),s=i.compareTo(r);return s===0?ga(e.name,t.name):s}makePost(e,t){const i=nn(e),r=ze.EMPTY_NODE.updateChild(this.indexPath_,i);return new Me(t,r)}maxPost(){const e=ze.EMPTY_NODE.updateChild(this.indexPath_,cc);return new Me($s,e)}toString(){return CE(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lk extends Ch{compare(e,t){const i=e.node.compareTo(t.node);return i===0?ga(e.name,t.name):i}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return Me.MIN}maxPost(){return Me.MAX}makePost(e,t){const i=nn(e);return new Me(t,i)}toString(){return".value"}}const Vk=new Lk;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fk(n){return{type:"value",snapshotNode:n}}function Uk(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function $k(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function tv(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}function Bk(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $_{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=cn}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return X(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return X(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Wo}hasEnd(){return this.endSet_}getIndexEndValue(){return X(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return X(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:$s}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return X(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===cn}copy(){const e=new $_;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function nv(n){const e={};if(n.isDefault())return e;let t;if(n.index_===cn?t="$priority":n.index_===Vk?t="$value":n.index_===Po?t="$key":(X(n.index_ instanceof Dk,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=Kt(t),n.startSet_){const i=n.startAfterSet_?"startAfter":"startAt";e[i]=Kt(n.indexStartValue_),n.startNameSet_&&(e[i]+=","+Kt(n.indexStartName_))}if(n.endSet_){const i=n.endBeforeSet_?"endBefore":"endAt";e[i]=Kt(n.indexEndValue_),n.endNameSet_&&(e[i]+=","+Kt(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function iv(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;t===""&&(n.isViewFromLeft()?t="l":t="r"),e.vf=t}return n.index_!==cn&&(e.i=n.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ku extends SE{constructor(e,t,i,r){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=i,this.appCheckTokenProvider_=r,this.log_=ac("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return t!==void 0?"tag$"+t:(X(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,i,r){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const o=ku.getListenId_(e,i),a={};this.listens_[o]=a;const l=nv(e._queryParams);this.restRequest_(s+".json",l,(c,u)=>{let h=u;if(c===404&&(h=null,c=null),c===null&&this.onDataUpdate_(s,h,!1,i),qo(this.listens_,o)===a){let f;c?c===401?f="permission_denied":f="rest_error:"+c:f="ok",r(f,null)}})}unlisten(e,t){const i=ku.getListenId_(e,t);delete this.listens_[i]}get(e){const t=nv(e._queryParams),i=e._path.toString(),r=new Al;return this.restRequest_(i+".json",t,(s,o)=>{let a=o;s===404&&(a=null,s=null),s===null?(this.onDataUpdate_(i,a,!1,null),r.resolve(a)):r.reject(new Error(a))}),r.promise}refreshAuthToken(e){}restRequest_(e,t={},i){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([r,s])=>{r&&r.accessToken&&(t.auth=r.accessToken),s&&s.token&&(t.ac=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+O_(t);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(i&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let l=null;if(a.status>=200&&a.status<300){try{l=xl(a.responseText)}catch{Vn("Failed to parse JSON response for "+o+": "+a.responseText)}i(null,l)}else a.status!==401&&a.status!==404&&Vn("Got unsuccessful REST response for "+o+" Status: "+a.status),i(a.status);i=null}},a.open("GET",o,!0),a.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zk{constructor(){this.rootNode_=ze.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nu(){return{value:null,children:new Map}}function DE(n,e,t){if(Re(e))n.value=t,n.children.clear();else if(n.value!==null)n.value=n.value.updateChild(e,t);else{const i=Ne(e);n.children.has(i)||n.children.set(i,Nu());const r=n.children.get(i);e=rt(e),DE(r,e,t)}}function Yf(n,e,t){n.value!==null?t(e,n.value):jk(n,(i,r)=>{const s=new lt(e.toString()+"/"+i);Yf(r,s,t)})}function jk(n,e){n.children.forEach((t,i)=>{e(i,t)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gk{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&ei(this.last_,(i,r)=>{t[i]=t[i]-r}),this.last_=e,t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rv=10*1e3,Hk=30*1e3,qk=5*60*1e3;class Wk{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new Gk(e);const i=rv+(Hk-rv)*Math.random();ol(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){const e=this.statsListener_.get(),t={};let i=!1;ei(e,(r,s)=>{s>0&&pr(this.statsToReport_,r)&&(t[r]=s,i=!0)}),i&&this.server_.reportStats(t),ol(this.reportStats_.bind(this),Math.floor(Math.random()*2*qk))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ni;(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(Ni||(Ni={}));function LE(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function VE(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function FE(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mu{constructor(e,t,i){this.path=e,this.affectedTree=t,this.revert=i,this.type=Ni.ACK_USER_WRITE,this.source=LE()}operationForChild(e){if(Re(this.path)){if(this.affectedTree.value!=null)return X(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new lt(e));return new Mu(Qe(),t,this.revert)}}else return X(Ne(this.path)===e,"operationForChild called for unrelated child."),new Mu(rt(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bs{constructor(e,t,i){this.source=e,this.path=t,this.snap=i,this.type=Ni.OVERWRITE}operationForChild(e){return Re(this.path)?new Bs(this.source,Qe(),this.snap.getImmediateChild(e)):new Bs(this.source,rt(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ol{constructor(e,t,i){this.source=e,this.path=t,this.children=i,this.type=Ni.MERGE}operationForChild(e){if(Re(this.path)){const t=this.children.subtree(new lt(e));return t.isEmpty()?null:t.value?new Bs(this.source,Qe(),t.value):new Ol(this.source,Qe(),t)}else return X(Ne(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Ol(this.source,rt(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B_{constructor(e,t,i){this.node_=e,this.fullyInitialized_=t,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Re(e))return this.isFullyInitialized()&&!this.filtered_;const t=Ne(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}function Kk(n,e,t,i){const r=[],s=[];return e.forEach(o=>{o.type==="child_changed"&&n.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(Bk(o.childName,o.snapshotNode))}),Oa(n,r,"child_removed",e,i,t),Oa(n,r,"child_added",e,i,t),Oa(n,r,"child_moved",s,i,t),Oa(n,r,"child_changed",e,i,t),Oa(n,r,"value",e,i,t),r}function Oa(n,e,t,i,r,s){const o=i.filter(a=>a.type===t);o.sort((a,l)=>Xk(n,a,l)),o.forEach(a=>{const l=Yk(n,a,s);r.forEach(c=>{c.respondsTo(a.type)&&e.push(c.createEvent(l,n.query_))})})}function Yk(n,e,t){return e.type==="value"||e.type==="child_removed"||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}function Xk(n,e,t){if(e.childName==null||t.childName==null)throw fa("Should only compare child_ events.");const i=new Me(e.childName,e.snapshotNode),r=new Me(t.childName,t.snapshotNode);return n.index_.compare(i,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UE(n,e){return{eventCache:n,serverCache:e}}function al(n,e,t,i){return UE(new B_(e,t,i),n.serverCache)}function $E(n,e,t,i){return UE(n.eventCache,new B_(e,t,i))}function Xf(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function zs(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xd;const Qk=()=>(xd||(xd=new ki(LO)),xd);class nt{constructor(e,t=Qk()){this.value=e,this.children=t}static fromObject(e){let t=new nt(null);return ei(e,(i,r)=>{t=t.set(new lt(i),r)}),t}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(this.value!=null&&t(this.value))return{path:Qe(),value:this.value};if(Re(e))return null;{const i=Ne(e),r=this.children.get(i);if(r!==null){const s=r.findRootMostMatchingPathAndValue(rt(e),t);return s!=null?{path:Vt(new lt(i),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Re(e))return this;{const t=Ne(e),i=this.children.get(t);return i!==null?i.subtree(rt(e)):new nt(null)}}set(e,t){if(Re(e))return new nt(t,this.children);{const i=Ne(e),s=(this.children.get(i)||new nt(null)).set(rt(e),t),o=this.children.insert(i,s);return new nt(this.value,o)}}remove(e){if(Re(e))return this.children.isEmpty()?new nt(null):new nt(null,this.children);{const t=Ne(e),i=this.children.get(t);if(i){const r=i.remove(rt(e));let s;return r.isEmpty()?s=this.children.remove(t):s=this.children.insert(t,r),this.value===null&&s.isEmpty()?new nt(null):new nt(this.value,s)}else return this}}get(e){if(Re(e))return this.value;{const t=Ne(e),i=this.children.get(t);return i?i.get(rt(e)):null}}setTree(e,t){if(Re(e))return t;{const i=Ne(e),s=(this.children.get(i)||new nt(null)).setTree(rt(e),t);let o;return s.isEmpty()?o=this.children.remove(i):o=this.children.insert(i,s),new nt(this.value,o)}}fold(e){return this.fold_(Qe(),e)}fold_(e,t){const i={};return this.children.inorderTraversal((r,s)=>{i[r]=s.fold_(Vt(e,r),t)}),t(e,this.value,i)}findOnPath(e,t){return this.findOnPath_(e,Qe(),t)}findOnPath_(e,t,i){const r=this.value?i(t,this.value):!1;if(r)return r;if(Re(e))return null;{const s=Ne(e),o=this.children.get(s);return o?o.findOnPath_(rt(e),Vt(t,s),i):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,Qe(),t)}foreachOnPath_(e,t,i){if(Re(e))return this;{this.value&&i(t,this.value);const r=Ne(e),s=this.children.get(r);return s?s.foreachOnPath_(rt(e),Vt(t,r),i):new nt(null)}}foreach(e){this.foreach_(Qe(),e)}foreach_(e,t){this.children.inorderTraversal((i,r)=>{r.foreach_(Vt(e,i),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,i)=>{i.value&&e(t,i.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _i{constructor(e){this.writeTree_=e}static empty(){return new _i(new nt(null))}}function ll(n,e,t){if(Re(e))return new _i(new nt(t));{const i=n.writeTree_.findRootMostValueAndPath(e);if(i!=null){const r=i.path;let s=i.value;const o=Qn(r,e);return s=s.updateChild(o,t),new _i(n.writeTree_.set(r,s))}else{const r=new nt(t),s=n.writeTree_.setTree(e,r);return new _i(s)}}}function sv(n,e,t){let i=n;return ei(t,(r,s)=>{i=ll(i,Vt(e,r),s)}),i}function ov(n,e){if(Re(e))return _i.empty();{const t=n.writeTree_.setTree(e,new nt(null));return new _i(t)}}function Qf(n,e){return Qs(n,e)!=null}function Qs(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return t!=null?n.writeTree_.get(t.path).getChild(Qn(t.path,e)):null}function av(n){const e=[],t=n.writeTree_.value;return t!=null?t.isLeafNode()||t.forEachChild(cn,(i,r)=>{e.push(new Me(i,r))}):n.writeTree_.children.inorderTraversal((i,r)=>{r.value!=null&&e.push(new Me(i,r.value))}),e}function Br(n,e){if(Re(e))return n;{const t=Qs(n,e);return t!=null?new _i(new nt(t)):new _i(n.writeTree_.subtree(e))}}function Jf(n){return n.writeTree_.isEmpty()}function Ko(n,e){return BE(Qe(),n.writeTree_,e)}function BE(n,e,t){if(e.value!=null)return t.updateChild(n,e.value);{let i=null;return e.children.inorderTraversal((r,s)=>{r===".priority"?(X(s.value!==null,"Priority writes must always be leaf nodes"),i=s.value):t=BE(Vt(n,r),s,t)}),!t.getChild(n).isEmpty()&&i!==null&&(t=t.updateChild(Vt(n,".priority"),i)),t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zE(n,e){return WE(e,n)}function Jk(n,e,t,i,r){X(i>n.lastWriteId,"Stacking an older write on top of newer ones"),r===void 0&&(r=!0),n.allWrites.push({path:e,snap:t,writeId:i,visible:r}),r&&(n.visibleWrites=ll(n.visibleWrites,e,t)),n.lastWriteId=i}function Zk(n,e){for(let t=0;t<n.allWrites.length;t++){const i=n.allWrites[t];if(i.writeId===e)return i}return null}function eN(n,e){const t=n.allWrites.findIndex(a=>a.writeId===e);X(t>=0,"removeWrite called with nonexistent writeId.");const i=n.allWrites[t];n.allWrites.splice(t,1);let r=i.visible,s=!1,o=n.allWrites.length-1;for(;r&&o>=0;){const a=n.allWrites[o];a.visible&&(o>=t&&tN(a,i.path)?r=!1:ui(i.path,a.path)&&(s=!0)),o--}if(r){if(s)return nN(n),!0;if(i.snap)n.visibleWrites=ov(n.visibleWrites,i.path);else{const a=i.children;ei(a,l=>{n.visibleWrites=ov(n.visibleWrites,Vt(i.path,l))})}return!0}else return!1}function tN(n,e){if(n.snap)return ui(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&ui(Vt(n.path,t),e))return!0;return!1}function nN(n){n.visibleWrites=jE(n.allWrites,iN,Qe()),n.allWrites.length>0?n.lastWriteId=n.allWrites[n.allWrites.length-1].writeId:n.lastWriteId=-1}function iN(n){return n.visible}function jE(n,e,t){let i=_i.empty();for(let r=0;r<n.length;++r){const s=n[r];if(e(s)){const o=s.path;let a;if(s.snap)ui(t,o)?(a=Qn(t,o),i=ll(i,a,s.snap)):ui(o,t)&&(a=Qn(o,t),i=ll(i,Qe(),s.snap.getChild(a)));else if(s.children){if(ui(t,o))a=Qn(t,o),i=sv(i,a,s.children);else if(ui(o,t))if(a=Qn(o,t),Re(a))i=sv(i,Qe(),s.children);else{const l=qo(s.children,Ne(a));if(l){const c=l.getChild(rt(a));i=ll(i,Qe(),c)}}}else throw fa("WriteRecord should have .snap or .children")}}return i}function GE(n,e,t,i,r){if(!i&&!r){const s=Qs(n.visibleWrites,e);if(s!=null)return s;{const o=Br(n.visibleWrites,e);if(Jf(o))return t;if(t==null&&!Qf(o,Qe()))return null;{const a=t||ze.EMPTY_NODE;return Ko(o,a)}}}else{const s=Br(n.visibleWrites,e);if(!r&&Jf(s))return t;if(!r&&t==null&&!Qf(s,Qe()))return null;{const o=function(c){return(c.visible||r)&&(!i||!~i.indexOf(c.writeId))&&(ui(c.path,e)||ui(e,c.path))},a=jE(n.allWrites,o,e),l=t||ze.EMPTY_NODE;return Ko(a,l)}}}function rN(n,e,t){let i=ze.EMPTY_NODE;const r=Qs(n.visibleWrites,e);if(r)return r.isLeafNode()||r.forEachChild(cn,(s,o)=>{i=i.updateImmediateChild(s,o)}),i;if(t){const s=Br(n.visibleWrites,e);return t.forEachChild(cn,(o,a)=>{const l=Ko(Br(s,new lt(o)),a);i=i.updateImmediateChild(o,l)}),av(s).forEach(o=>{i=i.updateImmediateChild(o.name,o.node)}),i}else{const s=Br(n.visibleWrites,e);return av(s).forEach(o=>{i=i.updateImmediateChild(o.name,o.node)}),i}}function sN(n,e,t,i,r){X(i||r,"Either existingEventSnap or existingServerSnap must exist");const s=Vt(e,t);if(Qf(n.visibleWrites,s))return null;{const o=Br(n.visibleWrites,s);return Jf(o)?r.getChild(t):Ko(o,r.getChild(t))}}function oN(n,e,t,i){const r=Vt(e,t),s=Qs(n.visibleWrites,r);if(s!=null)return s;if(i.isCompleteForChild(t)){const o=Br(n.visibleWrites,r);return Ko(o,i.getNode().getImmediateChild(t))}else return null}function aN(n,e){return Qs(n.visibleWrites,e)}function lN(n,e,t,i,r,s,o){let a;const l=Br(n.visibleWrites,e),c=Qs(l,Qe());if(c!=null)a=c;else if(t!=null)a=Ko(l,t);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){const u=[],h=o.getCompare(),f=s?a.getReverseIteratorFrom(i,o):a.getIteratorFrom(i,o);let d=f.getNext();for(;d&&u.length<r;)h(d,i)!==0&&u.push(d),d=f.getNext();return u}else return[]}function cN(){return{visibleWrites:_i.empty(),allWrites:[],lastWriteId:-1}}function Zf(n,e,t,i){return GE(n.writeTree,n.treePath,e,t,i)}function HE(n,e){return rN(n.writeTree,n.treePath,e)}function lv(n,e,t,i){return sN(n.writeTree,n.treePath,e,t,i)}function Du(n,e){return aN(n.writeTree,Vt(n.treePath,e))}function uN(n,e,t,i,r,s){return lN(n.writeTree,n.treePath,e,t,i,r,s)}function z_(n,e,t){return oN(n.writeTree,n.treePath,e,t)}function qE(n,e){return WE(Vt(n.treePath,e),n.writeTree)}function WE(n,e){return{treePath:n,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hN{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,i=e.childName;X(t==="child_added"||t==="child_changed"||t==="child_removed","Only child changes supported for tracking"),X(i!==".priority","Only non-priority child changes can be tracked.");const r=this.changeMap.get(i);if(r){const s=r.type;if(t==="child_added"&&s==="child_removed")this.changeMap.set(i,tv(i,e.snapshotNode,r.snapshotNode));else if(t==="child_removed"&&s==="child_added")this.changeMap.delete(i);else if(t==="child_removed"&&s==="child_changed")this.changeMap.set(i,$k(i,r.oldSnap));else if(t==="child_changed"&&s==="child_added")this.changeMap.set(i,Uk(i,e.snapshotNode));else if(t==="child_changed"&&s==="child_changed")this.changeMap.set(i,tv(i,e.snapshotNode,r.oldSnap));else throw fa("Illegal combination of changes: "+e+" occurred after "+r)}else this.changeMap.set(i,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dN{getCompleteChild(e){return null}getChildAfterChild(e,t,i){return null}}const KE=new dN;class j_{constructor(e,t,i=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=i}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const i=this.optCompleteServerCache_!=null?new B_(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return z_(this.writes_,e,i)}}getChildAfterChild(e,t,i){const r=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:zs(this.viewCache_),s=uN(this.writes_,r,t,1,i,e);return s.length===0?null:s[0]}}function fN(n,e){X(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),X(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}function pN(n,e,t,i,r){const s=new hN;let o,a;if(t.type===Ni.OVERWRITE){const c=t;c.source.fromUser?o=ep(n,e,c.path,c.snap,i,r,s):(X(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered()&&!Re(c.path),o=Lu(n,e,c.path,c.snap,i,r,a,s))}else if(t.type===Ni.MERGE){const c=t;c.source.fromUser?o=gN(n,e,c.path,c.children,i,r,s):(X(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered(),o=tp(n,e,c.path,c.children,i,r,a,s))}else if(t.type===Ni.ACK_USER_WRITE){const c=t;c.revert?o=vN(n,e,c.path,i,r,s):o=mN(n,e,c.path,c.affectedTree,i,r,s)}else if(t.type===Ni.LISTEN_COMPLETE)o=yN(n,e,t.path,i,s);else throw fa("Unknown operation type: "+t.type);const l=s.getChanges();return _N(e,o,l),{viewCache:o,changes:l}}function _N(n,e,t){const i=e.eventCache;if(i.isFullyInitialized()){const r=i.getNode().isLeafNode()||i.getNode().isEmpty(),s=Xf(n);(t.length>0||!n.eventCache.isFullyInitialized()||r&&!i.getNode().equals(s)||!i.getNode().getPriority().equals(s.getPriority()))&&t.push(Fk(Xf(e)))}}function YE(n,e,t,i,r,s){const o=e.eventCache;if(Du(i,t)!=null)return e;{let a,l;if(Re(t))if(X(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const c=zs(e),u=c instanceof ze?c:ze.EMPTY_NODE,h=HE(i,u);a=n.filter.updateFullNode(e.eventCache.getNode(),h,s)}else{const c=Zf(i,zs(e));a=n.filter.updateFullNode(e.eventCache.getNode(),c,s)}else{const c=Ne(t);if(c===".priority"){X(Hr(t)===1,"Can't have a priority with additional path components");const u=o.getNode();l=e.serverCache.getNode();const h=lv(i,t,u,l);h!=null?a=n.filter.updatePriority(u,h):a=o.getNode()}else{const u=rt(t);let h;if(o.isCompleteForChild(c)){l=e.serverCache.getNode();const f=lv(i,t,o.getNode(),l);f!=null?h=o.getNode().getImmediateChild(c).updateChild(u,f):h=o.getNode().getImmediateChild(c)}else h=z_(i,c,e.serverCache);h!=null?a=n.filter.updateChild(o.getNode(),c,h,u,r,s):a=o.getNode()}}return al(e,a,o.isFullyInitialized()||Re(t),n.filter.filtersNodes())}}function Lu(n,e,t,i,r,s,o,a){const l=e.serverCache;let c;const u=o?n.filter:n.filter.getIndexedFilter();if(Re(t))c=u.updateFullNode(l.getNode(),i,null);else if(u.filtersNodes()&&!l.isFiltered()){const d=l.getNode().updateChild(t,i);c=u.updateFullNode(l.getNode(),d,null)}else{const d=Ne(t);if(!l.isCompleteForPath(t)&&Hr(t)>1)return e;const _=rt(t),g=l.getNode().getImmediateChild(d).updateChild(_,i);d===".priority"?c=u.updatePriority(l.getNode(),g):c=u.updateChild(l.getNode(),d,g,_,KE,null)}const h=$E(e,c,l.isFullyInitialized()||Re(t),u.filtersNodes()),f=new j_(r,h,s);return YE(n,h,t,r,f,a)}function ep(n,e,t,i,r,s,o){const a=e.eventCache;let l,c;const u=new j_(r,e,s);if(Re(t))c=n.filter.updateFullNode(e.eventCache.getNode(),i,o),l=al(e,c,!0,n.filter.filtersNodes());else{const h=Ne(t);if(h===".priority")c=n.filter.updatePriority(e.eventCache.getNode(),i),l=al(e,c,a.isFullyInitialized(),a.isFiltered());else{const f=rt(t),d=a.getNode().getImmediateChild(h);let _;if(Re(f))_=i;else{const p=u.getCompleteChild(h);p!=null?IE(f)===".priority"&&p.getChild(AE(f)).isEmpty()?_=p:_=p.updateChild(f,i):_=ze.EMPTY_NODE}if(d.equals(_))l=e;else{const p=n.filter.updateChild(a.getNode(),h,_,f,u,o);l=al(e,p,a.isFullyInitialized(),n.filter.filtersNodes())}}}return l}function cv(n,e){return n.eventCache.isCompleteForChild(e)}function gN(n,e,t,i,r,s,o){let a=e;return i.foreach((l,c)=>{const u=Vt(t,l);cv(e,Ne(u))&&(a=ep(n,a,u,c,r,s,o))}),i.foreach((l,c)=>{const u=Vt(t,l);cv(e,Ne(u))||(a=ep(n,a,u,c,r,s,o))}),a}function uv(n,e,t){return t.foreach((i,r)=>{e=e.updateChild(i,r)}),e}function tp(n,e,t,i,r,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let l=e,c;Re(t)?c=i:c=new nt(null).setTree(t,i);const u=e.serverCache.getNode();return c.children.inorderTraversal((h,f)=>{if(u.hasChild(h)){const d=e.serverCache.getNode().getImmediateChild(h),_=uv(n,d,f);l=Lu(n,l,new lt(h),_,r,s,o,a)}}),c.children.inorderTraversal((h,f)=>{const d=!e.serverCache.isCompleteForChild(h)&&f.value===null;if(!u.hasChild(h)&&!d){const _=e.serverCache.getNode().getImmediateChild(h),p=uv(n,_,f);l=Lu(n,l,new lt(h),p,r,s,o,a)}}),l}function mN(n,e,t,i,r,s,o){if(Du(r,t)!=null)return e;const a=e.serverCache.isFiltered(),l=e.serverCache;if(i.value!=null){if(Re(t)&&l.isFullyInitialized()||l.isCompleteForPath(t))return Lu(n,e,t,l.getNode().getChild(t),r,s,a,o);if(Re(t)){let c=new nt(null);return l.getNode().forEachChild(Po,(u,h)=>{c=c.set(new lt(u),h)}),tp(n,e,t,c,r,s,a,o)}else return e}else{let c=new nt(null);return i.foreach((u,h)=>{const f=Vt(t,u);l.isCompleteForPath(f)&&(c=c.set(u,l.getNode().getChild(f)))}),tp(n,e,t,c,r,s,a,o)}}function yN(n,e,t,i,r){const s=e.serverCache,o=$E(e,s.getNode(),s.isFullyInitialized()||Re(t),s.isFiltered());return YE(n,o,t,i,KE,r)}function vN(n,e,t,i,r,s){let o;if(Du(i,t)!=null)return e;{const a=new j_(i,e,r),l=e.eventCache.getNode();let c;if(Re(t)||Ne(t)===".priority"){let u;if(e.serverCache.isFullyInitialized())u=Zf(i,zs(e));else{const h=e.serverCache.getNode();X(h instanceof ze,"serverChildren would be complete if leaf node"),u=HE(i,h)}u=u,c=n.filter.updateFullNode(l,u,s)}else{const u=Ne(t);let h=z_(i,u,e.serverCache);h==null&&e.serverCache.isCompleteForChild(u)&&(h=l.getImmediateChild(u)),h!=null?c=n.filter.updateChild(l,u,h,rt(t),a,s):e.eventCache.getNode().hasChild(u)?c=n.filter.updateChild(l,u,ze.EMPTY_NODE,rt(t),a,s):c=l,c.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=Zf(i,zs(e)),o.isLeafNode()&&(c=n.filter.updateFullNode(c,o,s)))}return o=e.serverCache.isFullyInitialized()||Du(i,Qe())!=null,al(e,c,o,n.filter.filtersNodes())}}function wN(n,e){const t=zs(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!Re(e)&&!t.getImmediateChild(Ne(e)).isEmpty())?t.getChild(e):null}function hv(n,e,t,i){e.type===Ni.MERGE&&e.source.queryId!==null&&(X(zs(n.viewCache_),"We should always have a full cache before handling merges"),X(Xf(n.viewCache_),"Missing event cache, even though we have a server cache"));const r=n.viewCache_,s=pN(n.processor_,r,e,t,i);return fN(n.processor_,s.viewCache),X(s.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=s.viewCache,TN(n,s.changes,s.viewCache.eventCache.getNode(),null)}function TN(n,e,t,i){const r=i?[i]:n.eventRegistrations_;return Kk(n.eventGenerator_,e,t,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let dv;function EN(n){X(!dv,"__referenceConstructor has already been defined"),dv=n}function G_(n,e,t,i){const r=e.source.queryId;if(r!==null){const s=n.views.get(r);return X(s!=null,"SyncTree gave us an op for an invalid query."),hv(s,e,t,i)}else{let s=[];for(const o of n.views.values())s=s.concat(hv(o,e,t,i));return s}}function H_(n,e){let t=null;for(const i of n.views.values())t=t||wN(i,e);return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fv;function SN(n){X(!fv,"__referenceConstructor has already been defined"),fv=n}class pv{constructor(e){this.listenProvider_=e,this.syncPointTree_=new nt(null),this.pendingWriteTree_=cN(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function bN(n,e,t,i,r){return Jk(n.pendingWriteTree_,e,t,i,r),r?xh(n,new Bs(LE(),e,t)):[]}function yo(n,e,t=!1){const i=Zk(n.pendingWriteTree_,e);if(eN(n.pendingWriteTree_,e)){let s=new nt(null);return i.snap!=null?s=s.set(Qe(),!0):ei(i.children,o=>{s=s.set(new lt(o),!0)}),xh(n,new Mu(i.path,s,t))}else return[]}function Ah(n,e,t){return xh(n,new Bs(VE(),e,t))}function IN(n,e,t){const i=nt.fromObject(t);return xh(n,new Ol(VE(),e,i))}function CN(n,e,t,i){const r=ZE(n,i);if(r!=null){const s=eS(r),o=s.path,a=s.queryId,l=Qn(o,e),c=new Bs(FE(a),l,t);return tS(n,o,c)}else return[]}function AN(n,e,t,i){const r=ZE(n,i);if(r){const s=eS(r),o=s.path,a=s.queryId,l=Qn(o,e),c=nt.fromObject(t),u=new Ol(FE(a),l,c);return tS(n,o,u)}else return[]}function XE(n,e,t){const r=n.pendingWriteTree_,s=n.syncPointTree_.findOnPath(e,(o,a)=>{const l=Qn(o,e),c=H_(a,l);if(c)return c});return GE(r,e,s,t,!0)}function xh(n,e){return QE(e,n.syncPointTree_,null,zE(n.pendingWriteTree_,Qe()))}function QE(n,e,t,i){if(Re(n.path))return JE(n,e,t,i);{const r=e.get(Qe());t==null&&r!=null&&(t=H_(r,Qe()));let s=[];const o=Ne(n.path),a=n.operationForChild(o),l=e.children.get(o);if(l&&a){const c=t?t.getImmediateChild(o):null,u=qE(i,o);s=s.concat(QE(a,l,c,u))}return r&&(s=s.concat(G_(r,n,i,t))),s}}function JE(n,e,t,i){const r=e.get(Qe());t==null&&r!=null&&(t=H_(r,Qe()));let s=[];return e.children.inorderTraversal((o,a)=>{const l=t?t.getImmediateChild(o):null,c=qE(i,o),u=n.operationForChild(o);u&&(s=s.concat(JE(u,a,l,c)))}),r&&(s=s.concat(G_(r,n,i,t))),s}function ZE(n,e){return n.tagToQueryMap.get(e)}function eS(n){const e=n.indexOf("$");return X(e!==-1&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new lt(n.substr(0,e))}}function tS(n,e,t){const i=n.syncPointTree_.get(e);X(i,"Missing sync point for query tag that we're tracking");const r=zE(n.pendingWriteTree_,e);return G_(i,t,r,null)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q_{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new q_(t)}node(){return this.node_}}class W_{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=Vt(this.path_,e);return new W_(this.syncTree_,t)}node(){return XE(this.syncTree_,this.path_)}}const xN=function(n){return n=n||{},n.timestamp=n.timestamp||new Date().getTime(),n},_v=function(n,e,t){if(!n||typeof n!="object")return n;if(X(".sv"in n,"Unexpected leaf node or priority contents"),typeof n[".sv"]=="string")return RN(n[".sv"],e,t);if(typeof n[".sv"]=="object")return PN(n[".sv"],e);X(!1,"Unexpected server value: "+JSON.stringify(n,null,2))},RN=function(n,e,t){switch(n){case"timestamp":return t.timestamp;default:X(!1,"Unexpected server value: "+n)}},PN=function(n,e,t){n.hasOwnProperty("increment")||X(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const i=n.increment;typeof i!="number"&&X(!1,"Unexpected increment value: "+i);const r=e.node();if(X(r!==null&&typeof r<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return i;const o=r.getValue();return typeof o!="number"?i:o+i},ON=function(n,e,t,i){return K_(e,new W_(t,n),i)},kN=function(n,e,t){return K_(n,new q_(e),t)};function K_(n,e,t){const i=n.getPriority().val(),r=_v(i,e.getImmediateChild(".priority"),t);let s;if(n.isLeafNode()){const o=n,a=_v(o.getValue(),e,t);return a!==o.getValue()||r!==o.getPriority().val()?new Mt(a,nn(r)):n}else{const o=n;return s=o,r!==o.getPriority().val()&&(s=s.updatePriority(new Mt(r))),o.forEachChild(cn,(a,l)=>{const c=K_(l,e.getImmediateChild(a),t);c!==l&&(s=s.updateImmediateChild(a,c))}),s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y_{constructor(e="",t=null,i={children:{},childCount:0}){this.name=e,this.parent=t,this.node=i}}function X_(n,e){let t=e instanceof lt?e:new lt(e),i=n,r=Ne(t);for(;r!==null;){const s=qo(i.node.children,r)||{children:{},childCount:0};i=new Y_(r,i,s),t=rt(t),r=Ne(t)}return i}function ma(n){return n.node.value}function nS(n,e){n.node.value=e,np(n)}function iS(n){return n.node.childCount>0}function NN(n){return ma(n)===void 0&&!iS(n)}function Rh(n,e){ei(n.node.children,(t,i)=>{e(new Y_(t,n,i))})}function rS(n,e,t,i){t&&!i&&e(n),Rh(n,r=>{rS(r,e,!0,i)}),t&&i&&e(n)}function MN(n,e,t){let i=t?n:n.parent;for(;i!==null;){if(e(i))return!0;i=i.parent}return!1}function uc(n){return new lt(n.parent===null?n.name:uc(n.parent)+"/"+n.name)}function np(n){n.parent!==null&&DN(n.parent,n.name,n)}function DN(n,e,t){const i=NN(t),r=pr(n.node.children,e);i&&r?(delete n.node.children[e],n.node.childCount--,np(n)):!i&&!r&&(n.node.children[e]=t.node,n.node.childCount++,np(n))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LN=/[\[\].#$\/\u0000-\u001F\u007F]/,VN=/[\[\].#$\u0000-\u001F\u007F]/,Rd=10*1024*1024,sS=function(n){return typeof n=="string"&&n.length!==0&&!LN.test(n)},FN=function(n){return typeof n=="string"&&n.length!==0&&!VN.test(n)},UN=function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),FN(n)},oS=function(n,e,t){const i=t instanceof lt?new yk(t,n):t;if(e===void 0)throw new Error(n+"contains undefined "+fs(i));if(typeof e=="function")throw new Error(n+"contains a function "+fs(i)+" with contents = "+e.toString());if(sE(e))throw new Error(n+"contains "+e.toString()+" "+fs(i));if(typeof e=="string"&&e.length>Rd/3&&bh(e)>Rd)throw new Error(n+"contains a string greater than "+Rd+" utf8 bytes "+fs(i)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let r=!1,s=!1;if(ei(e,(o,a)=>{if(o===".value")r=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!sS(o)))throw new Error(n+" contains an invalid key ("+o+") "+fs(i)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);vk(i,o),oS(n,a,i),wk(i)}),r&&s)throw new Error(n+' contains ".value" child '+fs(i)+" in addition to actual children.")}},$N=function(n,e){const t=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!sS(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||t.length!==0&&!UN(t))throw new Error(pR(n,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BN{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function zN(n,e){let t=null;for(let i=0;i<e.length;i++){const r=e[i],s=r.getPath();t!==null&&!xE(s,t.path)&&(n.eventLists_.push(t),t=null),t===null&&(t={events:[],path:s}),t.events.push(r)}t&&n.eventLists_.push(t)}function Js(n,e,t){zN(n,t),jN(n,i=>ui(i,e)||ui(e,i))}function jN(n,e){n.recursionDepth_++;let t=!0;for(let i=0;i<n.eventLists_.length;i++){const r=n.eventLists_[i];if(r){const s=r.path;e(s)?(GN(n.eventLists_[i]),n.eventLists_[i]=null):t=!1}}t&&(n.eventLists_=[]),n.recursionDepth_--}function GN(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(t!==null){n.events[e]=null;const i=t.getEventRunner();As&&tn("event: "+t.toString()),lc(i)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HN="repo_interrupt",qN=25;class WN{constructor(e,t,i,r){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=i,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new BN,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Nu(),this.transactionQueueTree_=new Y_,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function KN(n,e,t){if(n.stats_=L_(n.repoInfo_),n.forceRestClient_||zO())n.server_=new ku(n.repoInfo_,(i,r,s,o)=>{gv(n,i,r,s,o)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>mv(n,!0),0);else{if(typeof t<"u"&&t!==null){if(typeof t!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Kt(t)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}n.persistentConnection_=new ar(n.repoInfo_,e,(i,r,s,o)=>{gv(n,i,r,s,o)},i=>{mv(n,i)},i=>{XN(n,i)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(i=>{n.server_.refreshAuthToken(i)}),n.appCheckProvider_.addTokenChangeListener(i=>{n.server_.refreshAppCheckToken(i.token)}),n.statsReporter_=KO(n.repoInfo_,()=>new Wk(n.stats_,n.server_)),n.infoData_=new zk,n.infoSyncTree_=new pv({startListening:(i,r,s,o)=>{let a=[];const l=n.infoData_.getNode(i._path);return l.isEmpty()||(a=Ah(n.infoSyncTree_,i._path,l),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),Q_(n,"connected",!1),n.serverSyncTree_=new pv({startListening:(i,r,s,o)=>(n.server_.listen(i,s,r,(a,l)=>{const c=o(a,l);Js(n.eventQueue_,i._path,c)}),[]),stopListening:(i,r)=>{n.server_.unlisten(i,r)}})}function YN(n){const t=n.infoData_.getNode(new lt(".info/serverTimeOffset")).val()||0;return new Date().getTime()+t}function aS(n){return xN({timestamp:YN(n)})}function gv(n,e,t,i,r){n.dataUpdateCount++;const s=new lt(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let o=[];if(r)if(i){const l=Su(t,c=>nn(c));o=AN(n.serverSyncTree_,s,l,r)}else{const l=nn(t);o=CN(n.serverSyncTree_,s,l,r)}else if(i){const l=Su(t,c=>nn(c));o=IN(n.serverSyncTree_,s,l)}else{const l=nn(t);o=Ah(n.serverSyncTree_,s,l)}let a=s;o.length>0&&(a=Z_(n,s)),Js(n.eventQueue_,a,o)}function mv(n,e){Q_(n,"connected",e),e===!1&&JN(n)}function XN(n,e){ei(e,(t,i)=>{Q_(n,t,i)})}function Q_(n,e,t){const i=new lt("/.info/"+e),r=nn(t);n.infoData_.updateSnapshot(i,r);const s=Ah(n.infoSyncTree_,i,r);Js(n.eventQueue_,i,s)}function QN(n){return n.nextWriteId_++}function JN(n){lS(n,"onDisconnectEvents");const e=aS(n),t=Nu();Yf(n.onDisconnect_,Qe(),(r,s)=>{const o=ON(r,s,n.serverSyncTree_,e);DE(t,r,o)});let i=[];Yf(t,Qe(),(r,s)=>{i=i.concat(Ah(n.serverSyncTree_,r,s));const o=nM(n,r);Z_(n,o)}),n.onDisconnect_=Nu(),Js(n.eventQueue_,Qe(),i)}function ZN(n){n.persistentConnection_&&n.persistentConnection_.interrupt(HN)}function lS(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),tn(t,...e)}function cS(n,e,t){return XE(n.serverSyncTree_,e,t)||ze.EMPTY_NODE}function J_(n,e=n.transactionQueueTree_){if(e||Ph(n,e),ma(e)){const t=hS(n,e);X(t.length>0,"Sending zero length transaction queue"),t.every(r=>r.status===0)&&eM(n,uc(e),t)}else iS(e)&&Rh(e,t=>{J_(n,t)})}function eM(n,e,t){const i=t.map(c=>c.currentWriteId),r=cS(n,e,i);let s=r;const o=r.hash();for(let c=0;c<t.length;c++){const u=t[c];X(u.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;const h=Qn(e,u.path);s=s.updateChild(h,u.currentOutputSnapshotRaw)}const a=s.val(!0),l=e;n.server_.put(l.toString(),a,c=>{lS(n,"transaction put response",{path:l.toString(),status:c});let u=[];if(c==="ok"){const h=[];for(let f=0;f<t.length;f++)t[f].status=2,u=u.concat(yo(n.serverSyncTree_,t[f].currentWriteId)),t[f].onComplete&&h.push(()=>t[f].onComplete(null,!0,t[f].currentOutputSnapshotResolved)),t[f].unwatcher();Ph(n,X_(n.transactionQueueTree_,e)),J_(n,n.transactionQueueTree_),Js(n.eventQueue_,e,u);for(let f=0;f<h.length;f++)lc(h[f])}else{if(c==="datastale")for(let h=0;h<t.length;h++)t[h].status===3?t[h].status=4:t[h].status=0;else{Vn("transaction at "+l.toString()+" failed: "+c);for(let h=0;h<t.length;h++)t[h].status=4,t[h].abortReason=c}Z_(n,e)}},o)}function Z_(n,e){const t=uS(n,e),i=uc(t),r=hS(n,t);return tM(n,r,i),i}function tM(n,e,t){if(e.length===0)return;const i=[];let r=[];const o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const l=e[a],c=Qn(t,l.path);let u=!1,h;if(X(c!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),l.status===4)u=!0,h=l.abortReason,r=r.concat(yo(n.serverSyncTree_,l.currentWriteId,!0));else if(l.status===0)if(l.retryCount>=qN)u=!0,h="maxretry",r=r.concat(yo(n.serverSyncTree_,l.currentWriteId,!0));else{const f=cS(n,l.path,o);l.currentInputSnapshot=f;const d=e[a].update(f.val());if(d!==void 0){oS("transaction failed: Data returned ",d,l.path);let _=nn(d);typeof d=="object"&&d!=null&&pr(d,".priority")||(_=_.updatePriority(f.getPriority()));const g=l.currentWriteId,m=aS(n),T=kN(_,f,m);l.currentOutputSnapshotRaw=_,l.currentOutputSnapshotResolved=T,l.currentWriteId=QN(n),o.splice(o.indexOf(g),1),r=r.concat(bN(n.serverSyncTree_,l.path,T,l.currentWriteId,l.applyLocally)),r=r.concat(yo(n.serverSyncTree_,g,!0))}else u=!0,h="nodata",r=r.concat(yo(n.serverSyncTree_,l.currentWriteId,!0))}Js(n.eventQueue_,t,r),r=[],u&&(e[a].status=2,function(f){setTimeout(f,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(h==="nodata"?i.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):i.push(()=>e[a].onComplete(new Error(h),!1,null))))}Ph(n,n.transactionQueueTree_);for(let a=0;a<i.length;a++)lc(i[a]);J_(n,n.transactionQueueTree_)}function uS(n,e){let t,i=n.transactionQueueTree_;for(t=Ne(e);t!==null&&ma(i)===void 0;)i=X_(i,t),e=rt(e),t=Ne(e);return i}function hS(n,e){const t=[];return dS(n,e,t),t.sort((i,r)=>i.order-r.order),t}function dS(n,e,t){const i=ma(e);if(i)for(let r=0;r<i.length;r++)t.push(i[r]);Rh(e,r=>{dS(n,r,t)})}function Ph(n,e){const t=ma(e);if(t){let i=0;for(let r=0;r<t.length;r++)t[r].status!==2&&(t[i]=t[r],i++);t.length=i,nS(e,t.length>0?t:void 0)}Rh(e,i=>{Ph(n,i)})}function nM(n,e){const t=uc(uS(n,e)),i=X_(n.transactionQueueTree_,e);return MN(i,r=>{Pd(n,r)}),Pd(n,i),rS(i,r=>{Pd(n,r)}),t}function Pd(n,e){const t=ma(e);if(t){const i=[];let r=[],s=-1;for(let o=0;o<t.length;o++)t[o].status===3||(t[o].status===1?(X(s===o-1,"All SENT items should be at beginning of queue."),s=o,t[o].status=3,t[o].abortReason="set"):(X(t[o].status===0,"Unexpected transaction status in abort"),t[o].unwatcher(),r=r.concat(yo(n.serverSyncTree_,t[o].currentWriteId,!0)),t[o].onComplete&&i.push(t[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?nS(e,void 0):t.length=s+1,Js(n.eventQueue_,uc(e),r);for(let o=0;o<i.length;o++)lc(i[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iM(n){let e="";const t=n.split("/");for(let i=0;i<t.length;i++)if(t[i].length>0){let r=t[i];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch{}e+="/"+r}return e}function rM(n){const e={};n.charAt(0)==="?"&&(n=n.substring(1));for(const t of n.split("&")){if(t.length===0)continue;const i=t.split("=");i.length===2?e[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):Vn(`Invalid query segment '${t}' in query '${n}'`)}return e}const yv=function(n,e){const t=sM(n),i=t.namespace;t.domain==="firebase.com"&&Us(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||i==="undefined")&&t.domain!=="localhost"&&Us("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||MO();const r=t.scheme==="ws"||t.scheme==="wss";return{repoInfo:new HO(t.host,t.secure,i,r,e,"",i!==t.subdomain),path:new lt(t.pathString)}},sM=function(n){let e="",t="",i="",r="",s="",o=!0,a="https",l=443;if(typeof n=="string"){let c=n.indexOf("//");c>=0&&(a=n.substring(0,c-1),n=n.substring(c+2));let u=n.indexOf("/");u===-1&&(u=n.length);let h=n.indexOf("?");h===-1&&(h=n.length),e=n.substring(0,Math.min(u,h)),u<h&&(r=iM(n.substring(u,h)));const f=rM(n.substring(Math.min(n.length,h)));c=e.indexOf(":"),c>=0?(o=a==="https"||a==="wss",l=parseInt(e.substring(c+1),10)):c=e.length;const d=e.slice(0,c);if(d.toLowerCase()==="localhost")t="localhost";else if(d.split(".").length<=2)t=d;else{const _=e.indexOf(".");i=e.substring(0,_).toLowerCase(),t=e.substring(_+1),s=i}"ns"in f&&(s=f.ns)}return{host:e,port:l,domain:t,subdomain:i,secure:o,scheme:a,pathString:r,namespace:s}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eg{constructor(e,t,i,r){this._repo=e,this._path=t,this._queryParams=i,this._orderByCalled=r}get key(){return Re(this._path)?null:IE(this._path)}get ref(){return new ya(this._repo,this._path)}get _queryIdentifier(){const e=iv(this._queryParams),t=M_(e);return t==="{}"?"default":t}get _queryObject(){return iv(this._queryParams)}isEqual(e){if(e=yi(e),!(e instanceof eg))return!1;const t=this._repo===e._repo,i=xE(this._path,e._path),r=this._queryIdentifier===e._queryIdentifier;return t&&i&&r}toJSON(){return this.toString()}toString(){return this._repo.toString()+mk(this._path)}}class ya extends eg{constructor(e,t){super(e,t,new $_,!1)}get parent(){const e=AE(this._path);return e===null?null:new ya(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}EN(ya);SN(ya);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oM="FIREBASE_DATABASE_EMULATOR_HOST",ip={};let aM=!1;function lM(n,e,t,i,r){let s=i||n.options.databaseURL;s===void 0&&(n.options.projectId||Us("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),tn("Using default host for project ",n.options.projectId),s=`${n.options.projectId}-default-rtdb.firebaseio.com`);let o=yv(s,r),a=o.repoInfo,l,c;typeof process<"u"&&Fy&&(c=Fy[oM]),c?(l=!0,s=`http://${c}?ns=${a.namespace}`,o=yv(s,r),a=o.repoInfo):l=!o.repoInfo.secure;const u=r&&l?new qf(qf.OWNER):new GO(n.name,n.options,e);$N("Invalid Firebase Database URL",o),Re(o.path)||Us("Database URL must point to the root of a Firebase Database (not including a child path).");const h=uM(a,n,u,new jO(n.name,t));return new hM(h,n)}function cM(n,e){const t=ip[e];(!t||t[n.key]!==n)&&Us(`Database ${e}(${n.repoInfo_}) has already been deleted.`),ZN(n),delete t[n.key]}function uM(n,e,t,i){let r=ip[e.name];r||(r={},ip[e.name]=r);let s=r[n.toURLString()];return s&&Us("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new WN(n,aM,t,i),r[n.toURLString()]=s,s}class hM{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(KN(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new ya(this._repo,Qe())),this._rootInternal}_delete(){return this._rootInternal!==null&&(cM(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Us("Cannot call "+e+" on a deleted database.")}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dM(n){RO(_a),$i(new vi("database",(e,{instanceIdentifier:t})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return lM(i,r,s,t)},"PUBLIC").setMultipleInstances(!0)),Ln(Uy,$y,n),Ln(Uy,$y,"esm2017")}ar.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)};ar.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)};dM();var fM=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Q,tg=tg||{},me=fM||self;function Oh(n){var e=typeof n;return e=e!="object"?e:n?Array.isArray(n)?"array":e:"null",e=="array"||e=="object"&&typeof n.length=="number"}function hc(n){var e=typeof n;return e=="object"&&n!=null||e=="function"}function pM(n){return Object.prototype.hasOwnProperty.call(n,Od)&&n[Od]||(n[Od]=++_M)}var Od="closure_uid_"+(1e9*Math.random()>>>0),_M=0;function gM(n,e,t){return n.call.apply(n.bind,arguments)}function mM(n,e,t){if(!n)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var r=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(r,i),n.apply(e,r)}}return function(){return n.apply(e,arguments)}}function un(n,e,t){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?un=gM:un=mM,un.apply(null,arguments)}function Fc(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var i=t.slice();return i.push.apply(i,arguments),n.apply(this,i)}}function zt(n,e){function t(){}t.prototype=e.prototype,n.$=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.ac=function(i,r,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[r].apply(i,o)}}function ts(){this.s=this.s,this.o=this.o}var yM=0;ts.prototype.s=!1;ts.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),yM!=0)&&pM(this)};ts.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const fS=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if(typeof n=="string")return typeof e!="string"||e.length!=1?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function ng(n){const e=n.length;if(0<e){const t=Array(e);for(let i=0;i<e;i++)t[i]=n[i];return t}return[]}function vv(n,e){for(let t=1;t<arguments.length;t++){const i=arguments[t];if(Oh(i)){const r=n.length||0,s=i.length||0;n.length=r+s;for(let o=0;o<s;o++)n[r+o]=i[o]}else n.push(i)}}function hn(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}hn.prototype.h=function(){this.defaultPrevented=!0};var vM=function(){if(!me.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{const t=()=>{};me.addEventListener("test",t,e),me.removeEventListener("test",t,e)}catch{}return n}();function kl(n){return/^[\s\xa0]*$/.test(n)}function kh(){var n=me.navigator;return n&&(n=n.userAgent)?n:""}function Ri(n){return kh().indexOf(n)!=-1}function ig(n){return ig[" "](n),n}ig[" "]=function(){};function wM(n,e){var t=dD;return Object.prototype.hasOwnProperty.call(t,n)?t[n]:t[n]=e(n)}var TM=Ri("Opera"),Yo=Ri("Trident")||Ri("MSIE"),pS=Ri("Edge"),rp=pS||Yo,_S=Ri("Gecko")&&!(kh().toLowerCase().indexOf("webkit")!=-1&&!Ri("Edge"))&&!(Ri("Trident")||Ri("MSIE"))&&!Ri("Edge"),EM=kh().toLowerCase().indexOf("webkit")!=-1&&!Ri("Edge");function gS(){var n=me.document;return n?n.documentMode:void 0}var sp;e:{var kd="",Nd=function(){var n=kh();if(_S)return/rv:([^\);]+)(\)|;)/.exec(n);if(pS)return/Edge\/([\d\.]+)/.exec(n);if(Yo)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n);if(EM)return/WebKit\/(\S+)/.exec(n);if(TM)return/(?:Version)[ \/]?(\S+)/.exec(n)}();if(Nd&&(kd=Nd?Nd[1]:""),Yo){var Md=gS();if(Md!=null&&Md>parseFloat(kd)){sp=String(Md);break e}}sp=kd}var op;if(me.document&&Yo){var wv=gS();op=wv||parseInt(sp,10)||void 0}else op=void 0;var SM=op;function Nl(n,e){if(hn.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,i=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(_S){e:{try{ig(e.nodeName);var r=!0;break e}catch{}r=!1}r||(e=null)}}else t=="mouseover"?e=n.fromElement:t=="mouseout"&&(e=n.toElement);this.relatedTarget=e,i?(this.clientX=i.clientX!==void 0?i.clientX:i.pageX,this.clientY=i.clientY!==void 0?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=n.clientX!==void 0?n.clientX:n.pageX,this.clientY=n.clientY!==void 0?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType=typeof n.pointerType=="string"?n.pointerType:bM[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Nl.$.h.call(this)}}zt(Nl,hn);var bM={2:"touch",3:"pen",4:"mouse"};Nl.prototype.h=function(){Nl.$.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var dc="closure_listenable_"+(1e6*Math.random()|0),IM=0;function CM(n,e,t,i,r){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!i,this.la=r,this.key=++IM,this.fa=this.ia=!1}function Nh(n){n.fa=!0,n.listener=null,n.proxy=null,n.src=null,n.la=null}function rg(n,e,t){for(const i in n)e.call(t,n[i],i,n)}function AM(n,e){for(const t in n)e.call(void 0,n[t],t,n)}function mS(n){const e={};for(const t in n)e[t]=n[t];return e}const Tv="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function yS(n,e){let t,i;for(let r=1;r<arguments.length;r++){i=arguments[r];for(t in i)n[t]=i[t];for(let s=0;s<Tv.length;s++)t=Tv[s],Object.prototype.hasOwnProperty.call(i,t)&&(n[t]=i[t])}}function Mh(n){this.src=n,this.g={},this.h=0}Mh.prototype.add=function(n,e,t,i,r){var s=n.toString();n=this.g[s],n||(n=this.g[s]=[],this.h++);var o=lp(n,e,i,r);return-1<o?(e=n[o],t||(e.ia=!1)):(e=new CM(e,this.src,s,!!i,r),e.ia=t,n.push(e)),e};function ap(n,e){var t=e.type;if(t in n.g){var i=n.g[t],r=fS(i,e),s;(s=0<=r)&&Array.prototype.splice.call(i,r,1),s&&(Nh(e),n.g[t].length==0&&(delete n.g[t],n.h--))}}function lp(n,e,t,i){for(var r=0;r<n.length;++r){var s=n[r];if(!s.fa&&s.listener==e&&s.capture==!!t&&s.la==i)return r}return-1}var sg="closure_lm_"+(1e6*Math.random()|0),Dd={};function vS(n,e,t,i,r){if(i&&i.once)return TS(n,e,t,i,r);if(Array.isArray(e)){for(var s=0;s<e.length;s++)vS(n,e[s],t,i,r);return null}return t=lg(t),n&&n[dc]?n.O(e,t,hc(i)?!!i.capture:!!i,r):wS(n,e,t,!1,i,r)}function wS(n,e,t,i,r,s){if(!e)throw Error("Invalid event type");var o=hc(r)?!!r.capture:!!r,a=ag(n);if(a||(n[sg]=a=new Mh(n)),t=a.add(e,t,i,o,s),t.proxy)return t;if(i=xM(),t.proxy=i,i.src=n,i.listener=t,n.addEventListener)vM||(r=o),r===void 0&&(r=!1),n.addEventListener(e.toString(),i,r);else if(n.attachEvent)n.attachEvent(SS(e.toString()),i);else if(n.addListener&&n.removeListener)n.addListener(i);else throw Error("addEventListener and attachEvent are unavailable.");return t}function xM(){function n(t){return e.call(n.src,n.listener,t)}const e=RM;return n}function TS(n,e,t,i,r){if(Array.isArray(e)){for(var s=0;s<e.length;s++)TS(n,e[s],t,i,r);return null}return t=lg(t),n&&n[dc]?n.P(e,t,hc(i)?!!i.capture:!!i,r):wS(n,e,t,!0,i,r)}function ES(n,e,t,i,r){if(Array.isArray(e))for(var s=0;s<e.length;s++)ES(n,e[s],t,i,r);else i=hc(i)?!!i.capture:!!i,t=lg(t),n&&n[dc]?(n=n.i,e=String(e).toString(),e in n.g&&(s=n.g[e],t=lp(s,t,i,r),-1<t&&(Nh(s[t]),Array.prototype.splice.call(s,t,1),s.length==0&&(delete n.g[e],n.h--)))):n&&(n=ag(n))&&(e=n.g[e.toString()],n=-1,e&&(n=lp(e,t,i,r)),(t=-1<n?e[n]:null)&&og(t))}function og(n){if(typeof n!="number"&&n&&!n.fa){var e=n.src;if(e&&e[dc])ap(e.i,n);else{var t=n.type,i=n.proxy;e.removeEventListener?e.removeEventListener(t,i,n.capture):e.detachEvent?e.detachEvent(SS(t),i):e.addListener&&e.removeListener&&e.removeListener(i),(t=ag(e))?(ap(t,n),t.h==0&&(t.src=null,e[sg]=null)):Nh(n)}}}function SS(n){return n in Dd?Dd[n]:Dd[n]="on"+n}function RM(n,e){if(n.fa)n=!0;else{e=new Nl(e,this);var t=n.listener,i=n.la||n.src;n.ia&&og(n),n=t.call(i,e)}return n}function ag(n){return n=n[sg],n instanceof Mh?n:null}var Ld="__closure_events_fn_"+(1e9*Math.random()>>>0);function lg(n){return typeof n=="function"?n:(n[Ld]||(n[Ld]=function(e){return n.handleEvent(e)}),n[Ld])}function $t(){ts.call(this),this.i=new Mh(this),this.S=this,this.J=null}zt($t,ts);$t.prototype[dc]=!0;$t.prototype.removeEventListener=function(n,e,t,i){ES(this,n,e,t,i)};function Yt(n,e){var t,i=n.J;if(i)for(t=[];i;i=i.J)t.push(i);if(n=n.S,i=e.type||e,typeof e=="string")e=new hn(e,n);else if(e instanceof hn)e.target=e.target||n;else{var r=e;e=new hn(i,n),yS(e,r)}if(r=!0,t)for(var s=t.length-1;0<=s;s--){var o=e.g=t[s];r=Uc(o,i,!0,e)&&r}if(o=e.g=n,r=Uc(o,i,!0,e)&&r,r=Uc(o,i,!1,e)&&r,t)for(s=0;s<t.length;s++)o=e.g=t[s],r=Uc(o,i,!1,e)&&r}$t.prototype.N=function(){if($t.$.N.call(this),this.i){var n=this.i,e;for(e in n.g){for(var t=n.g[e],i=0;i<t.length;i++)Nh(t[i]);delete n.g[e],n.h--}}this.J=null};$t.prototype.O=function(n,e,t,i){return this.i.add(String(n),e,!1,t,i)};$t.prototype.P=function(n,e,t,i){return this.i.add(String(n),e,!0,t,i)};function Uc(n,e,t,i){if(e=n.i.g[String(e)],!e)return!0;e=e.concat();for(var r=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.fa&&o.capture==t){var a=o.listener,l=o.la||o.src;o.ia&&ap(n.i,o),r=a.call(l,i)!==!1&&r}}return r&&!i.defaultPrevented}var cg=me.JSON.stringify;class PM{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}function OM(){var n=ug;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}class kM{constructor(){this.h=this.g=null}add(e,t){const i=bS.get();i.set(e,t),this.h?this.h.next=i:this.g=i,this.h=i}}var bS=new PM(()=>new NM,n=>n.reset());class NM{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function MM(n){var e=1;n=n.split(":");const t=[];for(;0<e&&n.length;)t.push(n.shift()),e--;return n.length&&t.push(n.join(":")),t}function DM(n){me.setTimeout(()=>{throw n},0)}let Ml,Dl=!1,ug=new kM,IS=()=>{const n=me.Promise.resolve(void 0);Ml=()=>{n.then(LM)}};var LM=()=>{for(var n;n=OM();){try{n.h.call(n.g)}catch(t){DM(t)}var e=bS;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Dl=!1};function Dh(n,e){$t.call(this),this.h=n||1,this.g=e||me,this.j=un(this.qb,this),this.l=Date.now()}zt(Dh,$t);Q=Dh.prototype;Q.ga=!1;Q.T=null;Q.qb=function(){if(this.ga){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-n):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Yt(this,"tick"),this.ga&&(hg(this),this.start()))}};Q.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function hg(n){n.ga=!1,n.T&&(n.g.clearTimeout(n.T),n.T=null)}Q.N=function(){Dh.$.N.call(this),hg(this),delete this.g};function dg(n,e,t){if(typeof n=="function")t&&(n=un(n,t));else if(n&&typeof n.handleEvent=="function")n=un(n.handleEvent,n);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:me.setTimeout(n,e||0)}function CS(n){n.g=dg(()=>{n.g=null,n.i&&(n.i=!1,CS(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}class VM extends ts{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:CS(this)}N(){super.N(),this.g&&(me.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ll(n){ts.call(this),this.h=n,this.g={}}zt(Ll,ts);var Ev=[];function AS(n,e,t,i){Array.isArray(t)||(t&&(Ev[0]=t.toString()),t=Ev);for(var r=0;r<t.length;r++){var s=vS(e,t[r],i||n.handleEvent,!1,n.h||n);if(!s)break;n.g[s.key]=s}}function xS(n){rg(n.g,function(e,t){this.g.hasOwnProperty(t)&&og(e)},n),n.g={}}Ll.prototype.N=function(){Ll.$.N.call(this),xS(this)};Ll.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function Lh(){this.g=!0}Lh.prototype.Ea=function(){this.g=!1};function FM(n,e,t,i,r,s){n.info(function(){if(n.g)if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var u=c[0];c=c[1];var h=u.split("_");o=2<=h.length&&h[1]=="type"?o+(u+"="+c+"&"):o+(u+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+i+") [attempt "+r+"]: "+e+`
`+t+`
`+o})}function UM(n,e,t,i,r,s,o){n.info(function(){return"XMLHTTP RESP ("+i+") [ attempt "+r+"]: "+e+`
`+t+`
`+s+" "+o})}function vo(n,e,t,i){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+BM(n,t)+(i?" "+i:"")})}function $M(n,e){n.info(function(){return"TIMEOUT: "+e})}Lh.prototype.info=function(){};function BM(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t){for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var i=t[n];if(!(2>i.length)){var r=i[1];if(Array.isArray(r)&&!(1>r.length)){var s=r[0];if(s!="noop"&&s!="stop"&&s!="close")for(var o=1;o<r.length;o++)r[o]=""}}}}return cg(t)}catch{return e}}var Zs={},Sv=null;function Vh(){return Sv=Sv||new $t}Zs.Ta="serverreachability";function RS(n){hn.call(this,Zs.Ta,n)}zt(RS,hn);function Vl(n){const e=Vh();Yt(e,new RS(e))}Zs.STAT_EVENT="statevent";function PS(n,e){hn.call(this,Zs.STAT_EVENT,n),this.stat=e}zt(PS,hn);function mn(n){const e=Vh();Yt(e,new PS(e,n))}Zs.Ua="timingevent";function OS(n,e){hn.call(this,Zs.Ua,n),this.size=e}zt(OS,hn);function fc(n,e){if(typeof n!="function")throw Error("Fn must not be null and must be a function");return me.setTimeout(function(){n()},e)}var Fh={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},kS={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function fg(){}fg.prototype.h=null;function bv(n){return n.h||(n.h=n.i())}function NS(){}var pc={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function pg(){hn.call(this,"d")}zt(pg,hn);function _g(){hn.call(this,"c")}zt(_g,hn);var cp;function Uh(){}zt(Uh,fg);Uh.prototype.g=function(){return new XMLHttpRequest};Uh.prototype.i=function(){return{}};cp=new Uh;function _c(n,e,t,i){this.l=n,this.j=e,this.m=t,this.W=i||1,this.U=new Ll(this),this.P=zM,n=rp?125:void 0,this.V=new Dh(n),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new MS}function MS(){this.i=null,this.g="",this.h=!1}var zM=45e3,DS={},up={};Q=_c.prototype;Q.setTimeout=function(n){this.P=n};function hp(n,e,t){n.L=1,n.A=Bh(lr(e)),n.u=t,n.S=!0,LS(n,null)}function LS(n,e){n.G=Date.now(),gc(n),n.B=lr(n.A);var t=n.B,i=n.W;Array.isArray(i)||(i=[String(i)]),GS(t.i,"t",i),n.o=0,t=n.l.J,n.h=new MS,n.g=hb(n.l,t?e:null,!n.u),0<n.O&&(n.M=new VM(un(n.Pa,n,n.g),n.O)),AS(n.U,n.g,"readystatechange",n.nb),e=n.I?mS(n.I):{},n.u?(n.v||(n.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ha(n.B,n.v,n.u,e)):(n.v="GET",n.g.ha(n.B,n.v,null,e)),Vl(),FM(n.j,n.v,n.B,n.m,n.W,n.u)}Q.nb=function(n){n=n.target;const e=this.M;e&&Mi(n)==3?e.l():this.Pa(n)};Q.Pa=function(n){try{if(n==this.g)e:{const u=Mi(this.g);var e=this.g.Ia();const h=this.g.da();if(!(3>u)&&(u!=3||rp||this.g&&(this.h.h||this.g.ja()||xv(this.g)))){this.J||u!=4||e==7||(e==8||0>=h?Vl(3):Vl(2)),$h(this);var t=this.g.da();this.ca=t;t:if(VS(this)){var i=xv(this.g);n="";var r=i.length,s=Mi(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ws(this),cl(this);var o="";break t}this.h.i=new me.TextDecoder}for(e=0;e<r;e++)this.h.h=!0,n+=this.h.i.decode(i[e],{stream:s&&e==r-1});i.length=0,this.h.g+=n,this.o=0,o=this.h.g}else o=this.g.ja();if(this.i=t==200,UM(this.j,this.v,this.B,this.m,this.W,u,t),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!kl(a)){var c=a;break t}}c=null}if(t=c)vo(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,dp(this,t);else{this.i=!1,this.s=3,mn(12),ws(this),cl(this);break e}}this.S?(FS(this,u,o),rp&&this.i&&u==3&&(AS(this.U,this.V,"tick",this.mb),this.V.start())):(vo(this.j,this.m,o,null),dp(this,o)),u==4&&ws(this),this.i&&!this.J&&(u==4?ab(this.l,this):(this.i=!1,gc(this)))}else cD(this.g),t==400&&0<o.indexOf("Unknown SID")?(this.s=3,mn(12)):(this.s=0,mn(13)),ws(this),cl(this)}}}catch{}finally{}};function VS(n){return n.g?n.v=="GET"&&n.L!=2&&n.l.Ha:!1}function FS(n,e,t){let i=!0,r;for(;!n.J&&n.o<t.length;)if(r=jM(n,t),r==up){e==4&&(n.s=4,mn(14),i=!1),vo(n.j,n.m,null,"[Incomplete Response]");break}else if(r==DS){n.s=4,mn(15),vo(n.j,n.m,t,"[Invalid Chunk]"),i=!1;break}else vo(n.j,n.m,r,null),dp(n,r);VS(n)&&n.o!=0&&(n.h.g=n.h.g.slice(n.o),n.o=0),e!=4||t.length!=0||n.h.h||(n.s=1,mn(16),i=!1),n.i=n.i&&i,i?0<t.length&&!n.ba&&(n.ba=!0,e=n.l,e.g==n&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+t.length),Tg(e),e.M=!0,mn(11))):(vo(n.j,n.m,t,"[Invalid Chunked Response]"),ws(n),cl(n))}Q.mb=function(){if(this.g){var n=Mi(this.g),e=this.g.ja();this.o<e.length&&($h(this),FS(this,n,e),this.i&&n!=4&&gc(this))}};function jM(n,e){var t=n.o,i=e.indexOf(`
`,t);return i==-1?up:(t=Number(e.substring(t,i)),isNaN(t)?DS:(i+=1,i+t>e.length?up:(e=e.slice(i,i+t),n.o=i+t,e)))}Q.cancel=function(){this.J=!0,ws(this)};function gc(n){n.Y=Date.now()+n.P,US(n,n.P)}function US(n,e){if(n.C!=null)throw Error("WatchDog timer not null");n.C=fc(un(n.lb,n),e)}function $h(n){n.C&&(me.clearTimeout(n.C),n.C=null)}Q.lb=function(){this.C=null;const n=Date.now();0<=n-this.Y?($M(this.j,this.B),this.L!=2&&(Vl(),mn(17)),ws(this),this.s=2,cl(this)):US(this,this.Y-n)};function cl(n){n.l.H==0||n.J||ab(n.l,n)}function ws(n){$h(n);var e=n.M;e&&typeof e.sa=="function"&&e.sa(),n.M=null,hg(n.V),xS(n.U),n.g&&(e=n.g,n.g=null,e.abort(),e.sa())}function dp(n,e){try{var t=n.l;if(t.H!=0&&(t.g==n||fp(t.i,n))){if(!n.K&&fp(t.i,n)&&t.H==3){try{var i=t.Ja.g.parse(e)}catch{i=null}if(Array.isArray(i)&&i.length==3){var r=i;if(r[0]==0){e:if(!t.u){if(t.g)if(t.g.G+3e3<n.G)Uu(t),Gh(t);else break e;wg(t),mn(18)}}else t.Fa=r[1],0<t.Fa-t.V&&37500>r[2]&&t.G&&t.A==0&&!t.v&&(t.v=fc(un(t.ib,t),6e3));if(1>=WS(t.i)&&t.oa){try{t.oa()}catch{}t.oa=void 0}}else Ts(t,11)}else if((n.K||t.g==n)&&Uu(t),!kl(e))for(r=t.Ja.g.parse(e),e=0;e<r.length;e++){let c=r[e];if(t.V=c[0],c=c[1],t.H==2)if(c[0]=="c"){t.K=c[1],t.pa=c[2];const u=c[3];u!=null&&(t.ra=u,t.l.info("VER="+t.ra));const h=c[4];h!=null&&(t.Ga=h,t.l.info("SVER="+t.Ga));const f=c[5];f!=null&&typeof f=="number"&&0<f&&(i=1.5*f,t.L=i,t.l.info("backChannelRequestTimeoutMs_="+i)),i=t;const d=n.g;if(d){const _=d.g?d.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(_){var s=i.i;s.g||_.indexOf("spdy")==-1&&_.indexOf("quic")==-1&&_.indexOf("h2")==-1||(s.j=s.l,s.g=new Set,s.h&&(gg(s,s.h),s.h=null))}if(i.F){const p=d.g?d.g.getResponseHeader("X-HTTP-Session-Id"):null;p&&(i.Da=p,st(i.I,i.F,p))}}t.H=3,t.h&&t.h.Ba(),t.ca&&(t.S=Date.now()-n.G,t.l.info("Handshake RTT: "+t.S+"ms")),i=t;var o=n;if(i.wa=ub(i,i.J?i.pa:null,i.Y),o.K){KS(i.i,o);var a=o,l=i.L;l&&a.setTimeout(l),a.C&&($h(a),gc(a)),i.g=o}else sb(i);0<t.j.length&&Hh(t)}else c[0]!="stop"&&c[0]!="close"||Ts(t,7);else t.H==3&&(c[0]=="stop"||c[0]=="close"?c[0]=="stop"?Ts(t,7):vg(t):c[0]!="noop"&&t.h&&t.h.Aa(c),t.A=0)}}Vl(4)}catch{}}function GM(n){if(n.Z&&typeof n.Z=="function")return n.Z();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if(typeof n=="string")return n.split("");if(Oh(n)){for(var e=[],t=n.length,i=0;i<t;i++)e.push(n[i]);return e}e=[],t=0;for(i in n)e[t++]=n[i];return e}function HM(n){if(n.ta&&typeof n.ta=="function")return n.ta();if(!n.Z||typeof n.Z!="function"){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(Oh(n)||typeof n=="string"){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const i in n)e[t++]=i;return e}}}function $S(n,e){if(n.forEach&&typeof n.forEach=="function")n.forEach(e,void 0);else if(Oh(n)||typeof n=="string")Array.prototype.forEach.call(n,e,void 0);else for(var t=HM(n),i=GM(n),r=i.length,s=0;s<r;s++)e.call(void 0,i[s],t&&t[s],n)}var BS=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function qM(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var i=n[t].indexOf("="),r=null;if(0<=i){var s=n[t].substring(0,i);r=n[t].substring(i+1)}else s=n[t];e(s,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}function xs(n){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof xs){this.h=n.h,Vu(this,n.j),this.s=n.s,this.g=n.g,Fu(this,n.m),this.l=n.l;var e=n.i,t=new Fl;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),Iv(this,t),this.o=n.o}else n&&(e=String(n).match(BS))?(this.h=!1,Vu(this,e[1]||"",!0),this.s=za(e[2]||""),this.g=za(e[3]||"",!0),Fu(this,e[4]),this.l=za(e[5]||"",!0),Iv(this,e[6]||"",!0),this.o=za(e[7]||"")):(this.h=!1,this.i=new Fl(null,this.h))}xs.prototype.toString=function(){var n=[],e=this.j;e&&n.push(ja(e,Cv,!0),":");var t=this.g;return(t||e=="file")&&(n.push("//"),(e=this.s)&&n.push(ja(e,Cv,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t=this.m,t!=null&&n.push(":",String(t))),(t=this.l)&&(this.g&&t.charAt(0)!="/"&&n.push("/"),n.push(ja(t,t.charAt(0)=="/"?YM:KM,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",ja(t,QM)),n.join("")};function lr(n){return new xs(n)}function Vu(n,e,t){n.j=t?za(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Fu(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function Iv(n,e,t){e instanceof Fl?(n.i=e,JM(n.i,n.h)):(t||(e=ja(e,XM)),n.i=new Fl(e,n.h))}function st(n,e,t){n.i.set(e,t)}function Bh(n){return st(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function za(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function ja(n,e,t){return typeof n=="string"?(n=encodeURI(n).replace(e,WM),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function WM(n){return n=n.charCodeAt(0),"%"+(n>>4&15).toString(16)+(n&15).toString(16)}var Cv=/[#\/\?@]/g,KM=/[#\?:]/g,YM=/[#\?]/g,XM=/[#\?@]/g,QM=/#/g;function Fl(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function ns(n){n.g||(n.g=new Map,n.h=0,n.i&&qM(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}Q=Fl.prototype;Q.add=function(n,e){ns(this),this.i=null,n=va(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this};function zS(n,e){ns(n),e=va(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function jS(n,e){return ns(n),e=va(n,e),n.g.has(e)}Q.forEach=function(n,e){ns(this),this.g.forEach(function(t,i){t.forEach(function(r){n.call(e,r,i,this)},this)},this)};Q.ta=function(){ns(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let i=0;i<e.length;i++){const r=n[i];for(let s=0;s<r.length;s++)t.push(e[i])}return t};Q.Z=function(n){ns(this);let e=[];if(typeof n=="string")jS(this,n)&&(e=e.concat(this.g.get(va(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e};Q.set=function(n,e){return ns(this),this.i=null,n=va(this,n),jS(this,n)&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this};Q.get=function(n,e){return n?(n=this.Z(n),0<n.length?String(n[0]):e):e};function GS(n,e,t){zS(n,e),0<t.length&&(n.i=null,n.g.set(va(n,e),ng(t)),n.h+=t.length)}Q.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var i=e[t];const s=encodeURIComponent(String(i)),o=this.Z(i);for(i=0;i<o.length;i++){var r=s;o[i]!==""&&(r+="="+encodeURIComponent(String(o[i]))),n.push(r)}}return this.i=n.join("&")};function va(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function JM(n,e){e&&!n.j&&(ns(n),n.i=null,n.g.forEach(function(t,i){var r=i.toLowerCase();i!=r&&(zS(this,i),GS(this,r,t))},n)),n.j=e}var ZM=class{constructor(n,e){this.g=n,this.map=e}};function HS(n){this.l=n||eD,me.PerformanceNavigationTiming?(n=me.performance.getEntriesByType("navigation"),n=0<n.length&&(n[0].nextHopProtocol=="hq"||n[0].nextHopProtocol=="h2")):n=!!(me.g&&me.g.Ka&&me.g.Ka()&&me.g.Ka().dc),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var eD=10;function qS(n){return n.h?!0:n.g?n.g.size>=n.j:!1}function WS(n){return n.h?1:n.g?n.g.size:0}function fp(n,e){return n.h?n.h==e:n.g?n.g.has(e):!1}function gg(n,e){n.g?n.g.add(e):n.h=e}function KS(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}HS.prototype.cancel=function(){if(this.i=YS(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const n of this.g.values())n.cancel();this.g.clear()}};function YS(n){if(n.h!=null)return n.i.concat(n.h.F);if(n.g!=null&&n.g.size!==0){let e=n.i;for(const t of n.g.values())e=e.concat(t.F);return e}return ng(n.i)}var tD=class{stringify(n){return me.JSON.stringify(n,void 0)}parse(n){return me.JSON.parse(n,void 0)}};function nD(){this.g=new tD}function iD(n,e,t){const i=t||"";try{$S(n,function(r,s){let o=r;hc(r)&&(o=cg(r)),e.push(i+s+"="+encodeURIComponent(o))})}catch(r){throw e.push(i+"type="+encodeURIComponent("_badmap")),r}}function rD(n,e){const t=new Lh;if(me.Image){const i=new Image;i.onload=Fc($c,t,i,"TestLoadImage: loaded",!0,e),i.onerror=Fc($c,t,i,"TestLoadImage: error",!1,e),i.onabort=Fc($c,t,i,"TestLoadImage: abort",!1,e),i.ontimeout=Fc($c,t,i,"TestLoadImage: timeout",!1,e),me.setTimeout(function(){i.ontimeout&&i.ontimeout()},1e4),i.src=n}else e(!1)}function $c(n,e,t,i,r){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,r(i)}catch{}}function mc(n){this.l=n.ec||null,this.j=n.ob||!1}zt(mc,fg);mc.prototype.g=function(){return new zh(this.l,this.j)};mc.prototype.i=function(n){return function(){return n}}({});function zh(n,e){$t.call(this),this.F=n,this.u=e,this.m=void 0,this.readyState=mg,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}zt(zh,$t);var mg=0;Q=zh.prototype;Q.open=function(n,e){if(this.readyState!=mg)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Ul(this)};Q.send=function(n){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.F||me).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};Q.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,yc(this)),this.readyState=mg};Q.$a=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Ul(this)),this.g&&(this.readyState=3,Ul(this),this.g)))if(this.responseType==="arraybuffer")n.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof me.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;XS(this)}else n.text().then(this.Za.bind(this),this.ka.bind(this))};function XS(n){n.j.read().then(n.Xa.bind(n)).catch(n.ka.bind(n))}Q.Xa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?yc(this):Ul(this),this.readyState==3&&XS(this)}};Q.Za=function(n){this.g&&(this.response=this.responseText=n,yc(this))};Q.Ya=function(n){this.g&&(this.response=n,yc(this))};Q.ka=function(){this.g&&yc(this)};function yc(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Ul(n)}Q.setRequestHeader=function(n,e){this.v.append(n,e)};Q.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""};Q.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)t=t.value,n.push(t[0]+": "+t[1]),t=e.next();return n.join(`\r
`)};function Ul(n){n.onreadystatechange&&n.onreadystatechange.call(n)}Object.defineProperty(zh.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(n){this.m=n?"include":"same-origin"}});var sD=me.JSON.parse;function mt(n){$t.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=QS,this.L=this.M=!1}zt(mt,$t);var QS="",oD=/^https?$/i,aD=["POST","PUT"];Q=mt.prototype;Q.Oa=function(n){this.M=n};Q.ha=function(n,e,t,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+n);e=e?e.toUpperCase():"GET",this.I=n,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():cp.g(),this.C=this.u?bv(this.u):bv(cp),this.g.onreadystatechange=un(this.La,this);try{this.G=!0,this.g.open(e,String(n),!0),this.G=!1}catch(s){Av(this,s);return}if(n=t||"",t=new Map(this.headers),i)if(Object.getPrototypeOf(i)===Object.prototype)for(var r in i)t.set(r,i[r]);else if(typeof i.keys=="function"&&typeof i.get=="function")for(const s of i.keys())t.set(s,i.get(s));else throw Error("Unknown input type for opt_headers: "+String(i));i=Array.from(t.keys()).find(s=>s.toLowerCase()=="content-type"),r=me.FormData&&n instanceof me.FormData,!(0<=fS(aD,e))||i||r||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of t)this.g.setRequestHeader(s,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{eb(this),0<this.B&&((this.L=lD(this.g))?(this.g.timeout=this.B,this.g.ontimeout=un(this.ua,this)):this.A=dg(this.ua,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(s){Av(this,s)}};function lD(n){return Yo&&typeof n.timeout=="number"&&n.ontimeout!==void 0}Q.ua=function(){typeof tg<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Yt(this,"timeout"),this.abort(8))};function Av(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,JS(n),jh(n)}function JS(n){n.F||(n.F=!0,Yt(n,"complete"),Yt(n,"error"))}Q.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Yt(this,"complete"),Yt(this,"abort"),jh(this))};Q.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),jh(this,!0)),mt.$.N.call(this)};Q.La=function(){this.s||(this.G||this.v||this.l?ZS(this):this.kb())};Q.kb=function(){ZS(this)};function ZS(n){if(n.h&&typeof tg<"u"&&(!n.C[1]||Mi(n)!=4||n.da()!=2)){if(n.v&&Mi(n)==4)dg(n.La,0,n);else if(Yt(n,"readystatechange"),Mi(n)==4){n.h=!1;try{const o=n.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var i;if(i=o===0){var r=String(n.I).match(BS)[1]||null;!r&&me.self&&me.self.location&&(r=me.self.location.protocol.slice(0,-1)),i=!oD.test(r?r.toLowerCase():"")}t=i}if(t)Yt(n,"complete"),Yt(n,"success");else{n.m=6;try{var s=2<Mi(n)?n.g.statusText:""}catch{s=""}n.j=s+" ["+n.da()+"]",JS(n)}}finally{jh(n)}}}}function jh(n,e){if(n.g){eb(n);const t=n.g,i=n.C[0]?()=>{}:null;n.g=null,n.C=null,e||Yt(n,"ready");try{t.onreadystatechange=i}catch{}}}function eb(n){n.g&&n.L&&(n.g.ontimeout=null),n.A&&(me.clearTimeout(n.A),n.A=null)}Q.isActive=function(){return!!this.g};function Mi(n){return n.g?n.g.readyState:0}Q.da=function(){try{return 2<Mi(this)?this.g.status:-1}catch{return-1}};Q.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};Q.Wa=function(n){if(this.g){var e=this.g.responseText;return n&&e.indexOf(n)==0&&(e=e.substring(n.length)),sD(e)}};function xv(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.K){case QS:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function cD(n){const e={};n=(n.g&&2<=Mi(n)&&n.g.getAllResponseHeaders()||"").split(`\r
`);for(let i=0;i<n.length;i++){if(kl(n[i]))continue;var t=MM(n[i]);const r=t[0];if(t=t[1],typeof t!="string")continue;t=t.trim();const s=e[r]||[];e[r]=s,s.push(t)}AM(e,function(i){return i.join(", ")})}Q.Ia=function(){return this.m};Q.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function tb(n){let e="";return rg(n,function(t,i){e+=i,e+=":",e+=t,e+=`\r
`}),e}function yg(n,e,t){e:{for(i in t){var i=!1;break e}i=!0}i||(t=tb(t),typeof n=="string"?t!=null&&encodeURIComponent(String(t)):st(n,e,t))}function ka(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function nb(n){this.Ga=0,this.j=[],this.l=new Lh,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=ka("failFast",!1,n),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=ka("baseRetryDelayMs",5e3,n),this.hb=ka("retryDelaySeedMs",1e4,n),this.eb=ka("forwardChannelMaxRetries",2,n),this.xa=ka("forwardChannelRequestTimeoutMs",2e4,n),this.va=n&&n.xmlHttpFactory||void 0,this.Ha=n&&n.useFetchStreams||!1,this.L=void 0,this.J=n&&n.supportsCrossDomainXhr||!1,this.K="",this.i=new HS(n&&n.concurrentRequestLimit),this.Ja=new nD,this.P=n&&n.fastHandshake||!1,this.O=n&&n.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=n&&n.bc||!1,n&&n.Ea&&this.l.Ea(),n&&n.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&n&&n.detectBufferingProxy||!1,this.qa=void 0,n&&n.longPollingTimeout&&0<n.longPollingTimeout&&(this.qa=n.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}Q=nb.prototype;Q.ra=8;Q.H=1;function vg(n){if(ib(n),n.H==3){var e=n.W++,t=lr(n.I);if(st(t,"SID",n.K),st(t,"RID",e),st(t,"TYPE","terminate"),vc(n,t),e=new _c(n,n.l,e),e.L=2,e.A=Bh(lr(t)),t=!1,me.navigator&&me.navigator.sendBeacon)try{t=me.navigator.sendBeacon(e.A.toString(),"")}catch{}!t&&me.Image&&(new Image().src=e.A,t=!0),t||(e.g=hb(e.l,null),e.g.ha(e.A)),e.G=Date.now(),gc(e)}cb(n)}function Gh(n){n.g&&(Tg(n),n.g.cancel(),n.g=null)}function ib(n){Gh(n),n.u&&(me.clearTimeout(n.u),n.u=null),Uu(n),n.i.cancel(),n.m&&(typeof n.m=="number"&&me.clearTimeout(n.m),n.m=null)}function Hh(n){if(!qS(n.i)&&!n.m){n.m=!0;var e=n.Na;Ml||IS(),Dl||(Ml(),Dl=!0),ug.add(e,n),n.C=0}}function uD(n,e){return WS(n.i)>=n.i.j-(n.m?1:0)?!1:n.m?(n.j=e.F.concat(n.j),!0):n.H==1||n.H==2||n.C>=(n.cb?0:n.eb)?!1:(n.m=fc(un(n.Na,n,e),lb(n,n.C)),n.C++,!0)}Q.Na=function(n){if(this.m)if(this.m=null,this.H==1){if(!n){this.W=Math.floor(1e5*Math.random()),n=this.W++;const r=new _c(this,this.l,n);let s=this.s;if(this.U&&(s?(s=mS(s),yS(s,this.U)):s=this.U),this.o!==null||this.O||(r.I=s,s=null),this.P)e:{for(var e=0,t=0;t<this.j.length;t++){t:{var i=this.j[t];if("__data__"in i.map&&(i=i.map.__data__,typeof i=="string")){i=i.length;break t}i=void 0}if(i===void 0)break;if(e+=i,4096<e){e=t;break e}if(e===4096||t===this.j.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=rb(this,r,e),t=lr(this.I),st(t,"RID",n),st(t,"CVER",22),this.F&&st(t,"X-HTTP-Session-Id",this.F),vc(this,t),s&&(this.O?e="headers="+encodeURIComponent(String(tb(s)))+"&"+e:this.o&&yg(t,this.o,s)),gg(this.i,r),this.bb&&st(t,"TYPE","init"),this.P?(st(t,"$req",e),st(t,"SID","null"),r.aa=!0,hp(r,t,null)):hp(r,t,e),this.H=2}}else this.H==3&&(n?Rv(this,n):this.j.length==0||qS(this.i)||Rv(this))};function Rv(n,e){var t;e?t=e.m:t=n.W++;const i=lr(n.I);st(i,"SID",n.K),st(i,"RID",t),st(i,"AID",n.V),vc(n,i),n.o&&n.s&&yg(i,n.o,n.s),t=new _c(n,n.l,t,n.C+1),n.o===null&&(t.I=n.s),e&&(n.j=e.F.concat(n.j)),e=rb(n,t,1e3),t.setTimeout(Math.round(.5*n.xa)+Math.round(.5*n.xa*Math.random())),gg(n.i,t),hp(t,i,e)}function vc(n,e){n.na&&rg(n.na,function(t,i){st(e,i,t)}),n.h&&$S({},function(t,i){st(e,i,t)})}function rb(n,e,t){t=Math.min(n.j.length,t);var i=n.h?un(n.h.Va,n.h,n):null;e:{var r=n.j;let s=-1;for(;;){const o=["count="+t];s==-1?0<t?(s=r[0].g,o.push("ofs="+s)):s=0:o.push("ofs="+s);let a=!0;for(let l=0;l<t;l++){let c=r[l].g;const u=r[l].map;if(c-=s,0>c)s=Math.max(0,r[l].g-100),a=!1;else try{iD(u,o,"req"+c+"_")}catch{i&&i(u)}}if(a){i=o.join("&");break e}}}return n=n.j.splice(0,t),e.F=n,i}function sb(n){if(!n.g&&!n.u){n.ba=1;var e=n.Ma;Ml||IS(),Dl||(Ml(),Dl=!0),ug.add(e,n),n.A=0}}function wg(n){return n.g||n.u||3<=n.A?!1:(n.ba++,n.u=fc(un(n.Ma,n),lb(n,n.A)),n.A++,!0)}Q.Ma=function(){if(this.u=null,ob(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var n=2*this.S;this.l.info("BP detection timer enabled: "+n),this.B=fc(un(this.jb,this),n)}};Q.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,mn(10),Gh(this),ob(this))};function Tg(n){n.B!=null&&(me.clearTimeout(n.B),n.B=null)}function ob(n){n.g=new _c(n,n.l,"rpc",n.ba),n.o===null&&(n.g.I=n.s),n.g.O=0;var e=lr(n.wa);st(e,"RID","rpc"),st(e,"SID",n.K),st(e,"AID",n.V),st(e,"CI",n.G?"0":"1"),!n.G&&n.qa&&st(e,"TO",n.qa),st(e,"TYPE","xmlhttp"),vc(n,e),n.o&&n.s&&yg(e,n.o,n.s),n.L&&n.g.setTimeout(n.L);var t=n.g;n=n.pa,t.L=1,t.A=Bh(lr(e)),t.u=null,t.S=!0,LS(t,n)}Q.ib=function(){this.v!=null&&(this.v=null,Gh(this),wg(this),mn(19))};function Uu(n){n.v!=null&&(me.clearTimeout(n.v),n.v=null)}function ab(n,e){var t=null;if(n.g==e){Uu(n),Tg(n),n.g=null;var i=2}else if(fp(n.i,e))t=e.F,KS(n.i,e),i=1;else return;if(n.H!=0){if(e.i)if(i==1){t=e.u?e.u.length:0,e=Date.now()-e.G;var r=n.C;i=Vh(),Yt(i,new OS(i,t)),Hh(n)}else sb(n);else if(r=e.s,r==3||r==0&&0<e.ca||!(i==1&&uD(n,e)||i==2&&wg(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),r){case 1:Ts(n,5);break;case 4:Ts(n,10);break;case 3:Ts(n,6);break;default:Ts(n,2)}}}function lb(n,e){let t=n.ab+Math.floor(Math.random()*n.hb);return n.isActive()||(t*=2),t*e}function Ts(n,e){if(n.l.info("Error code "+e),e==2){var t=null;n.h&&(t=null);var i=un(n.pb,n);t||(t=new xs("//www.google.com/images/cleardot.gif"),me.location&&me.location.protocol=="http"||Vu(t,"https"),Bh(t)),rD(t.toString(),i)}else mn(2);n.H=0,n.h&&n.h.za(e),cb(n),ib(n)}Q.pb=function(n){n?(this.l.info("Successfully pinged google.com"),mn(2)):(this.l.info("Failed to ping google.com"),mn(1))};function cb(n){if(n.H=0,n.ma=[],n.h){const e=YS(n.i);(e.length!=0||n.j.length!=0)&&(vv(n.ma,e),vv(n.ma,n.j),n.i.i.length=0,ng(n.j),n.j.length=0),n.h.ya()}}function ub(n,e,t){var i=t instanceof xs?lr(t):new xs(t);if(i.g!="")e&&(i.g=e+"."+i.g),Fu(i,i.m);else{var r=me.location;i=r.protocol,e=e?e+"."+r.hostname:r.hostname,r=+r.port;var s=new xs(null);i&&Vu(s,i),e&&(s.g=e),r&&Fu(s,r),t&&(s.l=t),i=s}return t=n.F,e=n.Da,t&&e&&st(i,t,e),st(i,"VER",n.ra),vc(n,i),i}function hb(n,e,t){if(e&&!n.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=n.Ha&&!n.va?new mt(new mc({ob:t})):new mt(n.va),e.Oa(n.J),e}Q.isActive=function(){return!!this.h&&this.h.isActive(this)};function db(){}Q=db.prototype;Q.Ba=function(){};Q.Aa=function(){};Q.za=function(){};Q.ya=function(){};Q.isActive=function(){return!0};Q.Va=function(){};function $u(){if(Yo&&!(10<=Number(SM)))throw Error("Environmental error: no available transport.")}$u.prototype.g=function(n,e){return new $n(n,e)};function $n(n,e){$t.call(this),this.g=new nb(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(n?n["X-WebChannel-Client-Profile"]=e.Ca:n={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=n,(n=e&&e.cc)&&!kl(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!kl(e)&&(this.g.F=e,n=this.h,n!==null&&e in n&&(n=this.h,e in n&&delete n[e])),this.j=new wa(this)}zt($n,$t);$n.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var n=this.g,e=this.l,t=this.h||void 0;mn(0),n.Y=e,n.na=t||{},n.G=n.aa,n.I=ub(n,null,n.Y),Hh(n)};$n.prototype.close=function(){vg(this.g)};$n.prototype.u=function(n){var e=this.g;if(typeof n=="string"){var t={};t.__data__=n,n=t}else this.v&&(t={},t.__data__=cg(n),n=t);e.j.push(new ZM(e.fb++,n)),e.H==3&&Hh(e)};$n.prototype.N=function(){this.g.h=null,delete this.j,vg(this.g),delete this.g,$n.$.N.call(this)};function fb(n){pg.call(this),n.__headers__&&(this.headers=n.__headers__,this.statusCode=n.__status__,delete n.__headers__,delete n.__status__);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=e!==null&&n in e?e[n]:void 0),this.data=e}else this.data=n}zt(fb,pg);function pb(){_g.call(this),this.status=1}zt(pb,_g);function wa(n){this.g=n}zt(wa,db);wa.prototype.Ba=function(){Yt(this.g,"a")};wa.prototype.Aa=function(n){Yt(this.g,new fb(n))};wa.prototype.za=function(n){Yt(this.g,new pb)};wa.prototype.ya=function(){Yt(this.g,"b")};function hD(){this.blockSize=-1}function Ti(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}zt(Ti,hD);Ti.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function Vd(n,e,t){t||(t=0);var i=Array(16);if(typeof e=="string")for(var r=0;16>r;++r)i[r]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(r=0;16>r;++r)i[r]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;e=n.g[0],t=n.g[1],r=n.g[2];var s=n.g[3],o=e+(s^t&(r^s))+i[0]+3614090360&4294967295;e=t+(o<<7&4294967295|o>>>25),o=s+(r^e&(t^r))+i[1]+3905402710&4294967295,s=e+(o<<12&4294967295|o>>>20),o=r+(t^s&(e^t))+i[2]+606105819&4294967295,r=s+(o<<17&4294967295|o>>>15),o=t+(e^r&(s^e))+i[3]+3250441966&4294967295,t=r+(o<<22&4294967295|o>>>10),o=e+(s^t&(r^s))+i[4]+4118548399&4294967295,e=t+(o<<7&4294967295|o>>>25),o=s+(r^e&(t^r))+i[5]+1200080426&4294967295,s=e+(o<<12&4294967295|o>>>20),o=r+(t^s&(e^t))+i[6]+2821735955&4294967295,r=s+(o<<17&4294967295|o>>>15),o=t+(e^r&(s^e))+i[7]+4249261313&4294967295,t=r+(o<<22&4294967295|o>>>10),o=e+(s^t&(r^s))+i[8]+1770035416&4294967295,e=t+(o<<7&4294967295|o>>>25),o=s+(r^e&(t^r))+i[9]+2336552879&4294967295,s=e+(o<<12&4294967295|o>>>20),o=r+(t^s&(e^t))+i[10]+4294925233&4294967295,r=s+(o<<17&4294967295|o>>>15),o=t+(e^r&(s^e))+i[11]+2304563134&4294967295,t=r+(o<<22&4294967295|o>>>10),o=e+(s^t&(r^s))+i[12]+1804603682&4294967295,e=t+(o<<7&4294967295|o>>>25),o=s+(r^e&(t^r))+i[13]+4254626195&4294967295,s=e+(o<<12&4294967295|o>>>20),o=r+(t^s&(e^t))+i[14]+2792965006&4294967295,r=s+(o<<17&4294967295|o>>>15),o=t+(e^r&(s^e))+i[15]+1236535329&4294967295,t=r+(o<<22&4294967295|o>>>10),o=e+(r^s&(t^r))+i[1]+4129170786&4294967295,e=t+(o<<5&4294967295|o>>>27),o=s+(t^r&(e^t))+i[6]+3225465664&4294967295,s=e+(o<<9&4294967295|o>>>23),o=r+(e^t&(s^e))+i[11]+643717713&4294967295,r=s+(o<<14&4294967295|o>>>18),o=t+(s^e&(r^s))+i[0]+3921069994&4294967295,t=r+(o<<20&4294967295|o>>>12),o=e+(r^s&(t^r))+i[5]+3593408605&4294967295,e=t+(o<<5&4294967295|o>>>27),o=s+(t^r&(e^t))+i[10]+38016083&4294967295,s=e+(o<<9&4294967295|o>>>23),o=r+(e^t&(s^e))+i[15]+3634488961&4294967295,r=s+(o<<14&4294967295|o>>>18),o=t+(s^e&(r^s))+i[4]+3889429448&4294967295,t=r+(o<<20&4294967295|o>>>12),o=e+(r^s&(t^r))+i[9]+568446438&4294967295,e=t+(o<<5&4294967295|o>>>27),o=s+(t^r&(e^t))+i[14]+3275163606&4294967295,s=e+(o<<9&4294967295|o>>>23),o=r+(e^t&(s^e))+i[3]+4107603335&4294967295,r=s+(o<<14&4294967295|o>>>18),o=t+(s^e&(r^s))+i[8]+1163531501&4294967295,t=r+(o<<20&4294967295|o>>>12),o=e+(r^s&(t^r))+i[13]+2850285829&4294967295,e=t+(o<<5&4294967295|o>>>27),o=s+(t^r&(e^t))+i[2]+4243563512&4294967295,s=e+(o<<9&4294967295|o>>>23),o=r+(e^t&(s^e))+i[7]+1735328473&4294967295,r=s+(o<<14&4294967295|o>>>18),o=t+(s^e&(r^s))+i[12]+2368359562&4294967295,t=r+(o<<20&4294967295|o>>>12),o=e+(t^r^s)+i[5]+4294588738&4294967295,e=t+(o<<4&4294967295|o>>>28),o=s+(e^t^r)+i[8]+2272392833&4294967295,s=e+(o<<11&4294967295|o>>>21),o=r+(s^e^t)+i[11]+1839030562&4294967295,r=s+(o<<16&4294967295|o>>>16),o=t+(r^s^e)+i[14]+4259657740&4294967295,t=r+(o<<23&4294967295|o>>>9),o=e+(t^r^s)+i[1]+2763975236&4294967295,e=t+(o<<4&4294967295|o>>>28),o=s+(e^t^r)+i[4]+1272893353&4294967295,s=e+(o<<11&4294967295|o>>>21),o=r+(s^e^t)+i[7]+4139469664&4294967295,r=s+(o<<16&4294967295|o>>>16),o=t+(r^s^e)+i[10]+3200236656&4294967295,t=r+(o<<23&4294967295|o>>>9),o=e+(t^r^s)+i[13]+681279174&4294967295,e=t+(o<<4&4294967295|o>>>28),o=s+(e^t^r)+i[0]+3936430074&4294967295,s=e+(o<<11&4294967295|o>>>21),o=r+(s^e^t)+i[3]+3572445317&4294967295,r=s+(o<<16&4294967295|o>>>16),o=t+(r^s^e)+i[6]+76029189&4294967295,t=r+(o<<23&4294967295|o>>>9),o=e+(t^r^s)+i[9]+3654602809&4294967295,e=t+(o<<4&4294967295|o>>>28),o=s+(e^t^r)+i[12]+3873151461&4294967295,s=e+(o<<11&4294967295|o>>>21),o=r+(s^e^t)+i[15]+530742520&4294967295,r=s+(o<<16&4294967295|o>>>16),o=t+(r^s^e)+i[2]+3299628645&4294967295,t=r+(o<<23&4294967295|o>>>9),o=e+(r^(t|~s))+i[0]+4096336452&4294967295,e=t+(o<<6&4294967295|o>>>26),o=s+(t^(e|~r))+i[7]+1126891415&4294967295,s=e+(o<<10&4294967295|o>>>22),o=r+(e^(s|~t))+i[14]+2878612391&4294967295,r=s+(o<<15&4294967295|o>>>17),o=t+(s^(r|~e))+i[5]+4237533241&4294967295,t=r+(o<<21&4294967295|o>>>11),o=e+(r^(t|~s))+i[12]+1700485571&4294967295,e=t+(o<<6&4294967295|o>>>26),o=s+(t^(e|~r))+i[3]+2399980690&4294967295,s=e+(o<<10&4294967295|o>>>22),o=r+(e^(s|~t))+i[10]+4293915773&4294967295,r=s+(o<<15&4294967295|o>>>17),o=t+(s^(r|~e))+i[1]+2240044497&4294967295,t=r+(o<<21&4294967295|o>>>11),o=e+(r^(t|~s))+i[8]+1873313359&4294967295,e=t+(o<<6&4294967295|o>>>26),o=s+(t^(e|~r))+i[15]+4264355552&4294967295,s=e+(o<<10&4294967295|o>>>22),o=r+(e^(s|~t))+i[6]+2734768916&4294967295,r=s+(o<<15&4294967295|o>>>17),o=t+(s^(r|~e))+i[13]+1309151649&4294967295,t=r+(o<<21&4294967295|o>>>11),o=e+(r^(t|~s))+i[4]+4149444226&4294967295,e=t+(o<<6&4294967295|o>>>26),o=s+(t^(e|~r))+i[11]+3174756917&4294967295,s=e+(o<<10&4294967295|o>>>22),o=r+(e^(s|~t))+i[2]+718787259&4294967295,r=s+(o<<15&4294967295|o>>>17),o=t+(s^(r|~e))+i[9]+3951481745&4294967295,n.g[0]=n.g[0]+e&4294967295,n.g[1]=n.g[1]+(r+(o<<21&4294967295|o>>>11))&4294967295,n.g[2]=n.g[2]+r&4294967295,n.g[3]=n.g[3]+s&4294967295}Ti.prototype.j=function(n,e){e===void 0&&(e=n.length);for(var t=e-this.blockSize,i=this.m,r=this.h,s=0;s<e;){if(r==0)for(;s<=t;)Vd(this,n,s),s+=this.blockSize;if(typeof n=="string"){for(;s<e;)if(i[r++]=n.charCodeAt(s++),r==this.blockSize){Vd(this,i),r=0;break}}else for(;s<e;)if(i[r++]=n[s++],r==this.blockSize){Vd(this,i),r=0;break}}this.h=r,this.i+=e};Ti.prototype.l=function(){var n=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);n[0]=128;for(var e=1;e<n.length-8;++e)n[e]=0;var t=8*this.i;for(e=n.length-8;e<n.length;++e)n[e]=t&255,t/=256;for(this.j(n),n=Array(16),e=t=0;4>e;++e)for(var i=0;32>i;i+=8)n[t++]=this.g[e]>>>i&255;return n};function Ke(n,e){this.h=e;for(var t=[],i=!0,r=n.length-1;0<=r;r--){var s=n[r]|0;i&&s==e||(t[r]=s,i=!1)}this.g=t}var dD={};function Eg(n){return-128<=n&&128>n?wM(n,function(e){return new Ke([e|0],0>e?-1:0)}):new Ke([n|0],0>n?-1:0)}function Di(n){if(isNaN(n)||!isFinite(n))return Oo;if(0>n)return Wt(Di(-n));for(var e=[],t=1,i=0;n>=t;i++)e[i]=n/t|0,t*=pp;return new Ke(e,0)}function _b(n,e){if(n.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(n.charAt(0)=="-")return Wt(_b(n.substring(1),e));if(0<=n.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=Di(Math.pow(e,8)),i=Oo,r=0;r<n.length;r+=8){var s=Math.min(8,n.length-r),o=parseInt(n.substring(r,r+s),e);8>s?(s=Di(Math.pow(e,s)),i=i.R(s).add(Di(o))):(i=i.R(t),i=i.add(Di(o)))}return i}var pp=4294967296,Oo=Eg(0),_p=Eg(1),Pv=Eg(16777216);Q=Ke.prototype;Q.ea=function(){if(Yn(this))return-Wt(this).ea();for(var n=0,e=1,t=0;t<this.g.length;t++){var i=this.D(t);n+=(0<=i?i:pp+i)*e,e*=pp}return n};Q.toString=function(n){if(n=n||10,2>n||36<n)throw Error("radix out of range: "+n);if(er(this))return"0";if(Yn(this))return"-"+Wt(this).toString(n);for(var e=Di(Math.pow(n,6)),t=this,i="";;){var r=zu(t,e).g;t=Bu(t,r.R(e));var s=((0<t.g.length?t.g[0]:t.h)>>>0).toString(n);if(t=r,er(t))return s+i;for(;6>s.length;)s="0"+s;i=s+i}};Q.D=function(n){return 0>n?0:n<this.g.length?this.g[n]:this.h};function er(n){if(n.h!=0)return!1;for(var e=0;e<n.g.length;e++)if(n.g[e]!=0)return!1;return!0}function Yn(n){return n.h==-1}Q.X=function(n){return n=Bu(this,n),Yn(n)?-1:er(n)?0:1};function Wt(n){for(var e=n.g.length,t=[],i=0;i<e;i++)t[i]=~n.g[i];return new Ke(t,~n.h).add(_p)}Q.abs=function(){return Yn(this)?Wt(this):this};Q.add=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],i=0,r=0;r<=e;r++){var s=i+(this.D(r)&65535)+(n.D(r)&65535),o=(s>>>16)+(this.D(r)>>>16)+(n.D(r)>>>16);i=o>>>16,s&=65535,o&=65535,t[r]=o<<16|s}return new Ke(t,t[t.length-1]&-2147483648?-1:0)};function Bu(n,e){return n.add(Wt(e))}Q.R=function(n){if(er(this)||er(n))return Oo;if(Yn(this))return Yn(n)?Wt(this).R(Wt(n)):Wt(Wt(this).R(n));if(Yn(n))return Wt(this.R(Wt(n)));if(0>this.X(Pv)&&0>n.X(Pv))return Di(this.ea()*n.ea());for(var e=this.g.length+n.g.length,t=[],i=0;i<2*e;i++)t[i]=0;for(i=0;i<this.g.length;i++)for(var r=0;r<n.g.length;r++){var s=this.D(i)>>>16,o=this.D(i)&65535,a=n.D(r)>>>16,l=n.D(r)&65535;t[2*i+2*r]+=o*l,Bc(t,2*i+2*r),t[2*i+2*r+1]+=s*l,Bc(t,2*i+2*r+1),t[2*i+2*r+1]+=o*a,Bc(t,2*i+2*r+1),t[2*i+2*r+2]+=s*a,Bc(t,2*i+2*r+2)}for(i=0;i<e;i++)t[i]=t[2*i+1]<<16|t[2*i];for(i=e;i<2*e;i++)t[i]=0;return new Ke(t,0)};function Bc(n,e){for(;(n[e]&65535)!=n[e];)n[e+1]+=n[e]>>>16,n[e]&=65535,e++}function Na(n,e){this.g=n,this.h=e}function zu(n,e){if(er(e))throw Error("division by zero");if(er(n))return new Na(Oo,Oo);if(Yn(n))return e=zu(Wt(n),e),new Na(Wt(e.g),Wt(e.h));if(Yn(e))return e=zu(n,Wt(e)),new Na(Wt(e.g),e.h);if(30<n.g.length){if(Yn(n)||Yn(e))throw Error("slowDivide_ only works with positive integers.");for(var t=_p,i=e;0>=i.X(n);)t=Ov(t),i=Ov(i);var r=so(t,1),s=so(i,1);for(i=so(i,2),t=so(t,2);!er(i);){var o=s.add(i);0>=o.X(n)&&(r=r.add(t),s=o),i=so(i,1),t=so(t,1)}return e=Bu(n,r.R(e)),new Na(r,e)}for(r=Oo;0<=n.X(e);){for(t=Math.max(1,Math.floor(n.ea()/e.ea())),i=Math.ceil(Math.log(t)/Math.LN2),i=48>=i?1:Math.pow(2,i-48),s=Di(t),o=s.R(e);Yn(o)||0<o.X(n);)t-=i,s=Di(t),o=s.R(e);er(s)&&(s=_p),r=r.add(s),n=Bu(n,o)}return new Na(r,n)}Q.gb=function(n){return zu(this,n).h};Q.and=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],i=0;i<e;i++)t[i]=this.D(i)&n.D(i);return new Ke(t,this.h&n.h)};Q.or=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],i=0;i<e;i++)t[i]=this.D(i)|n.D(i);return new Ke(t,this.h|n.h)};Q.xor=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],i=0;i<e;i++)t[i]=this.D(i)^n.D(i);return new Ke(t,this.h^n.h)};function Ov(n){for(var e=n.g.length+1,t=[],i=0;i<e;i++)t[i]=n.D(i)<<1|n.D(i-1)>>>31;return new Ke(t,n.h)}function so(n,e){var t=e>>5;e%=32;for(var i=n.g.length-t,r=[],s=0;s<i;s++)r[s]=0<e?n.D(s+t)>>>e|n.D(s+t+1)<<32-e:n.D(s+t);return new Ke(r,n.h)}$u.prototype.createWebChannel=$u.prototype.g;$n.prototype.send=$n.prototype.u;$n.prototype.open=$n.prototype.m;$n.prototype.close=$n.prototype.close;Fh.NO_ERROR=0;Fh.TIMEOUT=8;Fh.HTTP_ERROR=6;kS.COMPLETE="complete";NS.EventType=pc;pc.OPEN="a";pc.CLOSE="b";pc.ERROR="c";pc.MESSAGE="d";$t.prototype.listen=$t.prototype.O;mt.prototype.listenOnce=mt.prototype.P;mt.prototype.getLastError=mt.prototype.Sa;mt.prototype.getLastErrorCode=mt.prototype.Ia;mt.prototype.getStatus=mt.prototype.da;mt.prototype.getResponseJson=mt.prototype.Wa;mt.prototype.getResponseText=mt.prototype.ja;mt.prototype.send=mt.prototype.ha;mt.prototype.setWithCredentials=mt.prototype.Oa;Ti.prototype.digest=Ti.prototype.l;Ti.prototype.reset=Ti.prototype.reset;Ti.prototype.update=Ti.prototype.j;Ke.prototype.add=Ke.prototype.add;Ke.prototype.multiply=Ke.prototype.R;Ke.prototype.modulo=Ke.prototype.gb;Ke.prototype.compare=Ke.prototype.X;Ke.prototype.toNumber=Ke.prototype.ea;Ke.prototype.toString=Ke.prototype.toString;Ke.prototype.getBits=Ke.prototype.D;Ke.fromNumber=Di;Ke.fromString=_b;var fD=function(){return new $u},pD=function(){return Vh()},Fd=Fh,_D=kS,gD=Zs,kv={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},mD=mc,zc=NS,yD=mt,vD=Ti,ko=Ke;const Nv="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}en.UNAUTHENTICATED=new en(null),en.GOOGLE_CREDENTIALS=new en("google-credentials-uid"),en.FIRST_PARTY=new en("first-party-uid"),en.MOCK_USER=new en("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ta="10.11.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const js=new rc("@firebase/firestore");function Ma(){return js.logLevel}function re(n,...e){if(js.logLevel<=Ae.DEBUG){const t=e.map(Sg);js.debug(`Firestore (${Ta}): ${n}`,...t)}}function cr(n,...e){if(js.logLevel<=Ae.ERROR){const t=e.map(Sg);js.error(`Firestore (${Ta}): ${n}`,...t)}}function Xo(n,...e){if(js.logLevel<=Ae.WARN){const t=e.map(Sg);js.warn(`Firestore (${Ta}): ${n}`,...t)}}function Sg(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Te(n="Unexpected state"){const e=`FIRESTORE (${Ta}) INTERNAL ASSERTION FAILED: `+n;throw cr(e),new Error(e)}function Pt(n,e){n||Te()}function Ve(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class se extends fr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rs{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gb{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class wD{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(en.UNAUTHENTICATED))}shutdown(){}}class TD{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class ED{constructor(e){this.t=e,this.currentUser=en.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let i=this.i;const r=l=>this.i!==i?(i=this.i,t(l)):Promise.resolve();let s=new Rs;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Rs,e.enqueueRetryable(()=>r(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await r(this.currentUser)})},a=l=>{re("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(re("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Rs)}},0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(i=>this.i!==e?(re("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Pt(typeof i.accessToken=="string"),new gb(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Pt(e===null||typeof e=="string"),new en(e)}}class SD{constructor(e,t,i){this.l=e,this.h=t,this.P=i,this.type="FirstParty",this.user=en.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class bD{constructor(e,t,i){this.l=e,this.h=t,this.P=i}getToken(){return Promise.resolve(new SD(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(en.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class ID{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class CD{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){const i=s=>{s.error!=null&&re("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,re("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>i(s))};const r=s=>{re("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?r(s):re("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Pt(typeof t.token=="string"),this.R=t.token,new ID(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AD(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xD{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let i="";for(;i.length<20;){const r=AD(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<t&&(i+=e.charAt(r[s]%e.length))}return i}}function Be(n,e){return n<e?-1:n>e?1:0}function Qo(n,e,t){return n.length===e.length&&n.every((i,r)=>t(i,e[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ft{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new se(G.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new se(G.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new se(G.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new se(G.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ft.fromMillis(Date.now())}static fromDate(e){return Ft.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*t));return new Ft(t,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Be(this.nanoseconds,e.nanoseconds):Be(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ve{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ve(e)}static min(){return new ve(new Ft(0,0))}static max(){return new ve(new Ft(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $l{constructor(e,t,i){t===void 0?t=0:t>e.length&&Te(),i===void 0?i=e.length-t:i>e.length-t&&Te(),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return $l.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof $l?e.forEach(i=>{t.push(i)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let r=0;r<i;r++){const s=e.get(r),o=t.get(r);if(s<o)return-1;if(s>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class dt extends $l{construct(e,t,i){return new dt(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new se(G.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter(r=>r.length>0))}return new dt(t)}static emptyPath(){return new dt([])}}const RD=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class an extends $l{construct(e,t,i){return new an(e,t,i)}static isValidIdentifier(e){return RD.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),an.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new an(["__name__"])}static fromServerFormat(e){const t=[];let i="",r=0;const s=()=>{if(i.length===0)throw new se(G.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let o=!1;for(;r<e.length;){const a=e[r];if(a==="\\"){if(r+1===e.length)throw new se(G.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[r+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new se(G.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=l,r+=2}else a==="`"?(o=!o,r++):a!=="."||o?(i+=a,r++):(s(),r++)}if(s(),o)throw new se(G.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new an(t)}static emptyPath(){return new an([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pe{constructor(e){this.path=e}static fromPath(e){return new pe(dt.fromString(e))}static fromName(e){return new pe(dt.fromString(e).popFirst(5))}static empty(){return new pe(dt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&dt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return dt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new pe(new dt(e.slice()))}}function PD(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,r=ve.fromTimestamp(i===1e9?new Ft(t+1,0):new Ft(t,i));return new qr(r,pe.empty(),e)}function OD(n){return new qr(n.readTime,n.key,-1)}class qr{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new qr(ve.min(),pe.empty(),-1)}static max(){return new qr(ve.max(),pe.empty(),-1)}}function kD(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=pe.comparator(n.documentKey,e.documentKey),t!==0?t:Be(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ND="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class MD{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bg(n){if(n.code!==G.FAILED_PRECONDITION||n.message!==ND)throw n;re("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Te(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new U((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(t,s).next(i,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof U?t:U.resolve(t)}catch(t){return U.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):U.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):U.reject(t)}static resolve(e){return new U((t,i)=>{t(e)})}static reject(e){return new U((t,i)=>{i(e)})}static waitFor(e){return new U((t,i)=>{let r=0,s=0,o=!1;e.forEach(a=>{++r,a.next(()=>{++s,o&&s===r&&t()},l=>i(l))}),o=!0,s===r&&t()})}static or(e){let t=U.resolve(!1);for(const i of e)t=t.next(r=>r?U.resolve(r):i());return t}static forEach(e,t){const i=[];return e.forEach((r,s)=>{i.push(t.call(this,r,s))}),this.waitFor(i)}static mapArray(e,t){return new U((i,r)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const c=l;t(e[c]).next(u=>{o[c]=u,++a,a===s&&i(o)},u=>r(u))}})}static doWhile(e,t){return new U((i,r)=>{const s=()=>{e()===!0?t().next(()=>{s()},r):i()};s()})}}function DD(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function wc(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ig{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ie(i),this.se=i=>t.writeSequenceNumber(i))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Ig.oe=-1;function qh(n){return n==null}function ju(n){return n===0&&1/n==-1/0}function LD(n){return typeof n=="number"&&Number.isInteger(n)&&!ju(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mv(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Tc(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function mb(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et{constructor(e,t){this.comparator=e,this.root=t||Ht.EMPTY}insert(e,t){return new Et(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ht.BLACK,null,null))}remove(e){return new Et(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ht.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(r===0)return t+i.left.size;r<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,i)=>(e(t,i),!1))}toString(){const e=[];return this.inorderTraversal((t,i)=>(e.push(`${t}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new jc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new jc(this.root,e,this.comparator,!1)}getReverseIterator(){return new jc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new jc(this.root,e,this.comparator,!0)}}class jc{constructor(e,t,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?i(e.key,t):1,t&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ht{constructor(e,t,i,r,s){this.key=e,this.value=t,this.color=i??Ht.RED,this.left=r??Ht.EMPTY,this.right=s??Ht.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,r,s){return new Ht(e??this.key,t??this.value,i??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let r=this;const s=i(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,t,i),null):s===0?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Ht.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),t(e,r.key)===0){if(r.right.isEmpty())return Ht.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ht.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ht.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Te();const e=this.left.check();if(e!==this.right.check())throw Te();return e+(this.isRed()?0:1)}}Ht.EMPTY=null,Ht.RED=!0,Ht.BLACK=!1;Ht.EMPTY=new class{constructor(){this.size=0}get key(){throw Te()}get value(){throw Te()}get color(){throw Te()}get left(){throw Te()}get right(){throw Te()}copy(e,t,i,r,s){return this}insert(e,t,i){return new Ht(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xt{constructor(e){this.comparator=e,this.data=new Et(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,i)=>(e(t),!1))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Dv(this.data.getIterator())}getIteratorFrom(e){return new Dv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(i=>{t=t.add(i)}),t}isEqual(e){if(!(e instanceof Xt)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const r=t.getNext().key,s=i.getNext().key;if(this.comparator(r,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Xt(this.comparator);return t.data=e,t}}class Dv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pr{constructor(e){this.fields=e,e.sort(an.comparator)}static empty(){return new Pr([])}unionWith(e){let t=new Xt(an.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new Pr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Qo(this.fields,e.fields,(t,i)=>t.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yb extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new yb("Invalid base64 string: "+s):s}}(e);return new pn(t)}static fromUint8Array(e){const t=function(r){let s="";for(let o=0;o<r.length;++o)s+=String.fromCharCode(r[o]);return s}(e);return new pn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const i=new Uint8Array(t.length);for(let r=0;r<t.length;r++)i[r]=t.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Be(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}pn.EMPTY_BYTE_STRING=new pn("");const VD=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Wr(n){if(Pt(!!n),typeof n=="string"){let e=0;const t=VD.exec(n);if(Pt(!!t),t[1]){let r=t[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:At(n.seconds),nanos:At(n.nanos)}}function At(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Gs(n){return typeof n=="string"?pn.fromBase64String(n):pn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cg(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function Ag(n){const e=n.mapValue.fields.__previous_value__;return Cg(e)?Ag(e):e}function Bl(n){const e=Wr(n.mapValue.fields.__local_write_time__.timestampValue);return new Ft(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FD{constructor(e,t,i,r,s,o,a,l,c){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class zl{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new zl("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof zl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gc={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Hs(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Cg(n)?4:UD(n)?9007199254740991:10:Te()}function Bi(n,e){if(n===e)return!0;const t=Hs(n);if(t!==Hs(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Bl(n).isEqual(Bl(e));case 3:return function(r,s){if(typeof r.timestampValue=="string"&&typeof s.timestampValue=="string"&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;const o=Wr(r.timestampValue),a=Wr(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(r,s){return Gs(r.bytesValue).isEqual(Gs(s.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,s){return At(r.geoPointValue.latitude)===At(s.geoPointValue.latitude)&&At(r.geoPointValue.longitude)===At(s.geoPointValue.longitude)}(n,e);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return At(r.integerValue)===At(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){const o=At(r.doubleValue),a=At(s.doubleValue);return o===a?ju(o)===ju(a):isNaN(o)&&isNaN(a)}return!1}(n,e);case 9:return Qo(n.arrayValue.values||[],e.arrayValue.values||[],Bi);case 10:return function(r,s){const o=r.mapValue.fields||{},a=s.mapValue.fields||{};if(Mv(o)!==Mv(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Bi(o[l],a[l])))return!1;return!0}(n,e);default:return Te()}}function jl(n,e){return(n.values||[]).find(t=>Bi(t,e))!==void 0}function Jo(n,e){if(n===e)return 0;const t=Hs(n),i=Hs(e);if(t!==i)return Be(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return Be(n.booleanValue,e.booleanValue);case 2:return function(s,o){const a=At(s.integerValue||s.doubleValue),l=At(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(n,e);case 3:return Lv(n.timestampValue,e.timestampValue);case 4:return Lv(Bl(n),Bl(e));case 5:return Be(n.stringValue,e.stringValue);case 6:return function(s,o){const a=Gs(s),l=Gs(o);return a.compareTo(l)}(n.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const u=Be(a[c],l[c]);if(u!==0)return u}return Be(a.length,l.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,o){const a=Be(At(s.latitude),At(o.latitude));return a!==0?a:Be(At(s.longitude),At(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(s,o){const a=s.values||[],l=o.values||[];for(let c=0;c<a.length&&c<l.length;++c){const u=Jo(a[c],l[c]);if(u)return u}return Be(a.length,l.length)}(n.arrayValue,e.arrayValue);case 10:return function(s,o){if(s===Gc.mapValue&&o===Gc.mapValue)return 0;if(s===Gc.mapValue)return 1;if(o===Gc.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),c=o.fields||{},u=Object.keys(c);l.sort(),u.sort();for(let h=0;h<l.length&&h<u.length;++h){const f=Be(l[h],u[h]);if(f!==0)return f;const d=Jo(a[l[h]],c[u[h]]);if(d!==0)return d}return Be(l.length,u.length)}(n.mapValue,e.mapValue);default:throw Te()}}function Lv(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Be(n,e);const t=Wr(n),i=Wr(e),r=Be(t.seconds,i.seconds);return r!==0?r:Be(t.nanos,i.nanos)}function Zo(n){return gp(n)}function gp(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const i=Wr(t);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Gs(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return pe.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let i="[",r=!0;for(const s of t.values||[])r?r=!1:i+=",",i+=gp(s);return i+"]"}(n.arrayValue):"mapValue"in n?function(t){const i=Object.keys(t.fields||{}).sort();let r="{",s=!0;for(const o of i)s?s=!1:r+=",",r+=`${o}:${gp(t.fields[o])}`;return r+"}"}(n.mapValue):Te()}function Vv(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function mp(n){return!!n&&"integerValue"in n}function xg(n){return!!n&&"arrayValue"in n}function Fv(n){return!!n&&"nullValue"in n}function Uv(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Ud(n){return!!n&&"mapValue"in n}function ul(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Tc(n.mapValue.fields,(t,i)=>e.mapValue.fields[t]=ul(i)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=ul(n.arrayValue.values[t]);return e}return Object.assign({},n)}function UD(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pi{constructor(e){this.value=e}static empty(){return new Pi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!Ud(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ul(t)}setAll(e){let t=an.emptyPath(),i={},r=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){const l=this.getFieldsMap(t);this.applyChanges(l,i,r),i={},r=[],t=a.popLast()}o?i[a.lastSegment()]=ul(o):r.push(a.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,i,r)}delete(e){const t=this.field(e.popLast());Ud(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Bi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=t.mapValue.fields[e.get(i)];Ud(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,i){Tc(t,(r,s)=>e[r]=s);for(const r of i)delete e[r]}clone(){return new Pi(ul(this.value))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(e,t,i,r,s,o,a){this.key=e,this.documentType=t,this.version=i,this.readTime=r,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new rn(e,0,ve.min(),ve.min(),ve.min(),Pi.empty(),0)}static newFoundDocument(e,t,i,r){return new rn(e,1,t,ve.min(),i,r,0)}static newNoDocument(e,t){return new rn(e,2,t,ve.min(),ve.min(),Pi.empty(),0)}static newUnknownDocument(e,t){return new rn(e,3,t,ve.min(),ve.min(),Pi.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ve.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Pi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Pi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ve.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof rn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new rn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gu{constructor(e,t){this.position=e,this.inclusive=t}}function $v(n,e,t){let i=0;for(let r=0;r<n.position.length;r++){const s=e[r],o=n.position[r];if(s.field.isKeyField()?i=pe.comparator(pe.fromName(o.referenceValue),t.key):i=Jo(o,t.data.field(s.field)),s.dir==="desc"&&(i*=-1),i!==0)break}return i}function Bv(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Bi(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hu{constructor(e,t="asc"){this.field=e,this.dir=t}}function $D(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vb{}class Rt extends vb{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new zD(e,t,i):t==="array-contains"?new HD(e,i):t==="in"?new qD(e,i):t==="not-in"?new WD(e,i):t==="array-contains-any"?new KD(e,i):new Rt(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new jD(e,i):new GD(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Jo(t,this.value)):t!==null&&Hs(this.value)===Hs(t)&&this.matchesComparison(Jo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Te()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ei extends vb{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new Ei(e,t)}matches(e){return wb(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function wb(n){return n.op==="and"}function Tb(n){return BD(n)&&wb(n)}function BD(n){for(const e of n.filters)if(e instanceof Ei)return!1;return!0}function yp(n){if(n instanceof Rt)return n.field.canonicalString()+n.op.toString()+Zo(n.value);if(Tb(n))return n.filters.map(e=>yp(e)).join(",");{const e=n.filters.map(t=>yp(t)).join(",");return`${n.op}(${e})`}}function Eb(n,e){return n instanceof Rt?function(i,r){return r instanceof Rt&&i.op===r.op&&i.field.isEqual(r.field)&&Bi(i.value,r.value)}(n,e):n instanceof Ei?function(i,r){return r instanceof Ei&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((s,o,a)=>s&&Eb(o,r.filters[a]),!0):!1}(n,e):void Te()}function Sb(n){return n instanceof Rt?function(t){return`${t.field.canonicalString()} ${t.op} ${Zo(t.value)}`}(n):n instanceof Ei?function(t){return t.op.toString()+" {"+t.getFilters().map(Sb).join(" ,")+"}"}(n):"Filter"}class zD extends Rt{constructor(e,t,i){super(e,t,i),this.key=pe.fromName(i.referenceValue)}matches(e){const t=pe.comparator(e.key,this.key);return this.matchesComparison(t)}}class jD extends Rt{constructor(e,t){super(e,"in",t),this.keys=bb("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class GD extends Rt{constructor(e,t){super(e,"not-in",t),this.keys=bb("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function bb(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(i=>pe.fromName(i.referenceValue))}class HD extends Rt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return xg(t)&&jl(t.arrayValue,this.value)}}class qD extends Rt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&jl(this.value.arrayValue,t)}}class WD extends Rt{constructor(e,t){super(e,"not-in",t)}matches(e){if(jl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!jl(this.value.arrayValue,t)}}class KD extends Rt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!xg(t)||!t.arrayValue.values)&&t.arrayValue.values.some(i=>jl(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YD{constructor(e,t=null,i=[],r=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function zv(n,e=null,t=[],i=[],r=null,s=null,o=null){return new YD(n,e,t,i,r,s,o)}function Rg(n){const e=Ve(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(i=>yp(i)).join(","),t+="|ob:",t+=e.orderBy.map(i=>function(s){return s.field.canonicalString()+s.dir}(i)).join(","),qh(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(i=>Zo(i)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(i=>Zo(i)).join(",")),e.ue=t}return e.ue}function Pg(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!$D(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!Eb(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Bv(n.startAt,e.startAt)&&Bv(n.endAt,e.endAt)}function vp(n){return pe.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ec{constructor(e,t=null,i=[],r=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function XD(n,e,t,i,r,s,o,a){return new Ec(n,e,t,i,r,s,o,a)}function Og(n){return new Ec(n)}function jv(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function Ib(n){return n.collectionGroup!==null}function hl(n){const e=Ve(n);if(e.ce===null){e.ce=[];const t=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),t.add(s.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Xt(an.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Hu(s,i))}),t.has(an.keyField().canonicalString())||e.ce.push(new Hu(an.keyField(),i))}return e.ce}function Vi(n){const e=Ve(n);return e.le||(e.le=QD(e,hl(n))),e.le}function QD(n,e){if(n.limitType==="F")return zv(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(r=>{const s=r.dir==="desc"?"asc":"desc";return new Hu(r.field,s)});const t=n.endAt?new Gu(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new Gu(n.startAt.position,n.startAt.inclusive):null;return zv(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function wp(n,e){const t=n.filters.concat([e]);return new Ec(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Tp(n,e,t){return new Ec(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Wh(n,e){return Pg(Vi(n),Vi(e))&&n.limitType===e.limitType}function Cb(n){return`${Rg(Vi(n))}|lt:${n.limitType}`}function fo(n){return`Query(target=${function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map(r=>Sb(r)).join(", ")}]`),qh(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map(r=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(r)).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map(r=>Zo(r)).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map(r=>Zo(r)).join(",")),`Target(${i})`}(Vi(n))}; limitType=${n.limitType})`}function Kh(n,e){return e.isFoundDocument()&&function(i,r){const s=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(s):pe.isDocumentKey(i.path)?i.path.isEqual(s):i.path.isImmediateParentOf(s)}(n,e)&&function(i,r){for(const s of hl(i))if(!s.field.isKeyField()&&r.data.field(s.field)===null)return!1;return!0}(n,e)&&function(i,r){for(const s of i.filters)if(!s.matches(r))return!1;return!0}(n,e)&&function(i,r){return!(i.startAt&&!function(o,a,l){const c=$v(o,a,l);return o.inclusive?c<=0:c<0}(i.startAt,hl(i),r)||i.endAt&&!function(o,a,l){const c=$v(o,a,l);return o.inclusive?c>=0:c>0}(i.endAt,hl(i),r))}(n,e)}function JD(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Ab(n){return(e,t)=>{let i=!1;for(const r of hl(n)){const s=ZD(r,e,t);if(s!==0)return s;i=i||r.field.isKeyField()}return 0}}function ZD(n,e,t){const i=n.field.isKeyField()?pe.comparator(e.key,t.key):function(s,o,a){const l=o.data.field(s),c=a.data.field(s);return l!==null&&c!==null?Jo(l,c):Te()}(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return Te()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ea{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[r,s]of i)if(this.equalsFn(r,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return void(r[s]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[t]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Tc(this.inner,(t,i)=>{for(const[r,s]of i)e(r,s)})}isEmpty(){return mb(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eL=new Et(pe.comparator);function Kr(){return eL}const xb=new Et(pe.comparator);function Ga(...n){let e=xb;for(const t of n)e=e.insert(t.key,t);return e}function tL(n){let e=xb;return n.forEach((t,i)=>e=e.insert(t,i.overlayedDocument)),e}function Es(){return dl()}function Rb(){return dl()}function dl(){return new Ea(n=>n.toString(),(n,e)=>n.isEqual(e))}const nL=new Xt(pe.comparator);function Le(...n){let e=nL;for(const t of n)e=e.add(t);return e}const iL=new Xt(Be);function rL(){return iL}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pb(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ju(e)?"-0":e}}function Ob(n){return{integerValue:""+n}}function sL(n,e){return LD(e)?Ob(e):Pb(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yh{constructor(){this._=void 0}}function oL(n,e,t){return n instanceof Ep?function(r,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&Cg(s)&&(s=Ag(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(t,e):n instanceof qu?kb(n,e):n instanceof Wu?Nb(n,e):function(r,s){const o=lL(r,s),a=Gv(o)+Gv(r.Pe);return mp(o)&&mp(r.Pe)?Ob(a):Pb(r.serializer,a)}(n,e)}function aL(n,e,t){return n instanceof qu?kb(n,e):n instanceof Wu?Nb(n,e):t}function lL(n,e){return n instanceof Sp?function(i){return mp(i)||function(s){return!!s&&"doubleValue"in s}(i)}(e)?e:{integerValue:0}:null}class Ep extends Yh{}class qu extends Yh{constructor(e){super(),this.elements=e}}function kb(n,e){const t=Mb(e);for(const i of n.elements)t.some(r=>Bi(r,i))||t.push(i);return{arrayValue:{values:t}}}class Wu extends Yh{constructor(e){super(),this.elements=e}}function Nb(n,e){let t=Mb(e);for(const i of n.elements)t=t.filter(r=>!Bi(r,i));return{arrayValue:{values:t}}}class Sp extends Yh{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function Gv(n){return At(n.integerValue||n.doubleValue)}function Mb(n){return xg(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function cL(n,e){return n.field.isEqual(e.field)&&function(i,r){return i instanceof qu&&r instanceof qu||i instanceof Wu&&r instanceof Wu?Qo(i.elements,r.elements,Bi):i instanceof Sp&&r instanceof Sp?Bi(i.Pe,r.Pe):i instanceof Ep&&r instanceof Ep}(n.transform,e.transform)}class Ps{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Ps}static exists(e){return new Ps(void 0,e)}static updateTime(e){return new Ps(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function au(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class kg{}function Db(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new hL(n.key,Ps.none()):new Ng(n.key,n.data,Ps.none());{const t=n.data,i=Pi.empty();let r=new Xt(an.comparator);for(let s of e.fields)if(!r.has(s)){let o=t.field(s);o===null&&s.length>1&&(s=s.popLast(),o=t.field(s)),o===null?i.delete(s):i.set(s,o),r=r.add(s)}return new Xh(n.key,i,new Pr(r.toArray()),Ps.none())}}function uL(n,e,t){n instanceof Ng?function(r,s,o){const a=r.value.clone(),l=qv(r.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(n,e,t):n instanceof Xh?function(r,s,o){if(!au(r.precondition,s))return void s.convertToUnknownDocument(o.version);const a=qv(r.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(Lb(r)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(n,e,t):function(r,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,t)}function fl(n,e,t,i){return n instanceof Ng?function(s,o,a,l){if(!au(s.precondition,o))return a;const c=s.value.clone(),u=Wv(s.fieldTransforms,l,o);return c.setAll(u),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(n,e,t,i):n instanceof Xh?function(s,o,a,l){if(!au(s.precondition,o))return a;const c=Wv(s.fieldTransforms,l,o),u=o.data;return u.setAll(Lb(s)),u.setAll(c),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(h=>h.field))}(n,e,t,i):function(s,o,a){return au(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(n,e,t)}function Hv(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&Qo(i,r,(s,o)=>cL(s,o))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Ng extends kg{constructor(e,t,i,r=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Xh extends kg{constructor(e,t,i,r,s=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function Lb(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}}),e}function qv(n,e,t){const i=new Map;Pt(n.length===t.length);for(let r=0;r<t.length;r++){const s=n[r],o=s.transform,a=e.data.field(s.field);i.set(s.field,aL(o,a,t[r]))}return i}function Wv(n,e,t){const i=new Map;for(const r of n){const s=r.transform,o=t.data.field(r.field);i.set(r.field,oL(s,o,e))}return i}class hL extends kg{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dL{constructor(e,t,i,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const s=this.mutations[r];s.key.isEqual(e.key)&&uL(s,e,i[r])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=fl(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=fl(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=Rb();return this.mutations.forEach(r=>{const s=e.get(r.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=t.has(r.key)?null:a;const l=Db(o,a);l!==null&&i.set(r.key,l),o.isValidDocument()||o.convertToNoDocument(ve.min())}),i}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Le())}isEqual(e){return this.batchId===e.batchId&&Qo(this.mutations,e.mutations,(t,i)=>Hv(t,i))&&Qo(this.baseMutations,e.baseMutations,(t,i)=>Hv(t,i))}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fL{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pL{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ct,ke;function Vb(n){if(n===void 0)return cr("GRPC error has no .code"),G.UNKNOWN;switch(n){case Ct.OK:return G.OK;case Ct.CANCELLED:return G.CANCELLED;case Ct.UNKNOWN:return G.UNKNOWN;case Ct.DEADLINE_EXCEEDED:return G.DEADLINE_EXCEEDED;case Ct.RESOURCE_EXHAUSTED:return G.RESOURCE_EXHAUSTED;case Ct.INTERNAL:return G.INTERNAL;case Ct.UNAVAILABLE:return G.UNAVAILABLE;case Ct.UNAUTHENTICATED:return G.UNAUTHENTICATED;case Ct.INVALID_ARGUMENT:return G.INVALID_ARGUMENT;case Ct.NOT_FOUND:return G.NOT_FOUND;case Ct.ALREADY_EXISTS:return G.ALREADY_EXISTS;case Ct.PERMISSION_DENIED:return G.PERMISSION_DENIED;case Ct.FAILED_PRECONDITION:return G.FAILED_PRECONDITION;case Ct.ABORTED:return G.ABORTED;case Ct.OUT_OF_RANGE:return G.OUT_OF_RANGE;case Ct.UNIMPLEMENTED:return G.UNIMPLEMENTED;case Ct.DATA_LOSS:return G.DATA_LOSS;default:return Te()}}(ke=Ct||(Ct={}))[ke.OK=0]="OK",ke[ke.CANCELLED=1]="CANCELLED",ke[ke.UNKNOWN=2]="UNKNOWN",ke[ke.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ke[ke.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ke[ke.NOT_FOUND=5]="NOT_FOUND",ke[ke.ALREADY_EXISTS=6]="ALREADY_EXISTS",ke[ke.PERMISSION_DENIED=7]="PERMISSION_DENIED",ke[ke.UNAUTHENTICATED=16]="UNAUTHENTICATED",ke[ke.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ke[ke.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ke[ke.ABORTED=10]="ABORTED",ke[ke.OUT_OF_RANGE=11]="OUT_OF_RANGE",ke[ke.UNIMPLEMENTED=12]="UNIMPLEMENTED",ke[ke.INTERNAL=13]="INTERNAL",ke[ke.UNAVAILABLE=14]="UNAVAILABLE",ke[ke.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _L(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gL=new ko([4294967295,4294967295],0);function Kv(n){const e=_L().encode(n),t=new vD;return t.update(e),new Uint8Array(t.digest())}function Yv(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new ko([t,i],0),new ko([r,s],0)]}class Mg{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new Ha(`Invalid padding: ${t}`);if(i<0)throw new Ha(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Ha(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new Ha(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=ko.fromNumber(this.Ie)}Ee(e,t,i){let r=e.add(t.multiply(ko.fromNumber(i)));return r.compare(gL)===1&&(r=new ko([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const t=Kv(e),[i,r]=Yv(t);for(let s=0;s<this.hashCount;s++){const o=this.Ee(i,r,s);if(!this.de(o))return!1}return!0}static create(e,t,i){const r=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new Mg(s,r,t);return i.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const t=Kv(e),[i,r]=Yv(t);for(let s=0;s<this.hashCount;s++){const o=this.Ee(i,r,s);this.Ae(o)}}Ae(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class Ha extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qh{constructor(e,t,i,r,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const r=new Map;return r.set(e,Sc.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new Qh(ve.min(),r,new Et(Be),Kr(),Le())}}class Sc{constructor(e,t,i,r,s){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new Sc(i,t,Le(),Le(),Le())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lu{constructor(e,t,i,r){this.Re=e,this.removedTargetIds=t,this.key=i,this.Ve=r}}class Fb{constructor(e,t){this.targetId=e,this.me=t}}class Ub{constructor(e,t,i=pn.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=r}}class Xv{constructor(){this.fe=0,this.ge=Jv(),this.pe=pn.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}Ce(){let e=Le(),t=Le(),i=Le();return this.ge.forEach((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:i=i.add(r);break;default:Te()}}),new Sc(this.pe,this.ye,e,t,i)}ve(){this.we=!1,this.ge=Jv()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Pt(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class mL{constructor(e){this.Le=e,this.Be=new Map,this.ke=Kr(),this.qe=Qv(),this.Qe=new Et(Be)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{const i=this.Ge(t);switch(e.state){case 0:this.ze(t)&&i.De(e.resumeToken);break;case 1:i.Oe(),i.Se||i.ve(),i.De(e.resumeToken);break;case 2:i.Oe(),i.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(i.Ne(),i.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),i.De(e.resumeToken));break;default:Te()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((i,r)=>{this.ze(r)&&t(r)})}He(e){const t=e.targetId,i=e.me.count,r=this.Je(t);if(r){const s=r.target;if(vp(s))if(i===0){const o=new pe(s.path);this.Ue(t,o,rn.newNoDocument(o,ve.min()))}else Pt(i===1);else{const o=this.Ye(t);if(o!==i){const a=this.Ze(e),l=a?this.Xe(a,e,o):1;if(l!==0){this.je(t);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,c)}}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:s=0}=t;let o,a;try{o=Gs(i).toUint8Array()}catch(l){if(l instanceof yb)return Xo("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new Mg(o,r,s)}catch(l){return Xo(l instanceof Ha?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(e,t,i){return t.me.count===i-this.nt(e,t.targetId)?0:2}nt(e,t){const i=this.Le.getRemoteKeysForTarget(t);let r=0;return i.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(t,s,null),r++)}),r}rt(e){const t=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&vp(a.target)){const l=new pe(a.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,rn.newNoDocument(l,e))}s.be&&(t.set(o,s.Ce()),s.ve())}});let i=Le();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Je(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(i=i.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const r=new Qh(e,t,this.Qe,this.ke,i);return this.ke=Kr(),this.qe=Qv(),this.Qe=new Et(Be),r}$e(e,t){if(!this.ze(e))return;const i=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,i),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,i){if(!this.ze(e))return;const r=this.Ge(e);this.it(e,t)?r.Fe(t,1):r.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),i&&(this.ke=this.ke.insert(t,i))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).Ce();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new Xv,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Xt(Be),this.qe=this.qe.insert(e,t)),t}ze(e){const t=this.Je(e)!==null;return t||re("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Xv),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function Qv(){return new Et(pe.comparator)}function Jv(){return new Et(pe.comparator)}const yL={asc:"ASCENDING",desc:"DESCENDING"},vL={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},wL={and:"AND",or:"OR"};class TL{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function bp(n,e){return n.useProto3Json||qh(e)?e:{value:e}}function Ip(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function $b(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function No(n){return Pt(!!n),ve.fromTimestamp(function(t){const i=Wr(t);return new Ft(i.seconds,i.nanos)}(n))}function Bb(n,e){return Cp(n,e).canonicalString()}function Cp(n,e){const t=function(r){return new dt(["projects",r.projectId,"databases",r.database])}(n).child("documents");return e===void 0?t:t.child(e)}function zb(n){const e=dt.fromString(n);return Pt(Wb(e)),e}function $d(n,e){const t=zb(e);if(t.get(1)!==n.databaseId.projectId)throw new se(G.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new se(G.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new pe(Gb(t))}function jb(n,e){return Bb(n.databaseId,e)}function EL(n){const e=zb(n);return e.length===4?dt.emptyPath():Gb(e)}function Zv(n){return new dt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Gb(n){return Pt(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function SL(n,e){let t;if("targetChange"in e){e.targetChange;const i=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:Te()}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],s=function(c,u){return c.useProto3Json?(Pt(u===void 0||typeof u=="string"),pn.fromBase64String(u||"")):(Pt(u===void 0||u instanceof Buffer||u instanceof Uint8Array),pn.fromUint8Array(u||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const u=c.code===void 0?G.UNKNOWN:Vb(c.code);return new se(u,c.message||"")}(o);t=new Ub(i,r,s,a||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const r=$d(n,i.document.name),s=No(i.document.updateTime),o=i.document.createTime?No(i.document.createTime):ve.min(),a=new Pi({mapValue:{fields:i.document.fields}}),l=rn.newFoundDocument(r,s,o,a),c=i.targetIds||[],u=i.removedTargetIds||[];t=new lu(c,u,l.key,l)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const r=$d(n,i.document),s=i.readTime?No(i.readTime):ve.min(),o=rn.newNoDocument(r,s),a=i.removedTargetIds||[];t=new lu([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const r=$d(n,i.document),s=i.removedTargetIds||[];t=new lu([],s,r,null)}else{if(!("filter"in e))return Te();{e.filter;const i=e.filter;i.targetId;const{count:r=0,unchangedNames:s}=i,o=new pL(r,s),a=i.targetId;t=new Fb(a,o)}}return t}function bL(n,e){return{documents:[jb(n,e.path)]}}function IL(n,e){const t={structuredQuery:{}},i=e.path;let r;e.collectionGroup!==null?(r=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=jb(n,r);const s=function(c){if(c.length!==0)return qb(Ei.create(c,"and"))}(e.filters);s&&(t.structuredQuery.where=s);const o=function(c){if(c.length!==0)return c.map(u=>function(f){return{field:po(f.field),direction:xL(f.dir)}}(u))}(e.orderBy);o&&(t.structuredQuery.orderBy=o);const a=bp(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:t,parent:r}}function CL(n){let e=EL(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let r=null;if(i>0){Pt(i===1);const u=t.from[0];u.allDescendants?r=u.collectionId:e=e.child(u.collectionId)}let s=[];t.where&&(s=function(h){const f=Hb(h);return f instanceof Ei&&Tb(f)?f.getFilters():[f]}(t.where));let o=[];t.orderBy&&(o=function(h){return h.map(f=>function(_){return new Hu(_o(_.field),function(g){switch(g){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(_.direction))}(f))}(t.orderBy));let a=null;t.limit&&(a=function(h){let f;return f=typeof h=="object"?h.value:h,qh(f)?null:f}(t.limit));let l=null;t.startAt&&(l=function(h){const f=!!h.before,d=h.values||[];return new Gu(d,f)}(t.startAt));let c=null;return t.endAt&&(c=function(h){const f=!h.before,d=h.values||[];return new Gu(d,f)}(t.endAt)),XD(e,r,o,s,a,"F",l,c)}function AL(n,e){const t=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Te()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function Hb(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=_o(t.unaryFilter.field);return Rt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=_o(t.unaryFilter.field);return Rt.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=_o(t.unaryFilter.field);return Rt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=_o(t.unaryFilter.field);return Rt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Te()}}(n):n.fieldFilter!==void 0?function(t){return Rt.create(_o(t.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Te()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Ei.create(t.compositeFilter.filters.map(i=>Hb(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return Te()}}(t.compositeFilter.op))}(n):Te()}function xL(n){return yL[n]}function RL(n){return vL[n]}function PL(n){return wL[n]}function po(n){return{fieldPath:n.canonicalString()}}function _o(n){return an.fromServerFormat(n.fieldPath)}function qb(n){return n instanceof Rt?function(t){if(t.op==="=="){if(Uv(t.value))return{unaryFilter:{field:po(t.field),op:"IS_NAN"}};if(Fv(t.value))return{unaryFilter:{field:po(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Uv(t.value))return{unaryFilter:{field:po(t.field),op:"IS_NOT_NAN"}};if(Fv(t.value))return{unaryFilter:{field:po(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:po(t.field),op:RL(t.op),value:t.value}}}(n):n instanceof Ei?function(t){const i=t.getFilters().map(r=>qb(r));return i.length===1?i[0]:{compositeFilter:{op:PL(t.op),filters:i}}}(n):Te()}function Wb(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Or{constructor(e,t,i,r,s=ve.min(),o=ve.min(),a=pn.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Or(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Or(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Or(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Or(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OL{constructor(e){this.ut=e}}function kL(n){const e=CL({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Tp(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NL{constructor(){this.on=new ML}addToCollectionParentIndex(e,t){return this.on.add(t),U.resolve()}getCollectionParents(e,t){return U.resolve(this.on.getEntries(t))}addFieldIndex(e,t){return U.resolve()}deleteFieldIndex(e,t){return U.resolve()}deleteAllFieldIndexes(e){return U.resolve()}createTargetIndexes(e,t){return U.resolve()}getDocumentsMatchingTarget(e,t){return U.resolve(null)}getIndexType(e,t){return U.resolve(0)}getFieldIndexes(e,t){return U.resolve([])}getNextCollectionGroupToUpdate(e){return U.resolve(null)}getMinOffset(e,t){return U.resolve(qr.min())}getMinOffsetFromCollectionGroup(e,t){return U.resolve(qr.min())}updateCollectionGroup(e,t,i){return U.resolve()}updateIndexEntries(e,t){return U.resolve()}}class ML{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),r=this.index[t]||new Xt(dt.comparator),s=!r.has(i);return this.index[t]=r.add(i),s}has(e){const t=e.lastSegment(),i=e.popLast(),r=this.index[t];return r&&r.has(i)}getEntries(e){return(this.index[e]||new Xt(dt.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ea{constructor(e){this.xn=e}next(){return this.xn+=2,this.xn}static On(){return new ea(0)}static Nn(){return new ea(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DL{constructor(){this.changes=new Ea(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,rn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?U.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LL{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VL{constructor(e,t,i,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,t))).next(r=>(i!==null&&fl(i.mutation,r,Pr.empty(),Ft.now()),r))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.getLocalViewOfDocuments(e,i,Le()).next(()=>i))}getLocalViewOfDocuments(e,t,i=Le()){const r=Es();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,i).next(s=>{let o=Ga();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){const i=Es();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,Le()))}populateOverlays(e,t,i){const r=[];return i.forEach(s=>{t.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(e,r).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,i,r){let s=Kr();const o=dl(),a=function(){return dl()}();return t.forEach((l,c)=>{const u=i.get(c.key);r.has(c.key)&&(u===void 0||u.mutation instanceof Xh)?s=s.insert(c.key,c):u!==void 0?(o.set(c.key,u.mutation.getFieldMask()),fl(u.mutation,c,u.mutation.getFieldMask(),Ft.now())):o.set(c.key,Pr.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((c,u)=>o.set(c,u)),t.forEach((c,u)=>{var h;return a.set(c,new LL(u,(h=o.get(c))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(e,t){const i=dl();let r=new Et((o,a)=>o-a),s=Le();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=t.get(l);if(c===null)return;let u=i.get(l)||Pr.empty();u=a.applyToLocalView(c,u),i.set(l,u);const h=(r.get(a.batchId)||Le()).add(l);r=r.insert(a.batchId,h)})}).next(()=>{const o=[],a=r.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,u=l.value,h=Rb();u.forEach(f=>{if(!s.has(f)){const d=Db(t.get(f),i.get(f));d!==null&&h.set(f,d),s=s.add(f)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,h))}return U.waitFor(o)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,t,i,r){return function(o){return pe.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Ib(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,r):this.getDocumentsMatchingCollectionQuery(e,t,i,r)}getNextDocuments(e,t,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,r).next(s=>{const o=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,r-s.size):U.resolve(Es());let a=-1,l=s;return o.next(c=>U.forEach(c,(u,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),s.get(u)?U.resolve():this.remoteDocumentCache.getEntry(e,u).next(f=>{l=l.insert(u,f)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,l,c,Le())).next(u=>({batchId:a,changes:tL(u)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new pe(t)).next(i=>{let r=Ga();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,t,i,r){const s=t.collectionGroup;let o=Ga();return this.indexManager.getCollectionParents(e,s).next(a=>U.forEach(a,l=>{const c=function(h,f){return new Ec(f,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(t,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,i,r).next(u=>{u.forEach((h,f)=>{o=o.insert(h,f)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,i,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,s,r))).next(o=>{s.forEach((l,c)=>{const u=c.getKey();o.get(u)===null&&(o=o.insert(u,rn.newInvalidDocument(u)))});let a=Ga();return o.forEach((l,c)=>{const u=s.get(l);u!==void 0&&fl(u.mutation,c,Pr.empty(),Ft.now()),Kh(t,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FL{constructor(e){this.serializer=e,this.ur=new Map,this.cr=new Map}getBundleMetadata(e,t){return U.resolve(this.ur.get(t))}saveBundleMetadata(e,t){return this.ur.set(t.id,function(r){return{id:r.id,version:r.version,createTime:No(r.createTime)}}(t)),U.resolve()}getNamedQuery(e,t){return U.resolve(this.cr.get(t))}saveNamedQuery(e,t){return this.cr.set(t.name,function(r){return{name:r.name,query:kL(r.bundledQuery),readTime:No(r.readTime)}}(t)),U.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UL{constructor(){this.overlays=new Et(pe.comparator),this.lr=new Map}getOverlay(e,t){return U.resolve(this.overlays.get(t))}getOverlays(e,t){const i=Es();return U.forEach(t,r=>this.getOverlay(e,r).next(s=>{s!==null&&i.set(r,s)})).next(()=>i)}saveOverlays(e,t,i){return i.forEach((r,s)=>{this.lt(e,t,s)}),U.resolve()}removeOverlaysForBatchId(e,t,i){const r=this.lr.get(i);return r!==void 0&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.lr.delete(i)),U.resolve()}getOverlaysForCollection(e,t,i){const r=Es(),s=t.length+1,o=new pe(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!t.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>i&&r.set(l.getKey(),l)}return U.resolve(r)}getOverlaysForCollectionGroup(e,t,i,r){let s=new Et((c,u)=>c-u);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===t&&c.largestBatchId>i){let u=s.get(c.largestBatchId);u===null&&(u=Es(),s=s.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const a=Es(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,u)=>a.set(c,u)),!(a.size()>=r)););return U.resolve(a)}lt(e,t,i){const r=this.overlays.get(i.key);if(r!==null){const o=this.lr.get(r.largestBatchId).delete(i.key);this.lr.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(i.key,new fL(t,i));let s=this.lr.get(t);s===void 0&&(s=Le(),this.lr.set(t,s)),this.lr.set(t,s.add(i.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dg{constructor(){this.hr=new Xt(Dt.Pr),this.Ir=new Xt(Dt.Tr)}isEmpty(){return this.hr.isEmpty()}addReference(e,t){const i=new Dt(e,t);this.hr=this.hr.add(i),this.Ir=this.Ir.add(i)}Er(e,t){e.forEach(i=>this.addReference(i,t))}removeReference(e,t){this.dr(new Dt(e,t))}Ar(e,t){e.forEach(i=>this.removeReference(i,t))}Rr(e){const t=new pe(new dt([])),i=new Dt(t,e),r=new Dt(t,e+1),s=[];return this.Ir.forEachInRange([i,r],o=>{this.dr(o),s.push(o.key)}),s}Vr(){this.hr.forEach(e=>this.dr(e))}dr(e){this.hr=this.hr.delete(e),this.Ir=this.Ir.delete(e)}mr(e){const t=new pe(new dt([])),i=new Dt(t,e),r=new Dt(t,e+1);let s=Le();return this.Ir.forEachInRange([i,r],o=>{s=s.add(o.key)}),s}containsKey(e){const t=new Dt(e,0),i=this.hr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class Dt{constructor(e,t){this.key=e,this.gr=t}static Pr(e,t){return pe.comparator(e.key,t.key)||Be(e.gr,t.gr)}static Tr(e,t){return Be(e.gr,t.gr)||pe.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $L{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.pr=1,this.yr=new Xt(Dt.Pr)}checkEmpty(e){return U.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,r){const s=this.pr;this.pr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new dL(s,t,i,r);this.mutationQueue.push(o);for(const a of r)this.yr=this.yr.add(new Dt(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return U.resolve(o)}lookupMutationBatch(e,t){return U.resolve(this.wr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,r=this.Sr(i),s=r<0?0:r;return U.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return U.resolve(this.mutationQueue.length===0?-1:this.pr-1)}getAllMutationBatches(e){return U.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new Dt(t,0),r=new Dt(t,Number.POSITIVE_INFINITY),s=[];return this.yr.forEachInRange([i,r],o=>{const a=this.wr(o.gr);s.push(a)}),U.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Xt(Be);return t.forEach(r=>{const s=new Dt(r,0),o=new Dt(r,Number.POSITIVE_INFINITY);this.yr.forEachInRange([s,o],a=>{i=i.add(a.gr)})}),U.resolve(this.br(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,r=i.length+1;let s=i;pe.isDocumentKey(s)||(s=s.child(""));const o=new Dt(new pe(s),0);let a=new Xt(Be);return this.yr.forEachWhile(l=>{const c=l.key.path;return!!i.isPrefixOf(c)&&(c.length===r&&(a=a.add(l.gr)),!0)},o),U.resolve(this.br(a))}br(e){const t=[];return e.forEach(i=>{const r=this.wr(i);r!==null&&t.push(r)}),t}removeMutationBatch(e,t){Pt(this.Dr(t.batchId,"removed")===0),this.mutationQueue.shift();let i=this.yr;return U.forEach(t.mutations,r=>{const s=new Dt(r.key,t.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.yr=i})}Fn(e){}containsKey(e,t){const i=new Dt(t,0),r=this.yr.firstAfterOrEqual(i);return U.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,U.resolve()}Dr(e,t){return this.Sr(e)}Sr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}wr(e){const t=this.Sr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BL{constructor(e){this.Cr=e,this.docs=function(){return new Et(pe.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,r=this.docs.get(i),s=r?r.size:0,o=this.Cr(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return U.resolve(i?i.document.mutableCopy():rn.newInvalidDocument(t))}getEntries(e,t){let i=Kr();return t.forEach(r=>{const s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():rn.newInvalidDocument(r))}),U.resolve(i)}getDocumentsMatchingQuery(e,t,i,r){let s=Kr();const o=t.path,a=new pe(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:u}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||kD(OD(u),i)<=0||(r.has(u.key)||Kh(t,u))&&(s=s.insert(u.key,u.mutableCopy()))}return U.resolve(s)}getAllFromCollectionGroup(e,t,i,r){Te()}vr(e,t){return U.forEach(this.docs,i=>t(i))}newChangeBuffer(e){return new zL(this)}getSize(e){return U.resolve(this.size)}}class zL extends DL{constructor(e){super(),this._r=e}applyChanges(e){const t=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?t.push(this._r.addEntry(e,r)):this._r.removeEntry(i)}),U.waitFor(t)}getFromCache(e,t){return this._r.getEntry(e,t)}getAllFromCache(e,t){return this._r.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jL{constructor(e){this.persistence=e,this.Fr=new Ea(t=>Rg(t),Pg),this.lastRemoteSnapshotVersion=ve.min(),this.highestTargetId=0,this.Mr=0,this.Or=new Dg,this.targetCount=0,this.Nr=ea.On()}forEachTarget(e,t){return this.Fr.forEach((i,r)=>t(r)),U.resolve()}getLastRemoteSnapshotVersion(e){return U.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return U.resolve(this.Mr)}allocateTargetId(e){return this.highestTargetId=this.Nr.next(),U.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.Mr&&(this.Mr=t),U.resolve()}kn(e){this.Fr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Nr=new ea(t),this.highestTargetId=t),e.sequenceNumber>this.Mr&&(this.Mr=e.sequenceNumber)}addTargetData(e,t){return this.kn(t),this.targetCount+=1,U.resolve()}updateTargetData(e,t){return this.kn(t),U.resolve()}removeTargetData(e,t){return this.Fr.delete(t.target),this.Or.Rr(t.targetId),this.targetCount-=1,U.resolve()}removeTargets(e,t,i){let r=0;const s=[];return this.Fr.forEach((o,a)=>{a.sequenceNumber<=t&&i.get(a.targetId)===null&&(this.Fr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),U.waitFor(s).next(()=>r)}getTargetCount(e){return U.resolve(this.targetCount)}getTargetData(e,t){const i=this.Fr.get(t)||null;return U.resolve(i)}addMatchingKeys(e,t,i){return this.Or.Er(t,i),U.resolve()}removeMatchingKeys(e,t,i){this.Or.Ar(t,i);const r=this.persistence.referenceDelegate,s=[];return r&&t.forEach(o=>{s.push(r.markPotentiallyOrphaned(e,o))}),U.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Or.Rr(t),U.resolve()}getMatchingKeysForTargetId(e,t){const i=this.Or.mr(t);return U.resolve(i)}containsKey(e,t){return U.resolve(this.Or.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GL{constructor(e,t){this.Lr={},this.overlays={},this.Br=new Ig(0),this.kr=!1,this.kr=!0,this.referenceDelegate=e(this),this.qr=new jL(this),this.indexManager=new NL,this.remoteDocumentCache=function(r){return new BL(r)}(i=>this.referenceDelegate.Qr(i)),this.serializer=new OL(t),this.Kr=new FL(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.kr=!1,Promise.resolve()}get started(){return this.kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new UL,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.Lr[e.toKey()];return i||(i=new $L(t,this.referenceDelegate),this.Lr[e.toKey()]=i),i}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Kr}runTransaction(e,t,i){re("MemoryPersistence","Starting transaction:",e);const r=new HL(this.Br.next());return this.referenceDelegate.$r(),i(r).next(s=>this.referenceDelegate.Ur(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}Wr(e,t){return U.or(Object.values(this.Lr).map(i=>()=>i.containsKey(e,t)))}}class HL extends MD{constructor(e){super(),this.currentSequenceNumber=e}}class Lg{constructor(e){this.persistence=e,this.Gr=new Dg,this.zr=null}static jr(e){return new Lg(e)}get Hr(){if(this.zr)return this.zr;throw Te()}addReference(e,t,i){return this.Gr.addReference(i,t),this.Hr.delete(i.toString()),U.resolve()}removeReference(e,t,i){return this.Gr.removeReference(i,t),this.Hr.add(i.toString()),U.resolve()}markPotentiallyOrphaned(e,t){return this.Hr.add(t.toString()),U.resolve()}removeTarget(e,t){this.Gr.Rr(t.targetId).forEach(r=>this.Hr.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next(r=>{r.forEach(s=>this.Hr.add(s.toString()))}).next(()=>i.removeTargetData(e,t))}$r(){this.zr=new Set}Ur(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return U.forEach(this.Hr,i=>{const r=pe.fromPath(i);return this.Jr(e,r).next(s=>{s||t.removeEntry(r,ve.min())})}).next(()=>(this.zr=null,t.apply(e)))}updateLimboDocument(e,t){return this.Jr(e,t).next(i=>{i?this.Hr.delete(t.toString()):this.Hr.add(t.toString())})}Qr(e){return 0}Jr(e,t){return U.or([()=>U.resolve(this.Gr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Wr(e,t)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vg{constructor(e,t,i,r){this.targetId=e,this.fromCache=t,this.ki=i,this.qi=r}static Qi(e,t){let i=Le(),r=Le();for(const s of t.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new Vg(e,t.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qL{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WL{constructor(){this.Ki=!1,this.$i=!1,this.Ui=100,this.Wi=function(){return iR()?8:DD(mi())>0?6:4}()}initialize(e,t){this.Gi=e,this.indexManager=t,this.Ki=!0}getDocumentsMatchingQuery(e,t,i,r){const s={result:null};return this.zi(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ji(e,t,r,i).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new qL;return this.Hi(e,t,o).next(a=>{if(s.result=a,this.$i)return this.Ji(e,t,o,a.size)})}).next(()=>s.result)}Ji(e,t,i,r){return i.documentReadCount<this.Ui?(Ma()<=Ae.DEBUG&&re("QueryEngine","SDK will not create cache indexes for query:",fo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Ui,"documents"),U.resolve()):(Ma()<=Ae.DEBUG&&re("QueryEngine","Query:",fo(t),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.Wi*r?(Ma()<=Ae.DEBUG&&re("QueryEngine","The SDK decides to create cache indexes for query:",fo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Vi(t))):U.resolve())}zi(e,t){if(jv(t))return U.resolve(null);let i=Vi(t);return this.indexManager.getIndexType(e,i).next(r=>r===0?null:(t.limit!==null&&r===1&&(t=Tp(t,null,"F"),i=Vi(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next(s=>{const o=Le(...s);return this.Gi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,i).next(l=>{const c=this.Yi(t,a);return this.Zi(t,c,o,l.readTime)?this.zi(e,Tp(t,null,"F")):this.Xi(e,c,t,l)}))})))}ji(e,t,i,r){return jv(t)||r.isEqual(ve.min())?U.resolve(null):this.Gi.getDocuments(e,i).next(s=>{const o=this.Yi(t,s);return this.Zi(t,o,i,r)?U.resolve(null):(Ma()<=Ae.DEBUG&&re("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),fo(t)),this.Xi(e,o,t,PD(r,-1)).next(a=>a))})}Yi(e,t){let i=new Xt(Ab(e));return t.forEach((r,s)=>{Kh(e,s)&&(i=i.add(s))}),i}Zi(e,t,i,r){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Hi(e,t,i){return Ma()<=Ae.DEBUG&&re("QueryEngine","Using full collection scan to execute query:",fo(t)),this.Gi.getDocumentsMatchingQuery(e,t,qr.min(),i)}Xi(e,t,i,r){return this.Gi.getDocumentsMatchingQuery(e,i,r).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KL{constructor(e,t,i,r){this.persistence=e,this.es=t,this.serializer=r,this.ts=new Et(Be),this.ns=new Ea(s=>Rg(s),Pg),this.rs=new Map,this.ss=e.getRemoteDocumentCache(),this.qr=e.getTargetCache(),this.Kr=e.getBundleCache(),this.os(i)}os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new VL(this.ss,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ss.setIndexManager(this.indexManager),this.es.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ts))}}function YL(n,e,t,i){return new KL(n,e,t,i)}async function Kb(n,e){const t=Ve(n);return await t.persistence.runTransaction("Handle user change","readonly",i=>{let r;return t.mutationQueue.getAllMutationBatches(i).next(s=>(r=s,t.os(e),t.mutationQueue.getAllMutationBatches(i))).next(s=>{const o=[],a=[];let l=Le();for(const c of r){o.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}for(const c of s){a.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}return t.localDocuments.getDocuments(i,l).next(c=>({_s:c,removedBatchIds:o,addedBatchIds:a}))})})}function Yb(n){const e=Ve(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.qr.getLastRemoteSnapshotVersion(t))}function XL(n,e){const t=Ve(n),i=e.snapshotVersion;let r=t.ts;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=t.ss.newChangeBuffer({trackRemovals:!0});r=t.ts;const a=[];e.targetChanges.forEach((u,h)=>{const f=r.get(h);if(!f)return;a.push(t.qr.removeMatchingKeys(s,u.removedDocuments,h).next(()=>t.qr.addMatchingKeys(s,u.addedDocuments,h)));let d=f.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(h)!==null?d=d.withResumeToken(pn.EMPTY_BYTE_STRING,ve.min()).withLastLimboFreeSnapshotVersion(ve.min()):u.resumeToken.approximateByteSize()>0&&(d=d.withResumeToken(u.resumeToken,i)),r=r.insert(h,d),function(p,g,m){return p.resumeToken.approximateByteSize()===0||g.snapshotVersion.toMicroseconds()-p.snapshotVersion.toMicroseconds()>=3e8?!0:m.addedDocuments.size+m.modifiedDocuments.size+m.removedDocuments.size>0}(f,d,u)&&a.push(t.qr.updateTargetData(s,d))});let l=Kr(),c=Le();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,u))}),a.push(QL(s,o,e.documentUpdates).next(u=>{l=u.us,c=u.cs})),!i.isEqual(ve.min())){const u=t.qr.getLastRemoteSnapshotVersion(s).next(h=>t.qr.setTargetsMetadata(s,s.currentSequenceNumber,i));a.push(u)}return U.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(t.ts=r,s))}function QL(n,e,t){let i=Le(),r=Le();return t.forEach(s=>i=i.add(s)),e.getEntries(n,i).next(s=>{let o=Kr();return t.forEach((a,l)=>{const c=s.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(r=r.add(a)),l.isNoDocument()&&l.version.isEqual(ve.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):re("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{us:o,cs:r}})}function JL(n,e){const t=Ve(n);return t.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return t.qr.getTargetData(i,e).next(s=>s?(r=s,U.resolve(r)):t.qr.allocateTargetId(i).next(o=>(r=new Or(e,o,"TargetPurposeListen",i.currentSequenceNumber),t.qr.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=t.ts.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(t.ts=t.ts.insert(i.targetId,i),t.ns.set(e,i.targetId)),i})}async function Ap(n,e,t){const i=Ve(n),r=i.ts.get(e),s=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",s,o=>i.persistence.referenceDelegate.removeTarget(o,r))}catch(o){if(!wc(o))throw o;re("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}i.ts=i.ts.remove(e),i.ns.delete(r.target)}function e0(n,e,t){const i=Ve(n);let r=ve.min(),s=Le();return i.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,u){const h=Ve(l),f=h.ns.get(u);return f!==void 0?U.resolve(h.ts.get(f)):h.qr.getTargetData(c,u)}(i,o,Vi(e)).next(a=>{if(a)return r=a.lastLimboFreeSnapshotVersion,i.qr.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>i.es.getDocumentsMatchingQuery(o,e,t?r:ve.min(),t?s:Le())).next(a=>(ZL(i,JD(e),a),{documents:a,ls:s})))}function ZL(n,e,t){let i=n.rs.get(e)||ve.min();t.forEach((r,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),n.rs.set(e,i)}class t0{constructor(){this.activeTargetIds=rL()}ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}As(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Es(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class eV{constructor(){this.eo=new t0,this.no={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e){return this.eo.ds(e),this.no[e]||"not-current"}updateQueryState(e,t,i){this.no[e]=t}removeLocalQueryTarget(e){this.eo.As(e)}isLocalQueryTarget(e){return this.eo.activeTargetIds.has(e)}clearQueryState(e){delete this.no[e]}getAllActiveQueryTargets(){return this.eo.activeTargetIds}isActiveQueryTarget(e){return this.eo.activeTargetIds.has(e)}start(){return this.eo=new t0,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tV{ro(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n0{constructor(){this.io=()=>this.so(),this.oo=()=>this._o(),this.ao=[],this.uo()}ro(e){this.ao.push(e)}shutdown(){window.removeEventListener("online",this.io),window.removeEventListener("offline",this.oo)}uo(){window.addEventListener("online",this.io),window.addEventListener("offline",this.oo)}so(){re("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ao)e(0)}_o(){re("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ao)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Hc=null;function Bd(){return Hc===null?Hc=function(){return 268435456+Math.round(2147483648*Math.random())}():Hc++,"0x"+Hc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nV={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iV{constructor(e){this.co=e.co,this.lo=e.lo}ho(e){this.Po=e}Io(e){this.To=e}Eo(e){this.Ao=e}onMessage(e){this.Ro=e}close(){this.lo()}send(e){this.co(e)}Vo(){this.Po()}mo(){this.To()}fo(e){this.Ao(e)}po(e){this.Ro(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jt="WebChannelConnection";class rV extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const i=t.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.yo=i+"://"+t.host,this.wo=`projects/${r}/databases/${s}`,this.So=this.databaseId.database==="(default)"?`project_id=${r}`:`project_id=${r}&database_id=${s}`}get bo(){return!1}Do(t,i,r,s,o){const a=Bd(),l=this.Co(t,i.toUriEncodedString());re("RestConnection",`Sending RPC '${t}' ${a}:`,l,r);const c={"google-cloud-resource-prefix":this.wo,"x-goog-request-params":this.So};return this.vo(c,s,o),this.Fo(t,l,c,r).then(u=>(re("RestConnection",`Received RPC '${t}' ${a}: `,u),u),u=>{throw Xo("RestConnection",`RPC '${t}' ${a} failed with error: `,u,"url: ",l,"request:",r),u})}Mo(t,i,r,s,o,a){return this.Do(t,i,r,s,o)}vo(t,i,r){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ta}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((s,o)=>t[o]=s),r&&r.headers.forEach((s,o)=>t[o]=s)}Co(t,i){const r=nV[t];return`${this.yo}/v1/${i}:${r}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Fo(e,t,i,r){const s=Bd();return new Promise((o,a)=>{const l=new yD;l.setWithCredentials(!0),l.listenOnce(_D.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Fd.NO_ERROR:const u=l.getResponseJson();re(Jt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(u)),o(u);break;case Fd.TIMEOUT:re(Jt,`RPC '${e}' ${s} timed out`),a(new se(G.DEADLINE_EXCEEDED,"Request time out"));break;case Fd.HTTP_ERROR:const h=l.getStatus();if(re(Jt,`RPC '${e}' ${s} failed with status:`,h,"response text:",l.getResponseText()),h>0){let f=l.getResponseJson();Array.isArray(f)&&(f=f[0]);const d=f==null?void 0:f.error;if(d&&d.status&&d.message){const _=function(g){const m=g.toLowerCase().replace(/_/g,"-");return Object.values(G).indexOf(m)>=0?m:G.UNKNOWN}(d.status);a(new se(_,d.message))}else a(new se(G.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new se(G.UNAVAILABLE,"Connection failed."));break;default:Te()}}finally{re(Jt,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(r);re(Jt,`RPC '${e}' ${s} sending request:`,r),l.send(t,"POST",c,i,15)})}xo(e,t,i){const r=Bd(),s=[this.yo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=fD(),a=pD(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.xmlHttpFactory=new mD({})),this.vo(l.initMessageHeaders,t,i),l.encodeInitMessageHeaders=!0;const u=s.join("");re(Jt,`Creating RPC '${e}' stream ${r}: ${u}`,l);const h=o.createWebChannel(u,l);let f=!1,d=!1;const _=new iV({co:g=>{d?re(Jt,`Not sending because RPC '${e}' stream ${r} is closed:`,g):(f||(re(Jt,`Opening RPC '${e}' stream ${r} transport.`),h.open(),f=!0),re(Jt,`RPC '${e}' stream ${r} sending:`,g),h.send(g))},lo:()=>h.close()}),p=(g,m,T)=>{g.listen(m,w=>{try{T(w)}catch(S){setTimeout(()=>{throw S},0)}})};return p(h,zc.EventType.OPEN,()=>{d||(re(Jt,`RPC '${e}' stream ${r} transport opened.`),_.Vo())}),p(h,zc.EventType.CLOSE,()=>{d||(d=!0,re(Jt,`RPC '${e}' stream ${r} transport closed`),_.fo())}),p(h,zc.EventType.ERROR,g=>{d||(d=!0,Xo(Jt,`RPC '${e}' stream ${r} transport errored:`,g),_.fo(new se(G.UNAVAILABLE,"The operation could not be completed")))}),p(h,zc.EventType.MESSAGE,g=>{var m;if(!d){const T=g.data[0];Pt(!!T);const w=T,S=w.error||((m=w[0])===null||m===void 0?void 0:m.error);if(S){re(Jt,`RPC '${e}' stream ${r} received error:`,S);const E=S.status;let I=function(A){const k=Ct[A];if(k!==void 0)return Vb(k)}(E),P=S.message;I===void 0&&(I=G.INTERNAL,P="Unknown error status: "+E+" with message "+S.message),d=!0,_.fo(new se(I,P)),h.close()}else re(Jt,`RPC '${e}' stream ${r} received:`,T),_.po(T)}}),p(a,gD.STAT_EVENT,g=>{g.stat===kv.PROXY?re(Jt,`RPC '${e}' stream ${r} detected buffering proxy`):g.stat===kv.NOPROXY&&re(Jt,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{_.mo()},0),_}}function zd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jh(n){return new TL(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xb{constructor(e,t,i=1e3,r=1.5,s=6e4){this.si=e,this.timerId=t,this.Oo=i,this.No=r,this.Lo=s,this.Bo=0,this.ko=null,this.qo=Date.now(),this.reset()}reset(){this.Bo=0}Qo(){this.Bo=this.Lo}Ko(e){this.cancel();const t=Math.floor(this.Bo+this.$o()),i=Math.max(0,Date.now()-this.qo),r=Math.max(0,t-i);r>0&&re("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Bo} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.ko=this.si.enqueueAfterDelay(this.timerId,r,()=>(this.qo=Date.now(),e())),this.Bo*=this.No,this.Bo<this.Oo&&(this.Bo=this.Oo),this.Bo>this.Lo&&(this.Bo=this.Lo)}Uo(){this.ko!==null&&(this.ko.skipDelay(),this.ko=null)}cancel(){this.ko!==null&&(this.ko.cancel(),this.ko=null)}$o(){return(Math.random()-.5)*this.Bo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sV{constructor(e,t,i,r,s,o,a,l){this.si=e,this.Wo=i,this.Go=r,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.zo=0,this.jo=null,this.Ho=null,this.stream=null,this.Jo=new Xb(e,t)}Yo(){return this.state===1||this.state===5||this.Zo()}Zo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Xo()}async stop(){this.Yo()&&await this.close(0)}e_(){this.state=0,this.Jo.reset()}t_(){this.Zo()&&this.jo===null&&(this.jo=this.si.enqueueAfterDelay(this.Wo,6e4,()=>this.n_()))}r_(e){this.i_(),this.stream.send(e)}async n_(){if(this.Zo())return this.close(0)}i_(){this.jo&&(this.jo.cancel(),this.jo=null)}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}async close(e,t){this.i_(),this.s_(),this.Jo.cancel(),this.zo++,e!==4?this.Jo.reset():t&&t.code===G.RESOURCE_EXHAUSTED?(cr(t.toString()),cr("Using maximum backoff delay to prevent overloading the backend."),this.Jo.Qo()):t&&t.code===G.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.o_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Eo(t)}o_(){}auth(){this.state=1;const e=this.__(this.zo),t=this.zo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.zo===t&&this.a_(i,r)},i=>{e(()=>{const r=new se(G.UNKNOWN,"Fetching auth token failed: "+i.message);return this.u_(r)})})}a_(e,t){const i=this.__(this.zo);this.stream=this.c_(e,t),this.stream.ho(()=>{i(()=>this.listener.ho())}),this.stream.Io(()=>{i(()=>(this.state=2,this.Ho=this.si.enqueueAfterDelay(this.Go,1e4,()=>(this.Zo()&&(this.state=3),Promise.resolve())),this.listener.Io()))}),this.stream.Eo(r=>{i(()=>this.u_(r))}),this.stream.onMessage(r=>{i(()=>this.onMessage(r))})}Xo(){this.state=5,this.Jo.Ko(async()=>{this.state=0,this.start()})}u_(e){return re("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}__(e){return t=>{this.si.enqueueAndForget(()=>this.zo===e?t():(re("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class oV extends sV{constructor(e,t,i,r,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,r,o),this.serializer=s}c_(e,t){return this.connection.xo("Listen",e,t)}onMessage(e){this.Jo.reset();const t=SL(this.serializer,e),i=function(s){if(!("targetChange"in s))return ve.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?ve.min():o.readTime?No(o.readTime):ve.min()}(e);return this.listener.l_(t,i)}h_(e){const t={};t.database=Zv(this.serializer),t.addTarget=function(s,o){let a;const l=o.target;if(a=vp(l)?{documents:bL(s,l)}:{query:IL(s,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=$b(s,o.resumeToken);const c=bp(s,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(ve.min())>0){a.readTime=Ip(s,o.snapshotVersion.toTimestamp());const c=bp(s,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const i=AL(this.serializer,e);i&&(t.labels=i),this.r_(t)}P_(e){const t={};t.database=Zv(this.serializer),t.removeTarget=e,this.r_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aV extends class{}{constructor(e,t,i,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=r,this.V_=!1}m_(){if(this.V_)throw new se(G.FAILED_PRECONDITION,"The client has already been terminated.")}Do(e,t,i,r){return this.m_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Do(e,Cp(t,i),r,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===G.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new se(G.UNKNOWN,s.toString())})}Mo(e,t,i,r,s){return this.m_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Mo(e,Cp(t,i),r,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===G.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new se(G.UNKNOWN,o.toString())})}terminate(){this.V_=!0,this.connection.terminate()}}class lV{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){this.g_===0&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve())))}D_(e){this.state==="Online"?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.S_("Offline")))}set(e){this.C_(),this.g_=0,e==="Online"&&(this.y_=!1),this.S_(e)}S_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}b_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(cr(t),this.y_=!1):re("OnlineStateTracker",t)}C_(){this.p_!==null&&(this.p_.cancel(),this.p_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cV{constructor(e,t,i,r,s){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=s,this.O_.ro(o=>{i.enqueueAndForget(async()=>{Ic(this)&&(re("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=Ve(l);c.M_.add(4),await bc(c),c.N_.set("Unknown"),c.M_.delete(4),await Zh(c)}(this))})}),this.N_=new lV(i,r)}}async function Zh(n){if(Ic(n))for(const e of n.x_)await e(!0)}async function bc(n){for(const e of n.x_)await e(!1)}function Qb(n,e){const t=Ve(n);t.F_.has(e.targetId)||(t.F_.set(e.targetId,e),Bg(t)?$g(t):Sa(t).Zo()&&Ug(t,e))}function Fg(n,e){const t=Ve(n),i=Sa(t);t.F_.delete(e),i.Zo()&&Jb(t,e),t.F_.size===0&&(i.Zo()?i.t_():Ic(t)&&t.N_.set("Unknown"))}function Ug(n,e){if(n.L_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ve.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Sa(n).h_(e)}function Jb(n,e){n.L_.xe(e),Sa(n).P_(e)}function $g(n){n.L_=new mL({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.F_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),Sa(n).start(),n.N_.w_()}function Bg(n){return Ic(n)&&!Sa(n).Yo()&&n.F_.size>0}function Ic(n){return Ve(n).M_.size===0}function Zb(n){n.L_=void 0}async function uV(n){n.N_.set("Online")}async function hV(n){n.F_.forEach((e,t)=>{Ug(n,e)})}async function dV(n,e){Zb(n),Bg(n)?(n.N_.D_(e),$g(n)):n.N_.set("Unknown")}async function fV(n,e,t){if(n.N_.set("Online"),e instanceof Ub&&e.state===2&&e.cause)try{await async function(r,s){const o=s.cause;for(const a of s.targetIds)r.F_.has(a)&&(await r.remoteSyncer.rejectListen(a,o),r.F_.delete(a),r.L_.removeTarget(a))}(n,e)}catch(i){re("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),await i0(n,i)}else if(e instanceof lu?n.L_.Ke(e):e instanceof Fb?n.L_.He(e):n.L_.We(e),!t.isEqual(ve.min()))try{const i=await Yb(n.localStore);t.compareTo(i)>=0&&await function(s,o){const a=s.L_.rt(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const u=s.F_.get(c);u&&s.F_.set(c,u.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const u=s.F_.get(l);if(!u)return;s.F_.set(l,u.withResumeToken(pn.EMPTY_BYTE_STRING,u.snapshotVersion)),Jb(s,l);const h=new Or(u.target,l,c,u.sequenceNumber);Ug(s,h)}),s.remoteSyncer.applyRemoteEvent(a)}(n,t)}catch(i){re("RemoteStore","Failed to raise snapshot:",i),await i0(n,i)}}async function i0(n,e,t){if(!wc(e))throw e;n.M_.add(1),await bc(n),n.N_.set("Offline"),t||(t=()=>Yb(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{re("RemoteStore","Retrying IndexedDB access"),await t(),n.M_.delete(1),await Zh(n)})}async function r0(n,e){const t=Ve(n);t.asyncQueue.verifyOperationInProgress(),re("RemoteStore","RemoteStore received new credentials");const i=Ic(t);t.M_.add(3),await bc(t),i&&t.N_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.M_.delete(3),await Zh(t)}async function pV(n,e){const t=Ve(n);e?(t.M_.delete(2),await Zh(t)):e||(t.M_.add(2),await bc(t),t.N_.set("Unknown"))}function Sa(n){return n.B_||(n.B_=function(t,i,r){const s=Ve(t);return s.m_(),new oV(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(n.datastore,n.asyncQueue,{ho:uV.bind(null,n),Io:hV.bind(null,n),Eo:dV.bind(null,n),l_:fV.bind(null,n)}),n.x_.push(async e=>{e?(n.B_.e_(),Bg(n)?$g(n):n.N_.set("Unknown")):(await n.B_.stop(),Zb(n))})),n.B_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zg{constructor(e,t,i,r,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new Rs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,r,s){const o=Date.now()+i,a=new zg(e,t,o,r,s);return a.start(i),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new se(G.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function eI(n,e){if(cr("AsyncQueue",`${e}: ${n}`),wc(n))return new se(G.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mo{constructor(e){this.comparator=e?(t,i)=>e(t,i)||pe.comparator(t.key,i.key):(t,i)=>pe.comparator(t.key,i.key),this.keyedMap=Ga(),this.sortedSet=new Et(this.comparator)}static emptySet(e){return new Mo(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,i)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Mo)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const r=t.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new Mo;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s0{constructor(){this.q_=new Et(pe.comparator)}track(e){const t=e.doc.key,i=this.q_.get(t);i?e.type!==0&&i.type===3?this.q_=this.q_.insert(t,e):e.type===3&&i.type!==1?this.q_=this.q_.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.q_=this.q_.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.q_=this.q_.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.q_=this.q_.remove(t):e.type===1&&i.type===2?this.q_=this.q_.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.q_=this.q_.insert(t,{type:2,doc:e.doc}):Te():this.q_=this.q_.insert(t,e)}Q_(){const e=[];return this.q_.inorderTraversal((t,i)=>{e.push(i)}),e}}class ta{constructor(e,t,i,r,s,o,a,l,c){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,t,i,r,s){const o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new ta(e,t,Mo.emptySet(t),o,i,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Wh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==i[r].type||!t[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _V{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some(e=>e.G_())}}class gV{constructor(){this.queries=new Ea(e=>Cb(e),Wh),this.onlineState="Unknown",this.z_=new Set}}async function tI(n,e){const t=Ve(n);let i=3;const r=e.query;let s=t.queries.get(r);s?!s.W_()&&e.G_()&&(i=2):(s=new _V,i=e.G_()?0:1);try{switch(i){case 0:s.K_=await t.onListen(r,!0);break;case 1:s.K_=await t.onListen(r,!1);break;case 2:await t.onFirstRemoteStoreListen(r)}}catch(o){const a=eI(o,`Initialization of query '${fo(e.query)}' failed`);return void e.onError(a)}t.queries.set(r,s),s.U_.push(e),e.j_(t.onlineState),s.K_&&e.H_(s.K_)&&jg(t)}async function nI(n,e){const t=Ve(n),i=e.query;let r=3;const s=t.queries.get(i);if(s){const o=s.U_.indexOf(e);o>=0&&(s.U_.splice(o,1),s.U_.length===0?r=e.G_()?0:1:!s.W_()&&e.G_()&&(r=2))}switch(r){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function mV(n,e){const t=Ve(n);let i=!1;for(const r of e){const s=r.query,o=t.queries.get(s);if(o){for(const a of o.U_)a.H_(r)&&(i=!0);o.K_=r}}i&&jg(t)}function yV(n,e,t){const i=Ve(n),r=i.queries.get(e);if(r)for(const s of r.U_)s.onError(t);i.queries.delete(e)}function jg(n){n.z_.forEach(e=>{e.next()})}var xp,o0;(o0=xp||(xp={})).J_="default",o0.Cache="cache";class iI{constructor(e,t,i){this.query=e,this.Y_=t,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=i||{}}H_(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)r.type!==3&&i.push(r);e=new ta(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Z_?this.ea(e)&&(this.Y_.next(e),t=!0):this.ta(e,this.onlineState)&&(this.na(e),t=!0),this.X_=e,t}onError(e){this.Y_.error(e)}j_(e){this.onlineState=e;let t=!1;return this.X_&&!this.Z_&&this.ta(this.X_,e)&&(this.na(this.X_),t=!0),t}ta(e,t){if(!e.fromCache||!this.G_())return!0;const i=t!=="Offline";return(!this.options.ra||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ea(e){if(e.docChanges.length>0)return!0;const t=this.X_&&this.X_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}na(e){e=ta.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Z_=!0,this.Y_.next(e)}G_(){return this.options.source!==xp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rI{constructor(e){this.key=e}}class sI{constructor(e){this.key=e}}class vV{constructor(e,t){this.query=e,this.la=t,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=Le(),this.mutatedKeys=Le(),this.Ia=Ab(e),this.Ta=new Mo(this.Ia)}get Ea(){return this.la}da(e,t){const i=t?t.Aa:new s0,r=t?t.Ta:this.Ta;let s=t?t.mutatedKeys:this.mutatedKeys,o=r,a=!1;const l=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,c=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((u,h)=>{const f=r.get(u),d=Kh(this.query,h)?h:null,_=!!f&&this.mutatedKeys.has(f.key),p=!!d&&(d.hasLocalMutations||this.mutatedKeys.has(d.key)&&d.hasCommittedMutations);let g=!1;f&&d?f.data.isEqual(d.data)?_!==p&&(i.track({type:3,doc:d}),g=!0):this.Ra(f,d)||(i.track({type:2,doc:d}),g=!0,(l&&this.Ia(d,l)>0||c&&this.Ia(d,c)<0)&&(a=!0)):!f&&d?(i.track({type:0,doc:d}),g=!0):f&&!d&&(i.track({type:1,doc:f}),g=!0,(l||c)&&(a=!0)),g&&(d?(o=o.add(d),s=p?s.add(u):s.delete(u)):(o=o.delete(u),s=s.delete(u)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const u=this.query.limitType==="F"?o.last():o.first();o=o.delete(u.key),s=s.delete(u.key),i.track({type:1,doc:u})}return{Ta:o,Aa:i,Zi:a,mutatedKeys:s}}Ra(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,r){const s=this.Ta;this.Ta=e.Ta,this.mutatedKeys=e.mutatedKeys;const o=e.Aa.Q_();o.sort((u,h)=>function(d,_){const p=g=>{switch(g){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Te()}};return p(d)-p(_)}(u.type,h.type)||this.Ia(u.doc,h.doc)),this.Va(i),r=r!=null&&r;const a=t&&!r?this.ma():[],l=this.Pa.size===0&&this.current&&!r?1:0,c=l!==this.ha;return this.ha=l,o.length!==0||c?{snapshot:new ta(this.query,e.Ta,s,o,e.mutatedKeys,l===0,c,!1,!!i&&i.resumeToken.approximateByteSize()>0),fa:a}:{fa:a}}j_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new s0,mutatedKeys:this.mutatedKeys,Zi:!1},!1)):{fa:[]}}ga(e){return!this.la.has(e)&&!!this.Ta.has(e)&&!this.Ta.get(e).hasLocalMutations}Va(e){e&&(e.addedDocuments.forEach(t=>this.la=this.la.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.la=this.la.delete(t)),this.current=e.current)}ma(){if(!this.current)return[];const e=this.Pa;this.Pa=Le(),this.Ta.forEach(i=>{this.ga(i.key)&&(this.Pa=this.Pa.add(i.key))});const t=[];return e.forEach(i=>{this.Pa.has(i)||t.push(new sI(i))}),this.Pa.forEach(i=>{e.has(i)||t.push(new rI(i))}),t}pa(e){this.la=e.ls,this.Pa=Le();const t=this.da(e.documents);return this.applyChanges(t,!0)}ya(){return ta.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,this.ha===0,this.hasCachedResults)}}class wV{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class TV{constructor(e){this.key=e,this.wa=!1}}class EV{constructor(e,t,i,r,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Sa={},this.ba=new Ea(a=>Cb(a),Wh),this.Da=new Map,this.Ca=new Set,this.va=new Et(pe.comparator),this.Fa=new Map,this.Ma=new Dg,this.xa={},this.Oa=new Map,this.Na=ea.Nn(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return this.La===!0}}async function SV(n,e,t=!0){const i=uI(n);let r;const s=i.ba.get(e);return s?(i.sharedClientState.addLocalQueryTarget(s.targetId),r=s.view.ya()):r=await oI(i,e,t,!0),r}async function bV(n,e){const t=uI(n);await oI(t,e,!0,!1)}async function oI(n,e,t,i){const r=await JL(n.localStore,Vi(e)),s=r.targetId,o=t?n.sharedClientState.addLocalQueryTarget(s):"not-current";let a;return i&&(a=await IV(n,e,s,o==="current",r.resumeToken)),n.isPrimaryClient&&t&&Qb(n.remoteStore,r),a}async function IV(n,e,t,i,r){n.Ba=(h,f,d)=>async function(p,g,m,T){let w=g.view.da(m);w.Zi&&(w=await e0(p.localStore,g.query,!1).then(({documents:P})=>g.view.da(P,w)));const S=T&&T.targetChanges.get(g.targetId),E=T&&T.targetMismatches.get(g.targetId)!=null,I=g.view.applyChanges(w,p.isPrimaryClient,S,E);return l0(p,g.targetId,I.fa),I.snapshot}(n,h,f,d);const s=await e0(n.localStore,e,!0),o=new vV(e,s.ls),a=o.da(s.documents),l=Sc.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",r),c=o.applyChanges(a,n.isPrimaryClient,l);l0(n,t,c.fa);const u=new wV(e,t,o);return n.ba.set(e,u),n.Da.has(t)?n.Da.get(t).push(e):n.Da.set(t,[e]),c.snapshot}async function CV(n,e,t){const i=Ve(n),r=i.ba.get(e),s=i.Da.get(r.targetId);if(s.length>1)return i.Da.set(r.targetId,s.filter(o=>!Wh(o,e))),void i.ba.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await Ap(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),t&&Fg(i.remoteStore,r.targetId),Rp(i,r.targetId)}).catch(bg)):(Rp(i,r.targetId),await Ap(i.localStore,r.targetId,!0))}async function AV(n,e){const t=Ve(n),i=t.ba.get(e),r=t.Da.get(i.targetId);t.isPrimaryClient&&r.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),Fg(t.remoteStore,i.targetId))}async function aI(n,e){const t=Ve(n);try{const i=await XL(t.localStore,e);e.targetChanges.forEach((r,s)=>{const o=t.Fa.get(s);o&&(Pt(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?o.wa=!0:r.modifiedDocuments.size>0?Pt(o.wa):r.removedDocuments.size>0&&(Pt(o.wa),o.wa=!1))}),await cI(t,i,e)}catch(i){await bg(i)}}function a0(n,e,t){const i=Ve(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const r=[];i.ba.forEach((s,o)=>{const a=o.view.j_(e);a.snapshot&&r.push(a.snapshot)}),function(o,a){const l=Ve(o);l.onlineState=a;let c=!1;l.queries.forEach((u,h)=>{for(const f of h.U_)f.j_(a)&&(c=!0)}),c&&jg(l)}(i.eventManager,e),r.length&&i.Sa.l_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function xV(n,e,t){const i=Ve(n);i.sharedClientState.updateQueryState(e,"rejected",t);const r=i.Fa.get(e),s=r&&r.key;if(s){let o=new Et(pe.comparator);o=o.insert(s,rn.newNoDocument(s,ve.min()));const a=Le().add(s),l=new Qh(ve.min(),new Map,new Et(Be),o,a);await aI(i,l),i.va=i.va.remove(s),i.Fa.delete(e),Gg(i)}else await Ap(i.localStore,e,!1).then(()=>Rp(i,e,t)).catch(bg)}function Rp(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.Da.get(e))n.ba.delete(i),t&&n.Sa.ka(i,t);n.Da.delete(e),n.isPrimaryClient&&n.Ma.Rr(e).forEach(i=>{n.Ma.containsKey(i)||lI(n,i)})}function lI(n,e){n.Ca.delete(e.path.canonicalString());const t=n.va.get(e);t!==null&&(Fg(n.remoteStore,t),n.va=n.va.remove(e),n.Fa.delete(t),Gg(n))}function l0(n,e,t){for(const i of t)i instanceof rI?(n.Ma.addReference(i.key,e),RV(n,i)):i instanceof sI?(re("SyncEngine","Document no longer in limbo: "+i.key),n.Ma.removeReference(i.key,e),n.Ma.containsKey(i.key)||lI(n,i.key)):Te()}function RV(n,e){const t=e.key,i=t.path.canonicalString();n.va.get(t)||n.Ca.has(i)||(re("SyncEngine","New document in limbo: "+t),n.Ca.add(i),Gg(n))}function Gg(n){for(;n.Ca.size>0&&n.va.size<n.maxConcurrentLimboResolutions;){const e=n.Ca.values().next().value;n.Ca.delete(e);const t=new pe(dt.fromString(e)),i=n.Na.next();n.Fa.set(i,new TV(t)),n.va=n.va.insert(t,i),Qb(n.remoteStore,new Or(Vi(Og(t.path)),i,"TargetPurposeLimboResolution",Ig.oe))}}async function cI(n,e,t){const i=Ve(n),r=[],s=[],o=[];i.ba.isEmpty()||(i.ba.forEach((a,l)=>{o.push(i.Ba(l,e,t).then(c=>{if((c||t)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(l.targetId,c!=null&&c.fromCache?"not-current":"current"),c){r.push(c);const u=Vg.Qi(l.targetId,c);s.push(u)}}))}),await Promise.all(o),i.Sa.l_(r),await async function(l,c){const u=Ve(l);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>U.forEach(c,f=>U.forEach(f.ki,d=>u.persistence.referenceDelegate.addReference(h,f.targetId,d)).next(()=>U.forEach(f.qi,d=>u.persistence.referenceDelegate.removeReference(h,f.targetId,d)))))}catch(h){if(!wc(h))throw h;re("LocalStore","Failed to update sequence numbers: "+h)}for(const h of c){const f=h.targetId;if(!h.fromCache){const d=u.ts.get(f),_=d.snapshotVersion,p=d.withLastLimboFreeSnapshotVersion(_);u.ts=u.ts.insert(f,p)}}}(i.localStore,s))}async function PV(n,e){const t=Ve(n);if(!t.currentUser.isEqual(e)){re("SyncEngine","User change. New user:",e.toKey());const i=await Kb(t.localStore,e);t.currentUser=e,function(s,o){s.Oa.forEach(a=>{a.forEach(l=>{l.reject(new se(G.CANCELLED,o))})}),s.Oa.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await cI(t,i._s)}}function OV(n,e){const t=Ve(n),i=t.Fa.get(e);if(i&&i.wa)return Le().add(i.key);{let r=Le();const s=t.Da.get(e);if(!s)return r;for(const o of s){const a=t.ba.get(o);r=r.unionWith(a.view.Ea)}return r}}function uI(n){const e=Ve(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=aI.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=OV.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=xV.bind(null,e),e.Sa.l_=mV.bind(null,e.eventManager),e.Sa.ka=yV.bind(null,e.eventManager),e}class c0{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=Jh(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return YL(this.persistence,new WL,e.initialUser,this.serializer)}createPersistence(e){return new GL(Lg.jr,this.serializer)}createSharedClientState(e){return new eV}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class kV{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>a0(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=PV.bind(null,this.syncEngine),await pV(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new gV}()}createDatastore(e){const t=Jh(e.databaseInfo.databaseId),i=function(s){return new rV(s)}(e.databaseInfo);return function(s,o,a,l){return new aV(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return function(i,r,s,o,a){return new cV(i,r,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,t=>a0(this.syncEngine,t,0),function(){return n0.D()?new n0:new tV}())}createSyncEngine(e,t){return function(r,s,o,a,l,c,u){const h=new EV(r,s,o,a,l,c);return u&&(h.La=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e;await async function(i){const r=Ve(i);re("RemoteStore","RemoteStore shutting down."),r.M_.add(5),await bc(r),r.O_.shutdown(),r.N_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hI{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ka(this.observer.next,e)}error(e){this.observer.error?this.Ka(this.observer.error,e):cr("Uncaught Error in snapshot listener:",e.toString())}$a(){this.muted=!0}Ka(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NV{constructor(e,t,i,r){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=r,this.user=en.UNAUTHENTICATED,this.clientId=xD.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(i,async s=>{re("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(i,s=>(re("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new se(G.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Rs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=eI(t,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function jd(n,e){n.asyncQueue.verifyOperationInProgress(),re("FirestoreClient","Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener(async r=>{i.isEqual(r)||(await Kb(e.localStore,r),i=r)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function u0(n,e){n.asyncQueue.verifyOperationInProgress();const t=await DV(n);re("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(i=>r0(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,r)=>r0(e.remoteStore,r)),n._onlineComponents=e}function MV(n){return n.name==="FirebaseError"?n.code===G.FAILED_PRECONDITION||n.code===G.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||n.code===22||n.code===20||n.code===11}async function DV(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){re("FirestoreClient","Using user provided OfflineComponentProvider");try{await jd(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!MV(t))throw t;Xo("Error using user provided cache. Falling back to memory cache: "+t),await jd(n,new c0)}}else re("FirestoreClient","Using default OfflineComponentProvider"),await jd(n,new c0);return n._offlineComponents}async function LV(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(re("FirestoreClient","Using user provided OnlineComponentProvider"),await u0(n,n._uninitializedComponentsProvider._online)):(re("FirestoreClient","Using default OnlineComponentProvider"),await u0(n,new kV))),n._onlineComponents}async function Pp(n){const e=await LV(n),t=e.eventManager;return t.onListen=SV.bind(null,e.syncEngine),t.onUnlisten=CV.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=bV.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=AV.bind(null,e.syncEngine),t}function VV(n,e,t={}){const i=new Rs;return n.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const u=new hI({next:f=>{o.enqueueAndForget(()=>nI(s,h)),f.fromCache&&l.source==="server"?c.reject(new se(G.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(f)},error:f=>c.reject(f)}),h=new iI(a,u,{includeMetadataChanges:!0,ra:!0});return tI(s,h)}(await Pp(n),n.asyncQueue,e,t,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dI(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h0=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FV(n,e,t){if(!t)throw new se(G.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function UV(n,e,t,i){if(e===!0&&i===!0)throw new se(G.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function d0(n){if(pe.isDocumentKey(n))throw new se(G.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function ed(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Te()}function Do(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new se(G.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=ed(n);throw new se(G.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f0{constructor(e){var t,i;if(e.host===void 0){if(e.ssl!==void 0)throw new se(G.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new se(G.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}UV("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=dI((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new se(G.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new se(G.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new se(G.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Hg{constructor(e,t,i,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new f0({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new se(G.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new se(G.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new f0(e),e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new wD;switch(i.type){case"firstParty":return new bD(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new se(G.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const i=h0.get(t);i&&(re("ComponentProvider","Removing Datastore"),h0.delete(t),i.terminate())}(this),Promise.resolve()}}function $V(n,e,t,i={}){var r;const s=(n=Do(n,Hg))._getSettings(),o=`${e}:${t}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&Xo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),i.mockUserToken){let a,l;if(typeof i.mockUserToken=="string")a=i.mockUserToken,l=en.MOCK_USER;else{a=xT(i.mockUserToken,(r=n._app)===null||r===void 0?void 0:r.options.projectId);const c=i.mockUserToken.sub||i.mockUserToken.user_id;if(!c)throw new se(G.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new en(c)}n._authCredentials=new TD(new gb(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eo{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new eo(this.firestore,e,this._query)}}class Gi{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Lo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Gi(this.firestore,e,this._key)}}class Lo extends eo{constructor(e,t,i){super(e,t,Og(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Gi(this.firestore,null,new pe(e))}withConverter(e){return new Lo(this.firestore,e,this._path)}}function fI(n,e,...t){if(n=yi(n),FV("collection","path",e),n instanceof Hg){const i=dt.fromString(e,...t);return d0(i),new Lo(n,null,i)}{if(!(n instanceof Gi||n instanceof Lo))throw new se(G.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(dt.fromString(e,...t));return d0(i),new Lo(n.firestore,null,i)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BV{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Jo=new Xb(this,"async_queue_retry"),this.hu=()=>{const t=zd();t&&re("AsyncQueue","Visibility state changed to "+t.visibilityState),this.Jo.Uo()};const e=zd();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Pu(),this.Iu(e)}enterRestrictedMode(e){if(!this.ou){this.ou=!0,this.cu=e||!1;const t=zd();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.hu)}}enqueue(e){if(this.Pu(),this.ou)return new Promise(()=>{});const t=new Rs;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.su.push(e),this.Tu()))}async Tu(){if(this.su.length!==0){try{await this.su[0](),this.su.shift(),this.Jo.reset()}catch(e){if(!wc(e))throw e;re("AsyncQueue","Operation failed with retryable error: "+e)}this.su.length>0&&this.Jo.Ko(()=>this.Tu())}}Iu(e){const t=this.iu.then(()=>(this.uu=!0,e().catch(i=>{this.au=i,this.uu=!1;const r=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(i);throw cr("INTERNAL UNHANDLED ERROR: ",r),i}).then(i=>(this.uu=!1,i))));return this.iu=t,t}enqueueAfterDelay(e,t,i){this.Pu(),this.lu.indexOf(e)>-1&&(t=0);const r=zg.createAndSchedule(this,e,t,i,s=>this.Eu(s));return this._u.push(r),r}Pu(){this.au&&Te()}verifyOperationInProgress(){}async du(){let e;do e=this.iu,await e;while(e!==this.iu)}Au(e){for(const t of this._u)if(t.timerId===e)return!0;return!1}Ru(e){return this.du().then(()=>{this._u.sort((t,i)=>t.targetTimeMs-i.targetTimeMs);for(const t of this._u)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.du()})}Vu(e){this.lu.push(e)}Eu(e){const t=this._u.indexOf(e);this._u.splice(t,1)}}function p0(n){return function(t,i){if(typeof t!="object"||t===null)return!1;const r=t;for(const s of i)if(s in r&&typeof r[s]=="function")return!0;return!1}(n,["next","error","complete"])}class Ku extends Hg{constructor(e,t,i,r){super(e,t,i,r),this.type="firestore",this._queue=function(){return new BV}(),this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||_I(this),this._firestoreClient.terminate()}}function zV(n,e){const t=typeof n=="object"?n:VT(),i=typeof n=="string"?n:e||"(default)",r=DT(t,"firestore").getImmediate({identifier:i});if(!r._initialized){const s=CT("firestore");s&&$V(r,...s)}return r}function pI(n){return n._firestoreClient||_I(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function _I(n){var e,t,i;const r=n._freezeSettings(),s=function(a,l,c,u){return new FD(a,l,c,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,dI(u.experimentalLongPollingOptions),u.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,r);n._firestoreClient=new NV(n._authCredentials,n._appCheckCredentials,n._queue,s),!((t=r.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((i=r.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:r.localCache.kind,_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class na{constructor(e){this._byteString=e}static fromBase64String(e){try{return new na(pn.fromBase64String(e))}catch(t){throw new se(G.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new na(pn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gI{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new se(G.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new an(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mI{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qg{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new se(G.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new se(G.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Be(this._lat,e._lat)||Be(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jV=/^__.*__$/;function yI(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Te()}}class Wg{constructor(e,t,i,r,s,o){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=r,s===void 0&&this.mu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(e){return new Wg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),r=this.gu({path:i,yu:!1});return r.wu(e),r}Su(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),r=this.gu({path:i,yu:!1});return r.mu(),r}bu(e){return this.gu({path:void 0,yu:!0})}Du(e){return Op(e,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}mu(){if(this.path)for(let e=0;e<this.path.length;e++)this.wu(this.path.get(e))}wu(e){if(e.length===0)throw this.Du("Document fields must not be empty");if(yI(this.fu)&&jV.test(e))throw this.Du('Document fields cannot begin and end with "__"')}}class GV{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||Jh(e)}Fu(e,t,i,r=!1){return new Wg({fu:e,methodName:t,vu:i,path:an.emptyPath(),yu:!1,Cu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function HV(n){const e=n._freezeSettings(),t=Jh(n._databaseId);return new GV(n._databaseId,!!e.ignoreUndefinedProperties,t)}function qV(n,e,t,i=!1){return Kg(t,n.Fu(i?4:3,e))}function Kg(n,e){if(vI(n=yi(n)))return KV("Unsupported field value:",e,n),WV(n,e);if(n instanceof mI)return function(i,r){if(!yI(r.fu))throw r.Du(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Du(`${i._methodName}() is not currently supported inside arrays`);const s=i._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.yu&&e.fu!==4)throw e.Du("Nested arrays are not supported");return function(i,r){const s=[];let o=0;for(const a of i){let l=Kg(a,r.bu(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(n,e)}return function(i,r){if((i=yi(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return sL(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const s=Ft.fromDate(i);return{timestampValue:Ip(r.serializer,s)}}if(i instanceof Ft){const s=new Ft(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Ip(r.serializer,s)}}if(i instanceof qg)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof na)return{bytesValue:$b(r.serializer,i._byteString)};if(i instanceof Gi){const s=r.databaseId,o=i.firestore._databaseId;if(!o.isEqual(s))throw r.Du(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Bb(i.firestore._databaseId||r.databaseId,i._key.path)}}throw r.Du(`Unsupported field value: ${ed(i)}`)}(n,e)}function WV(n,e){const t={};return mb(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Tc(n,(i,r)=>{const s=Kg(r,e.pu(i));s!=null&&(t[i]=s)}),{mapValue:{fields:t}}}function vI(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Ft||n instanceof qg||n instanceof na||n instanceof Gi||n instanceof mI)}function KV(n,e,t){if(!vI(t)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(t)){const i=ed(t);throw i==="an object"?e.Du(n+" a custom object"):e.Du(n+" "+i)}}const YV=new RegExp("[~\\*/\\[\\]]");function XV(n,e,t){if(e.search(YV)>=0)throw Op(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new gI(...e.split("."))._internalPath}catch{throw Op(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Op(n,e,t,i,r){const s=i&&!i.isEmpty(),o=r!==void 0;let a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${i}`),o&&(l+=` in document ${r}`),l+=")"),new se(G.INVALID_ARGUMENT,a+n+l)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wI{constructor(e,t,i,r,s){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Gi(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new QV(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(TI("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class QV extends wI{data(){return super.data()}}function TI(n,e){return typeof e=="string"?XV(n,e):e instanceof gI?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EI(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new se(G.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Yg{}class JV extends Yg{}function ZV(n,e,...t){let i=[];e instanceof Yg&&i.push(e),i=i.concat(t),function(s){const o=s.filter(l=>l instanceof Qg).length,a=s.filter(l=>l instanceof Xg).length;if(o>1||o>0&&a>0)throw new se(G.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const r of i)n=r._apply(n);return n}class Xg extends JV{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new Xg(e,t,i)}_apply(e){const t=this._parse(e);return SI(e._query,t),new eo(e.firestore,e.converter,wp(e._query,t))}_parse(e){const t=HV(e.firestore);return function(s,o,a,l,c,u,h){let f;if(c.isKeyField()){if(u==="array-contains"||u==="array-contains-any")throw new se(G.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if(u==="in"||u==="not-in"){g0(h,u);const d=[];for(const _ of h)d.push(_0(l,s,_));f={arrayValue:{values:d}}}else f=_0(l,s,h)}else u!=="in"&&u!=="not-in"&&u!=="array-contains-any"||g0(h,u),f=qV(a,o,h,u==="in"||u==="not-in");return Rt.create(c,u,f)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}class Qg extends Yg{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Qg(e,t)}_parse(e){const t=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return t.length===1?t[0]:Ei.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(r,s){let o=r;const a=s.getFlattenedFilters();for(const l of a)SI(o,l),o=wp(o,l)}(e._query,t),new eo(e.firestore,e.converter,wp(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function _0(n,e,t){if(typeof(t=yi(t))=="string"){if(t==="")throw new se(G.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Ib(e)&&t.indexOf("/")!==-1)throw new se(G.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(dt.fromString(t));if(!pe.isDocumentKey(i))throw new se(G.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Vv(n,new pe(i))}if(t instanceof Gi)return Vv(n,t._key);throw new se(G.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ed(t)}.`)}function g0(n,e){if(!Array.isArray(n)||n.length===0)throw new se(G.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function SI(n,e){const t=function(r,s){for(const o of r)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new se(G.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new se(G.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class eF{convertValue(e,t="none"){switch(Hs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return At(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Gs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Te()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return Tc(e,(r,s)=>{i[r]=this.convertValue(s,t)}),i}convertGeoPoint(e){return new qg(At(e.latitude),At(e.longitude))}convertArray(e,t){return(e.values||[]).map(i=>this.convertValue(i,t))}convertServerTimestamp(e,t){switch(t){case"previous":const i=Ag(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(Bl(e));default:return null}}convertTimestamp(e){const t=Wr(e);return new Ft(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=dt.fromString(e);Pt(Wb(i));const r=new zl(i.get(1),i.get(3)),s=new pe(i.popFirst(5));return r.isEqual(t)||cr(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qa{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class bI extends wI{constructor(e,t,i,r,s,o){super(e,t,i,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new cu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(TI("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}}class cu extends bI{data(e={}){return super.data(e)}}class II{constructor(e,t,i,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new qa(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(i=>{e.call(t,new cu(this._firestore,this._userDataWriter,i.key,i,new qa(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new se(G.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map(a=>{const l=new cu(r._firestore,r._userDataWriter,a.doc.key,a.doc,new qa(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new cu(r._firestore,r._userDataWriter,a.doc.key,a.doc,new qa(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);let c=-1,u=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),u=o.indexOf(a.doc.key)),{type:tF(a.type),doc:l,oldIndex:c,newIndex:u}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function tF(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Te()}}class Jg extends eF{constructor(e){super(),this.firestore=e}convertBytes(e){return new na(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Gi(this.firestore,null,t)}}function nF(n){n=Do(n,eo);const e=Do(n.firestore,Ku),t=pI(e),i=new Jg(e);return EI(n._query),VV(t,n._query).then(r=>new II(e,i,n,r))}function iF(n,...e){var t,i,r;n=yi(n);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||p0(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(p0(e[o])){const h=e[o];e[o]=(t=h.next)===null||t===void 0?void 0:t.bind(h),e[o+1]=(i=h.error)===null||i===void 0?void 0:i.bind(h),e[o+2]=(r=h.complete)===null||r===void 0?void 0:r.bind(h)}let l,c,u;if(n instanceof Gi)c=Do(n.firestore,Ku),u=Og(n._key.path),l={next:h=>{e[o]&&e[o](rF(c,n,h))},error:e[o+1],complete:e[o+2]};else{const h=Do(n,eo);c=Do(h.firestore,Ku),u=h._query;const f=new Jg(c);l={next:d=>{e[o]&&e[o](new II(c,f,h,d))},error:e[o+1],complete:e[o+2]},EI(n._query)}return function(f,d,_,p){const g=new hI(p),m=new iI(d,g,_);return f.asyncQueue.enqueueAndForget(async()=>tI(await Pp(f),m)),()=>{g.$a(),f.asyncQueue.enqueueAndForget(async()=>nI(await Pp(f),m))}}(pI(c),u,a,l)}function rF(n,e,t){const i=t.docs.get(e._key),r=new Jg(n);return new bI(n,r,e._key,i,new qa(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(r){Ta=r})(_a),$i(new vi("firestore",(i,{instanceIdentifier:r,options:s})=>{const o=i.getProvider("app").getImmediate(),a=new Ku(new ED(i.getProvider("auth-internal")),new CD(i.getProvider("app-check-internal")),function(c,u){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new se(G.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new zl(c.options.projectId,u)}(o,r),o);return s=Object.assign({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Ln(Nv,"4.6.1",e),Ln(Nv,"4.6.1","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CI="firebasestorage.googleapis.com",sF="storageBucket",oF=2*60*1e3,aF=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hi extends fr{constructor(e,t,i=0){super(Gd(e),`Firebase Storage: ${t} (${Gd(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Hi.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Gd(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var zi;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(zi||(zi={}));function Gd(n){return"storage/"+n}function lF(){const n="An unknown error occurred, please check the error payload for server response.";return new Hi(zi.UNKNOWN,n)}function cF(){return new Hi(zi.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function uF(){return new Hi(zi.CANCELED,"User canceled the upload/download.")}function hF(n){return new Hi(zi.INVALID_URL,"Invalid URL '"+n+"'.")}function dF(n){return new Hi(zi.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function m0(n){return new Hi(zi.INVALID_ARGUMENT,n)}function AI(){return new Hi(zi.APP_DELETED,"The Firebase app was deleted.")}function fF(n){return new Hi(zi.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hi{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let i;try{i=hi.makeFromUrl(e,t)}catch{return new hi(e,"")}if(i.path==="")return i;throw dF(e)}static makeFromUrl(e,t){let i=null;const r="([A-Za-z0-9.\\-_]+)";function s(S){S.path.charAt(S.path.length-1)==="/"&&(S.path_=S.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+r+o,"i"),l={bucket:1,path:3};function c(S){S.path_=decodeURIComponent(S.path)}const u="v[A-Za-z0-9_]+",h=t.replace(/[.]/g,"\\."),f="(/([^?#]*).*)?$",d=new RegExp(`^https?://${h}/${u}/b/${r}/o${f}`,"i"),_={bucket:1,path:3},p=t===CI?"(?:storage.googleapis.com|storage.cloud.google.com)":t,g="([^?#]*)",m=new RegExp(`^https?://${p}/${r}/${g}`,"i"),w=[{regex:a,indices:l,postModify:s},{regex:d,indices:_,postModify:c},{regex:m,indices:{bucket:1,path:2},postModify:c}];for(let S=0;S<w.length;S++){const E=w[S],I=E.regex.exec(e);if(I){const P=I[E.indices.bucket];let x=I[E.indices.path];x||(x=""),i=new hi(P,x),E.postModify(i);break}}if(i==null)throw hF(e);return i}}class pF{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _F(n,e,t){let i=1,r=null,s=null,o=!1,a=0;function l(){return a===2}let c=!1;function u(...g){c||(c=!0,e.apply(null,g))}function h(g){r=setTimeout(()=>{r=null,n(d,l())},g)}function f(){s&&clearTimeout(s)}function d(g,...m){if(c){f();return}if(g){f(),u.call(null,g,...m);return}if(l()||o){f(),u.call(null,g,...m);return}i<64&&(i*=2);let w;a===1?(a=2,w=0):w=(i+Math.random())*1e3,h(w)}let _=!1;function p(g){_||(_=!0,f(),!c&&(r!==null?(g||(a=2),clearTimeout(r),h(0)):g||(a=1)))}return h(0),s=setTimeout(()=>{o=!0,p(!0)},t),p}function gF(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mF(n){return n!==void 0}function y0(n,e,t,i){if(i<e)throw m0(`Invalid value for '${n}'. Expected ${e} or greater.`);if(i>t)throw m0(`Invalid value for '${n}'. Expected ${t} or less.`)}function yF(n){const e=encodeURIComponent;let t="?";for(const i in n)if(n.hasOwnProperty(i)){const r=e(i)+"="+e(n[i]);t=t+r+"&"}return t=t.slice(0,-1),t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Yu;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(Yu||(Yu={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vF(n,e){const t=n>=500&&n<600,r=[408,429].indexOf(n)!==-1,s=e.indexOf(n)!==-1;return t||r||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wF{constructor(e,t,i,r,s,o,a,l,c,u,h,f=!0){this.url_=e,this.method_=t,this.headers_=i,this.body_=r,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=u,this.connectionFactory_=h,this.retry=f,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((d,_)=>{this.resolve_=d,this.reject_=_,this.start_()})}start_(){const e=(i,r)=>{if(r){i(!1,new qc(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const l=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===Yu.NO_ERROR,l=s.getStatus();if(!a||vF(l,this.additionalRetryCodes_)&&this.retry){const u=s.getErrorCode()===Yu.ABORT;i(!1,new qc(!1,null,u));return}const c=this.successCodes_.indexOf(l)!==-1;i(!0,new qc(c,s))})},t=(i,r)=>{const s=this.resolve_,o=this.reject_,a=r.connection;if(r.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());mF(l)?s(l):s()}catch(l){o(l)}else if(a!==null){const l=lF();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(r.canceled){const l=this.appDelete_?AI():uF();o(l)}else{const l=cF();o(l)}};this.canceled_?t(!1,new qc(!1,null,!0)):this.backoffId_=_F(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&gF(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class qc{constructor(e,t,i){this.wasSuccessCode=e,this.connection=t,this.canceled=!!i}}function TF(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function EF(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function SF(n,e){e&&(n["X-Firebase-GMPID"]=e)}function bF(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function IF(n,e,t,i,r,s,o=!0){const a=yF(n.urlParams),l=n.url+a,c=Object.assign({},n.headers);return SF(c,e),TF(c,t),EF(c,s),bF(c,i),new wF(l,n.method,c,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,r,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CF(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function AF(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xu{constructor(e,t){this._service=e,t instanceof hi?this._location=t:this._location=hi.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Xu(e,t)}get root(){const e=new hi(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return AF(this._location.path)}get storage(){return this._service}get parent(){const e=CF(this._location.path);if(e===null)return null;const t=new hi(this._location.bucket,e);return new Xu(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw fF(e)}}function v0(n,e){const t=e==null?void 0:e[sF];return t==null?null:hi.makeFromBucketSpec(t,n)}function xF(n,e,t,i={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:r}=i;r&&(n._overrideAuthToken=typeof r=="string"?r:xT(r,n.app.options.projectId))}class RF{constructor(e,t,i,r,s){this.app=e,this._authProvider=t,this._appCheckProvider=i,this._url=r,this._firebaseVersion=s,this._bucket=null,this._host=CI,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=oF,this._maxUploadRetryTime=aF,this._requests=new Set,r!=null?this._bucket=hi.makeFromBucketSpec(r,this._host):this._bucket=v0(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=hi.makeFromBucketSpec(this._url,e):this._bucket=v0(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){y0("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){y0("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Xu(this,e)}_makeRequest(e,t,i,r,s=!0){if(this._deleted)return new pF(AI());{const o=IF(e,this._appId,i,r,t,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,t){const[i,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,i,r).getPromise()}}const w0="@firebase/storage",T0="0.12.4";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xI="storage";function PF(n=VT(),e){n=yi(n);const i=DT(n,xI).getImmediate({identifier:e}),r=CT("storage");return r&&OF(i,...r),i}function OF(n,e,t,i={}){xF(n,e,t,i)}function kF(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),i=n.getProvider("auth-internal"),r=n.getProvider("app-check-internal");return new RF(t,i,r,e,_a)}function NF(){$i(new vi(xI,kF,"PUBLIC").setMultipleInstances(!0)),Ln(w0,T0,""),Ln(w0,T0,"esm2017")}NF();function MF(n,{firebaseApp:e,modules:t=[]}){n.provide(xO,e);for(const i of t)i(e,n)}function DF(){return RI().__VUE_DEVTOOLS_GLOBAL_HOOK__}function RI(){return typeof navigator<"u"&&typeof window<"u"?window:typeof globalThis<"u"?globalThis:{}}const LF=typeof Proxy=="function",VF="devtools-plugin:setup",FF="plugin:settings:set";let oo,kp;function UF(){var n;return oo!==void 0||(typeof window<"u"&&window.performance?(oo=!0,kp=window.performance):typeof globalThis<"u"&&(!((n=globalThis.perf_hooks)===null||n===void 0)&&n.performance)?(oo=!0,kp=globalThis.perf_hooks.performance):oo=!1),oo}function $F(){return UF()?kp.now():Date.now()}class BF{constructor(e,t){this.target=null,this.targetQueue=[],this.onQueue=[],this.plugin=e,this.hook=t;const i={};if(e.settings)for(const o in e.settings){const a=e.settings[o];i[o]=a.defaultValue}const r=`__vue-devtools-plugin-settings__${e.id}`;let s=Object.assign({},i);try{const o=localStorage.getItem(r),a=JSON.parse(o);Object.assign(s,a)}catch{}this.fallbacks={getSettings(){return s},setSettings(o){try{localStorage.setItem(r,JSON.stringify(o))}catch{}s=o},now(){return $F()}},t&&t.on(FF,(o,a)=>{o===this.plugin.id&&this.fallbacks.setSettings(a)}),this.proxiedOn=new Proxy({},{get:(o,a)=>this.target?this.target.on[a]:(...l)=>{this.onQueue.push({method:a,args:l})}}),this.proxiedTarget=new Proxy({},{get:(o,a)=>this.target?this.target[a]:a==="on"?this.proxiedOn:Object.keys(this.fallbacks).includes(a)?(...l)=>(this.targetQueue.push({method:a,args:l,resolve:()=>{}}),this.fallbacks[a](...l)):(...l)=>new Promise(c=>{this.targetQueue.push({method:a,args:l,resolve:c})})})}async setRealTarget(e){this.target=e;for(const t of this.onQueue)this.target.on[t.method](...t.args);for(const t of this.targetQueue)t.resolve(await this.target[t.method](...t.args))}}function zF(n,e){const t=n,i=RI(),r=DF(),s=LF&&t.enableEarlyProxy;if(r&&(i.__VUE_DEVTOOLS_PLUGIN_API_AVAILABLE__||!s))r.emit(VF,n,e);else{const o=s?new BF(t,r):null;(i.__VUE_DEVTOOLS_PLUGINS__=i.__VUE_DEVTOOLS_PLUGINS__||[]).push({pluginDescriptor:t,setupFn:e,proxy:o}),o&&e(o.proxiedTarget)}}/*!
  * vue-router v4.3.2
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const go=typeof document<"u";function jF(n){return n.__esModule||n[Symbol.toStringTag]==="Module"}const We=Object.assign;function Hd(n,e){const t={};for(const i in e){const r=e[i];t[i]=Si(r)?r.map(n):n(r)}return t}const pl=()=>{},Si=Array.isArray,PI=/#/g,GF=/&/g,HF=/\//g,qF=/=/g,WF=/\?/g,OI=/\+/g,KF=/%5B/g,YF=/%5D/g,kI=/%5E/g,XF=/%60/g,NI=/%7B/g,QF=/%7C/g,MI=/%7D/g,JF=/%20/g;function Zg(n){return encodeURI(""+n).replace(QF,"|").replace(KF,"[").replace(YF,"]")}function ZF(n){return Zg(n).replace(NI,"{").replace(MI,"}").replace(kI,"^")}function Np(n){return Zg(n).replace(OI,"%2B").replace(JF,"+").replace(PI,"%23").replace(GF,"%26").replace(XF,"`").replace(NI,"{").replace(MI,"}").replace(kI,"^")}function e2(n){return Np(n).replace(qF,"%3D")}function t2(n){return Zg(n).replace(PI,"%23").replace(WF,"%3F")}function n2(n){return n==null?"":t2(n).replace(HF,"%2F")}function Gl(n){try{return decodeURIComponent(""+n)}catch{}return""+n}const i2=/\/$/,r2=n=>n.replace(i2,"");function qd(n,e,t="/"){let i,r={},s="",o="";const a=e.indexOf("#");let l=e.indexOf("?");return a<l&&a>=0&&(l=-1),l>-1&&(i=e.slice(0,l),s=e.slice(l+1,a>-1?a:e.length),r=n(s)),a>-1&&(i=i||e.slice(0,a),o=e.slice(a,e.length)),i=l2(i??e,t),{fullPath:i+(s&&"?")+s+o,path:i,query:r,hash:Gl(o)}}function s2(n,e){const t=e.query?n(e.query):"";return e.path+(t&&"?")+t+(e.hash||"")}function E0(n,e){return!e||!n.toLowerCase().startsWith(e.toLowerCase())?n:n.slice(e.length)||"/"}function o2(n,e,t){const i=e.matched.length-1,r=t.matched.length-1;return i>-1&&i===r&&ia(e.matched[i],t.matched[r])&&DI(e.params,t.params)&&n(e.query)===n(t.query)&&e.hash===t.hash}function ia(n,e){return(n.aliasOf||n)===(e.aliasOf||e)}function DI(n,e){if(Object.keys(n).length!==Object.keys(e).length)return!1;for(const t in n)if(!a2(n[t],e[t]))return!1;return!0}function a2(n,e){return Si(n)?S0(n,e):Si(e)?S0(e,n):n===e}function S0(n,e){return Si(e)?n.length===e.length&&n.every((t,i)=>t===e[i]):n.length===1&&n[0]===e}function l2(n,e){if(n.startsWith("/"))return n;if(!n)return e;const t=e.split("/"),i=n.split("/"),r=i[i.length-1];(r===".."||r===".")&&i.push("");let s=t.length-1,o,a;for(o=0;o<i.length;o++)if(a=i[o],a!==".")if(a==="..")s>1&&s--;else break;return t.slice(0,s).join("/")+"/"+i.slice(o).join("/")}var Hl;(function(n){n.pop="pop",n.push="push"})(Hl||(Hl={}));var _l;(function(n){n.back="back",n.forward="forward",n.unknown=""})(_l||(_l={}));function c2(n){if(!n)if(go){const e=document.querySelector("base");n=e&&e.getAttribute("href")||"/",n=n.replace(/^\w+:\/\/[^\/]+/,"")}else n="/";return n[0]!=="/"&&n[0]!=="#"&&(n="/"+n),r2(n)}const u2=/^[^#]+#/;function h2(n,e){return n.replace(u2,"#")+e}function d2(n,e){const t=document.documentElement.getBoundingClientRect(),i=n.getBoundingClientRect();return{behavior:e.behavior,left:i.left-t.left-(e.left||0),top:i.top-t.top-(e.top||0)}}const td=()=>({left:window.scrollX,top:window.scrollY});function f2(n){let e;if("el"in n){const t=n.el,i=typeof t=="string"&&t.startsWith("#"),r=typeof t=="string"?i?document.getElementById(t.slice(1)):document.querySelector(t):t;if(!r)return;e=d2(r,n)}else e=n;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function b0(n,e){return(history.state?history.state.position-e:-1)+n}const Mp=new Map;function p2(n,e){Mp.set(n,e)}function _2(n){const e=Mp.get(n);return Mp.delete(n),e}let g2=()=>location.protocol+"//"+location.host;function LI(n,e){const{pathname:t,search:i,hash:r}=e,s=n.indexOf("#");if(s>-1){let a=r.includes(n.slice(s))?n.slice(s).length:1,l=r.slice(a);return l[0]!=="/"&&(l="/"+l),E0(l,"")}return E0(t,n)+i+r}function m2(n,e,t,i){let r=[],s=[],o=null;const a=({state:f})=>{const d=LI(n,location),_=t.value,p=e.value;let g=0;if(f){if(t.value=d,e.value=f,o&&o===_){o=null;return}g=p?f.position-p.position:0}else i(d);r.forEach(m=>{m(t.value,_,{delta:g,type:Hl.pop,direction:g?g>0?_l.forward:_l.back:_l.unknown})})};function l(){o=t.value}function c(f){r.push(f);const d=()=>{const _=r.indexOf(f);_>-1&&r.splice(_,1)};return s.push(d),d}function u(){const{history:f}=window;f.state&&f.replaceState(We({},f.state,{scroll:td()}),"")}function h(){for(const f of s)f();s=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",u)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",u,{passive:!0}),{pauseListeners:l,listen:c,destroy:h}}function I0(n,e,t,i=!1,r=!1){return{back:n,current:e,forward:t,replaced:i,position:window.history.length,scroll:r?td():null}}function y2(n){const{history:e,location:t}=window,i={value:LI(n,t)},r={value:e.state};r.value||s(i.value,{back:null,current:i.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function s(l,c,u){const h=n.indexOf("#"),f=h>-1?(t.host&&document.querySelector("base")?n:n.slice(h))+l:g2()+n+l;try{e[u?"replaceState":"pushState"](c,"",f),r.value=c}catch(d){console.error(d),t[u?"replace":"assign"](f)}}function o(l,c){const u=We({},e.state,I0(r.value.back,l,r.value.forward,!0),c,{position:r.value.position});s(l,u,!0),i.value=l}function a(l,c){const u=We({},r.value,e.state,{forward:l,scroll:td()});s(u.current,u,!0);const h=We({},I0(i.value,l,null),{position:u.position+1},c);s(l,h,!1),i.value=l}return{location:i,state:r,push:a,replace:o}}function v2(n){n=c2(n);const e=y2(n),t=m2(n,e.state,e.location,e.replace);function i(s,o=!0){o||t.pauseListeners(),history.go(s)}const r=We({location:"",base:n,go:i,createHref:h2.bind(null,n)},e,t);return Object.defineProperty(r,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(r,"state",{enumerable:!0,get:()=>e.state.value}),r}function w2(n){return typeof n=="string"||n&&typeof n=="object"}function VI(n){return typeof n=="string"||typeof n=="symbol"}const Tr={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},FI=Symbol("");var C0;(function(n){n[n.aborted=4]="aborted",n[n.cancelled=8]="cancelled",n[n.duplicated=16]="duplicated"})(C0||(C0={}));function ra(n,e){return We(new Error,{type:n,[FI]:!0},e)}function Wi(n,e){return n instanceof Error&&FI in n&&(e==null||!!(n.type&e))}const A0="[^/]+?",T2={sensitive:!1,strict:!1,start:!0,end:!0},E2=/[.+*?^${}()[\]/\\]/g;function S2(n,e){const t=We({},T2,e),i=[];let r=t.start?"^":"";const s=[];for(const c of n){const u=c.length?[]:[90];t.strict&&!c.length&&(r+="/");for(let h=0;h<c.length;h++){const f=c[h];let d=40+(t.sensitive?.25:0);if(f.type===0)h||(r+="/"),r+=f.value.replace(E2,"\\$&"),d+=40;else if(f.type===1){const{value:_,repeatable:p,optional:g,regexp:m}=f;s.push({name:_,repeatable:p,optional:g});const T=m||A0;if(T!==A0){d+=10;try{new RegExp(`(${T})`)}catch(S){throw new Error(`Invalid custom RegExp for param "${_}" (${T}): `+S.message)}}let w=p?`((?:${T})(?:/(?:${T}))*)`:`(${T})`;h||(w=g&&c.length<2?`(?:/${w})`:"/"+w),g&&(w+="?"),r+=w,d+=20,g&&(d+=-8),p&&(d+=-20),T===".*"&&(d+=-50)}u.push(d)}i.push(u)}if(t.strict&&t.end){const c=i.length-1;i[c][i[c].length-1]+=.7000000000000001}t.strict||(r+="/?"),t.end?r+="$":t.strict&&(r+="(?:/|$)");const o=new RegExp(r,t.sensitive?"":"i");function a(c){const u=c.match(o),h={};if(!u)return null;for(let f=1;f<u.length;f++){const d=u[f]||"",_=s[f-1];h[_.name]=d&&_.repeatable?d.split("/"):d}return h}function l(c){let u="",h=!1;for(const f of n){(!h||!u.endsWith("/"))&&(u+="/"),h=!1;for(const d of f)if(d.type===0)u+=d.value;else if(d.type===1){const{value:_,repeatable:p,optional:g}=d,m=_ in c?c[_]:"";if(Si(m)&&!p)throw new Error(`Provided param "${_}" is an array but it is not repeatable (* or + modifiers)`);const T=Si(m)?m.join("/"):m;if(!T)if(g)f.length<2&&(u.endsWith("/")?u=u.slice(0,-1):h=!0);else throw new Error(`Missing required param "${_}"`);u+=T}}return u||"/"}return{re:o,score:i,keys:s,parse:a,stringify:l}}function b2(n,e){let t=0;for(;t<n.length&&t<e.length;){const i=e[t]-n[t];if(i)return i;t++}return n.length<e.length?n.length===1&&n[0]===80?-1:1:n.length>e.length?e.length===1&&e[0]===80?1:-1:0}function I2(n,e){let t=0;const i=n.score,r=e.score;for(;t<i.length&&t<r.length;){const s=b2(i[t],r[t]);if(s)return s;t++}if(Math.abs(r.length-i.length)===1){if(x0(i))return 1;if(x0(r))return-1}return r.length-i.length}function x0(n){const e=n[n.length-1];return n.length>0&&e[e.length-1]<0}const C2={type:0,value:""},A2=/[a-zA-Z0-9_]/;function x2(n){if(!n)return[[]];if(n==="/")return[[C2]];if(!n.startsWith("/"))throw new Error(`Invalid path "${n}"`);function e(d){throw new Error(`ERR (${t})/"${c}": ${d}`)}let t=0,i=t;const r=[];let s;function o(){s&&r.push(s),s=[]}let a=0,l,c="",u="";function h(){c&&(t===0?s.push({type:0,value:c}):t===1||t===2||t===3?(s.length>1&&(l==="*"||l==="+")&&e(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),s.push({type:1,value:c,regexp:u,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),c="")}function f(){c+=l}for(;a<n.length;){if(l=n[a++],l==="\\"&&t!==2){i=t,t=4;continue}switch(t){case 0:l==="/"?(c&&h(),o()):l===":"?(h(),t=1):f();break;case 4:f(),t=i;break;case 1:l==="("?t=2:A2.test(l)?f():(h(),t=0,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case 2:l===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+l:t=3:u+=l;break;case 3:h(),t=0,l!=="*"&&l!=="?"&&l!=="+"&&a--,u="";break;default:e("Unknown state");break}}return t===2&&e(`Unfinished custom RegExp for param "${c}"`),h(),o(),r}function R2(n,e,t){const i=S2(x2(n.path),t),r=We(i,{record:n,parent:e,children:[],alias:[]});return e&&!r.record.aliasOf==!e.record.aliasOf&&e.children.push(r),r}function P2(n,e){const t=[],i=new Map;e=O0({strict:!1,end:!0,sensitive:!1},e);function r(u){return i.get(u)}function s(u,h,f){const d=!f,_=O2(u);_.aliasOf=f&&f.record;const p=O0(e,u),g=[_];if("alias"in u){const w=typeof u.alias=="string"?[u.alias]:u.alias;for(const S of w)g.push(We({},_,{components:f?f.record.components:_.components,path:S,aliasOf:f?f.record:_}))}let m,T;for(const w of g){const{path:S}=w;if(h&&S[0]!=="/"){const E=h.record.path,I=E[E.length-1]==="/"?"":"/";w.path=h.record.path+(S&&I+S)}if(m=R2(w,h,p),f?f.alias.push(m):(T=T||m,T!==m&&T.alias.push(m),d&&u.name&&!P0(m)&&o(u.name)),_.children){const E=_.children;for(let I=0;I<E.length;I++)s(E[I],m,f&&f.children[I])}f=f||m,(m.record.components&&Object.keys(m.record.components).length||m.record.name||m.record.redirect)&&l(m)}return T?()=>{o(T)}:pl}function o(u){if(VI(u)){const h=i.get(u);h&&(i.delete(u),t.splice(t.indexOf(h),1),h.children.forEach(o),h.alias.forEach(o))}else{const h=t.indexOf(u);h>-1&&(t.splice(h,1),u.record.name&&i.delete(u.record.name),u.children.forEach(o),u.alias.forEach(o))}}function a(){return t}function l(u){let h=0;for(;h<t.length&&I2(u,t[h])>=0&&(u.record.path!==t[h].record.path||!UI(u,t[h]));)h++;t.splice(h,0,u),u.record.name&&!P0(u)&&i.set(u.record.name,u)}function c(u,h){let f,d={},_,p;if("name"in u&&u.name){if(f=i.get(u.name),!f)throw ra(1,{location:u});p=f.record.name,d=We(R0(h.params,f.keys.filter(T=>!T.optional).concat(f.parent?f.parent.keys.filter(T=>T.optional):[]).map(T=>T.name)),u.params&&R0(u.params,f.keys.map(T=>T.name))),_=f.stringify(d)}else if(u.path!=null)_=u.path,f=t.find(T=>T.re.test(_)),f&&(d=f.parse(_),p=f.record.name);else{if(f=h.name?i.get(h.name):t.find(T=>T.re.test(h.path)),!f)throw ra(1,{location:u,currentLocation:h});p=f.record.name,d=We({},h.params,u.params),_=f.stringify(d)}const g=[];let m=f;for(;m;)g.unshift(m.record),m=m.parent;return{name:p,path:_,params:d,matched:g,meta:N2(g)}}return n.forEach(u=>s(u)),{addRoute:s,resolve:c,removeRoute:o,getRoutes:a,getRecordMatcher:r}}function R0(n,e){const t={};for(const i of e)i in n&&(t[i]=n[i]);return t}function O2(n){return{path:n.path,redirect:n.redirect,name:n.name,meta:n.meta||{},aliasOf:void 0,beforeEnter:n.beforeEnter,props:k2(n),children:n.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in n?n.components||null:n.component&&{default:n.component}}}function k2(n){const e={},t=n.props||!1;if("component"in n)e.default=t;else for(const i in n.components)e[i]=typeof t=="object"?t[i]:t;return e}function P0(n){for(;n;){if(n.record.aliasOf)return!0;n=n.parent}return!1}function N2(n){return n.reduce((e,t)=>We(e,t.meta),{})}function O0(n,e){const t={};for(const i in n)t[i]=i in e?e[i]:n[i];return t}function UI(n,e){return e.children.some(t=>t===n||UI(n,t))}function M2(n){const e={};if(n===""||n==="?")return e;const i=(n[0]==="?"?n.slice(1):n).split("&");for(let r=0;r<i.length;++r){const s=i[r].replace(OI," "),o=s.indexOf("="),a=Gl(o<0?s:s.slice(0,o)),l=o<0?null:Gl(s.slice(o+1));if(a in e){let c=e[a];Si(c)||(c=e[a]=[c]),c.push(l)}else e[a]=l}return e}function k0(n){let e="";for(let t in n){const i=n[t];if(t=e2(t),i==null){i!==void 0&&(e+=(e.length?"&":"")+t);continue}(Si(i)?i.map(s=>s&&Np(s)):[i&&Np(i)]).forEach(s=>{s!==void 0&&(e+=(e.length?"&":"")+t,s!=null&&(e+="="+s))})}return e}function D2(n){const e={};for(const t in n){const i=n[t];i!==void 0&&(e[t]=Si(i)?i.map(r=>r==null?null:""+r):i==null?i:""+i)}return e}const L2=Symbol(""),N0=Symbol(""),em=Symbol(""),$I=Symbol(""),Dp=Symbol("");function Da(){let n=[];function e(i){return n.push(i),()=>{const r=n.indexOf(i);r>-1&&n.splice(r,1)}}function t(){n=[]}return{add:e,list:()=>n.slice(),reset:t}}function Ar(n,e,t,i,r,s=o=>o()){const o=i&&(i.enterCallbacks[r]=i.enterCallbacks[r]||[]);return()=>new Promise((a,l)=>{const c=f=>{f===!1?l(ra(4,{from:t,to:e})):f instanceof Error?l(f):w2(f)?l(ra(2,{from:e,to:f})):(o&&i.enterCallbacks[r]===o&&typeof f=="function"&&o.push(f),a())},u=s(()=>n.call(i&&i.instances[r],e,t,c));let h=Promise.resolve(u);n.length<3&&(h=h.then(c)),h.catch(f=>l(f))})}function Wd(n,e,t,i,r=s=>s()){const s=[];for(const o of n)for(const a in o.components){let l=o.components[a];if(!(e!=="beforeRouteEnter"&&!o.instances[a]))if(V2(l)){const u=(l.__vccOpts||l)[e];u&&s.push(Ar(u,t,i,o,a,r))}else{let c=l();s.push(()=>c.then(u=>{if(!u)return Promise.reject(new Error(`Couldn't resolve component "${a}" at "${o.path}"`));const h=jF(u)?u.default:u;o.components[a]=h;const d=(h.__vccOpts||h)[e];return d&&Ar(d,t,i,o,a,r)()}))}}return s}function V2(n){return typeof n=="object"||"displayName"in n||"props"in n||"__vccOpts"in n}function M0(n){const e=or(em),t=or($I),i=Kn(()=>{const l=bo(n.to);return e.resolve(l)}),r=Kn(()=>{const{matched:l}=i.value,{length:c}=l,u=l[c-1],h=t.matched;if(!u||!h.length)return-1;const f=h.findIndex(ia.bind(null,u));if(f>-1)return f;const d=D0(l[c-2]);return c>1&&D0(u)===d&&h[h.length-1].path!==d?h.findIndex(ia.bind(null,l[c-2])):f}),s=Kn(()=>r.value>-1&&B2(t.params,i.value.params)),o=Kn(()=>r.value>-1&&r.value===t.matched.length-1&&DI(t.params,i.value.params));function a(l={}){return $2(l)?e[bo(n.replace)?"replace":"push"](bo(n.to)).catch(pl):Promise.resolve()}return{route:i,href:Kn(()=>i.value.href),isActive:s,isExactActive:o,navigate:a}}const F2=eT({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:M0,setup(n,{slots:e}){const t=tc(M0(n)),{options:i}=or(em),r=Kn(()=>({[L0(n.activeClass,i.linkActiveClass,"router-link-active")]:t.isActive,[L0(n.exactActiveClass,i.linkExactActiveClass,"router-link-exact-active")]:t.isExactActive}));return()=>{const s=e.default&&e.default(t);return n.custom?s:kn("a",{"aria-current":t.isExactActive?n.ariaCurrentValue:null,href:t.href,onClick:t.navigate,class:r.value},s)}}}),U2=F2;function $2(n){if(!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)&&!n.defaultPrevented&&!(n.button!==void 0&&n.button!==0)){if(n.currentTarget&&n.currentTarget.getAttribute){const e=n.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return n.preventDefault&&n.preventDefault(),!0}}function B2(n,e){for(const t in e){const i=e[t],r=n[t];if(typeof i=="string"){if(i!==r)return!1}else if(!Si(r)||r.length!==i.length||i.some((s,o)=>s!==r[o]))return!1}return!0}function D0(n){return n?n.aliasOf?n.aliasOf.path:n.path:""}const L0=(n,e,t)=>n??e??t,z2=eT({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(n,{attrs:e,slots:t}){const i=or(Dp),r=Kn(()=>n.route||i.value),s=or(N0,0),o=Kn(()=>{let c=bo(s);const{matched:u}=r.value;let h;for(;(h=u[c])&&!h.components;)c++;return c}),a=Kn(()=>r.value.matched[o.value]);Co(N0,Kn(()=>o.value+1)),Co(L2,a),Co(Dp,r);const l=Zt();return Cs(()=>[l.value,a.value,n.name],([c,u,h],[f,d,_])=>{u&&(u.instances[h]=c,d&&d!==u&&c&&c===f&&(u.leaveGuards.size||(u.leaveGuards=d.leaveGuards),u.updateGuards.size||(u.updateGuards=d.updateGuards))),c&&u&&(!d||!ia(u,d)||!f)&&(u.enterCallbacks[h]||[]).forEach(p=>p(c))},{flush:"post"}),()=>{const c=r.value,u=n.name,h=a.value,f=h&&h.components[u];if(!f)return V0(t.default,{Component:f,route:c});const d=h.props[u],_=d?d===!0?c.params:typeof d=="function"?d(c):d:null,g=kn(f,We({},_,e,{onVnodeUnmounted:m=>{m.component.isUnmounted&&(h.instances[u]=null)},ref:l}));return V0(t.default,{Component:g,route:c})||g}}});function V0(n,e){if(!n)return null;const t=n(e);return t.length===1?t[0]:t}const j2=z2;function G2(n){const e=P2(n.routes,n),t=n.parseQuery||M2,i=n.stringifyQuery||k0,r=n.history,s=Da(),o=Da(),a=Da(),l=c1(Tr);let c=Tr;go&&n.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=Hd.bind(null,M=>""+M),h=Hd.bind(null,n2),f=Hd.bind(null,Gl);function d(M,j){let K,te;return VI(M)?(K=e.getRecordMatcher(M),te=j):te=M,e.addRoute(te,K)}function _(M){const j=e.getRecordMatcher(M);j&&e.removeRoute(j)}function p(){return e.getRoutes().map(M=>M.record)}function g(M){return!!e.getRecordMatcher(M)}function m(M,j){if(j=We({},j||l.value),typeof M=="string"){const v=qd(t,M,j.path),C=e.resolve({path:v.path},j),L=r.createHref(v.fullPath);return We(v,C,{params:f(C.params),hash:Gl(v.hash),redirectedFrom:void 0,href:L})}let K;if(M.path!=null)K=We({},M,{path:qd(t,M.path,j.path).path});else{const v=We({},M.params);for(const C in v)v[C]==null&&delete v[C];K=We({},M,{params:h(v)}),j.params=h(j.params)}const te=e.resolve(K,j),Se=M.hash||"";te.params=u(f(te.params));const Fe=s2(i,We({},M,{hash:ZF(Se),path:te.path})),y=r.createHref(Fe);return We({fullPath:Fe,hash:Se,query:i===k0?D2(M.query):M.query||{}},te,{redirectedFrom:void 0,href:y})}function T(M){return typeof M=="string"?qd(t,M,l.value.path):We({},M)}function w(M,j){if(c!==M)return ra(8,{from:j,to:M})}function S(M){return P(M)}function E(M){return S(We(T(M),{replace:!0}))}function I(M){const j=M.matched[M.matched.length-1];if(j&&j.redirect){const{redirect:K}=j;let te=typeof K=="function"?K(M):K;return typeof te=="string"&&(te=te.includes("?")||te.includes("#")?te=T(te):{path:te},te.params={}),We({query:M.query,hash:M.hash,params:te.path!=null?{}:M.params},te)}}function P(M,j){const K=c=m(M),te=l.value,Se=M.state,Fe=M.force,y=M.replace===!0,v=I(K);if(v)return P(We(T(v),{state:typeof v=="object"?We({},Se,v.state):Se,force:Fe,replace:y}),j||K);const C=K;C.redirectedFrom=j;let L;return!Fe&&o2(i,te,K)&&(L=ra(16,{to:C,from:te}),Ee(te,te,!0,!1)),(L?Promise.resolve(L):k(C,te)).catch(O=>Wi(O)?Wi(O,2)?O:bt(O):he(O,C,te)).then(O=>{if(O){if(Wi(O,2))return P(We({replace:y},T(O.to),{state:typeof O.to=="object"?We({},Se,O.to.state):Se,force:Fe}),j||C)}else O=W(C,te,!0,y,Se);return D(C,te,O),O})}function x(M,j){const K=w(M,j);return K?Promise.reject(K):Promise.resolve()}function A(M){const j=Ce.values().next().value;return j&&typeof j.runWithContext=="function"?j.runWithContext(M):M()}function k(M,j){let K;const[te,Se,Fe]=H2(M,j);K=Wd(te.reverse(),"beforeRouteLeave",M,j);for(const v of te)v.leaveGuards.forEach(C=>{K.push(Ar(C,M,j))});const y=x.bind(null,M,j);return K.push(y),qe(K).then(()=>{K=[];for(const v of s.list())K.push(Ar(v,M,j));return K.push(y),qe(K)}).then(()=>{K=Wd(Se,"beforeRouteUpdate",M,j);for(const v of Se)v.updateGuards.forEach(C=>{K.push(Ar(C,M,j))});return K.push(y),qe(K)}).then(()=>{K=[];for(const v of Fe)if(v.beforeEnter)if(Si(v.beforeEnter))for(const C of v.beforeEnter)K.push(Ar(C,M,j));else K.push(Ar(v.beforeEnter,M,j));return K.push(y),qe(K)}).then(()=>(M.matched.forEach(v=>v.enterCallbacks={}),K=Wd(Fe,"beforeRouteEnter",M,j,A),K.push(y),qe(K))).then(()=>{K=[];for(const v of o.list())K.push(Ar(v,M,j));return K.push(y),qe(K)}).catch(v=>Wi(v,8)?v:Promise.reject(v))}function D(M,j,K){a.list().forEach(te=>A(()=>te(M,j,K)))}function W(M,j,K,te,Se){const Fe=w(M,j);if(Fe)return Fe;const y=j===Tr,v=go?history.state:{};K&&(te||y?r.replace(M.fullPath,We({scroll:y&&v&&v.scroll},Se)):r.push(M.fullPath,Se)),l.value=M,Ee(M,j,K,y),bt()}let N;function de(){N||(N=r.listen((M,j,K)=>{if(!jt.listening)return;const te=m(M),Se=I(te);if(Se){P(We(Se,{replace:!0}),te).catch(pl);return}c=te;const Fe=l.value;go&&p2(b0(Fe.fullPath,K.delta),td()),k(te,Fe).catch(y=>Wi(y,12)?y:Wi(y,2)?(P(y.to,te).then(v=>{Wi(v,20)&&!K.delta&&K.type===Hl.pop&&r.go(-1,!1)}).catch(pl),Promise.reject()):(K.delta&&r.go(-K.delta,!1),he(y,te,Fe))).then(y=>{y=y||W(te,Fe,!1),y&&(K.delta&&!Wi(y,8)?r.go(-K.delta,!1):K.type===Hl.pop&&Wi(y,20)&&r.go(-1,!1)),D(te,Fe,y)}).catch(pl)}))}let fe=Da(),ne=Da(),Z;function he(M,j,K){bt(M);const te=ne.list();return te.length?te.forEach(Se=>Se(M,j,K)):console.error(M),Promise.reject(M)}function St(){return Z&&l.value!==Tr?Promise.resolve():new Promise((M,j)=>{fe.add([M,j])})}function bt(M){return Z||(Z=!M,de(),fe.list().forEach(([j,K])=>M?K(M):j()),fe.reset()),M}function Ee(M,j,K,te){const{scrollBehavior:Se}=n;if(!go||!Se)return Promise.resolve();const Fe=!K&&_2(b0(M.fullPath,0))||(te||!K)&&history.state&&history.state.scroll||null;return E_().then(()=>Se(M,j,Fe)).then(y=>y&&f2(y)).catch(y=>he(y,M,j))}const _e=M=>r.go(M);let He;const Ce=new Set,jt={currentRoute:l,listening:!0,addRoute:d,removeRoute:_,hasRoute:g,getRoutes:p,resolve:m,options:n,push:S,replace:E,go:_e,back:()=>_e(-1),forward:()=>_e(1),beforeEach:s.add,beforeResolve:o.add,afterEach:a.add,onError:ne.add,isReady:St,install(M){const j=this;M.component("RouterLink",U2),M.component("RouterView",j2),M.config.globalProperties.$router=j,Object.defineProperty(M.config.globalProperties,"$route",{enumerable:!0,get:()=>bo(l)}),go&&!He&&l.value===Tr&&(He=!0,S(r.location).catch(Se=>{}));const K={};for(const Se in Tr)Object.defineProperty(K,Se,{get:()=>l.value[Se],enumerable:!0});M.provide(em,j),M.provide($I,Uw(K)),M.provide(Dp,l);const te=M.unmount;Ce.add(M),M.unmount=function(){Ce.delete(M),Ce.size<1&&(c=Tr,N&&N(),N=null,l.value=Tr,He=!1,Z=!1),te()}}};function qe(M){return M.reduce((j,K)=>j.then(()=>A(K)),Promise.resolve())}return jt}function H2(n,e){const t=[],i=[],r=[],s=Math.max(e.matched.length,n.matched.length);for(let o=0;o<s;o++){const a=e.matched[o];a&&(n.matched.find(c=>ia(c,a))?i.push(a):t.push(a));const l=n.matched[o];l&&(e.matched.find(c=>ia(c,l))||r.push(l))}return[t,i,r]}const q2="/museum-rock/img/svg/contacs-address.svg",W2="/museum-rock/img/svg/contacs-tel.svg",K2="/museum-rock/img/svg/contacs-mail.svg",pt=(n,e)=>{const t=n.__vccOpts||n;for(const[i,r]of e)t[i]=r;return t},Y2={},X2={class:"footer"},Q2=vT('<div class="container" data-v-0760b49f><div class="footer__inner" data-v-0760b49f><h3 class="footer__title" data-v-0760b49f>Музей камня</h3><div class="footer__row" data-v-0760b49f><div class="footer__contacts" data-v-0760b49f><address class="footer__address" data-v-0760b49f><img class="footer__contacts-icon" src="'+q2+'" alt="Местоположение" data-v-0760b49f> Красноярск, ул. Ады Лебедевой, 93В </address><a href="tel:+79511234567" class="footer__number" data-v-0760b49f><img class="footer__contacts-icon" src="'+W2+'" alt="Местоположение" data-v-0760b49f><span class="footer__contacts-link" data-v-0760b49f> +7 (951) 123-45-67 </span></a><a href="mailto:test@test.ru" class="footer__email" data-v-0760b49f><img class="footer__contacts-icon" src="'+K2+'" alt="Местоположение" data-v-0760b49f><span class="footer__contacts-link" data-v-0760b49f> test@test.ru </span></a></div><div class="footer__social" data-v-0760b49f><ul class="footer__social-list list-reset" data-v-0760b49f><li class="footer__social-item" data-v-0760b49f><a href="" class="footer__social-link" data-v-0760b49f><svg xmlns="http://www.w3.org/2000/svg" width="9.3" height="7.9" viewBox="0 0 9.3 7.9" xml:space="preserve" data-v-0760b49f><path d="M3.5 7.4c0-.4 0-.6.1-1.1v-.9c0-.1.1-.3.2-.4l3.9-3.5c0-.1-3 1.6-4.2 2.4-.3.2-.6.4-1 .6-.1 0-.1.1-.2 0C1.7 4.4 1 4.2.4 4c-.2-.1-.4-.1-.4-.3s.1-.3.3-.4L8.5.1c.3-.1.6 0 .7.1.2.1.2.3.1.6C9 2.1 7.9 7.4 7.8 7.5c-.1.4-.4.5-.7.3-.7-.5-1.3-1-2-1.5-.1-.1-.2-.1-.3 0-.3.3-.6.7-1 1-.1.1-.2.1-.3.1z" fill="#fff" data-v-0760b49f></path></svg></a></li><li class="footer__social-item" data-v-0760b49f><a href="" class="footer__social-link" data-v-0760b49f><svg xmlns="http://www.w3.org/2000/svg" width="13" height="8" viewBox="0 0 32 20" xml:space="preserve" data-v-0760b49f><path d="M17.4 20C6.5 20 .3 12.5 0 0h5.5c.2 9.2 4.2 13 7.4 13.8V0h5.2v7.9c3.1-.3 6.4-3.9 7.6-7.9h5.2c-.9 4.9-4.5 8.5-7 10 2.6 1.2 6.7 4.3 8.2 10h-5.7c-1.2-3.8-4.3-6.7-8.3-7.1V20h-.7z" fill="#fff" data-v-0760b49f></path></svg></a></li></ul></div></div></div></div>',1),J2=[Q2];function Z2(n,e,t,i,r,s){return Ie(),at("footer",X2,J2)}const BI=pt(Y2,[["render",Z2],["__scopeId","data-v-0760b49f"]]),eU={setup(){return{}}},nd=n=>(Zr("data-v-c71d304d"),n=n(),es(),n),tU={class:"nav"},nU={class:"list-reset nav__list"},iU={class:"nav__item"},rU=nd(()=>H("span",{class:"nav__link-text"},"Экспонаты",-1)),sU={class:"nav__item"},oU=nd(()=>H("span",{class:"nav__link-text"},"Люди",-1)),aU={class:"nav__item"},lU=nd(()=>H("span",{class:"nav__link-text"},"Таймлайн",-1)),cU={class:"nav__item"},uU=nd(()=>H("span",{class:"nav__link-text"},"Афиша",-1));function hU(n,e,t,i,r,s){const o=ot("router-link");return Ie(),at("nav",tU,[H("ul",nU,[H("li",iU,[je(o,{to:"/exhibitions",class:fi(["nav__link nav__link-exhibitions",{"router-link-active":this.$route.path.startsWith("/exhibitions")}])},{default:li(()=>[rU]),_:1},8,["class"])]),H("li",sU,[je(o,{to:"/people",class:"nav__link"},{default:li(()=>[oU]),_:1})]),H("li",aU,[je(o,{to:"/timeline",class:"nav__link"},{default:li(()=>[lU]),_:1})]),H("li",cU,[je(o,{to:"/afisha",class:"nav__link"},{default:li(()=>[uU]),_:1})])])])}const dU=pt(eU,[["render",hU],["__scopeId","data-v-c71d304d"]]),fU={components:{MyNavigation:dU}},pU={class:"header"},_U={class:"container"},gU={class:"header__inner"};function mU(n,e,t,i,r,s){const o=ot("router-link"),a=ot("my-navigation");return Ie(),at("header",pU,[H("div",_U,[H("div",gU,[je(o,{to:"/",class:"header__logo"},{default:li(()=>[vh(" Главная ")]),_:1}),je(a)])])])}const yU=pt(fU,[["render",mU],["__scopeId","data-v-c24e5168"]]),vU={components:{HeaderSection:yU,FooterSection:BI},setup(){return{}}},wU={class:"main"};function TU(n,e,t,i,r,s){const o=ot("header-section"),a=ot("RouterView"),l=ot("footer-section");return Ie(),at(qt,null,[je(o),H("main",wU,[je(a)]),n.$route.path!=="/exhibitions"?(Ie(),Un(l,{key:0})):Ho("",!0)],64)}const EU=pt(vU,[["render",TU]]),zI=LT({apiKey:"AIzaSyDGVRmA--pBDYTOjw1YbGuaxsgZmgn-U2A",authDomain:"museum-rock.firebaseapp.com",projectId:"museum-rock",storageBucket:"museum-rock.appspot.com",messagingSenderId:"739406576155",appId:"1:739406576155:web:c2c1ad49e8149dce4956be",measurementId:"G-MZQWMX2D5K"}),jI=zV(zI);PF();/*!
 * vuex v4.0.2
 * (c) 2021 Evan You
 * @license MIT
 */var SU="store";function ba(n,e){Object.keys(n).forEach(function(t){return e(n[t],t)})}function GI(n){return n!==null&&typeof n=="object"}function bU(n){return n&&typeof n.then=="function"}function IU(n,e){return function(){return n(e)}}function HI(n,e,t){return e.indexOf(n)<0&&(t&&t.prepend?e.unshift(n):e.push(n)),function(){var i=e.indexOf(n);i>-1&&e.splice(i,1)}}function qI(n,e){n._actions=Object.create(null),n._mutations=Object.create(null),n._wrappedGetters=Object.create(null),n._modulesNamespaceMap=Object.create(null);var t=n.state;id(n,t,[],n._modules.root,!0),tm(n,t,e)}function tm(n,e,t){var i=n._state;n.getters={},n._makeLocalGettersCache=Object.create(null);var r=n._wrappedGetters,s={};ba(r,function(o,a){s[a]=IU(o,n),Object.defineProperty(n.getters,a,{get:function(){return s[a]()},enumerable:!0})}),n._state=tc({data:e}),n.strict&&PU(n),i&&t&&n._withCommit(function(){i.data=null})}function id(n,e,t,i,r){var s=!t.length,o=n._modules.getNamespace(t);if(i.namespaced&&(n._modulesNamespaceMap[o],n._modulesNamespaceMap[o]=i),!s&&!r){var a=nm(e,t.slice(0,-1)),l=t[t.length-1];n._withCommit(function(){a[l]=i.state})}var c=i.context=CU(n,o,t);i.forEachMutation(function(u,h){var f=o+h;AU(n,f,u,c)}),i.forEachAction(function(u,h){var f=u.root?h:o+h,d=u.handler||u;xU(n,f,d,c)}),i.forEachGetter(function(u,h){var f=o+h;RU(n,f,u,c)}),i.forEachChild(function(u,h){id(n,e,t.concat(h),u,r)})}function CU(n,e,t){var i=e==="",r={dispatch:i?n.dispatch:function(s,o,a){var l=Qu(s,o,a),c=l.payload,u=l.options,h=l.type;return(!u||!u.root)&&(h=e+h),n.dispatch(h,c)},commit:i?n.commit:function(s,o,a){var l=Qu(s,o,a),c=l.payload,u=l.options,h=l.type;(!u||!u.root)&&(h=e+h),n.commit(h,c,u)}};return Object.defineProperties(r,{getters:{get:i?function(){return n.getters}:function(){return WI(n,e)}},state:{get:function(){return nm(n.state,t)}}}),r}function WI(n,e){if(!n._makeLocalGettersCache[e]){var t={},i=e.length;Object.keys(n.getters).forEach(function(r){if(r.slice(0,i)===e){var s=r.slice(i);Object.defineProperty(t,s,{get:function(){return n.getters[r]},enumerable:!0})}}),n._makeLocalGettersCache[e]=t}return n._makeLocalGettersCache[e]}function AU(n,e,t,i){var r=n._mutations[e]||(n._mutations[e]=[]);r.push(function(o){t.call(n,i.state,o)})}function xU(n,e,t,i){var r=n._actions[e]||(n._actions[e]=[]);r.push(function(o){var a=t.call(n,{dispatch:i.dispatch,commit:i.commit,getters:i.getters,state:i.state,rootGetters:n.getters,rootState:n.state},o);return bU(a)||(a=Promise.resolve(a)),n._devtoolHook?a.catch(function(l){throw n._devtoolHook.emit("vuex:error",l),l}):a})}function RU(n,e,t,i){n._wrappedGetters[e]||(n._wrappedGetters[e]=function(s){return t(i.state,i.getters,s.state,s.getters)})}function PU(n){Cs(function(){return n._state.data},function(){},{deep:!0,flush:"sync"})}function nm(n,e){return e.reduce(function(t,i){return t[i]},n)}function Qu(n,e,t){return GI(n)&&n.type&&(t=e,e=n,n=n.type),{type:n,payload:e,options:t}}var OU="vuex bindings",F0="vuex:mutations",Kd="vuex:actions",ao="vuex",kU=0;function NU(n,e){zF({id:"org.vuejs.vuex",app:n,label:"Vuex",homepage:"https://next.vuex.vuejs.org/",logo:"https://vuejs.org/images/icons/favicon-96x96.png",packageName:"vuex",componentStateTypes:[OU]},function(t){t.addTimelineLayer({id:F0,label:"Vuex Mutations",color:U0}),t.addTimelineLayer({id:Kd,label:"Vuex Actions",color:U0}),t.addInspector({id:ao,label:"Vuex",icon:"storage",treeFilterPlaceholder:"Filter stores..."}),t.on.getInspectorTree(function(i){if(i.app===n&&i.inspectorId===ao)if(i.filter){var r=[];QI(r,e._modules.root,i.filter,""),i.rootNodes=r}else i.rootNodes=[XI(e._modules.root,"")]}),t.on.getInspectorState(function(i){if(i.app===n&&i.inspectorId===ao){var r=i.nodeId;WI(e,r),i.state=LU(FU(e._modules,r),r==="root"?e.getters:e._makeLocalGettersCache,r)}}),t.on.editInspectorState(function(i){if(i.app===n&&i.inspectorId===ao){var r=i.nodeId,s=i.path;r!=="root"&&(s=r.split("/").filter(Boolean).concat(s)),e._withCommit(function(){i.set(e._state.data,s,i.state.value)})}}),e.subscribe(function(i,r){var s={};i.payload&&(s.payload=i.payload),s.state=r,t.notifyComponentUpdate(),t.sendInspectorTree(ao),t.sendInspectorState(ao),t.addTimelineEvent({layerId:F0,event:{time:Date.now(),title:i.type,data:s}})}),e.subscribeAction({before:function(i,r){var s={};i.payload&&(s.payload=i.payload),i._id=kU++,i._time=Date.now(),s.state=r,t.addTimelineEvent({layerId:Kd,event:{time:i._time,title:i.type,groupId:i._id,subtitle:"start",data:s}})},after:function(i,r){var s={},o=Date.now()-i._time;s.duration={_custom:{type:"duration",display:o+"ms",tooltip:"Action duration",value:o}},i.payload&&(s.payload=i.payload),s.state=r,t.addTimelineEvent({layerId:Kd,event:{time:Date.now(),title:i.type,groupId:i._id,subtitle:"end",data:s}})}})})}var U0=8702998,MU=6710886,DU=16777215,KI={label:"namespaced",textColor:DU,backgroundColor:MU};function YI(n){return n&&n!=="root"?n.split("/").slice(-2,-1)[0]:"Root"}function XI(n,e){return{id:e||"root",label:YI(e),tags:n.namespaced?[KI]:[],children:Object.keys(n._children).map(function(t){return XI(n._children[t],e+t+"/")})}}function QI(n,e,t,i){i.includes(t)&&n.push({id:i||"root",label:i.endsWith("/")?i.slice(0,i.length-1):i||"Root",tags:e.namespaced?[KI]:[]}),Object.keys(e._children).forEach(function(r){QI(n,e._children[r],t,i+r+"/")})}function LU(n,e,t){e=t==="root"?e:e[t];var i=Object.keys(e),r={state:Object.keys(n.state).map(function(o){return{key:o,editable:!0,value:n.state[o]}})};if(i.length){var s=VU(e);r.getters=Object.keys(s).map(function(o){return{key:o.endsWith("/")?YI(o):o,editable:!1,value:Lp(function(){return s[o]})}})}return r}function VU(n){var e={};return Object.keys(n).forEach(function(t){var i=t.split("/");if(i.length>1){var r=e,s=i.pop();i.forEach(function(o){r[o]||(r[o]={_custom:{value:{},display:o,tooltip:"Module",abstract:!0}}),r=r[o]._custom.value}),r[s]=Lp(function(){return n[t]})}else e[t]=Lp(function(){return n[t]})}),e}function FU(n,e){var t=e.split("/").filter(function(i){return i});return t.reduce(function(i,r,s){var o=i[r];if(!o)throw new Error('Missing module "'+r+'" for path "'+e+'".');return s===t.length-1?o:o._children},e==="root"?n:n.root._children)}function Lp(n){try{return n()}catch(e){return e}}var bi=function(e,t){this.runtime=t,this._children=Object.create(null),this._rawModule=e;var i=e.state;this.state=(typeof i=="function"?i():i)||{}},JI={namespaced:{configurable:!0}};JI.namespaced.get=function(){return!!this._rawModule.namespaced};bi.prototype.addChild=function(e,t){this._children[e]=t};bi.prototype.removeChild=function(e){delete this._children[e]};bi.prototype.getChild=function(e){return this._children[e]};bi.prototype.hasChild=function(e){return e in this._children};bi.prototype.update=function(e){this._rawModule.namespaced=e.namespaced,e.actions&&(this._rawModule.actions=e.actions),e.mutations&&(this._rawModule.mutations=e.mutations),e.getters&&(this._rawModule.getters=e.getters)};bi.prototype.forEachChild=function(e){ba(this._children,e)};bi.prototype.forEachGetter=function(e){this._rawModule.getters&&ba(this._rawModule.getters,e)};bi.prototype.forEachAction=function(e){this._rawModule.actions&&ba(this._rawModule.actions,e)};bi.prototype.forEachMutation=function(e){this._rawModule.mutations&&ba(this._rawModule.mutations,e)};Object.defineProperties(bi.prototype,JI);var to=function(e){this.register([],e,!1)};to.prototype.get=function(e){return e.reduce(function(t,i){return t.getChild(i)},this.root)};to.prototype.getNamespace=function(e){var t=this.root;return e.reduce(function(i,r){return t=t.getChild(r),i+(t.namespaced?r+"/":"")},"")};to.prototype.update=function(e){ZI([],this.root,e)};to.prototype.register=function(e,t,i){var r=this;i===void 0&&(i=!0);var s=new bi(t,i);if(e.length===0)this.root=s;else{var o=this.get(e.slice(0,-1));o.addChild(e[e.length-1],s)}t.modules&&ba(t.modules,function(a,l){r.register(e.concat(l),a,i)})};to.prototype.unregister=function(e){var t=this.get(e.slice(0,-1)),i=e[e.length-1],r=t.getChild(i);r&&r.runtime&&t.removeChild(i)};to.prototype.isRegistered=function(e){var t=this.get(e.slice(0,-1)),i=e[e.length-1];return t?t.hasChild(i):!1};function ZI(n,e,t){if(e.update(t),t.modules)for(var i in t.modules){if(!e.getChild(i))return;ZI(n.concat(i),e.getChild(i),t.modules[i])}}function UU(n){return new An(n)}var An=function(e){var t=this;e===void 0&&(e={});var i=e.plugins;i===void 0&&(i=[]);var r=e.strict;r===void 0&&(r=!1);var s=e.devtools;this._committing=!1,this._actions=Object.create(null),this._actionSubscribers=[],this._mutations=Object.create(null),this._wrappedGetters=Object.create(null),this._modules=new to(e),this._modulesNamespaceMap=Object.create(null),this._subscribers=[],this._makeLocalGettersCache=Object.create(null),this._devtools=s;var o=this,a=this,l=a.dispatch,c=a.commit;this.dispatch=function(f,d){return l.call(o,f,d)},this.commit=function(f,d,_){return c.call(o,f,d,_)},this.strict=r;var u=this._modules.root.state;id(this,u,[],this._modules.root),tm(this,u),i.forEach(function(h){return h(t)})},im={state:{configurable:!0}};An.prototype.install=function(e,t){e.provide(t||SU,this),e.config.globalProperties.$store=this;var i=this._devtools!==void 0?this._devtools:!1;i&&NU(e,this)};im.state.get=function(){return this._state.data};im.state.set=function(n){};An.prototype.commit=function(e,t,i){var r=this,s=Qu(e,t,i),o=s.type,a=s.payload,l={type:o,payload:a},c=this._mutations[o];c&&(this._withCommit(function(){c.forEach(function(h){h(a)})}),this._subscribers.slice().forEach(function(u){return u(l,r.state)}))};An.prototype.dispatch=function(e,t){var i=this,r=Qu(e,t),s=r.type,o=r.payload,a={type:s,payload:o},l=this._actions[s];if(l){try{this._actionSubscribers.slice().filter(function(u){return u.before}).forEach(function(u){return u.before(a,i.state)})}catch{}var c=l.length>1?Promise.all(l.map(function(u){return u(o)})):l[0](o);return new Promise(function(u,h){c.then(function(f){try{i._actionSubscribers.filter(function(d){return d.after}).forEach(function(d){return d.after(a,i.state)})}catch{}u(f)},function(f){try{i._actionSubscribers.filter(function(d){return d.error}).forEach(function(d){return d.error(a,i.state,f)})}catch{}h(f)})})}};An.prototype.subscribe=function(e,t){return HI(e,this._subscribers,t)};An.prototype.subscribeAction=function(e,t){var i=typeof e=="function"?{before:e}:e;return HI(i,this._actionSubscribers,t)};An.prototype.watch=function(e,t,i){var r=this;return Cs(function(){return e(r.state,r.getters)},t,Object.assign({},i))};An.prototype.replaceState=function(e){var t=this;this._withCommit(function(){t._state.data=e})};An.prototype.registerModule=function(e,t,i){i===void 0&&(i={}),typeof e=="string"&&(e=[e]),this._modules.register(e,t),id(this,this.state,e,this._modules.get(e),i.preserveState),tm(this,this.state)};An.prototype.unregisterModule=function(e){var t=this;typeof e=="string"&&(e=[e]),this._modules.unregister(e),this._withCommit(function(){var i=nm(t.state,e.slice(0,-1));delete i[e[e.length-1]]}),qI(this)};An.prototype.hasModule=function(e){return typeof e=="string"&&(e=[e]),this._modules.isRegistered(e)};An.prototype.hotUpdate=function(e){this._modules.update(e),qI(this,!0)};An.prototype._withCommit=function(e){var t=this._committing;this._committing=!0,e(),this._committing=t};Object.defineProperties(An.prototype,im);var rm=tC(function(n,e){var t={};return eC(e).forEach(function(i){var r=i.key,s=i.val;t[r]=function(){var a=this.$store.state,l=this.$store.getters;if(n){var c=nC(this.$store,"mapState",n);if(!c)return;a=c.context.state,l=c.context.getters}return typeof s=="function"?s.call(this,a,l):a[s]},t[r].vuex=!0}),t}),sm=tC(function(n,e){var t={};return eC(e).forEach(function(i){var r=i.key,s=i.val;t[r]=function(){for(var a=[],l=arguments.length;l--;)a[l]=arguments[l];var c=this.$store.dispatch;if(n){var u=nC(this.$store,"mapActions",n);if(!u)return;c=u.context.dispatch}return typeof s=="function"?s.apply(this,[c].concat(a)):c.apply(this.$store,[s].concat(a))}}),t});function eC(n){return $U(n)?Array.isArray(n)?n.map(function(e){return{key:e,val:e}}):Object.keys(n).map(function(e){return{key:e,val:n[e]}}):[]}function $U(n){return Array.isArray(n)||GI(n)}function tC(n){return function(e,t){return typeof e!="string"?(t=e,e=""):e.charAt(e.length-1)!=="/"&&(e+="/"),n(e,t)}}function nC(n,e,t){var i=n._modulesNamespaceMap[t];return i}const BU={data(){return{}},mounted(){this.fetchExhibitions()},methods:{...sm({fetchExhibitions:"exhibitions/fetchExhibitions"})},computed:{...rm({isLoading:n=>n.exhibitions.isLoading,exhibitions:n=>n.exhibitions.exhibitions})}},zU={class:"exhibitions"},jU={class:"container"},GU={class:"exhibitions__inner"},HU={class:"exhibitions-nav"},qU={class:"list-reset exhibitions-nav__list"};function WU(n,e,t,i,r,s){const o=ot("RouterLink"),a=ot("RouterView");return Ie(),at("section",zU,[H("div",jU,[H("div",GU,[H("nav",HU,[H("ul",qU,[(Ie(!0),at(qt,null,nc(n.exhibitions,(l,c)=>(Ie(),at("li",{class:"exhibitions-nav__item",key:l.id},[je(o,{to:`/exhibitions/categories/${l.id}`,class:"exhibitions-nav__link"},{default:li(()=>[vh(rr(l.title),1)]),_:2},1032,["to"])]))),128))])]),je(a)])])])}const KU=pt(BU,[["render",WU],["__scopeId","data-v-d670f3f4"]]),YU={},XU={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",width:"80",height:"80",style:{"shape-rendering":"auto",display:"block",background:"transparent"},"xmlns:xlink":"http://www.w3.org/1999/xlink"},QU=H("g",null,[H("circle",{"stroke-dasharray":"183.7831702350029 63.261056745000964",r:"39","stroke-width":"14",stroke:"#4f4c93",fill:"none",cy:"50",cx:"50"},[H("animateTransform",{keyTimes:"0;1",values:"0 50 50;360 50 50",dur:"1s",repeatCount:"indefinite",type:"rotate",attributeName:"transform"})]),H("g")],-1),JU=[QU];function ZU(n,e,t,i,r,s){return Ie(),at("svg",XU,JU)}const iC=pt(YU,[["render",ZU]]),e$={components:{MyLoader:iC},data(){return{loadCount:0,allImagesLoaded:!1}},methods:{...sm({fetchExhibitions:"exhibitions/fetchExhibitions"}),imageLoaded(){console.log(this.loadCount),this.loadCount++,this.loadCount===this.currentItem.items.length&&(this.allImagesLoaded=!0)}},watch:{currentItem(){this.loadCount=0,this.allImagesLoaded=!1}},computed:{...rm({exhibitions:n=>n.exhibitions.exhibitions}),currentItem(){const n=parseInt(this.$route.params.id,10);return this.exhibitions.find(e=>e.id===n)}}},t$={class:"exhibitions-list__block"},n$=["src"],i$={class:"exhibitions-list__title"};function r$(n,e,t,i,r,s){const o=ot("my-loader");return Ie(),at(qt,null,[r.allImagesLoaded?Ho("",!0):(Ie(),Un(o,{key:0,class:"exhibitions-list__loader"})),H("div",{class:fi(["exhibitions-list grid",{loading:r.allImagesLoaded}])},[this.currentItem?(Ie(!0),at(qt,{key:0},nc(this.currentItem.items,(a,l)=>(Ie(),at("a",{class:"exhibitions-list__item",key:a.id},[H("div",t$,[H("img",{src:a.image,alt:"Фото пока нет",class:"exhibitions-list__image",onLoad:e[0]||(e[0]=c=>s.imageLoaded())},null,40,n$)]),H("h3",i$,rr(a.title),1)]))),128)):Ho("",!0)],2)],64)}const s$=pt(e$,[["render",r$],["__scopeId","data-v-42522671"]]);function $0(n){return n!==null&&typeof n=="object"&&"constructor"in n&&n.constructor===Object}function om(n,e){n===void 0&&(n={}),e===void 0&&(e={}),Object.keys(e).forEach(t=>{typeof n[t]>"u"?n[t]=e[t]:$0(e[t])&&$0(n[t])&&Object.keys(e[t]).length>0&&om(n[t],e[t])})}const rC={body:{},addEventListener(){},removeEventListener(){},activeElement:{blur(){},nodeName:""},querySelector(){return null},querySelectorAll(){return[]},getElementById(){return null},createEvent(){return{initEvent(){}}},createElement(){return{children:[],childNodes:[],style:{},setAttribute(){},getElementsByTagName(){return[]}}},createElementNS(){return{}},importNode(){return null},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function Ia(){const n=typeof document<"u"?document:{};return om(n,rC),n}const o$={document:rC,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState(){},pushState(){},go(){},back(){}},CustomEvent:function(){return this},addEventListener(){},removeEventListener(){},getComputedStyle(){return{getPropertyValue(){return""}}},Image(){},Date(){},screen:{},setTimeout(){},clearTimeout(){},matchMedia(){return{}},requestAnimationFrame(n){return typeof setTimeout>"u"?(n(),null):setTimeout(n,0)},cancelAnimationFrame(n){typeof setTimeout>"u"||clearTimeout(n)}};function zn(){const n=typeof window<"u"?window:{};return om(n,o$),n}function a$(n){return n===void 0&&(n=""),n.trim().split(" ").filter(e=>!!e.trim())}function l$(n){const e=n;Object.keys(e).forEach(t=>{try{e[t]=null}catch{}try{delete e[t]}catch{}})}function Vp(n,e){return e===void 0&&(e=0),setTimeout(n,e)}function Ju(){return Date.now()}function c$(n){const e=zn();let t;return e.getComputedStyle&&(t=e.getComputedStyle(n,null)),!t&&n.currentStyle&&(t=n.currentStyle),t||(t=n.style),t}function u$(n,e){e===void 0&&(e="x");const t=zn();let i,r,s;const o=c$(n);return t.WebKitCSSMatrix?(r=o.transform||o.webkitTransform,r.split(",").length>6&&(r=r.split(", ").map(a=>a.replace(",",".")).join(", ")),s=new t.WebKitCSSMatrix(r==="none"?"":r)):(s=o.MozTransform||o.OTransform||o.MsTransform||o.msTransform||o.transform||o.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),i=s.toString().split(",")),e==="x"&&(t.WebKitCSSMatrix?r=s.m41:i.length===16?r=parseFloat(i[12]):r=parseFloat(i[4])),e==="y"&&(t.WebKitCSSMatrix?r=s.m42:i.length===16?r=parseFloat(i[13]):r=parseFloat(i[5])),r||0}function Wc(n){return typeof n=="object"&&n!==null&&n.constructor&&Object.prototype.toString.call(n).slice(8,-1)==="Object"}function h$(n){return typeof window<"u"&&typeof window.HTMLElement<"u"?n instanceof HTMLElement:n&&(n.nodeType===1||n.nodeType===11)}function Pn(){const n=Object(arguments.length<=0?void 0:arguments[0]),e=["__proto__","constructor","prototype"];for(let t=1;t<arguments.length;t+=1){const i=t<0||arguments.length<=t?void 0:arguments[t];if(i!=null&&!h$(i)){const r=Object.keys(Object(i)).filter(s=>e.indexOf(s)<0);for(let s=0,o=r.length;s<o;s+=1){const a=r[s],l=Object.getOwnPropertyDescriptor(i,a);l!==void 0&&l.enumerable&&(Wc(n[a])&&Wc(i[a])?i[a].__swiper__?n[a]=i[a]:Pn(n[a],i[a]):!Wc(n[a])&&Wc(i[a])?(n[a]={},i[a].__swiper__?n[a]=i[a]:Pn(n[a],i[a])):n[a]=i[a])}}}return n}function Kc(n,e,t){n.style.setProperty(e,t)}function sC(n){let{swiper:e,targetPosition:t,side:i}=n;const r=zn(),s=-e.translate;let o=null,a;const l=e.params.speed;e.wrapperEl.style.scrollSnapType="none",r.cancelAnimationFrame(e.cssModeFrameID);const c=t>s?"next":"prev",u=(f,d)=>c==="next"&&f>=d||c==="prev"&&f<=d,h=()=>{a=new Date().getTime(),o===null&&(o=a);const f=Math.max(Math.min((a-o)/l,1),0),d=.5-Math.cos(f*Math.PI)/2;let _=s+d*(t-s);if(u(_,t)&&(_=t),e.wrapperEl.scrollTo({[i]:_}),u(_,t)){e.wrapperEl.style.overflow="hidden",e.wrapperEl.style.scrollSnapType="",setTimeout(()=>{e.wrapperEl.style.overflow="",e.wrapperEl.scrollTo({[i]:_})}),r.cancelAnimationFrame(e.cssModeFrameID);return}e.cssModeFrameID=r.requestAnimationFrame(h)};h()}function tr(n,e){return e===void 0&&(e=""),[...n.children].filter(t=>t.matches(e))}function Zu(n){try{console.warn(n);return}catch{}}function Fp(n,e){e===void 0&&(e=[]);const t=document.createElement(n);return t.classList.add(...Array.isArray(e)?e:a$(e)),t}function d$(n,e){const t=[];for(;n.previousElementSibling;){const i=n.previousElementSibling;e?i.matches(e)&&t.push(i):t.push(i),n=i}return t}function f$(n,e){const t=[];for(;n.nextElementSibling;){const i=n.nextElementSibling;e?i.matches(e)&&t.push(i):t.push(i),n=i}return t}function kr(n,e){return zn().getComputedStyle(n,null).getPropertyValue(e)}function B0(n){let e=n,t;if(e){for(t=0;(e=e.previousSibling)!==null;)e.nodeType===1&&(t+=1);return t}}function p$(n,e){const t=[];let i=n.parentElement;for(;i;)e?i.matches(e)&&t.push(i):t.push(i),i=i.parentElement;return t}function z0(n,e,t){const i=zn();return t?n[e==="width"?"offsetWidth":"offsetHeight"]+parseFloat(i.getComputedStyle(n,null).getPropertyValue(e==="width"?"margin-right":"margin-top"))+parseFloat(i.getComputedStyle(n,null).getPropertyValue(e==="width"?"margin-left":"margin-bottom")):n.offsetWidth}let Yd;function _$(){const n=zn(),e=Ia();return{smoothScroll:e.documentElement&&e.documentElement.style&&"scrollBehavior"in e.documentElement.style,touch:!!("ontouchstart"in n||n.DocumentTouch&&e instanceof n.DocumentTouch)}}function oC(){return Yd||(Yd=_$()),Yd}let Xd;function g$(n){let{userAgent:e}=n===void 0?{}:n;const t=oC(),i=zn(),r=i.navigator.platform,s=e||i.navigator.userAgent,o={ios:!1,android:!1},a=i.screen.width,l=i.screen.height,c=s.match(/(Android);?[\s\/]+([\d.]+)?/);let u=s.match(/(iPad).*OS\s([\d_]+)/);const h=s.match(/(iPod)(.*OS\s([\d_]+))?/),f=!u&&s.match(/(iPhone\sOS|iOS)\s([\d_]+)/),d=r==="Win32";let _=r==="MacIntel";const p=["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"];return!u&&_&&t.touch&&p.indexOf(`${a}x${l}`)>=0&&(u=s.match(/(Version)\/([\d.]+)/),u||(u=[0,1,"13_0_0"]),_=!1),c&&!d&&(o.os="android",o.android=!0),(u||f||h)&&(o.os="ios",o.ios=!0),o}function aC(n){return n===void 0&&(n={}),Xd||(Xd=g$(n)),Xd}let Qd;function m$(){const n=zn(),e=aC();let t=!1;function i(){const a=n.navigator.userAgent.toLowerCase();return a.indexOf("safari")>=0&&a.indexOf("chrome")<0&&a.indexOf("android")<0}if(i()){const a=String(n.navigator.userAgent);if(a.includes("Version/")){const[l,c]=a.split("Version/")[1].split(" ")[0].split(".").map(u=>Number(u));t=l<16||l===16&&c<2}}const r=/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(n.navigator.userAgent),s=i(),o=s||r&&e.ios;return{isSafari:t||s,needPerspectiveFix:t,need3dFix:o,isWebView:r}}function y$(){return Qd||(Qd=m$()),Qd}function v$(n){let{swiper:e,on:t,emit:i}=n;const r=zn();let s=null,o=null;const a=()=>{!e||e.destroyed||!e.initialized||(i("beforeResize"),i("resize"))},l=()=>{!e||e.destroyed||!e.initialized||(s=new ResizeObserver(h=>{o=r.requestAnimationFrame(()=>{const{width:f,height:d}=e;let _=f,p=d;h.forEach(g=>{let{contentBoxSize:m,contentRect:T,target:w}=g;w&&w!==e.el||(_=T?T.width:(m[0]||m).inlineSize,p=T?T.height:(m[0]||m).blockSize)}),(_!==f||p!==d)&&a()})}),s.observe(e.el))},c=()=>{o&&r.cancelAnimationFrame(o),s&&s.unobserve&&e.el&&(s.unobserve(e.el),s=null)},u=()=>{!e||e.destroyed||!e.initialized||i("orientationchange")};t("init",()=>{if(e.params.resizeObserver&&typeof r.ResizeObserver<"u"){l();return}r.addEventListener("resize",a),r.addEventListener("orientationchange",u)}),t("destroy",()=>{c(),r.removeEventListener("resize",a),r.removeEventListener("orientationchange",u)})}function w$(n){let{swiper:e,extendParams:t,on:i,emit:r}=n;const s=[],o=zn(),a=function(u,h){h===void 0&&(h={});const f=o.MutationObserver||o.WebkitMutationObserver,d=new f(_=>{if(e.__preventObserver__)return;if(_.length===1){r("observerUpdate",_[0]);return}const p=function(){r("observerUpdate",_[0])};o.requestAnimationFrame?o.requestAnimationFrame(p):o.setTimeout(p,0)});d.observe(u,{attributes:typeof h.attributes>"u"?!0:h.attributes,childList:typeof h.childList>"u"?!0:h.childList,characterData:typeof h.characterData>"u"?!0:h.characterData}),s.push(d)},l=()=>{if(e.params.observer){if(e.params.observeParents){const u=p$(e.hostEl);for(let h=0;h<u.length;h+=1)a(u[h])}a(e.hostEl,{childList:e.params.observeSlideChildren}),a(e.wrapperEl,{attributes:!1})}},c=()=>{s.forEach(u=>{u.disconnect()}),s.splice(0,s.length)};t({observer:!1,observeParents:!1,observeSlideChildren:!1}),i("init",l),i("destroy",c)}var T$={on(n,e,t){const i=this;if(!i.eventsListeners||i.destroyed||typeof e!="function")return i;const r=t?"unshift":"push";return n.split(" ").forEach(s=>{i.eventsListeners[s]||(i.eventsListeners[s]=[]),i.eventsListeners[s][r](e)}),i},once(n,e,t){const i=this;if(!i.eventsListeners||i.destroyed||typeof e!="function")return i;function r(){i.off(n,r),r.__emitterProxy&&delete r.__emitterProxy;for(var s=arguments.length,o=new Array(s),a=0;a<s;a++)o[a]=arguments[a];e.apply(i,o)}return r.__emitterProxy=e,i.on(n,r,t)},onAny(n,e){const t=this;if(!t.eventsListeners||t.destroyed||typeof n!="function")return t;const i=e?"unshift":"push";return t.eventsAnyListeners.indexOf(n)<0&&t.eventsAnyListeners[i](n),t},offAny(n){const e=this;if(!e.eventsListeners||e.destroyed||!e.eventsAnyListeners)return e;const t=e.eventsAnyListeners.indexOf(n);return t>=0&&e.eventsAnyListeners.splice(t,1),e},off(n,e){const t=this;return!t.eventsListeners||t.destroyed||!t.eventsListeners||n.split(" ").forEach(i=>{typeof e>"u"?t.eventsListeners[i]=[]:t.eventsListeners[i]&&t.eventsListeners[i].forEach((r,s)=>{(r===e||r.__emitterProxy&&r.__emitterProxy===e)&&t.eventsListeners[i].splice(s,1)})}),t},emit(){const n=this;if(!n.eventsListeners||n.destroyed||!n.eventsListeners)return n;let e,t,i;for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return typeof s[0]=="string"||Array.isArray(s[0])?(e=s[0],t=s.slice(1,s.length),i=n):(e=s[0].events,t=s[0].data,i=s[0].context||n),t.unshift(i),(Array.isArray(e)?e:e.split(" ")).forEach(l=>{n.eventsAnyListeners&&n.eventsAnyListeners.length&&n.eventsAnyListeners.forEach(c=>{c.apply(i,[l,...t])}),n.eventsListeners&&n.eventsListeners[l]&&n.eventsListeners[l].forEach(c=>{c.apply(i,t)})}),n}};function E$(){const n=this;let e,t;const i=n.el;typeof n.params.width<"u"&&n.params.width!==null?e=n.params.width:e=i.clientWidth,typeof n.params.height<"u"&&n.params.height!==null?t=n.params.height:t=i.clientHeight,!(e===0&&n.isHorizontal()||t===0&&n.isVertical())&&(e=e-parseInt(kr(i,"padding-left")||0,10)-parseInt(kr(i,"padding-right")||0,10),t=t-parseInt(kr(i,"padding-top")||0,10)-parseInt(kr(i,"padding-bottom")||0,10),Number.isNaN(e)&&(e=0),Number.isNaN(t)&&(t=0),Object.assign(n,{width:e,height:t,size:n.isHorizontal()?e:t}))}function S$(){const n=this;function e(k,D){return parseFloat(k.getPropertyValue(n.getDirectionLabel(D))||0)}const t=n.params,{wrapperEl:i,slidesEl:r,size:s,rtlTranslate:o,wrongRTL:a}=n,l=n.virtual&&t.virtual.enabled,c=l?n.virtual.slides.length:n.slides.length,u=tr(r,`.${n.params.slideClass}, swiper-slide`),h=l?n.virtual.slides.length:u.length;let f=[];const d=[],_=[];let p=t.slidesOffsetBefore;typeof p=="function"&&(p=t.slidesOffsetBefore.call(n));let g=t.slidesOffsetAfter;typeof g=="function"&&(g=t.slidesOffsetAfter.call(n));const m=n.snapGrid.length,T=n.slidesGrid.length;let w=t.spaceBetween,S=-p,E=0,I=0;if(typeof s>"u")return;typeof w=="string"&&w.indexOf("%")>=0?w=parseFloat(w.replace("%",""))/100*s:typeof w=="string"&&(w=parseFloat(w)),n.virtualSize=-w,u.forEach(k=>{o?k.style.marginLeft="":k.style.marginRight="",k.style.marginBottom="",k.style.marginTop=""}),t.centeredSlides&&t.cssMode&&(Kc(i,"--swiper-centered-offset-before",""),Kc(i,"--swiper-centered-offset-after",""));const P=t.grid&&t.grid.rows>1&&n.grid;P?n.grid.initSlides(u):n.grid&&n.grid.unsetSlides();let x;const A=t.slidesPerView==="auto"&&t.breakpoints&&Object.keys(t.breakpoints).filter(k=>typeof t.breakpoints[k].slidesPerView<"u").length>0;for(let k=0;k<h;k+=1){x=0;let D;if(u[k]&&(D=u[k]),P&&n.grid.updateSlide(k,D,u),!(u[k]&&kr(D,"display")==="none")){if(t.slidesPerView==="auto"){A&&(u[k].style[n.getDirectionLabel("width")]="");const W=getComputedStyle(D),N=D.style.transform,de=D.style.webkitTransform;if(N&&(D.style.transform="none"),de&&(D.style.webkitTransform="none"),t.roundLengths)x=n.isHorizontal()?z0(D,"width",!0):z0(D,"height",!0);else{const fe=e(W,"width"),ne=e(W,"padding-left"),Z=e(W,"padding-right"),he=e(W,"margin-left"),St=e(W,"margin-right"),bt=W.getPropertyValue("box-sizing");if(bt&&bt==="border-box")x=fe+he+St;else{const{clientWidth:Ee,offsetWidth:_e}=D;x=fe+ne+Z+he+St+(_e-Ee)}}N&&(D.style.transform=N),de&&(D.style.webkitTransform=de),t.roundLengths&&(x=Math.floor(x))}else x=(s-(t.slidesPerView-1)*w)/t.slidesPerView,t.roundLengths&&(x=Math.floor(x)),u[k]&&(u[k].style[n.getDirectionLabel("width")]=`${x}px`);u[k]&&(u[k].swiperSlideSize=x),_.push(x),t.centeredSlides?(S=S+x/2+E/2+w,E===0&&k!==0&&(S=S-s/2-w),k===0&&(S=S-s/2-w),Math.abs(S)<1/1e3&&(S=0),t.roundLengths&&(S=Math.floor(S)),I%t.slidesPerGroup===0&&f.push(S),d.push(S)):(t.roundLengths&&(S=Math.floor(S)),(I-Math.min(n.params.slidesPerGroupSkip,I))%n.params.slidesPerGroup===0&&f.push(S),d.push(S),S=S+x+w),n.virtualSize+=x+w,E=x,I+=1}}if(n.virtualSize=Math.max(n.virtualSize,s)+g,o&&a&&(t.effect==="slide"||t.effect==="coverflow")&&(i.style.width=`${n.virtualSize+w}px`),t.setWrapperSize&&(i.style[n.getDirectionLabel("width")]=`${n.virtualSize+w}px`),P&&n.grid.updateWrapperSize(x,f),!t.centeredSlides){const k=[];for(let D=0;D<f.length;D+=1){let W=f[D];t.roundLengths&&(W=Math.floor(W)),f[D]<=n.virtualSize-s&&k.push(W)}f=k,Math.floor(n.virtualSize-s)-Math.floor(f[f.length-1])>1&&f.push(n.virtualSize-s)}if(l&&t.loop){const k=_[0]+w;if(t.slidesPerGroup>1){const D=Math.ceil((n.virtual.slidesBefore+n.virtual.slidesAfter)/t.slidesPerGroup),W=k*t.slidesPerGroup;for(let N=0;N<D;N+=1)f.push(f[f.length-1]+W)}for(let D=0;D<n.virtual.slidesBefore+n.virtual.slidesAfter;D+=1)t.slidesPerGroup===1&&f.push(f[f.length-1]+k),d.push(d[d.length-1]+k),n.virtualSize+=k}if(f.length===0&&(f=[0]),w!==0){const k=n.isHorizontal()&&o?"marginLeft":n.getDirectionLabel("marginRight");u.filter((D,W)=>!t.cssMode||t.loop?!0:W!==u.length-1).forEach(D=>{D.style[k]=`${w}px`})}if(t.centeredSlides&&t.centeredSlidesBounds){let k=0;_.forEach(W=>{k+=W+(w||0)}),k-=w;const D=k-s;f=f.map(W=>W<=0?-p:W>D?D+g:W)}if(t.centerInsufficientSlides){let k=0;if(_.forEach(D=>{k+=D+(w||0)}),k-=w,k<s){const D=(s-k)/2;f.forEach((W,N)=>{f[N]=W-D}),d.forEach((W,N)=>{d[N]=W+D})}}if(Object.assign(n,{slides:u,snapGrid:f,slidesGrid:d,slidesSizesGrid:_}),t.centeredSlides&&t.cssMode&&!t.centeredSlidesBounds){Kc(i,"--swiper-centered-offset-before",`${-f[0]}px`),Kc(i,"--swiper-centered-offset-after",`${n.size/2-_[_.length-1]/2}px`);const k=-n.snapGrid[0],D=-n.slidesGrid[0];n.snapGrid=n.snapGrid.map(W=>W+k),n.slidesGrid=n.slidesGrid.map(W=>W+D)}if(h!==c&&n.emit("slidesLengthChange"),f.length!==m&&(n.params.watchOverflow&&n.checkOverflow(),n.emit("snapGridLengthChange")),d.length!==T&&n.emit("slidesGridLengthChange"),t.watchSlidesProgress&&n.updateSlidesOffset(),n.emit("slidesUpdated"),!l&&!t.cssMode&&(t.effect==="slide"||t.effect==="fade")){const k=`${t.containerModifierClass}backface-hidden`,D=n.el.classList.contains(k);h<=t.maxBackfaceHiddenSlides?D||n.el.classList.add(k):D&&n.el.classList.remove(k)}}function b$(n){const e=this,t=[],i=e.virtual&&e.params.virtual.enabled;let r=0,s;typeof n=="number"?e.setTransition(n):n===!0&&e.setTransition(e.params.speed);const o=a=>i?e.slides[e.getSlideIndexByData(a)]:e.slides[a];if(e.params.slidesPerView!=="auto"&&e.params.slidesPerView>1)if(e.params.centeredSlides)(e.visibleSlides||[]).forEach(a=>{t.push(a)});else for(s=0;s<Math.ceil(e.params.slidesPerView);s+=1){const a=e.activeIndex+s;if(a>e.slides.length&&!i)break;t.push(o(a))}else t.push(o(e.activeIndex));for(s=0;s<t.length;s+=1)if(typeof t[s]<"u"){const a=t[s].offsetHeight;r=a>r?a:r}(r||r===0)&&(e.wrapperEl.style.height=`${r}px`)}function I$(){const n=this,e=n.slides,t=n.isElement?n.isHorizontal()?n.wrapperEl.offsetLeft:n.wrapperEl.offsetTop:0;for(let i=0;i<e.length;i+=1)e[i].swiperSlideOffset=(n.isHorizontal()?e[i].offsetLeft:e[i].offsetTop)-t-n.cssOverflowAdjustment()}function C$(n){n===void 0&&(n=this&&this.translate||0);const e=this,t=e.params,{slides:i,rtlTranslate:r,snapGrid:s}=e;if(i.length===0)return;typeof i[0].swiperSlideOffset>"u"&&e.updateSlidesOffset();let o=-n;r&&(o=n),i.forEach(l=>{l.classList.remove(t.slideVisibleClass,t.slideFullyVisibleClass)}),e.visibleSlidesIndexes=[],e.visibleSlides=[];let a=t.spaceBetween;typeof a=="string"&&a.indexOf("%")>=0?a=parseFloat(a.replace("%",""))/100*e.size:typeof a=="string"&&(a=parseFloat(a));for(let l=0;l<i.length;l+=1){const c=i[l];let u=c.swiperSlideOffset;t.cssMode&&t.centeredSlides&&(u-=i[0].swiperSlideOffset);const h=(o+(t.centeredSlides?e.minTranslate():0)-u)/(c.swiperSlideSize+a),f=(o-s[0]+(t.centeredSlides?e.minTranslate():0)-u)/(c.swiperSlideSize+a),d=-(o-u),_=d+e.slidesSizesGrid[l],p=d>=0&&d<=e.size-e.slidesSizesGrid[l];(d>=0&&d<e.size-1||_>1&&_<=e.size||d<=0&&_>=e.size)&&(e.visibleSlides.push(c),e.visibleSlidesIndexes.push(l),i[l].classList.add(t.slideVisibleClass)),p&&i[l].classList.add(t.slideFullyVisibleClass),c.progress=r?-h:h,c.originalProgress=r?-f:f}}function A$(n){const e=this;if(typeof n>"u"){const u=e.rtlTranslate?-1:1;n=e&&e.translate&&e.translate*u||0}const t=e.params,i=e.maxTranslate()-e.minTranslate();let{progress:r,isBeginning:s,isEnd:o,progressLoop:a}=e;const l=s,c=o;if(i===0)r=0,s=!0,o=!0;else{r=(n-e.minTranslate())/i;const u=Math.abs(n-e.minTranslate())<1,h=Math.abs(n-e.maxTranslate())<1;s=u||r<=0,o=h||r>=1,u&&(r=0),h&&(r=1)}if(t.loop){const u=e.getSlideIndexByData(0),h=e.getSlideIndexByData(e.slides.length-1),f=e.slidesGrid[u],d=e.slidesGrid[h],_=e.slidesGrid[e.slidesGrid.length-1],p=Math.abs(n);p>=f?a=(p-f)/_:a=(p+_-d)/_,a>1&&(a-=1)}Object.assign(e,{progress:r,progressLoop:a,isBeginning:s,isEnd:o}),(t.watchSlidesProgress||t.centeredSlides&&t.autoHeight)&&e.updateSlidesProgress(n),s&&!l&&e.emit("reachBeginning toEdge"),o&&!c&&e.emit("reachEnd toEdge"),(l&&!s||c&&!o)&&e.emit("fromEdge"),e.emit("progress",r)}const Jd=(n,e,t)=>{e&&!n.classList.contains(t)?n.classList.add(t):!e&&n.classList.contains(t)&&n.classList.remove(t)};function x$(){const n=this,{slides:e,params:t,slidesEl:i,activeIndex:r}=n,s=n.virtual&&t.virtual.enabled,o=n.grid&&t.grid&&t.grid.rows>1,a=h=>tr(i,`.${t.slideClass}${h}, swiper-slide${h}`)[0];let l,c,u;if(s)if(t.loop){let h=r-n.virtual.slidesBefore;h<0&&(h=n.virtual.slides.length+h),h>=n.virtual.slides.length&&(h-=n.virtual.slides.length),l=a(`[data-swiper-slide-index="${h}"]`)}else l=a(`[data-swiper-slide-index="${r}"]`);else o?(l=e.filter(h=>h.column===r)[0],u=e.filter(h=>h.column===r+1)[0],c=e.filter(h=>h.column===r-1)[0]):l=e[r];l&&(o||(u=f$(l,`.${t.slideClass}, swiper-slide`)[0],t.loop&&!u&&(u=e[0]),c=d$(l,`.${t.slideClass}, swiper-slide`)[0],t.loop&&!c===0&&(c=e[e.length-1]))),e.forEach(h=>{Jd(h,h===l,t.slideActiveClass),Jd(h,h===u,t.slideNextClass),Jd(h,h===c,t.slidePrevClass)}),n.emitSlidesClasses()}const uu=(n,e)=>{if(!n||n.destroyed||!n.params)return;const t=()=>n.isElement?"swiper-slide":`.${n.params.slideClass}`,i=e.closest(t());if(i){let r=i.querySelector(`.${n.params.lazyPreloaderClass}`);!r&&n.isElement&&(i.shadowRoot?r=i.shadowRoot.querySelector(`.${n.params.lazyPreloaderClass}`):requestAnimationFrame(()=>{i.shadowRoot&&(r=i.shadowRoot.querySelector(`.${n.params.lazyPreloaderClass}`),r&&r.remove())})),r&&r.remove()}},Zd=(n,e)=>{if(!n.slides[e])return;const t=n.slides[e].querySelector('[loading="lazy"]');t&&t.removeAttribute("loading")},Up=n=>{if(!n||n.destroyed||!n.params)return;let e=n.params.lazyPreloadPrevNext;const t=n.slides.length;if(!t||!e||e<0)return;e=Math.min(e,t);const i=n.params.slidesPerView==="auto"?n.slidesPerViewDynamic():Math.ceil(n.params.slidesPerView),r=n.activeIndex;if(n.params.grid&&n.params.grid.rows>1){const o=r,a=[o-e];a.push(...Array.from({length:e}).map((l,c)=>o+i+c)),n.slides.forEach((l,c)=>{a.includes(l.column)&&Zd(n,c)});return}const s=r+i-1;if(n.params.rewind||n.params.loop)for(let o=r-e;o<=s+e;o+=1){const a=(o%t+t)%t;(a<r||a>s)&&Zd(n,a)}else for(let o=Math.max(r-e,0);o<=Math.min(s+e,t-1);o+=1)o!==r&&(o>s||o<r)&&Zd(n,o)};function R$(n){const{slidesGrid:e,params:t}=n,i=n.rtlTranslate?n.translate:-n.translate;let r;for(let s=0;s<e.length;s+=1)typeof e[s+1]<"u"?i>=e[s]&&i<e[s+1]-(e[s+1]-e[s])/2?r=s:i>=e[s]&&i<e[s+1]&&(r=s+1):i>=e[s]&&(r=s);return t.normalizeSlideIndex&&(r<0||typeof r>"u")&&(r=0),r}function P$(n){const e=this,t=e.rtlTranslate?e.translate:-e.translate,{snapGrid:i,params:r,activeIndex:s,realIndex:o,snapIndex:a}=e;let l=n,c;const u=d=>{let _=d-e.virtual.slidesBefore;return _<0&&(_=e.virtual.slides.length+_),_>=e.virtual.slides.length&&(_-=e.virtual.slides.length),_};if(typeof l>"u"&&(l=R$(e)),i.indexOf(t)>=0)c=i.indexOf(t);else{const d=Math.min(r.slidesPerGroupSkip,l);c=d+Math.floor((l-d)/r.slidesPerGroup)}if(c>=i.length&&(c=i.length-1),l===s&&!e.params.loop){c!==a&&(e.snapIndex=c,e.emit("snapIndexChange"));return}if(l===s&&e.params.loop&&e.virtual&&e.params.virtual.enabled){e.realIndex=u(l);return}const h=e.grid&&r.grid&&r.grid.rows>1;let f;if(e.virtual&&r.virtual.enabled&&r.loop)f=u(l);else if(h){const d=e.slides.filter(p=>p.column===l)[0];let _=parseInt(d.getAttribute("data-swiper-slide-index"),10);Number.isNaN(_)&&(_=Math.max(e.slides.indexOf(d),0)),f=Math.floor(_/r.grid.rows)}else if(e.slides[l]){const d=e.slides[l].getAttribute("data-swiper-slide-index");d?f=parseInt(d,10):f=l}else f=l;Object.assign(e,{previousSnapIndex:a,snapIndex:c,previousRealIndex:o,realIndex:f,previousIndex:s,activeIndex:l}),e.initialized&&Up(e),e.emit("activeIndexChange"),e.emit("snapIndexChange"),(e.initialized||e.params.runCallbacksOnInit)&&(o!==f&&e.emit("realIndexChange"),e.emit("slideChange"))}function O$(n,e){const t=this,i=t.params;let r=n.closest(`.${i.slideClass}, swiper-slide`);!r&&t.isElement&&e&&e.length>1&&e.includes(n)&&[...e.slice(e.indexOf(n)+1,e.length)].forEach(a=>{!r&&a.matches&&a.matches(`.${i.slideClass}, swiper-slide`)&&(r=a)});let s=!1,o;if(r){for(let a=0;a<t.slides.length;a+=1)if(t.slides[a]===r){s=!0,o=a;break}}if(r&&s)t.clickedSlide=r,t.virtual&&t.params.virtual.enabled?t.clickedIndex=parseInt(r.getAttribute("data-swiper-slide-index"),10):t.clickedIndex=o;else{t.clickedSlide=void 0,t.clickedIndex=void 0;return}i.slideToClickedSlide&&t.clickedIndex!==void 0&&t.clickedIndex!==t.activeIndex&&t.slideToClickedSlide()}var k$={updateSize:E$,updateSlides:S$,updateAutoHeight:b$,updateSlidesOffset:I$,updateSlidesProgress:C$,updateProgress:A$,updateSlidesClasses:x$,updateActiveIndex:P$,updateClickedSlide:O$};function N$(n){n===void 0&&(n=this.isHorizontal()?"x":"y");const e=this,{params:t,rtlTranslate:i,translate:r,wrapperEl:s}=e;if(t.virtualTranslate)return i?-r:r;if(t.cssMode)return r;let o=u$(s,n);return o+=e.cssOverflowAdjustment(),i&&(o=-o),o||0}function M$(n,e){const t=this,{rtlTranslate:i,params:r,wrapperEl:s,progress:o}=t;let a=0,l=0;const c=0;t.isHorizontal()?a=i?-n:n:l=n,r.roundLengths&&(a=Math.floor(a),l=Math.floor(l)),t.previousTranslate=t.translate,t.translate=t.isHorizontal()?a:l,r.cssMode?s[t.isHorizontal()?"scrollLeft":"scrollTop"]=t.isHorizontal()?-a:-l:r.virtualTranslate||(t.isHorizontal()?a-=t.cssOverflowAdjustment():l-=t.cssOverflowAdjustment(),s.style.transform=`translate3d(${a}px, ${l}px, ${c}px)`);let u;const h=t.maxTranslate()-t.minTranslate();h===0?u=0:u=(n-t.minTranslate())/h,u!==o&&t.updateProgress(n),t.emit("setTranslate",t.translate,e)}function D$(){return-this.snapGrid[0]}function L$(){return-this.snapGrid[this.snapGrid.length-1]}function V$(n,e,t,i,r){n===void 0&&(n=0),e===void 0&&(e=this.params.speed),t===void 0&&(t=!0),i===void 0&&(i=!0);const s=this,{params:o,wrapperEl:a}=s;if(s.animating&&o.preventInteractionOnTransition)return!1;const l=s.minTranslate(),c=s.maxTranslate();let u;if(i&&n>l?u=l:i&&n<c?u=c:u=n,s.updateProgress(u),o.cssMode){const h=s.isHorizontal();if(e===0)a[h?"scrollLeft":"scrollTop"]=-u;else{if(!s.support.smoothScroll)return sC({swiper:s,targetPosition:-u,side:h?"left":"top"}),!0;a.scrollTo({[h?"left":"top"]:-u,behavior:"smooth"})}return!0}return e===0?(s.setTransition(0),s.setTranslate(u),t&&(s.emit("beforeTransitionStart",e,r),s.emit("transitionEnd"))):(s.setTransition(e),s.setTranslate(u),t&&(s.emit("beforeTransitionStart",e,r),s.emit("transitionStart")),s.animating||(s.animating=!0,s.onTranslateToWrapperTransitionEnd||(s.onTranslateToWrapperTransitionEnd=function(f){!s||s.destroyed||f.target===this&&(s.wrapperEl.removeEventListener("transitionend",s.onTranslateToWrapperTransitionEnd),s.onTranslateToWrapperTransitionEnd=null,delete s.onTranslateToWrapperTransitionEnd,s.animating=!1,t&&s.emit("transitionEnd"))}),s.wrapperEl.addEventListener("transitionend",s.onTranslateToWrapperTransitionEnd))),!0}var F$={getTranslate:N$,setTranslate:M$,minTranslate:D$,maxTranslate:L$,translateTo:V$};function U$(n,e){const t=this;t.params.cssMode||(t.wrapperEl.style.transitionDuration=`${n}ms`,t.wrapperEl.style.transitionDelay=n===0?"0ms":""),t.emit("setTransition",n,e)}function lC(n){let{swiper:e,runCallbacks:t,direction:i,step:r}=n;const{activeIndex:s,previousIndex:o}=e;let a=i;if(a||(s>o?a="next":s<o?a="prev":a="reset"),e.emit(`transition${r}`),t&&s!==o){if(a==="reset"){e.emit(`slideResetTransition${r}`);return}e.emit(`slideChangeTransition${r}`),a==="next"?e.emit(`slideNextTransition${r}`):e.emit(`slidePrevTransition${r}`)}}function $$(n,e){n===void 0&&(n=!0);const t=this,{params:i}=t;i.cssMode||(i.autoHeight&&t.updateAutoHeight(),lC({swiper:t,runCallbacks:n,direction:e,step:"Start"}))}function B$(n,e){n===void 0&&(n=!0);const t=this,{params:i}=t;t.animating=!1,!i.cssMode&&(t.setTransition(0),lC({swiper:t,runCallbacks:n,direction:e,step:"End"}))}var z$={setTransition:U$,transitionStart:$$,transitionEnd:B$};function j$(n,e,t,i,r){n===void 0&&(n=0),t===void 0&&(t=!0),typeof n=="string"&&(n=parseInt(n,10));const s=this;let o=n;o<0&&(o=0);const{params:a,snapGrid:l,slidesGrid:c,previousIndex:u,activeIndex:h,rtlTranslate:f,wrapperEl:d,enabled:_}=s;if(!_&&!i&&!r||s.destroyed||s.animating&&a.preventInteractionOnTransition)return!1;typeof e>"u"&&(e=s.params.speed);const p=Math.min(s.params.slidesPerGroupSkip,o);let g=p+Math.floor((o-p)/s.params.slidesPerGroup);g>=l.length&&(g=l.length-1);const m=-l[g];if(a.normalizeSlideIndex)for(let w=0;w<c.length;w+=1){const S=-Math.floor(m*100),E=Math.floor(c[w]*100),I=Math.floor(c[w+1]*100);typeof c[w+1]<"u"?S>=E&&S<I-(I-E)/2?o=w:S>=E&&S<I&&(o=w+1):S>=E&&(o=w)}if(s.initialized&&o!==h&&(!s.allowSlideNext&&(f?m>s.translate&&m>s.minTranslate():m<s.translate&&m<s.minTranslate())||!s.allowSlidePrev&&m>s.translate&&m>s.maxTranslate()&&(h||0)!==o))return!1;o!==(u||0)&&t&&s.emit("beforeSlideChangeStart"),s.updateProgress(m);let T;if(o>h?T="next":o<h?T="prev":T="reset",f&&-m===s.translate||!f&&m===s.translate)return s.updateActiveIndex(o),a.autoHeight&&s.updateAutoHeight(),s.updateSlidesClasses(),a.effect!=="slide"&&s.setTranslate(m),T!=="reset"&&(s.transitionStart(t,T),s.transitionEnd(t,T)),!1;if(a.cssMode){const w=s.isHorizontal(),S=f?m:-m;if(e===0){const E=s.virtual&&s.params.virtual.enabled;E&&(s.wrapperEl.style.scrollSnapType="none",s._immediateVirtual=!0),E&&!s._cssModeVirtualInitialSet&&s.params.initialSlide>0?(s._cssModeVirtualInitialSet=!0,requestAnimationFrame(()=>{d[w?"scrollLeft":"scrollTop"]=S})):d[w?"scrollLeft":"scrollTop"]=S,E&&requestAnimationFrame(()=>{s.wrapperEl.style.scrollSnapType="",s._immediateVirtual=!1})}else{if(!s.support.smoothScroll)return sC({swiper:s,targetPosition:S,side:w?"left":"top"}),!0;d.scrollTo({[w?"left":"top"]:S,behavior:"smooth"})}return!0}return s.setTransition(e),s.setTranslate(m),s.updateActiveIndex(o),s.updateSlidesClasses(),s.emit("beforeTransitionStart",e,i),s.transitionStart(t,T),e===0?s.transitionEnd(t,T):s.animating||(s.animating=!0,s.onSlideToWrapperTransitionEnd||(s.onSlideToWrapperTransitionEnd=function(S){!s||s.destroyed||S.target===this&&(s.wrapperEl.removeEventListener("transitionend",s.onSlideToWrapperTransitionEnd),s.onSlideToWrapperTransitionEnd=null,delete s.onSlideToWrapperTransitionEnd,s.transitionEnd(t,T))}),s.wrapperEl.addEventListener("transitionend",s.onSlideToWrapperTransitionEnd)),!0}function G$(n,e,t,i){n===void 0&&(n=0),t===void 0&&(t=!0),typeof n=="string"&&(n=parseInt(n,10));const r=this;if(r.destroyed)return;typeof e>"u"&&(e=r.params.speed);const s=r.grid&&r.params.grid&&r.params.grid.rows>1;let o=n;if(r.params.loop)if(r.virtual&&r.params.virtual.enabled)o=o+r.virtual.slidesBefore;else{let a;if(s){const f=o*r.params.grid.rows;a=r.slides.filter(d=>d.getAttribute("data-swiper-slide-index")*1===f)[0].column}else a=r.getSlideIndexByData(o);const l=s?Math.ceil(r.slides.length/r.params.grid.rows):r.slides.length,{centeredSlides:c}=r.params;let u=r.params.slidesPerView;u==="auto"?u=r.slidesPerViewDynamic():(u=Math.ceil(parseFloat(r.params.slidesPerView,10)),c&&u%2===0&&(u=u+1));let h=l-a<u;if(c&&(h=h||a<Math.ceil(u/2)),i&&c&&r.params.slidesPerView!=="auto"&&!s&&(h=!1),h){const f=c?a<r.activeIndex?"prev":"next":a-r.activeIndex-1<r.params.slidesPerView?"next":"prev";r.loopFix({direction:f,slideTo:!0,activeSlideIndex:f==="next"?a+1:a-l+1,slideRealIndex:f==="next"?r.realIndex:void 0})}if(s){const f=o*r.params.grid.rows;o=r.slides.filter(d=>d.getAttribute("data-swiper-slide-index")*1===f)[0].column}else o=r.getSlideIndexByData(o)}return requestAnimationFrame(()=>{r.slideTo(o,e,t,i)}),r}function H$(n,e,t){e===void 0&&(e=!0);const i=this,{enabled:r,params:s,animating:o}=i;if(!r||i.destroyed)return i;typeof n>"u"&&(n=i.params.speed);let a=s.slidesPerGroup;s.slidesPerView==="auto"&&s.slidesPerGroup===1&&s.slidesPerGroupAuto&&(a=Math.max(i.slidesPerViewDynamic("current",!0),1));const l=i.activeIndex<s.slidesPerGroupSkip?1:a,c=i.virtual&&s.virtual.enabled;if(s.loop){if(o&&!c&&s.loopPreventsSliding)return!1;if(i.loopFix({direction:"next"}),i._clientLeft=i.wrapperEl.clientLeft,i.activeIndex===i.slides.length-1&&s.cssMode)return requestAnimationFrame(()=>{i.slideTo(i.activeIndex+l,n,e,t)}),!0}return s.rewind&&i.isEnd?i.slideTo(0,n,e,t):i.slideTo(i.activeIndex+l,n,e,t)}function q$(n,e,t){e===void 0&&(e=!0);const i=this,{params:r,snapGrid:s,slidesGrid:o,rtlTranslate:a,enabled:l,animating:c}=i;if(!l||i.destroyed)return i;typeof n>"u"&&(n=i.params.speed);const u=i.virtual&&r.virtual.enabled;if(r.loop){if(c&&!u&&r.loopPreventsSliding)return!1;i.loopFix({direction:"prev"}),i._clientLeft=i.wrapperEl.clientLeft}const h=a?i.translate:-i.translate;function f(m){return m<0?-Math.floor(Math.abs(m)):Math.floor(m)}const d=f(h),_=s.map(m=>f(m));let p=s[_.indexOf(d)-1];if(typeof p>"u"&&r.cssMode){let m;s.forEach((T,w)=>{d>=T&&(m=w)}),typeof m<"u"&&(p=s[m>0?m-1:m])}let g=0;if(typeof p<"u"&&(g=o.indexOf(p),g<0&&(g=i.activeIndex-1),r.slidesPerView==="auto"&&r.slidesPerGroup===1&&r.slidesPerGroupAuto&&(g=g-i.slidesPerViewDynamic("previous",!0)+1,g=Math.max(g,0))),r.rewind&&i.isBeginning){const m=i.params.virtual&&i.params.virtual.enabled&&i.virtual?i.virtual.slides.length-1:i.slides.length-1;return i.slideTo(m,n,e,t)}else if(r.loop&&i.activeIndex===0&&r.cssMode)return requestAnimationFrame(()=>{i.slideTo(g,n,e,t)}),!0;return i.slideTo(g,n,e,t)}function W$(n,e,t){e===void 0&&(e=!0);const i=this;if(!i.destroyed)return typeof n>"u"&&(n=i.params.speed),i.slideTo(i.activeIndex,n,e,t)}function K$(n,e,t,i){e===void 0&&(e=!0),i===void 0&&(i=.5);const r=this;if(r.destroyed)return;typeof n>"u"&&(n=r.params.speed);let s=r.activeIndex;const o=Math.min(r.params.slidesPerGroupSkip,s),a=o+Math.floor((s-o)/r.params.slidesPerGroup),l=r.rtlTranslate?r.translate:-r.translate;if(l>=r.snapGrid[a]){const c=r.snapGrid[a],u=r.snapGrid[a+1];l-c>(u-c)*i&&(s+=r.params.slidesPerGroup)}else{const c=r.snapGrid[a-1],u=r.snapGrid[a];l-c<=(u-c)*i&&(s-=r.params.slidesPerGroup)}return s=Math.max(s,0),s=Math.min(s,r.slidesGrid.length-1),r.slideTo(s,n,e,t)}function Y$(){const n=this;if(n.destroyed)return;const{params:e,slidesEl:t}=n,i=e.slidesPerView==="auto"?n.slidesPerViewDynamic():e.slidesPerView;let r=n.clickedIndex,s;const o=n.isElement?"swiper-slide":`.${e.slideClass}`;if(e.loop){if(n.animating)return;s=parseInt(n.clickedSlide.getAttribute("data-swiper-slide-index"),10),e.centeredSlides?r<n.loopedSlides-i/2||r>n.slides.length-n.loopedSlides+i/2?(n.loopFix(),r=n.getSlideIndex(tr(t,`${o}[data-swiper-slide-index="${s}"]`)[0]),Vp(()=>{n.slideTo(r)})):n.slideTo(r):r>n.slides.length-i?(n.loopFix(),r=n.getSlideIndex(tr(t,`${o}[data-swiper-slide-index="${s}"]`)[0]),Vp(()=>{n.slideTo(r)})):n.slideTo(r)}else n.slideTo(r)}var X$={slideTo:j$,slideToLoop:G$,slideNext:H$,slidePrev:q$,slideReset:W$,slideToClosest:K$,slideToClickedSlide:Y$};function Q$(n){const e=this,{params:t,slidesEl:i}=e;if(!t.loop||e.virtual&&e.params.virtual.enabled)return;const r=()=>{tr(i,`.${t.slideClass}, swiper-slide`).forEach((h,f)=>{h.setAttribute("data-swiper-slide-index",f)})},s=e.grid&&t.grid&&t.grid.rows>1,o=t.slidesPerGroup*(s?t.grid.rows:1),a=e.slides.length%o!==0,l=s&&e.slides.length%t.grid.rows!==0,c=u=>{for(let h=0;h<u;h+=1){const f=e.isElement?Fp("swiper-slide",[t.slideBlankClass]):Fp("div",[t.slideClass,t.slideBlankClass]);e.slidesEl.append(f)}};if(a){if(t.loopAddBlankSlides){const u=o-e.slides.length%o;c(u),e.recalcSlides(),e.updateSlides()}else Zu("Swiper Loop Warning: The number of slides is not even to slidesPerGroup, loop mode may not function properly. You need to add more slides (or make duplicates, or empty slides)");r()}else if(l){if(t.loopAddBlankSlides){const u=t.grid.rows-e.slides.length%t.grid.rows;c(u),e.recalcSlides(),e.updateSlides()}else Zu("Swiper Loop Warning: The number of slides is not even to grid.rows, loop mode may not function properly. You need to add more slides (or make duplicates, or empty slides)");r()}else r();e.loopFix({slideRealIndex:n,direction:t.centeredSlides?void 0:"next"})}function J$(n){let{slideRealIndex:e,slideTo:t=!0,direction:i,setTranslate:r,activeSlideIndex:s,byController:o,byMousewheel:a}=n===void 0?{}:n;const l=this;if(!l.params.loop)return;l.emit("beforeLoopFix");const{slides:c,allowSlidePrev:u,allowSlideNext:h,slidesEl:f,params:d}=l,{centeredSlides:_}=d;if(l.allowSlidePrev=!0,l.allowSlideNext=!0,l.virtual&&d.virtual.enabled){t&&(!d.centeredSlides&&l.snapIndex===0?l.slideTo(l.virtual.slides.length,0,!1,!0):d.centeredSlides&&l.snapIndex<d.slidesPerView?l.slideTo(l.virtual.slides.length+l.snapIndex,0,!1,!0):l.snapIndex===l.snapGrid.length-1&&l.slideTo(l.virtual.slidesBefore,0,!1,!0)),l.allowSlidePrev=u,l.allowSlideNext=h,l.emit("loopFix");return}let p=d.slidesPerView;p==="auto"?p=l.slidesPerViewDynamic():(p=Math.ceil(parseFloat(d.slidesPerView,10)),_&&p%2===0&&(p=p+1));const g=d.slidesPerGroupAuto?p:d.slidesPerGroup;let m=g;m%g!==0&&(m+=g-m%g),m+=d.loopAdditionalSlides,l.loopedSlides=m;const T=l.grid&&d.grid&&d.grid.rows>1;c.length<p+m?Zu("Swiper Loop Warning: The number of slides is not enough for loop mode, it will be disabled and not function properly. You need to add more slides (or make duplicates) or lower the values of slidesPerView and slidesPerGroup parameters"):T&&d.grid.fill==="row"&&Zu("Swiper Loop Warning: Loop mode is not compatible with grid.fill = `row`");const w=[],S=[];let E=l.activeIndex;typeof s>"u"?s=l.getSlideIndex(c.filter(N=>N.classList.contains(d.slideActiveClass))[0]):E=s;const I=i==="next"||!i,P=i==="prev"||!i;let x=0,A=0;const k=T?Math.ceil(c.length/d.grid.rows):c.length,W=(T?c[s].column:s)+(_&&typeof r>"u"?-p/2+.5:0);if(W<m){x=Math.max(m-W,g);for(let N=0;N<m-W;N+=1){const de=N-Math.floor(N/k)*k;if(T){const fe=k-de-1;for(let ne=c.length-1;ne>=0;ne-=1)c[ne].column===fe&&w.push(ne)}else w.push(k-de-1)}}else if(W+p>k-m){A=Math.max(W-(k-m*2),g);for(let N=0;N<A;N+=1){const de=N-Math.floor(N/k)*k;T?c.forEach((fe,ne)=>{fe.column===de&&S.push(ne)}):S.push(de)}}if(l.__preventObserver__=!0,requestAnimationFrame(()=>{l.__preventObserver__=!1}),P&&w.forEach(N=>{c[N].swiperLoopMoveDOM=!0,f.prepend(c[N]),c[N].swiperLoopMoveDOM=!1}),I&&S.forEach(N=>{c[N].swiperLoopMoveDOM=!0,f.append(c[N]),c[N].swiperLoopMoveDOM=!1}),l.recalcSlides(),d.slidesPerView==="auto"?l.updateSlides():T&&(w.length>0&&P||S.length>0&&I)&&l.slides.forEach((N,de)=>{l.grid.updateSlide(de,N,l.slides)}),d.watchSlidesProgress&&l.updateSlidesOffset(),t){if(w.length>0&&P){if(typeof e>"u"){const N=l.slidesGrid[E],fe=l.slidesGrid[E+x]-N;a?l.setTranslate(l.translate-fe):(l.slideTo(E+Math.ceil(x),0,!1,!0),r&&(l.touchEventsData.startTranslate=l.touchEventsData.startTranslate-fe,l.touchEventsData.currentTranslate=l.touchEventsData.currentTranslate-fe))}else if(r){const N=T?w.length/d.grid.rows:w.length;l.slideTo(l.activeIndex+N,0,!1,!0),l.touchEventsData.currentTranslate=l.translate}}else if(S.length>0&&I)if(typeof e>"u"){const N=l.slidesGrid[E],fe=l.slidesGrid[E-A]-N;a?l.setTranslate(l.translate-fe):(l.slideTo(E-A,0,!1,!0),r&&(l.touchEventsData.startTranslate=l.touchEventsData.startTranslate-fe,l.touchEventsData.currentTranslate=l.touchEventsData.currentTranslate-fe))}else{const N=T?S.length/d.grid.rows:S.length;l.slideTo(l.activeIndex-N,0,!1,!0)}}if(l.allowSlidePrev=u,l.allowSlideNext=h,l.controller&&l.controller.control&&!o){const N={slideRealIndex:e,direction:i,setTranslate:r,activeSlideIndex:s,byController:!0};Array.isArray(l.controller.control)?l.controller.control.forEach(de=>{!de.destroyed&&de.params.loop&&de.loopFix({...N,slideTo:de.params.slidesPerView===d.slidesPerView?t:!1})}):l.controller.control instanceof l.constructor&&l.controller.control.params.loop&&l.controller.control.loopFix({...N,slideTo:l.controller.control.params.slidesPerView===d.slidesPerView?t:!1})}l.emit("loopFix")}function Z$(){const n=this,{params:e,slidesEl:t}=n;if(!e.loop||n.virtual&&n.params.virtual.enabled)return;n.recalcSlides();const i=[];n.slides.forEach(r=>{const s=typeof r.swiperSlideIndex>"u"?r.getAttribute("data-swiper-slide-index")*1:r.swiperSlideIndex;i[s]=r}),n.slides.forEach(r=>{r.removeAttribute("data-swiper-slide-index")}),i.forEach(r=>{t.append(r)}),n.recalcSlides(),n.slideTo(n.realIndex,0)}var eB={loopCreate:Q$,loopFix:J$,loopDestroy:Z$};function tB(n){const e=this;if(!e.params.simulateTouch||e.params.watchOverflow&&e.isLocked||e.params.cssMode)return;const t=e.params.touchEventsTarget==="container"?e.el:e.wrapperEl;e.isElement&&(e.__preventObserver__=!0),t.style.cursor="move",t.style.cursor=n?"grabbing":"grab",e.isElement&&requestAnimationFrame(()=>{e.__preventObserver__=!1})}function nB(){const n=this;n.params.watchOverflow&&n.isLocked||n.params.cssMode||(n.isElement&&(n.__preventObserver__=!0),n[n.params.touchEventsTarget==="container"?"el":"wrapperEl"].style.cursor="",n.isElement&&requestAnimationFrame(()=>{n.__preventObserver__=!1}))}var iB={setGrabCursor:tB,unsetGrabCursor:nB};function rB(n,e){e===void 0&&(e=this);function t(i){if(!i||i===Ia()||i===zn())return null;i.assignedSlot&&(i=i.assignedSlot);const r=i.closest(n);return!r&&!i.getRootNode?null:r||t(i.getRootNode().host)}return t(e)}function j0(n,e,t){const i=zn(),{params:r}=n,s=r.edgeSwipeDetection,o=r.edgeSwipeThreshold;return s&&(t<=o||t>=i.innerWidth-o)?s==="prevent"?(e.preventDefault(),!0):!1:!0}function sB(n){const e=this,t=Ia();let i=n;i.originalEvent&&(i=i.originalEvent);const r=e.touchEventsData;if(i.type==="pointerdown"){if(r.pointerId!==null&&r.pointerId!==i.pointerId)return;r.pointerId=i.pointerId}else i.type==="touchstart"&&i.targetTouches.length===1&&(r.touchId=i.targetTouches[0].identifier);if(i.type==="touchstart"){j0(e,i,i.targetTouches[0].pageX);return}const{params:s,touches:o,enabled:a}=e;if(!a||!s.simulateTouch&&i.pointerType==="mouse"||e.animating&&s.preventInteractionOnTransition)return;!e.animating&&s.cssMode&&s.loop&&e.loopFix();let l=i.target;if(s.touchEventsTarget==="wrapper"&&!e.wrapperEl.contains(l)||"which"in i&&i.which===3||"button"in i&&i.button>0||r.isTouched&&r.isMoved)return;const c=!!s.noSwipingClass&&s.noSwipingClass!=="",u=i.composedPath?i.composedPath():i.path;c&&i.target&&i.target.shadowRoot&&u&&(l=u[0]);const h=s.noSwipingSelector?s.noSwipingSelector:`.${s.noSwipingClass}`,f=!!(i.target&&i.target.shadowRoot);if(s.noSwiping&&(f?rB(h,l):l.closest(h))){e.allowClick=!0;return}if(s.swipeHandler&&!l.closest(s.swipeHandler))return;o.currentX=i.pageX,o.currentY=i.pageY;const d=o.currentX,_=o.currentY;if(!j0(e,i,d))return;Object.assign(r,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),o.startX=d,o.startY=_,r.touchStartTime=Ju(),e.allowClick=!0,e.updateSize(),e.swipeDirection=void 0,s.threshold>0&&(r.allowThresholdMove=!1);let p=!0;l.matches(r.focusableElements)&&(p=!1,l.nodeName==="SELECT"&&(r.isTouched=!1)),t.activeElement&&t.activeElement.matches(r.focusableElements)&&t.activeElement!==l&&t.activeElement.blur();const g=p&&e.allowTouchMove&&s.touchStartPreventDefault;(s.touchStartForcePreventDefault||g)&&!l.isContentEditable&&i.preventDefault(),s.freeMode&&s.freeMode.enabled&&e.freeMode&&e.animating&&!s.cssMode&&e.freeMode.onTouchStart(),e.emit("touchStart",i)}function oB(n){const e=Ia(),t=this,i=t.touchEventsData,{params:r,touches:s,rtlTranslate:o,enabled:a}=t;if(!a||!r.simulateTouch&&n.pointerType==="mouse")return;let l=n;if(l.originalEvent&&(l=l.originalEvent),l.type==="pointermove"&&(i.touchId!==null||l.pointerId!==i.pointerId))return;let c;if(l.type==="touchmove"){if(c=[...l.changedTouches].filter(I=>I.identifier===i.touchId)[0],!c||c.identifier!==i.touchId)return}else c=l;if(!i.isTouched){i.startMoving&&i.isScrolling&&t.emit("touchMoveOpposite",l);return}const u=c.pageX,h=c.pageY;if(l.preventedByNestedSwiper){s.startX=u,s.startY=h;return}if(!t.allowTouchMove){l.target.matches(i.focusableElements)||(t.allowClick=!1),i.isTouched&&(Object.assign(s,{startX:u,startY:h,currentX:u,currentY:h}),i.touchStartTime=Ju());return}if(r.touchReleaseOnEdges&&!r.loop){if(t.isVertical()){if(h<s.startY&&t.translate<=t.maxTranslate()||h>s.startY&&t.translate>=t.minTranslate()){i.isTouched=!1,i.isMoved=!1;return}}else if(u<s.startX&&t.translate<=t.maxTranslate()||u>s.startX&&t.translate>=t.minTranslate())return}if(e.activeElement&&l.target===e.activeElement&&l.target.matches(i.focusableElements)){i.isMoved=!0,t.allowClick=!1;return}i.allowTouchCallbacks&&t.emit("touchMove",l),s.previousX=s.currentX,s.previousY=s.currentY,s.currentX=u,s.currentY=h;const f=s.currentX-s.startX,d=s.currentY-s.startY;if(t.params.threshold&&Math.sqrt(f**2+d**2)<t.params.threshold)return;if(typeof i.isScrolling>"u"){let I;t.isHorizontal()&&s.currentY===s.startY||t.isVertical()&&s.currentX===s.startX?i.isScrolling=!1:f*f+d*d>=25&&(I=Math.atan2(Math.abs(d),Math.abs(f))*180/Math.PI,i.isScrolling=t.isHorizontal()?I>r.touchAngle:90-I>r.touchAngle)}if(i.isScrolling&&t.emit("touchMoveOpposite",l),typeof i.startMoving>"u"&&(s.currentX!==s.startX||s.currentY!==s.startY)&&(i.startMoving=!0),i.isScrolling||l.type==="touchmove"&&i.preventTouchMoveFromPointerMove){i.isTouched=!1;return}if(!i.startMoving)return;t.allowClick=!1,!r.cssMode&&l.cancelable&&l.preventDefault(),r.touchMoveStopPropagation&&!r.nested&&l.stopPropagation();let _=t.isHorizontal()?f:d,p=t.isHorizontal()?s.currentX-s.previousX:s.currentY-s.previousY;r.oneWayMovement&&(_=Math.abs(_)*(o?1:-1),p=Math.abs(p)*(o?1:-1)),s.diff=_,_*=r.touchRatio,o&&(_=-_,p=-p);const g=t.touchesDirection;t.swipeDirection=_>0?"prev":"next",t.touchesDirection=p>0?"prev":"next";const m=t.params.loop&&!r.cssMode,T=t.touchesDirection==="next"&&t.allowSlideNext||t.touchesDirection==="prev"&&t.allowSlidePrev;if(!i.isMoved){if(m&&T&&t.loopFix({direction:t.swipeDirection}),i.startTranslate=t.getTranslate(),t.setTransition(0),t.animating){const I=new window.CustomEvent("transitionend",{bubbles:!0,cancelable:!0});t.wrapperEl.dispatchEvent(I)}i.allowMomentumBounce=!1,r.grabCursor&&(t.allowSlideNext===!0||t.allowSlidePrev===!0)&&t.setGrabCursor(!0),t.emit("sliderFirstMove",l)}let w;if(new Date().getTime(),i.isMoved&&i.allowThresholdMove&&g!==t.touchesDirection&&m&&T&&Math.abs(_)>=1){Object.assign(s,{startX:u,startY:h,currentX:u,currentY:h,startTranslate:i.currentTranslate}),i.loopSwapReset=!0,i.startTranslate=i.currentTranslate;return}t.emit("sliderMove",l),i.isMoved=!0,i.currentTranslate=_+i.startTranslate;let S=!0,E=r.resistanceRatio;if(r.touchReleaseOnEdges&&(E=0),_>0?(m&&T&&!w&&i.allowThresholdMove&&i.currentTranslate>(r.centeredSlides?t.minTranslate()-t.slidesSizesGrid[t.activeIndex+1]:t.minTranslate())&&t.loopFix({direction:"prev",setTranslate:!0,activeSlideIndex:0}),i.currentTranslate>t.minTranslate()&&(S=!1,r.resistance&&(i.currentTranslate=t.minTranslate()-1+(-t.minTranslate()+i.startTranslate+_)**E))):_<0&&(m&&T&&!w&&i.allowThresholdMove&&i.currentTranslate<(r.centeredSlides?t.maxTranslate()+t.slidesSizesGrid[t.slidesSizesGrid.length-1]:t.maxTranslate())&&t.loopFix({direction:"next",setTranslate:!0,activeSlideIndex:t.slides.length-(r.slidesPerView==="auto"?t.slidesPerViewDynamic():Math.ceil(parseFloat(r.slidesPerView,10)))}),i.currentTranslate<t.maxTranslate()&&(S=!1,r.resistance&&(i.currentTranslate=t.maxTranslate()+1-(t.maxTranslate()-i.startTranslate-_)**E))),S&&(l.preventedByNestedSwiper=!0),!t.allowSlideNext&&t.swipeDirection==="next"&&i.currentTranslate<i.startTranslate&&(i.currentTranslate=i.startTranslate),!t.allowSlidePrev&&t.swipeDirection==="prev"&&i.currentTranslate>i.startTranslate&&(i.currentTranslate=i.startTranslate),!t.allowSlidePrev&&!t.allowSlideNext&&(i.currentTranslate=i.startTranslate),r.threshold>0)if(Math.abs(_)>r.threshold||i.allowThresholdMove){if(!i.allowThresholdMove){i.allowThresholdMove=!0,s.startX=s.currentX,s.startY=s.currentY,i.currentTranslate=i.startTranslate,s.diff=t.isHorizontal()?s.currentX-s.startX:s.currentY-s.startY;return}}else{i.currentTranslate=i.startTranslate;return}!r.followFinger||r.cssMode||((r.freeMode&&r.freeMode.enabled&&t.freeMode||r.watchSlidesProgress)&&(t.updateActiveIndex(),t.updateSlidesClasses()),r.freeMode&&r.freeMode.enabled&&t.freeMode&&t.freeMode.onTouchMove(),t.updateProgress(i.currentTranslate),t.setTranslate(i.currentTranslate))}function aB(n){const e=this,t=e.touchEventsData;let i=n;i.originalEvent&&(i=i.originalEvent);let r;if(i.type==="touchend"||i.type==="touchcancel"){if(r=[...i.changedTouches].filter(E=>E.identifier===t.touchId)[0],!r||r.identifier!==t.touchId)return}else{if(t.touchId!==null||i.pointerId!==t.pointerId)return;r=i}if(["pointercancel","pointerout","pointerleave","contextmenu"].includes(i.type)&&!(["pointercancel","contextmenu"].includes(i.type)&&(e.browser.isSafari||e.browser.isWebView)))return;t.pointerId=null,t.touchId=null;const{params:o,touches:a,rtlTranslate:l,slidesGrid:c,enabled:u}=e;if(!u||!o.simulateTouch&&i.pointerType==="mouse")return;if(t.allowTouchCallbacks&&e.emit("touchEnd",i),t.allowTouchCallbacks=!1,!t.isTouched){t.isMoved&&o.grabCursor&&e.setGrabCursor(!1),t.isMoved=!1,t.startMoving=!1;return}o.grabCursor&&t.isMoved&&t.isTouched&&(e.allowSlideNext===!0||e.allowSlidePrev===!0)&&e.setGrabCursor(!1);const h=Ju(),f=h-t.touchStartTime;if(e.allowClick){const E=i.path||i.composedPath&&i.composedPath();e.updateClickedSlide(E&&E[0]||i.target,E),e.emit("tap click",i),f<300&&h-t.lastClickTime<300&&e.emit("doubleTap doubleClick",i)}if(t.lastClickTime=Ju(),Vp(()=>{e.destroyed||(e.allowClick=!0)}),!t.isTouched||!t.isMoved||!e.swipeDirection||a.diff===0&&!t.loopSwapReset||t.currentTranslate===t.startTranslate&&!t.loopSwapReset){t.isTouched=!1,t.isMoved=!1,t.startMoving=!1;return}t.isTouched=!1,t.isMoved=!1,t.startMoving=!1;let d;if(o.followFinger?d=l?e.translate:-e.translate:d=-t.currentTranslate,o.cssMode)return;if(o.freeMode&&o.freeMode.enabled){e.freeMode.onTouchEnd({currentPos:d});return}const _=d>=-e.maxTranslate()&&!e.params.loop;let p=0,g=e.slidesSizesGrid[0];for(let E=0;E<c.length;E+=E<o.slidesPerGroupSkip?1:o.slidesPerGroup){const I=E<o.slidesPerGroupSkip-1?1:o.slidesPerGroup;typeof c[E+I]<"u"?(_||d>=c[E]&&d<c[E+I])&&(p=E,g=c[E+I]-c[E]):(_||d>=c[E])&&(p=E,g=c[c.length-1]-c[c.length-2])}let m=null,T=null;o.rewind&&(e.isBeginning?T=o.virtual&&o.virtual.enabled&&e.virtual?e.virtual.slides.length-1:e.slides.length-1:e.isEnd&&(m=0));const w=(d-c[p])/g,S=p<o.slidesPerGroupSkip-1?1:o.slidesPerGroup;if(f>o.longSwipesMs){if(!o.longSwipes){e.slideTo(e.activeIndex);return}e.swipeDirection==="next"&&(w>=o.longSwipesRatio?e.slideTo(o.rewind&&e.isEnd?m:p+S):e.slideTo(p)),e.swipeDirection==="prev"&&(w>1-o.longSwipesRatio?e.slideTo(p+S):T!==null&&w<0&&Math.abs(w)>o.longSwipesRatio?e.slideTo(T):e.slideTo(p))}else{if(!o.shortSwipes){e.slideTo(e.activeIndex);return}e.navigation&&(i.target===e.navigation.nextEl||i.target===e.navigation.prevEl)?i.target===e.navigation.nextEl?e.slideTo(p+S):e.slideTo(p):(e.swipeDirection==="next"&&e.slideTo(m!==null?m:p+S),e.swipeDirection==="prev"&&e.slideTo(T!==null?T:p))}}function G0(){const n=this,{params:e,el:t}=n;if(t&&t.offsetWidth===0)return;e.breakpoints&&n.setBreakpoint();const{allowSlideNext:i,allowSlidePrev:r,snapGrid:s}=n,o=n.virtual&&n.params.virtual.enabled;n.allowSlideNext=!0,n.allowSlidePrev=!0,n.updateSize(),n.updateSlides(),n.updateSlidesClasses();const a=o&&e.loop;(e.slidesPerView==="auto"||e.slidesPerView>1)&&n.isEnd&&!n.isBeginning&&!n.params.centeredSlides&&!a?n.slideTo(n.slides.length-1,0,!1,!0):n.params.loop&&!o?n.slideToLoop(n.realIndex,0,!1,!0):n.slideTo(n.activeIndex,0,!1,!0),n.autoplay&&n.autoplay.running&&n.autoplay.paused&&(clearTimeout(n.autoplay.resizeTimeout),n.autoplay.resizeTimeout=setTimeout(()=>{n.autoplay&&n.autoplay.running&&n.autoplay.paused&&n.autoplay.resume()},500)),n.allowSlidePrev=r,n.allowSlideNext=i,n.params.watchOverflow&&s!==n.snapGrid&&n.checkOverflow()}function lB(n){const e=this;e.enabled&&(e.allowClick||(e.params.preventClicks&&n.preventDefault(),e.params.preventClicksPropagation&&e.animating&&(n.stopPropagation(),n.stopImmediatePropagation())))}function cB(){const n=this,{wrapperEl:e,rtlTranslate:t,enabled:i}=n;if(!i)return;n.previousTranslate=n.translate,n.isHorizontal()?n.translate=-e.scrollLeft:n.translate=-e.scrollTop,n.translate===0&&(n.translate=0),n.updateActiveIndex(),n.updateSlidesClasses();let r;const s=n.maxTranslate()-n.minTranslate();s===0?r=0:r=(n.translate-n.minTranslate())/s,r!==n.progress&&n.updateProgress(t?-n.translate:n.translate),n.emit("setTranslate",n.translate,!1)}function uB(n){const e=this;uu(e,n.target),!(e.params.cssMode||e.params.slidesPerView!=="auto"&&!e.params.autoHeight)&&e.update()}function hB(){const n=this;n.documentTouchHandlerProceeded||(n.documentTouchHandlerProceeded=!0,n.params.touchReleaseOnEdges&&(n.el.style.touchAction="auto"))}const cC=(n,e)=>{const t=Ia(),{params:i,el:r,wrapperEl:s,device:o}=n,a=!!i.nested,l=e==="on"?"addEventListener":"removeEventListener",c=e;t[l]("touchstart",n.onDocumentTouchStart,{passive:!1,capture:a}),r[l]("touchstart",n.onTouchStart,{passive:!1}),r[l]("pointerdown",n.onTouchStart,{passive:!1}),t[l]("touchmove",n.onTouchMove,{passive:!1,capture:a}),t[l]("pointermove",n.onTouchMove,{passive:!1,capture:a}),t[l]("touchend",n.onTouchEnd,{passive:!0}),t[l]("pointerup",n.onTouchEnd,{passive:!0}),t[l]("pointercancel",n.onTouchEnd,{passive:!0}),t[l]("touchcancel",n.onTouchEnd,{passive:!0}),t[l]("pointerout",n.onTouchEnd,{passive:!0}),t[l]("pointerleave",n.onTouchEnd,{passive:!0}),t[l]("contextmenu",n.onTouchEnd,{passive:!0}),(i.preventClicks||i.preventClicksPropagation)&&r[l]("click",n.onClick,!0),i.cssMode&&s[l]("scroll",n.onScroll),i.updateOnWindowResize?n[c](o.ios||o.android?"resize orientationchange observerUpdate":"resize observerUpdate",G0,!0):n[c]("observerUpdate",G0,!0),r[l]("load",n.onLoad,{capture:!0})};function dB(){const n=this,{params:e}=n;n.onTouchStart=sB.bind(n),n.onTouchMove=oB.bind(n),n.onTouchEnd=aB.bind(n),n.onDocumentTouchStart=hB.bind(n),e.cssMode&&(n.onScroll=cB.bind(n)),n.onClick=lB.bind(n),n.onLoad=uB.bind(n),cC(n,"on")}function fB(){cC(this,"off")}var pB={attachEvents:dB,detachEvents:fB};const H0=(n,e)=>n.grid&&e.grid&&e.grid.rows>1;function _B(){const n=this,{realIndex:e,initialized:t,params:i,el:r}=n,s=i.breakpoints;if(!s||s&&Object.keys(s).length===0)return;const o=n.getBreakpoint(s,n.params.breakpointsBase,n.el);if(!o||n.currentBreakpoint===o)return;const l=(o in s?s[o]:void 0)||n.originalParams,c=H0(n,i),u=H0(n,l),h=n.params.grabCursor,f=l.grabCursor,d=i.enabled;c&&!u?(r.classList.remove(`${i.containerModifierClass}grid`,`${i.containerModifierClass}grid-column`),n.emitContainerClasses()):!c&&u&&(r.classList.add(`${i.containerModifierClass}grid`),(l.grid.fill&&l.grid.fill==="column"||!l.grid.fill&&i.grid.fill==="column")&&r.classList.add(`${i.containerModifierClass}grid-column`),n.emitContainerClasses()),h&&!f?n.unsetGrabCursor():!h&&f&&n.setGrabCursor(),["navigation","pagination","scrollbar"].forEach(w=>{if(typeof l[w]>"u")return;const S=i[w]&&i[w].enabled,E=l[w]&&l[w].enabled;S&&!E&&n[w].disable(),!S&&E&&n[w].enable()});const _=l.direction&&l.direction!==i.direction,p=i.loop&&(l.slidesPerView!==i.slidesPerView||_),g=i.loop;_&&t&&n.changeDirection(),Pn(n.params,l);const m=n.params.enabled,T=n.params.loop;Object.assign(n,{allowTouchMove:n.params.allowTouchMove,allowSlideNext:n.params.allowSlideNext,allowSlidePrev:n.params.allowSlidePrev}),d&&!m?n.disable():!d&&m&&n.enable(),n.currentBreakpoint=o,n.emit("_beforeBreakpoint",l),t&&(p?(n.loopDestroy(),n.loopCreate(e),n.updateSlides()):!g&&T?(n.loopCreate(e),n.updateSlides()):g&&!T&&n.loopDestroy()),n.emit("breakpoint",l)}function gB(n,e,t){if(e===void 0&&(e="window"),!n||e==="container"&&!t)return;let i=!1;const r=zn(),s=e==="window"?r.innerHeight:t.clientHeight,o=Object.keys(n).map(a=>{if(typeof a=="string"&&a.indexOf("@")===0){const l=parseFloat(a.substr(1));return{value:s*l,point:a}}return{value:a,point:a}});o.sort((a,l)=>parseInt(a.value,10)-parseInt(l.value,10));for(let a=0;a<o.length;a+=1){const{point:l,value:c}=o[a];e==="window"?r.matchMedia(`(min-width: ${c}px)`).matches&&(i=l):c<=t.clientWidth&&(i=l)}return i||"max"}var mB={setBreakpoint:_B,getBreakpoint:gB};function yB(n,e){const t=[];return n.forEach(i=>{typeof i=="object"?Object.keys(i).forEach(r=>{i[r]&&t.push(e+r)}):typeof i=="string"&&t.push(e+i)}),t}function vB(){const n=this,{classNames:e,params:t,rtl:i,el:r,device:s}=n,o=yB(["initialized",t.direction,{"free-mode":n.params.freeMode&&t.freeMode.enabled},{autoheight:t.autoHeight},{rtl:i},{grid:t.grid&&t.grid.rows>1},{"grid-column":t.grid&&t.grid.rows>1&&t.grid.fill==="column"},{android:s.android},{ios:s.ios},{"css-mode":t.cssMode},{centered:t.cssMode&&t.centeredSlides},{"watch-progress":t.watchSlidesProgress}],t.containerModifierClass);e.push(...o),r.classList.add(...e),n.emitContainerClasses()}function wB(){const n=this,{el:e,classNames:t}=n;e.classList.remove(...t),n.emitContainerClasses()}var TB={addClasses:vB,removeClasses:wB};function EB(){const n=this,{isLocked:e,params:t}=n,{slidesOffsetBefore:i}=t;if(i){const r=n.slides.length-1,s=n.slidesGrid[r]+n.slidesSizesGrid[r]+i*2;n.isLocked=n.size>s}else n.isLocked=n.snapGrid.length===1;t.allowSlideNext===!0&&(n.allowSlideNext=!n.isLocked),t.allowSlidePrev===!0&&(n.allowSlidePrev=!n.isLocked),e&&e!==n.isLocked&&(n.isEnd=!1),e!==n.isLocked&&n.emit(n.isLocked?"lock":"unlock")}var SB={checkOverflow:EB},$p={init:!0,direction:"horizontal",oneWayMovement:!1,swiperElementNodeName:"SWIPER-CONTAINER",touchEventsTarget:"wrapper",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,resizeObserver:!0,nested:!1,createElements:!1,eventsPrefix:"swiper",enabled:!0,focusableElements:"input, select, option, textarea, button, video, label",width:null,height:null,preventInteractionOnTransition:!1,userAgent:null,url:null,edgeSwipeDetection:!1,edgeSwipeThreshold:20,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsBase:"window",spaceBetween:0,slidesPerView:1,slidesPerGroup:1,slidesPerGroupSkip:0,slidesPerGroupAuto:!1,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!0,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:5,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,loop:!1,loopAddBlankSlides:!0,loopAdditionalSlides:0,loopPreventsSliding:!0,rewind:!1,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,maxBackfaceHiddenSlides:10,containerModifierClass:"swiper-",slideClass:"swiper-slide",slideBlankClass:"swiper-slide-blank",slideActiveClass:"swiper-slide-active",slideVisibleClass:"swiper-slide-visible",slideFullyVisibleClass:"swiper-slide-fully-visible",slideNextClass:"swiper-slide-next",slidePrevClass:"swiper-slide-prev",wrapperClass:"swiper-wrapper",lazyPreloaderClass:"swiper-lazy-preloader",lazyPreloadPrevNext:0,runCallbacksOnInit:!0,_emitClasses:!1};function bB(n,e){return function(i){i===void 0&&(i={});const r=Object.keys(i)[0],s=i[r];if(typeof s!="object"||s===null){Pn(e,i);return}if(n[r]===!0&&(n[r]={enabled:!0}),r==="navigation"&&n[r]&&n[r].enabled&&!n[r].prevEl&&!n[r].nextEl&&(n[r].auto=!0),["pagination","scrollbar"].indexOf(r)>=0&&n[r]&&n[r].enabled&&!n[r].el&&(n[r].auto=!0),!(r in n&&"enabled"in s)){Pn(e,i);return}typeof n[r]=="object"&&!("enabled"in n[r])&&(n[r].enabled=!0),n[r]||(n[r]={enabled:!1}),Pn(e,i)}}const ef={eventsEmitter:T$,update:k$,translate:F$,transition:z$,slide:X$,loop:eB,grabCursor:iB,events:pB,breakpoints:mB,checkOverflow:SB,classes:TB},tf={};let am=class Ki{constructor(){let e,t;for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];r.length===1&&r[0].constructor&&Object.prototype.toString.call(r[0]).slice(8,-1)==="Object"?t=r[0]:[e,t]=r,t||(t={}),t=Pn({},t),e&&!t.el&&(t.el=e);const o=Ia();if(t.el&&typeof t.el=="string"&&o.querySelectorAll(t.el).length>1){const u=[];return o.querySelectorAll(t.el).forEach(h=>{const f=Pn({},t,{el:h});u.push(new Ki(f))}),u}const a=this;a.__swiper__=!0,a.support=oC(),a.device=aC({userAgent:t.userAgent}),a.browser=y$(),a.eventsListeners={},a.eventsAnyListeners=[],a.modules=[...a.__modules__],t.modules&&Array.isArray(t.modules)&&a.modules.push(...t.modules);const l={};a.modules.forEach(u=>{u({params:t,swiper:a,extendParams:bB(t,l),on:a.on.bind(a),once:a.once.bind(a),off:a.off.bind(a),emit:a.emit.bind(a)})});const c=Pn({},$p,l);return a.params=Pn({},c,tf,t),a.originalParams=Pn({},a.params),a.passedParams=Pn({},t),a.params&&a.params.on&&Object.keys(a.params.on).forEach(u=>{a.on(u,a.params.on[u])}),a.params&&a.params.onAny&&a.onAny(a.params.onAny),Object.assign(a,{enabled:a.params.enabled,el:e,classNames:[],slides:[],slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal(){return a.params.direction==="horizontal"},isVertical(){return a.params.direction==="vertical"},activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,cssOverflowAdjustment(){return Math.trunc(this.translate/2**23)*2**23},allowSlideNext:a.params.allowSlideNext,allowSlidePrev:a.params.allowSlidePrev,touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,focusableElements:a.params.focusableElements,lastClickTime:0,clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,startMoving:void 0,pointerId:null,touchId:null},allowClick:!0,allowTouchMove:a.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),a.emit("_swiper"),a.params.init&&a.init(),a}getDirectionLabel(e){return this.isHorizontal()?e:{width:"height","margin-top":"margin-left","margin-bottom ":"margin-right","margin-left":"margin-top","margin-right":"margin-bottom","padding-left":"padding-top","padding-right":"padding-bottom",marginRight:"marginBottom"}[e]}getSlideIndex(e){const{slidesEl:t,params:i}=this,r=tr(t,`.${i.slideClass}, swiper-slide`),s=B0(r[0]);return B0(e)-s}getSlideIndexByData(e){return this.getSlideIndex(this.slides.filter(t=>t.getAttribute("data-swiper-slide-index")*1===e)[0])}recalcSlides(){const e=this,{slidesEl:t,params:i}=e;e.slides=tr(t,`.${i.slideClass}, swiper-slide`)}enable(){const e=this;e.enabled||(e.enabled=!0,e.params.grabCursor&&e.setGrabCursor(),e.emit("enable"))}disable(){const e=this;e.enabled&&(e.enabled=!1,e.params.grabCursor&&e.unsetGrabCursor(),e.emit("disable"))}setProgress(e,t){const i=this;e=Math.min(Math.max(e,0),1);const r=i.minTranslate(),o=(i.maxTranslate()-r)*e+r;i.translateTo(o,typeof t>"u"?0:t),i.updateActiveIndex(),i.updateSlidesClasses()}emitContainerClasses(){const e=this;if(!e.params._emitClasses||!e.el)return;const t=e.el.className.split(" ").filter(i=>i.indexOf("swiper")===0||i.indexOf(e.params.containerModifierClass)===0);e.emit("_containerClasses",t.join(" "))}getSlideClasses(e){const t=this;return t.destroyed?"":e.className.split(" ").filter(i=>i.indexOf("swiper-slide")===0||i.indexOf(t.params.slideClass)===0).join(" ")}emitSlidesClasses(){const e=this;if(!e.params._emitClasses||!e.el)return;const t=[];e.slides.forEach(i=>{const r=e.getSlideClasses(i);t.push({slideEl:i,classNames:r}),e.emit("_slideClass",i,r)}),e.emit("_slideClasses",t)}slidesPerViewDynamic(e,t){e===void 0&&(e="current"),t===void 0&&(t=!1);const i=this,{params:r,slides:s,slidesGrid:o,slidesSizesGrid:a,size:l,activeIndex:c}=i;let u=1;if(typeof r.slidesPerView=="number")return r.slidesPerView;if(r.centeredSlides){let h=s[c]?Math.ceil(s[c].swiperSlideSize):0,f;for(let d=c+1;d<s.length;d+=1)s[d]&&!f&&(h+=Math.ceil(s[d].swiperSlideSize),u+=1,h>l&&(f=!0));for(let d=c-1;d>=0;d-=1)s[d]&&!f&&(h+=s[d].swiperSlideSize,u+=1,h>l&&(f=!0))}else if(e==="current")for(let h=c+1;h<s.length;h+=1)(t?o[h]+a[h]-o[c]<l:o[h]-o[c]<l)&&(u+=1);else for(let h=c-1;h>=0;h-=1)o[c]-o[h]<l&&(u+=1);return u}update(){const e=this;if(!e||e.destroyed)return;const{snapGrid:t,params:i}=e;i.breakpoints&&e.setBreakpoint(),[...e.el.querySelectorAll('[loading="lazy"]')].forEach(o=>{o.complete&&uu(e,o)}),e.updateSize(),e.updateSlides(),e.updateProgress(),e.updateSlidesClasses();function r(){const o=e.rtlTranslate?e.translate*-1:e.translate,a=Math.min(Math.max(o,e.maxTranslate()),e.minTranslate());e.setTranslate(a),e.updateActiveIndex(),e.updateSlidesClasses()}let s;if(i.freeMode&&i.freeMode.enabled&&!i.cssMode)r(),i.autoHeight&&e.updateAutoHeight();else{if((i.slidesPerView==="auto"||i.slidesPerView>1)&&e.isEnd&&!i.centeredSlides){const o=e.virtual&&i.virtual.enabled?e.virtual.slides:e.slides;s=e.slideTo(o.length-1,0,!1,!0)}else s=e.slideTo(e.activeIndex,0,!1,!0);s||r()}i.watchOverflow&&t!==e.snapGrid&&e.checkOverflow(),e.emit("update")}changeDirection(e,t){t===void 0&&(t=!0);const i=this,r=i.params.direction;return e||(e=r==="horizontal"?"vertical":"horizontal"),e===r||e!=="horizontal"&&e!=="vertical"||(i.el.classList.remove(`${i.params.containerModifierClass}${r}`),i.el.classList.add(`${i.params.containerModifierClass}${e}`),i.emitContainerClasses(),i.params.direction=e,i.slides.forEach(s=>{e==="vertical"?s.style.width="":s.style.height=""}),i.emit("changeDirection"),t&&i.update()),i}changeLanguageDirection(e){const t=this;t.rtl&&e==="rtl"||!t.rtl&&e==="ltr"||(t.rtl=e==="rtl",t.rtlTranslate=t.params.direction==="horizontal"&&t.rtl,t.rtl?(t.el.classList.add(`${t.params.containerModifierClass}rtl`),t.el.dir="rtl"):(t.el.classList.remove(`${t.params.containerModifierClass}rtl`),t.el.dir="ltr"),t.update())}mount(e){const t=this;if(t.mounted)return!0;let i=e||t.params.el;if(typeof i=="string"&&(i=document.querySelector(i)),!i)return!1;i.swiper=t,i.parentNode&&i.parentNode.host&&i.parentNode.host.nodeName===t.params.swiperElementNodeName.toUpperCase()&&(t.isElement=!0);const r=()=>`.${(t.params.wrapperClass||"").trim().split(" ").join(".")}`;let o=i&&i.shadowRoot&&i.shadowRoot.querySelector?i.shadowRoot.querySelector(r()):tr(i,r())[0];return!o&&t.params.createElements&&(o=Fp("div",t.params.wrapperClass),i.append(o),tr(i,`.${t.params.slideClass}`).forEach(a=>{o.append(a)})),Object.assign(t,{el:i,wrapperEl:o,slidesEl:t.isElement&&!i.parentNode.host.slideSlots?i.parentNode.host:o,hostEl:t.isElement?i.parentNode.host:i,mounted:!0,rtl:i.dir.toLowerCase()==="rtl"||kr(i,"direction")==="rtl",rtlTranslate:t.params.direction==="horizontal"&&(i.dir.toLowerCase()==="rtl"||kr(i,"direction")==="rtl"),wrongRTL:kr(o,"display")==="-webkit-box"}),!0}init(e){const t=this;if(t.initialized||t.mount(e)===!1)return t;t.emit("beforeInit"),t.params.breakpoints&&t.setBreakpoint(),t.addClasses(),t.updateSize(),t.updateSlides(),t.params.watchOverflow&&t.checkOverflow(),t.params.grabCursor&&t.enabled&&t.setGrabCursor(),t.params.loop&&t.virtual&&t.params.virtual.enabled?t.slideTo(t.params.initialSlide+t.virtual.slidesBefore,0,t.params.runCallbacksOnInit,!1,!0):t.slideTo(t.params.initialSlide,0,t.params.runCallbacksOnInit,!1,!0),t.params.loop&&t.loopCreate(),t.attachEvents();const r=[...t.el.querySelectorAll('[loading="lazy"]')];return t.isElement&&r.push(...t.hostEl.querySelectorAll('[loading="lazy"]')),r.forEach(s=>{s.complete?uu(t,s):s.addEventListener("load",o=>{uu(t,o.target)})}),Up(t),t.initialized=!0,Up(t),t.emit("init"),t.emit("afterInit"),t}destroy(e,t){e===void 0&&(e=!0),t===void 0&&(t=!0);const i=this,{params:r,el:s,wrapperEl:o,slides:a}=i;return typeof i.params>"u"||i.destroyed||(i.emit("beforeDestroy"),i.initialized=!1,i.detachEvents(),r.loop&&i.loopDestroy(),t&&(i.removeClasses(),s.removeAttribute("style"),o.removeAttribute("style"),a&&a.length&&a.forEach(l=>{l.classList.remove(r.slideVisibleClass,r.slideFullyVisibleClass,r.slideActiveClass,r.slideNextClass,r.slidePrevClass),l.removeAttribute("style"),l.removeAttribute("data-swiper-slide-index")})),i.emit("destroy"),Object.keys(i.eventsListeners).forEach(l=>{i.off(l)}),e!==!1&&(i.el.swiper=null,l$(i)),i.destroyed=!0),null}static extendDefaults(e){Pn(tf,e)}static get extendedDefaults(){return tf}static get defaults(){return $p}static installModule(e){Ki.prototype.__modules__||(Ki.prototype.__modules__=[]);const t=Ki.prototype.__modules__;typeof e=="function"&&t.indexOf(e)<0&&t.push(e)}static use(e){return Array.isArray(e)?(e.forEach(t=>Ki.installModule(t)),Ki):(Ki.installModule(e),Ki)}};Object.keys(ef).forEach(n=>{Object.keys(ef[n]).forEach(e=>{am.prototype[e]=ef[n][e]})});am.use([v$,w$]);const uC=["eventsPrefix","injectStyles","injectStylesUrls","modules","init","_direction","oneWayMovement","swiperElementNodeName","touchEventsTarget","initialSlide","_speed","cssMode","updateOnWindowResize","resizeObserver","nested","focusableElements","_enabled","_width","_height","preventInteractionOnTransition","userAgent","url","_edgeSwipeDetection","_edgeSwipeThreshold","_freeMode","_autoHeight","setWrapperSize","virtualTranslate","_effect","breakpoints","breakpointsBase","_spaceBetween","_slidesPerView","maxBackfaceHiddenSlides","_grid","_slidesPerGroup","_slidesPerGroupSkip","_slidesPerGroupAuto","_centeredSlides","_centeredSlidesBounds","_slidesOffsetBefore","_slidesOffsetAfter","normalizeSlideIndex","_centerInsufficientSlides","_watchOverflow","roundLengths","touchRatio","touchAngle","simulateTouch","_shortSwipes","_longSwipes","longSwipesRatio","longSwipesMs","_followFinger","allowTouchMove","_threshold","touchMoveStopPropagation","touchStartPreventDefault","touchStartForcePreventDefault","touchReleaseOnEdges","uniqueNavElements","_resistance","_resistanceRatio","_watchSlidesProgress","_grabCursor","preventClicks","preventClicksPropagation","_slideToClickedSlide","_loop","loopAdditionalSlides","loopAddBlankSlides","loopPreventsSliding","_rewind","_allowSlidePrev","_allowSlideNext","_swipeHandler","_noSwiping","noSwipingClass","noSwipingSelector","passiveListeners","containerModifierClass","slideClass","slideActiveClass","slideVisibleClass","slideFullyVisibleClass","slideNextClass","slidePrevClass","slideBlankClass","wrapperClass","lazyPreloaderClass","lazyPreloadPrevNext","runCallbacksOnInit","observer","observeParents","observeSlideChildren","a11y","_autoplay","_controller","coverflowEffect","cubeEffect","fadeEffect","flipEffect","creativeEffect","cardsEffect","hashNavigation","history","keyboard","mousewheel","_navigation","_pagination","parallax","_scrollbar","_thumbs","virtual","zoom","control"];function qs(n){return typeof n=="object"&&n!==null&&n.constructor&&Object.prototype.toString.call(n).slice(8,-1)==="Object"&&!n.__swiper__}function Vo(n,e){const t=["__proto__","constructor","prototype"];Object.keys(e).filter(i=>t.indexOf(i)<0).forEach(i=>{typeof n[i]>"u"?n[i]=e[i]:qs(e[i])&&qs(n[i])&&Object.keys(e[i]).length>0?e[i].__swiper__?n[i]=e[i]:Vo(n[i],e[i]):n[i]=e[i]})}function hC(n){return n===void 0&&(n={}),n.navigation&&typeof n.navigation.nextEl>"u"&&typeof n.navigation.prevEl>"u"}function dC(n){return n===void 0&&(n={}),n.pagination&&typeof n.pagination.el>"u"}function fC(n){return n===void 0&&(n={}),n.scrollbar&&typeof n.scrollbar.el>"u"}function pC(n){n===void 0&&(n="");const e=n.split(" ").map(i=>i.trim()).filter(i=>!!i),t=[];return e.forEach(i=>{t.indexOf(i)<0&&t.push(i)}),t.join(" ")}function IB(n){return n===void 0&&(n=""),n?n.includes("swiper-wrapper")?n:`swiper-wrapper ${n}`:"swiper-wrapper"}function CB(n){let{swiper:e,slides:t,passedParams:i,changedParams:r,nextEl:s,prevEl:o,scrollbarEl:a,paginationEl:l}=n;const c=r.filter(A=>A!=="children"&&A!=="direction"&&A!=="wrapperClass"),{params:u,pagination:h,navigation:f,scrollbar:d,virtual:_,thumbs:p}=e;let g,m,T,w,S,E,I,P;r.includes("thumbs")&&i.thumbs&&i.thumbs.swiper&&u.thumbs&&!u.thumbs.swiper&&(g=!0),r.includes("controller")&&i.controller&&i.controller.control&&u.controller&&!u.controller.control&&(m=!0),r.includes("pagination")&&i.pagination&&(i.pagination.el||l)&&(u.pagination||u.pagination===!1)&&h&&!h.el&&(T=!0),r.includes("scrollbar")&&i.scrollbar&&(i.scrollbar.el||a)&&(u.scrollbar||u.scrollbar===!1)&&d&&!d.el&&(w=!0),r.includes("navigation")&&i.navigation&&(i.navigation.prevEl||o)&&(i.navigation.nextEl||s)&&(u.navigation||u.navigation===!1)&&f&&!f.prevEl&&!f.nextEl&&(S=!0);const x=A=>{e[A]&&(e[A].destroy(),A==="navigation"?(e.isElement&&(e[A].prevEl.remove(),e[A].nextEl.remove()),u[A].prevEl=void 0,u[A].nextEl=void 0,e[A].prevEl=void 0,e[A].nextEl=void 0):(e.isElement&&e[A].el.remove(),u[A].el=void 0,e[A].el=void 0))};r.includes("loop")&&e.isElement&&(u.loop&&!i.loop?E=!0:!u.loop&&i.loop?I=!0:P=!0),c.forEach(A=>{if(qs(u[A])&&qs(i[A]))Object.assign(u[A],i[A]),(A==="navigation"||A==="pagination"||A==="scrollbar")&&"enabled"in i[A]&&!i[A].enabled&&x(A);else{const k=i[A];(k===!0||k===!1)&&(A==="navigation"||A==="pagination"||A==="scrollbar")?k===!1&&x(A):u[A]=i[A]}}),c.includes("controller")&&!m&&e.controller&&e.controller.control&&u.controller&&u.controller.control&&(e.controller.control=u.controller.control),r.includes("children")&&t&&_&&u.virtual.enabled?(_.slides=t,_.update(!0)):r.includes("virtual")&&_&&u.virtual.enabled&&(t&&(_.slides=t),_.update(!0)),r.includes("children")&&t&&u.loop&&(P=!0),g&&p.init()&&p.update(!0),m&&(e.controller.control=u.controller.control),T&&(e.isElement&&(!l||typeof l=="string")&&(l=document.createElement("div"),l.classList.add("swiper-pagination"),l.part.add("pagination"),e.el.appendChild(l)),l&&(u.pagination.el=l),h.init(),h.render(),h.update()),w&&(e.isElement&&(!a||typeof a=="string")&&(a=document.createElement("div"),a.classList.add("swiper-scrollbar"),a.part.add("scrollbar"),e.el.appendChild(a)),a&&(u.scrollbar.el=a),d.init(),d.updateSize(),d.setTranslate()),S&&(e.isElement&&((!s||typeof s=="string")&&(s=document.createElement("div"),s.classList.add("swiper-button-next"),s.innerHTML=e.hostEl.constructor.nextButtonSvg,s.part.add("button-next"),e.el.appendChild(s)),(!o||typeof o=="string")&&(o=document.createElement("div"),o.classList.add("swiper-button-prev"),o.innerHTML=e.hostEl.constructor.prevButtonSvg,o.part.add("button-prev"),e.el.appendChild(o))),s&&(u.navigation.nextEl=s),o&&(u.navigation.prevEl=o),f.init(),f.update()),r.includes("allowSlideNext")&&(e.allowSlideNext=i.allowSlideNext),r.includes("allowSlidePrev")&&(e.allowSlidePrev=i.allowSlidePrev),r.includes("direction")&&e.changeDirection(i.direction,!1),(E||P)&&e.loopDestroy(),(I||P)&&e.loopCreate(),e.update()}function q0(n,e){n===void 0&&(n={}),e===void 0&&(e=!0);const t={on:{}},i={},r={};Vo(t,$p),t._emitClasses=!0,t.init=!1;const s={},o=uC.map(l=>l.replace(/_/,"")),a=Object.assign({},n);return Object.keys(a).forEach(l=>{typeof n[l]>"u"||(o.indexOf(l)>=0?qs(n[l])?(t[l]={},r[l]={},Vo(t[l],n[l]),Vo(r[l],n[l])):(t[l]=n[l],r[l]=n[l]):l.search(/on[A-Z]/)===0&&typeof n[l]=="function"?e?i[`${l[2].toLowerCase()}${l.substr(3)}`]=n[l]:t.on[`${l[2].toLowerCase()}${l.substr(3)}`]=n[l]:s[l]=n[l])}),["navigation","pagination","scrollbar"].forEach(l=>{t[l]===!0&&(t[l]={}),t[l]===!1&&delete t[l]}),{params:t,passedParams:r,rest:s,events:i}}function AB(n,e){let{el:t,nextEl:i,prevEl:r,paginationEl:s,scrollbarEl:o,swiper:a}=n;hC(e)&&i&&r&&(a.params.navigation.nextEl=i,a.originalParams.navigation.nextEl=i,a.params.navigation.prevEl=r,a.originalParams.navigation.prevEl=r),dC(e)&&s&&(a.params.pagination.el=s,a.originalParams.pagination.el=s),fC(e)&&o&&(a.params.scrollbar.el=o,a.originalParams.scrollbar.el=o),a.init(t)}function xB(n,e,t,i,r){const s=[];if(!e)return s;const o=l=>{s.indexOf(l)<0&&s.push(l)};if(t&&i){const l=i.map(r),c=t.map(r);l.join("")!==c.join("")&&o("children"),i.length!==t.length&&o("children")}return uC.filter(l=>l[0]==="_").map(l=>l.replace(/_/,"")).forEach(l=>{if(l in n&&l in e)if(qs(n[l])&&qs(e[l])){const c=Object.keys(n[l]),u=Object.keys(e[l]);c.length!==u.length?o(l):(c.forEach(h=>{n[l][h]!==e[l][h]&&o(l)}),u.forEach(h=>{n[l][h]!==e[l][h]&&o(l)}))}else n[l]!==e[l]&&o(l)}),s}const RB=n=>{!n||n.destroyed||!n.params.virtual||n.params.virtual&&!n.params.virtual.enabled||(n.updateSlides(),n.updateProgress(),n.updateSlidesClasses(),n.parallax&&n.params.parallax&&n.params.parallax.enabled&&n.parallax.setTranslate())};function nf(n,e,t){n===void 0&&(n={});const i=[],r={"container-start":[],"container-end":[],"wrapper-start":[],"wrapper-end":[]},s=(o,a)=>{Array.isArray(o)&&o.forEach(l=>{const c=typeof l.type=="symbol";a==="default"&&(a="container-end"),c&&l.children?s(l.children,a):l.type&&(l.type.name==="SwiperSlide"||l.type.name==="AsyncComponentWrapper")?i.push(l):r[a]&&r[a].push(l)})};return Object.keys(n).forEach(o=>{if(typeof n[o]!="function")return;const a=n[o]();s(a,o)}),t.value=e.value,e.value=i,{slides:i,slots:r}}function PB(n,e,t){if(!t)return null;const i=u=>{let h=u;return u<0?h=e.length+u:h>=e.length&&(h=h-e.length),h},r=n.value.isHorizontal()?{[n.value.rtlTranslate?"right":"left"]:`${t.offset}px`}:{top:`${t.offset}px`},{from:s,to:o}=t,a=n.value.params.loop?-e.length:0,l=n.value.params.loop?e.length*2:e.length,c=[];for(let u=a;u<l;u+=1)u>=s&&u<=o&&c.push(e[i(u)]);return c.map(u=>(u.props||(u.props={}),u.props.style||(u.props.style={}),u.props.swiperRef=n,u.props.style=r,kn(u.type,{...u.props},u.children)))}const OB={name:"Swiper",props:{tag:{type:String,default:"div"},wrapperTag:{type:String,default:"div"},modules:{type:Array,default:void 0},init:{type:Boolean,default:void 0},direction:{type:String,default:void 0},oneWayMovement:{type:Boolean,default:void 0},swiperElementNodeName:{type:String,default:"SWIPER-CONTAINER"},touchEventsTarget:{type:String,default:void 0},initialSlide:{type:Number,default:void 0},speed:{type:Number,default:void 0},cssMode:{type:Boolean,default:void 0},updateOnWindowResize:{type:Boolean,default:void 0},resizeObserver:{type:Boolean,default:void 0},nested:{type:Boolean,default:void 0},focusableElements:{type:String,default:void 0},width:{type:Number,default:void 0},height:{type:Number,default:void 0},preventInteractionOnTransition:{type:Boolean,default:void 0},userAgent:{type:String,default:void 0},url:{type:String,default:void 0},edgeSwipeDetection:{type:[Boolean,String],default:void 0},edgeSwipeThreshold:{type:Number,default:void 0},autoHeight:{type:Boolean,default:void 0},setWrapperSize:{type:Boolean,default:void 0},virtualTranslate:{type:Boolean,default:void 0},effect:{type:String,default:void 0},breakpoints:{type:Object,default:void 0},spaceBetween:{type:[Number,String],default:void 0},slidesPerView:{type:[Number,String],default:void 0},maxBackfaceHiddenSlides:{type:Number,default:void 0},slidesPerGroup:{type:Number,default:void 0},slidesPerGroupSkip:{type:Number,default:void 0},slidesPerGroupAuto:{type:Boolean,default:void 0},centeredSlides:{type:Boolean,default:void 0},centeredSlidesBounds:{type:Boolean,default:void 0},slidesOffsetBefore:{type:Number,default:void 0},slidesOffsetAfter:{type:Number,default:void 0},normalizeSlideIndex:{type:Boolean,default:void 0},centerInsufficientSlides:{type:Boolean,default:void 0},watchOverflow:{type:Boolean,default:void 0},roundLengths:{type:Boolean,default:void 0},touchRatio:{type:Number,default:void 0},touchAngle:{type:Number,default:void 0},simulateTouch:{type:Boolean,default:void 0},shortSwipes:{type:Boolean,default:void 0},longSwipes:{type:Boolean,default:void 0},longSwipesRatio:{type:Number,default:void 0},longSwipesMs:{type:Number,default:void 0},followFinger:{type:Boolean,default:void 0},allowTouchMove:{type:Boolean,default:void 0},threshold:{type:Number,default:void 0},touchMoveStopPropagation:{type:Boolean,default:void 0},touchStartPreventDefault:{type:Boolean,default:void 0},touchStartForcePreventDefault:{type:Boolean,default:void 0},touchReleaseOnEdges:{type:Boolean,default:void 0},uniqueNavElements:{type:Boolean,default:void 0},resistance:{type:Boolean,default:void 0},resistanceRatio:{type:Number,default:void 0},watchSlidesProgress:{type:Boolean,default:void 0},grabCursor:{type:Boolean,default:void 0},preventClicks:{type:Boolean,default:void 0},preventClicksPropagation:{type:Boolean,default:void 0},slideToClickedSlide:{type:Boolean,default:void 0},loop:{type:Boolean,default:void 0},loopedSlides:{type:Number,default:void 0},loopPreventsSliding:{type:Boolean,default:void 0},rewind:{type:Boolean,default:void 0},allowSlidePrev:{type:Boolean,default:void 0},allowSlideNext:{type:Boolean,default:void 0},swipeHandler:{type:Boolean,default:void 0},noSwiping:{type:Boolean,default:void 0},noSwipingClass:{type:String,default:void 0},noSwipingSelector:{type:String,default:void 0},passiveListeners:{type:Boolean,default:void 0},containerModifierClass:{type:String,default:void 0},slideClass:{type:String,default:void 0},slideActiveClass:{type:String,default:void 0},slideVisibleClass:{type:String,default:void 0},slideFullyVisibleClass:{type:String,default:void 0},slideBlankClass:{type:String,default:void 0},slideNextClass:{type:String,default:void 0},slidePrevClass:{type:String,default:void 0},wrapperClass:{type:String,default:void 0},lazyPreloaderClass:{type:String,default:void 0},lazyPreloadPrevNext:{type:Number,default:void 0},runCallbacksOnInit:{type:Boolean,default:void 0},observer:{type:Boolean,default:void 0},observeParents:{type:Boolean,default:void 0},observeSlideChildren:{type:Boolean,default:void 0},a11y:{type:[Boolean,Object],default:void 0},autoplay:{type:[Boolean,Object],default:void 0},controller:{type:Object,default:void 0},coverflowEffect:{type:Object,default:void 0},cubeEffect:{type:Object,default:void 0},fadeEffect:{type:Object,default:void 0},flipEffect:{type:Object,default:void 0},creativeEffect:{type:Object,default:void 0},cardsEffect:{type:Object,default:void 0},hashNavigation:{type:[Boolean,Object],default:void 0},history:{type:[Boolean,Object],default:void 0},keyboard:{type:[Boolean,Object],default:void 0},mousewheel:{type:[Boolean,Object],default:void 0},navigation:{type:[Boolean,Object],default:void 0},pagination:{type:[Boolean,Object],default:void 0},parallax:{type:[Boolean,Object],default:void 0},scrollbar:{type:[Boolean,Object],default:void 0},thumbs:{type:Object,default:void 0},virtual:{type:[Boolean,Object],default:void 0},zoom:{type:[Boolean,Object],default:void 0},grid:{type:[Object],default:void 0},freeMode:{type:[Boolean,Object],default:void 0},enabled:{type:Boolean,default:void 0}},emits:["_beforeBreakpoint","_containerClasses","_slideClass","_slideClasses","_swiper","_freeModeNoMomentumRelease","activeIndexChange","afterInit","autoplay","autoplayStart","autoplayStop","autoplayPause","autoplayResume","autoplayTimeLeft","beforeDestroy","beforeInit","beforeLoopFix","beforeResize","beforeSlideChangeStart","beforeTransitionStart","breakpoint","breakpointsBase","changeDirection","click","disable","doubleTap","doubleClick","destroy","enable","fromEdge","hashChange","hashSet","init","keyPress","lock","loopFix","momentumBounce","navigationHide","navigationShow","navigationPrev","navigationNext","observerUpdate","orientationchange","paginationHide","paginationRender","paginationShow","paginationUpdate","progress","reachBeginning","reachEnd","realIndexChange","resize","scroll","scrollbarDragEnd","scrollbarDragMove","scrollbarDragStart","setTransition","setTranslate","slidesUpdated","slideChange","slideChangeTransitionEnd","slideChangeTransitionStart","slideNextTransitionEnd","slideNextTransitionStart","slidePrevTransitionEnd","slidePrevTransitionStart","slideResetTransitionStart","slideResetTransitionEnd","sliderMove","sliderFirstMove","slidesLengthChange","slidesGridLengthChange","snapGridLengthChange","snapIndexChange","swiper","tap","toEdge","touchEnd","touchMove","touchMoveOpposite","touchStart","transitionEnd","transitionStart","unlock","update","virtualUpdate","zoomChange"],setup(n,e){let{slots:t,emit:i}=e;const{tag:r,wrapperTag:s}=n,o=Zt("swiper"),a=Zt(null),l=Zt(!1),c=Zt(!1),u=Zt(null),h=Zt(null),f=Zt(null),d={value:[]},_={value:[]},p=Zt(null),g=Zt(null),m=Zt(null),T=Zt(null),{params:w,passedParams:S}=q0(n,!1);nf(t,d,_),f.value=S,_.value=d.value;const E=()=>{nf(t,d,_),l.value=!0};w.onAny=function(x){for(var A=arguments.length,k=new Array(A>1?A-1:0),D=1;D<A;D++)k[D-1]=arguments[D];i(x,...k)},Object.assign(w.on,{_beforeBreakpoint:E,_containerClasses(x,A){o.value=A}});const I={...w};if(delete I.wrapperClass,h.value=new am(I),h.value.virtual&&h.value.params.virtual.enabled){h.value.virtual.slides=d.value;const x={cache:!1,slides:d.value,renderExternal:A=>{a.value=A},renderExternalUpdate:!1};Vo(h.value.params.virtual,x),Vo(h.value.originalParams.virtual,x)}I_(()=>{!c.value&&h.value&&(h.value.emitSlidesClasses(),c.value=!0);const{passedParams:x}=q0(n,!1),A=xB(x,f.value,d.value,_.value,k=>k.props&&k.props.key);f.value=x,(A.length||l.value)&&h.value&&!h.value.destroyed&&CB({swiper:h.value,slides:d.value,passedParams:x,changedParams:A,nextEl:p.value,prevEl:g.value,scrollbarEl:T.value,paginationEl:m.value}),l.value=!1}),Co("swiper",h),Cs(a,()=>{E_(()=>{RB(h.value)})}),b_(()=>{u.value&&(AB({el:u.value,nextEl:p.value,prevEl:g.value,paginationEl:m.value,scrollbarEl:T.value,swiper:h.value},w),i("swiper",h.value))}),C_(()=>{h.value&&!h.value.destroyed&&h.value.destroy(!0,!1)});function P(x){return w.virtual?PB(h,x,a.value):(x.forEach((A,k)=>{A.props||(A.props={}),A.props.swiperRef=h,A.props.swiperSlideIndex=k}),x)}return()=>{const{slides:x,slots:A}=nf(t,d,_);return kn(r,{ref:u,class:pC(o.value)},[A["container-start"],kn(s,{class:IB(w.wrapperClass)},[A["wrapper-start"],P(x),A["wrapper-end"]]),hC(n)&&[kn("div",{ref:g,class:"swiper-button-prev"}),kn("div",{ref:p,class:"swiper-button-next"})],fC(n)&&kn("div",{ref:T,class:"swiper-scrollbar"}),dC(n)&&kn("div",{ref:m,class:"swiper-pagination"}),A["container-end"]])}}},kB={name:"SwiperSlide",props:{tag:{type:String,default:"div"},swiperRef:{type:Object,required:!1},swiperSlideIndex:{type:Number,default:void 0,required:!1},zoom:{type:Boolean,default:void 0,required:!1},lazy:{type:Boolean,default:!1,required:!1},virtualIndex:{type:[String,Number],default:void 0}},setup(n,e){let{slots:t}=e,i=!1;const{swiperRef:r}=n,s=Zt(null),o=Zt("swiper-slide"),a=Zt(!1);function l(h,f,d){f===s.value&&(o.value=d)}b_(()=>{!r||!r.value||(r.value.on("_slideClass",l),i=!0)}),iT(()=>{i||!r||!r.value||(r.value.on("_slideClass",l),i=!0)}),I_(()=>{!s.value||!r||!r.value||(typeof n.swiperSlideIndex<"u"&&(s.value.swiperSlideIndex=n.swiperSlideIndex),r.value.destroyed&&o.value!=="swiper-slide"&&(o.value="swiper-slide"))}),C_(()=>{!r||!r.value||r.value.off("_slideClass",l)});const c=Kn(()=>({isActive:o.value.indexOf("swiper-slide-active")>=0,isVisible:o.value.indexOf("swiper-slide-visible")>=0,isPrev:o.value.indexOf("swiper-slide-prev")>=0,isNext:o.value.indexOf("swiper-slide-next")>=0}));Co("swiperSlide",c);const u=()=>{a.value=!0};return()=>kn(n.tag,{class:pC(`${o.value}`),ref:s,"data-swiper-slide-index":typeof n.virtualIndex>"u"&&r&&r.value&&r.value.params.loop?n.swiperSlideIndex:n.virtualIndex,onLoadCapture:u},n.zoom?kn("div",{class:"swiper-zoom-container","data-swiper-zoom":typeof n.zoom=="number"?n.zoom:void 0},[t.default&&t.default(c.value),n.lazy&&!a.value&&kn("div",{class:"swiper-lazy-preloader"})]):[t.default&&t.default(c.value),n.lazy&&!a.value&&kn("div",{class:"swiper-lazy-preloader"})])}},NB={props:{program:Object},data(){return{}},methods:{}},MB=n=>(Zr("data-v-9d2bd72c"),n=n(),es(),n),DB={class:"program-item"},LB=["src"],VB={class:"program-item__text"},FB={class:"program-item__name"},UB={class:"program-item__date"},$B=MB(()=>H("button",{class:"program-item__button btn-reset"},"Посмотреть описание",-1));function BB(n,e,t,i,r,s){return Ie(),at("div",DB,[H("img",{class:"program-item__image",src:t.program.img,alt:"Обложка программы"},null,8,LB),H("div",VB,[H("div",FB,rr(t.program.name),1),H("div",UB,rr(t.program.date),1)]),$B,H("button",{class:"program-item__button btn-reset",onClick:e[0]||(e[0]=o=>n.$emit("open"))}," Записаться на программу ")])}const zB=pt(NB,[["render",BB],["__scopeId","data-v-9d2bd72c"]]),jB={props:{visible:{type:Boolean,default:!1}},data(){return{formData:{name:"",lastname:"",message:""}}},methods:{submitForm(){}},setup(){return{}}},_C=n=>(Zr("data-v-402f0eda"),n=n(),es(),n),GB={key:0,class:"modal"},HB={class:"modal__content"},qB=_C(()=>H("h2",{class:"modal__title"},"Запишись на одну из программ!",-1)),WB=_C(()=>H("button",{class:"modal__submit btn-reset",type:"submit"}," Записаться ",-1));function KB(n,e,t,i,r,s){return t.visible?(Ie(),at("div",GB,[H("div",HB,[H("span",{class:"modal__close",onClick:e[0]||(e[0]=o=>n.$emit("close"))},"×"),qB,H("form",{class:"modal__form",onSubmit:e[3]||(e[3]=Ux((...o)=>s.submitForm&&s.submitForm(...o),["prevent"]))},[zm(H("input",{class:"modal__input input-reset",type:"text","onUpdate:modelValue":e[1]||(e[1]=o=>r.formData.name=o),placeholder:"Имя",required:""},null,512),[[hy,r.formData.name]]),zm(H("input",{class:"modal__input input-reset",type:"email","onUpdate:modelValue":e[2]||(e[2]=o=>r.formData.lastname=o),placeholder:"Фамилия",required:""},null,512),[[hy,r.formData.lastname]]),WB],32)])])):Ho("",!0)}const YB=pt(jB,[["render",KB],["__scopeId","data-v-402f0eda"]]),XB={components:{Swiper:OB,SwiperSlide:kB,ModalForm:YB,ProgramItem:zB},data(){return{programs:[]}},setup(){return{showModal:Zt(!1)}},created(){this.getPrograms()},methods:{async getPrograms(){const n=ZV(fI(jI,"programs"));(await nF(n)).forEach(t=>{this.programs.push(t.data())})}}},QB=n=>(Zr("data-v-89484465"),n=n(),es(),n),JB=QB(()=>H("h2",{class:"afisha__title"},"Программы",-1));function ZB(n,e,t,i,r,s){const o=ot("program-item"),a=ot("SwiperSlide"),l=ot("Swiper"),c=ot("modal-form");return Ie(),at(qt,null,[JB,je(l,{class:"afisha__swiper","slides-per-view":3,loop:!0},{default:li(()=>[(Ie(!0),at(qt,null,nc(r.programs,u=>(Ie(),Un(a,{class:"afisha__slide",key:u.id},{default:li(()=>[je(o,{onOpen:e[0]||(e[0]=h=>i.showModal=!0),program:u},null,8,["program"])]),_:2},1024))),128))]),_:1}),je(c,{visible:i.showModal,onClose:e[1]||(e[1]=u=>i.showModal=!1)},null,8,["visible"])],64)}const e4=pt(XB,[["render",ZB],["__scopeId","data-v-89484465"]]),t4={components:{FooterSection:BI,ProgramList:e4},data(){return{}},setup(){return{}},methods:{}},n4={class:"afisha"};function i4(n,e,t,i,r,s){const o=ot("program-list");return Ie(),at("section",n4,[je(o)])}const r4=pt(t4,[["render",i4],["__scopeId","data-v-a0ad526b"]]);function Xi(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function gC(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,n.__proto__=e}/*!
 * GSAP 3.12.5
 * https://gsap.com
 *
 * @license Copyright 2008-2024, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var Fn={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},sa={duration:.5,overwrite:!1,delay:0},lm,dn,ct,Jn=1e8,tt=1/Jn,Bp=Math.PI*2,s4=Bp/4,o4=0,mC=Math.sqrt,a4=Math.cos,l4=Math.sin,Bt=function(e){return typeof e=="string"},gt=function(e){return typeof e=="function"},ur=function(e){return typeof e=="number"},cm=function(e){return typeof e>"u"},ji=function(e){return typeof e=="object"},wn=function(e){return e!==!1},um=function(){return typeof window<"u"},Yc=function(e){return gt(e)||Bt(e)},yC=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},fn=Array.isArray,zp=/(?:-?\.?\d|\.)+/gi,vC=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,wo=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,rf=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,wC=/[+-]=-?[.\d]+/,TC=/[^,'"\[\]\s]+/gi,c4=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,ht,Ci,jp,hm,Bn={},eh={},EC,SC=function(e){return(eh=Ws(e,Bn))&&Cn},dm=function(e,t){return console.warn("Invalid property",e,"set to",t,"Missing plugin? gsap.registerPlugin()")},ql=function(e,t){return!t&&console.warn(e)},bC=function(e,t){return e&&(Bn[e]=t)&&eh&&(eh[e]=t)||Bn},Wl=function(){return 0},u4={suppressEvents:!0,isStart:!0,kill:!1},hu={suppressEvents:!0,kill:!1},h4={suppressEvents:!0},fm={},zr=[],Gp={},IC,On={},sf={},W0=30,du=[],pm="",_m=function(e){var t=e[0],i,r;if(ji(t)||gt(t)||(e=[e]),!(i=(t._gsap||{}).harness)){for(r=du.length;r--&&!du[r].targetTest(t););i=du[r]}for(r=e.length;r--;)e[r]&&(e[r]._gsap||(e[r]._gsap=new YC(e[r],i)))||e.splice(r,1);return e},Os=function(e){return e._gsap||_m(Zn(e))[0]._gsap},CC=function(e,t,i){return(i=e[t])&&gt(i)?e[t]():cm(i)&&e.getAttribute&&e.getAttribute(t)||i},Tn=function(e,t){return(e=e.split(",")).forEach(t)||e},Tt=function(e){return Math.round(e*1e5)/1e5||0},Lt=function(e){return Math.round(e*1e7)/1e7||0},Fo=function(e,t){var i=t.charAt(0),r=parseFloat(t.substr(2));return e=parseFloat(e),i==="+"?e+r:i==="-"?e-r:i==="*"?e*r:e/r},d4=function(e,t){for(var i=t.length,r=0;e.indexOf(t[r])<0&&++r<i;);return r<i},th=function(){var e=zr.length,t=zr.slice(0),i,r;for(Gp={},zr.length=0,i=0;i<e;i++)r=t[i],r&&r._lazy&&(r.render(r._lazy[0],r._lazy[1],!0)._lazy=0)},AC=function(e,t,i,r){zr.length&&!dn&&th(),e.render(t,i,r||dn&&t<0&&(e._initted||e._startAt)),zr.length&&!dn&&th()},xC=function(e){var t=parseFloat(e);return(t||t===0)&&(e+"").match(TC).length<2?t:Bt(e)?e.trim():e},RC=function(e){return e},ti=function(e,t){for(var i in t)i in e||(e[i]=t[i]);return e},f4=function(e){return function(t,i){for(var r in i)r in t||r==="duration"&&e||r==="ease"||(t[r]=i[r])}},Ws=function(e,t){for(var i in t)e[i]=t[i];return e},K0=function n(e,t){for(var i in t)i!=="__proto__"&&i!=="constructor"&&i!=="prototype"&&(e[i]=ji(t[i])?n(e[i]||(e[i]={}),t[i]):t[i]);return e},nh=function(e,t){var i={},r;for(r in e)r in t||(i[r]=e[r]);return i},gl=function(e){var t=e.parent||ht,i=e.keyframes?f4(fn(e.keyframes)):ti;if(wn(e.inherit))for(;t;)i(e,t.vars.defaults),t=t.parent||t._dp;return e},p4=function(e,t){for(var i=e.length,r=i===t.length;r&&i--&&e[i]===t[i];);return i<0},PC=function(e,t,i,r,s){i===void 0&&(i="_first"),r===void 0&&(r="_last");var o=e[r],a;if(s)for(a=t[s];o&&o[s]>a;)o=o._prev;return o?(t._next=o._next,o._next=t):(t._next=e[i],e[i]=t),t._next?t._next._prev=t:e[r]=t,t._prev=o,t.parent=t._dp=e,t},rd=function(e,t,i,r){i===void 0&&(i="_first"),r===void 0&&(r="_last");var s=t._prev,o=t._next;s?s._next=o:e[i]===t&&(e[i]=o),o?o._prev=s:e[r]===t&&(e[r]=s),t._next=t._prev=t.parent=null},Yr=function(e,t){e.parent&&(!t||e.parent.autoRemoveChildren)&&e.parent.remove&&e.parent.remove(e),e._act=0},ks=function(e,t){if(e&&(!t||t._end>e._dur||t._start<0))for(var i=e;i;)i._dirty=1,i=i.parent;return e},_4=function(e){for(var t=e.parent;t&&t.parent;)t._dirty=1,t.totalDuration(),t=t.parent;return e},Hp=function(e,t,i,r){return e._startAt&&(dn?e._startAt.revert(hu):e.vars.immediateRender&&!e.vars.autoRevert||e._startAt.render(t,!0,r))},g4=function n(e){return!e||e._ts&&n(e.parent)},Y0=function(e){return e._repeat?oa(e._tTime,e=e.duration()+e._rDelay)*e:0},oa=function(e,t){var i=Math.floor(e/=t);return e&&i===e?i-1:i},ih=function(e,t){return(e-t._start)*t._ts+(t._ts>=0?0:t._dirty?t.totalDuration():t._tDur)},sd=function(e){return e._end=Lt(e._start+(e._tDur/Math.abs(e._ts||e._rts||tt)||0))},od=function(e,t){var i=e._dp;return i&&i.smoothChildTiming&&e._ts&&(e._start=Lt(i._time-(e._ts>0?t/e._ts:((e._dirty?e.totalDuration():e._tDur)-t)/-e._ts)),sd(e),i._dirty||ks(i,e)),e},OC=function(e,t){var i;if((t._time||!t._dur&&t._initted||t._start<e._time&&(t._dur||!t.add))&&(i=ih(e.rawTime(),t),(!t._dur||Cc(0,t.totalDuration(),i)-t._tTime>tt)&&t.render(i,!0)),ks(e,t)._dp&&e._initted&&e._time>=e._dur&&e._ts){if(e._dur<e.duration())for(i=e;i._dp;)i.rawTime()>=0&&i.totalTime(i._tTime),i=i._dp;e._zTime=-tt}},Oi=function(e,t,i,r){return t.parent&&Yr(t),t._start=Lt((ur(i)?i:i||e!==ht?Wn(e,i,t):e._time)+t._delay),t._end=Lt(t._start+(t.totalDuration()/Math.abs(t.timeScale())||0)),PC(e,t,"_first","_last",e._sort?"_start":0),qp(t)||(e._recent=t),r||OC(e,t),e._ts<0&&od(e,e._tTime),e},kC=function(e,t){return(Bn.ScrollTrigger||dm("scrollTrigger",t))&&Bn.ScrollTrigger.create(t,e)},NC=function(e,t,i,r,s){if(mm(e,t,s),!e._initted)return 1;if(!i&&e._pt&&!dn&&(e._dur&&e.vars.lazy!==!1||!e._dur&&e.vars.lazy)&&IC!==Nn.frame)return zr.push(e),e._lazy=[s,r],1},m4=function n(e){var t=e.parent;return t&&t._ts&&t._initted&&!t._lock&&(t.rawTime()<0||n(t))},qp=function(e){var t=e.data;return t==="isFromStart"||t==="isStart"},y4=function(e,t,i,r){var s=e.ratio,o=t<0||!t&&(!e._start&&m4(e)&&!(!e._initted&&qp(e))||(e._ts<0||e._dp._ts<0)&&!qp(e))?0:1,a=e._rDelay,l=0,c,u,h;if(a&&e._repeat&&(l=Cc(0,e._tDur,t),u=oa(l,a),e._yoyo&&u&1&&(o=1-o),u!==oa(e._tTime,a)&&(s=1-o,e.vars.repeatRefresh&&e._initted&&e.invalidate())),o!==s||dn||r||e._zTime===tt||!t&&e._zTime){if(!e._initted&&NC(e,t,r,i,l))return;for(h=e._zTime,e._zTime=t||(i?tt:0),i||(i=t&&!h),e.ratio=o,e._from&&(o=1-o),e._time=0,e._tTime=l,c=e._pt;c;)c.r(o,c.d),c=c._next;t<0&&Hp(e,t,i,!0),e._onUpdate&&!i&&Dn(e,"onUpdate"),l&&e._repeat&&!i&&e.parent&&Dn(e,"onRepeat"),(t>=e._tDur||t<0)&&e.ratio===o&&(o&&Yr(e,1),!i&&!dn&&(Dn(e,o?"onComplete":"onReverseComplete",!0),e._prom&&e._prom()))}else e._zTime||(e._zTime=t)},v4=function(e,t,i){var r;if(i>t)for(r=e._first;r&&r._start<=i;){if(r.data==="isPause"&&r._start>t)return r;r=r._next}else for(r=e._last;r&&r._start>=i;){if(r.data==="isPause"&&r._start<t)return r;r=r._prev}},aa=function(e,t,i,r){var s=e._repeat,o=Lt(t)||0,a=e._tTime/e._tDur;return a&&!r&&(e._time*=o/e._dur),e._dur=o,e._tDur=s?s<0?1e10:Lt(o*(s+1)+e._rDelay*s):o,a>0&&!r&&od(e,e._tTime=e._tDur*a),e.parent&&sd(e),i||ks(e.parent,e),e},X0=function(e){return e instanceof gn?ks(e):aa(e,e._dur)},w4={_start:0,endTime:Wl,totalDuration:Wl},Wn=function n(e,t,i){var r=e.labels,s=e._recent||w4,o=e.duration()>=Jn?s.endTime(!1):e._dur,a,l,c;return Bt(t)&&(isNaN(t)||t in r)?(l=t.charAt(0),c=t.substr(-1)==="%",a=t.indexOf("="),l==="<"||l===">"?(a>=0&&(t=t.replace(/=/,"")),(l==="<"?s._start:s.endTime(s._repeat>=0))+(parseFloat(t.substr(1))||0)*(c?(a<0?s:i).totalDuration()/100:1)):a<0?(t in r||(r[t]=o),r[t]):(l=parseFloat(t.charAt(a-1)+t.substr(a+1)),c&&i&&(l=l/100*(fn(i)?i[0]:i).totalDuration()),a>1?n(e,t.substr(0,a-1),i)+l:o+l)):t==null?o:+t},ml=function(e,t,i){var r=ur(t[1]),s=(r?2:1)+(e<2?0:1),o=t[s],a,l;if(r&&(o.duration=t[1]),o.parent=i,e){for(a=o,l=i;l&&!("immediateRender"in a);)a=l.vars.defaults||{},l=wn(l.vars.inherit)&&l.parent;o.immediateRender=wn(a.immediateRender),e<2?o.runBackwards=1:o.startAt=t[s-1]}return new xt(t[0],o,t[s+1])},is=function(e,t){return e||e===0?t(e):t},Cc=function(e,t,i){return i<e?e:i>t?t:i},ln=function(e,t){return!Bt(e)||!(t=c4.exec(e))?"":t[1]},T4=function(e,t,i){return is(i,function(r){return Cc(e,t,r)})},Wp=[].slice,MC=function(e,t){return e&&ji(e)&&"length"in e&&(!t&&!e.length||e.length-1 in e&&ji(e[0]))&&!e.nodeType&&e!==Ci},E4=function(e,t,i){return i===void 0&&(i=[]),e.forEach(function(r){var s;return Bt(r)&&!t||MC(r,1)?(s=i).push.apply(s,Zn(r)):i.push(r)})||i},Zn=function(e,t,i){return ct&&!t&&ct.selector?ct.selector(e):Bt(e)&&!i&&(jp||!la())?Wp.call((t||hm).querySelectorAll(e),0):fn(e)?E4(e,i):MC(e)?Wp.call(e,0):e?[e]:[]},Kp=function(e){return e=Zn(e)[0]||ql("Invalid scope")||{},function(t){var i=e.current||e.nativeElement||e;return Zn(t,i.querySelectorAll?i:i===e?ql("Invalid scope")||hm.createElement("div"):e)}},DC=function(e){return e.sort(function(){return .5-Math.random()})},LC=function(e){if(gt(e))return e;var t=ji(e)?e:{each:e},i=Ns(t.ease),r=t.from||0,s=parseFloat(t.base)||0,o={},a=r>0&&r<1,l=isNaN(r)||a,c=t.axis,u=r,h=r;return Bt(r)?u=h={center:.5,edges:.5,end:1}[r]||0:!a&&l&&(u=r[0],h=r[1]),function(f,d,_){var p=(_||t).length,g=o[p],m,T,w,S,E,I,P,x,A;if(!g){if(A=t.grid==="auto"?0:(t.grid||[1,Jn])[1],!A){for(P=-Jn;P<(P=_[A++].getBoundingClientRect().left)&&A<p;);A<p&&A--}for(g=o[p]=[],m=l?Math.min(A,p)*u-.5:r%A,T=A===Jn?0:l?p*h/A-.5:r/A|0,P=0,x=Jn,I=0;I<p;I++)w=I%A-m,S=T-(I/A|0),g[I]=E=c?Math.abs(c==="y"?S:w):mC(w*w+S*S),E>P&&(P=E),E<x&&(x=E);r==="random"&&DC(g),g.max=P-x,g.min=x,g.v=p=(parseFloat(t.amount)||parseFloat(t.each)*(A>p?p-1:c?c==="y"?p/A:A:Math.max(A,p/A))||0)*(r==="edges"?-1:1),g.b=p<0?s-p:s,g.u=ln(t.amount||t.each)||0,i=i&&p<0?qC(i):i}return p=(g[f]-g.min)/g.max||0,Lt(g.b+(i?i(p):p)*g.v)+g.u}},Yp=function(e){var t=Math.pow(10,((e+"").split(".")[1]||"").length);return function(i){var r=Lt(Math.round(parseFloat(i)/e)*e*t);return(r-r%1)/t+(ur(i)?0:ln(i))}},VC=function(e,t){var i=fn(e),r,s;return!i&&ji(e)&&(r=i=e.radius||Jn,e.values?(e=Zn(e.values),(s=!ur(e[0]))&&(r*=r)):e=Yp(e.increment)),is(t,i?gt(e)?function(o){return s=e(o),Math.abs(s-o)<=r?s:o}:function(o){for(var a=parseFloat(s?o.x:o),l=parseFloat(s?o.y:0),c=Jn,u=0,h=e.length,f,d;h--;)s?(f=e[h].x-a,d=e[h].y-l,f=f*f+d*d):f=Math.abs(e[h]-a),f<c&&(c=f,u=h);return u=!r||c<=r?e[u]:o,s||u===o||ur(o)?u:u+ln(o)}:Yp(e))},FC=function(e,t,i,r){return is(fn(e)?!t:i===!0?!!(i=0):!r,function(){return fn(e)?e[~~(Math.random()*e.length)]:(i=i||1e-5)&&(r=i<1?Math.pow(10,(i+"").length-2):1)&&Math.floor(Math.round((e-i/2+Math.random()*(t-e+i*.99))/i)*i*r)/r})},S4=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return function(r){return t.reduce(function(s,o){return o(s)},r)}},b4=function(e,t){return function(i){return e(parseFloat(i))+(t||ln(i))}},I4=function(e,t,i){return $C(e,t,0,1,i)},UC=function(e,t,i){return is(i,function(r){return e[~~t(r)]})},C4=function n(e,t,i){var r=t-e;return fn(e)?UC(e,n(0,e.length),t):is(i,function(s){return(r+(s-e)%r)%r+e})},A4=function n(e,t,i){var r=t-e,s=r*2;return fn(e)?UC(e,n(0,e.length-1),t):is(i,function(o){return o=(s+(o-e)%s)%s||0,e+(o>r?s-o:o)})},Kl=function(e){for(var t=0,i="",r,s,o,a;~(r=e.indexOf("random(",t));)o=e.indexOf(")",r),a=e.charAt(r+7)==="[",s=e.substr(r+7,o-r-7).match(a?TC:zp),i+=e.substr(t,r-t)+FC(a?s:+s[0],a?0:+s[1],+s[2]||1e-5),t=o+1;return i+e.substr(t,e.length-t)},$C=function(e,t,i,r,s){var o=t-e,a=r-i;return is(s,function(l){return i+((l-e)/o*a||0)})},x4=function n(e,t,i,r){var s=isNaN(e+t)?0:function(d){return(1-d)*e+d*t};if(!s){var o=Bt(e),a={},l,c,u,h,f;if(i===!0&&(r=1)&&(i=null),o)e={p:e},t={p:t};else if(fn(e)&&!fn(t)){for(u=[],h=e.length,f=h-2,c=1;c<h;c++)u.push(n(e[c-1],e[c]));h--,s=function(_){_*=h;var p=Math.min(f,~~_);return u[p](_-p)},i=t}else r||(e=Ws(fn(e)?[]:{},e));if(!u){for(l in t)gm.call(a,e,l,"get",t[l]);s=function(_){return wm(_,a)||(o?e.p:e)}}}return is(i,s)},Q0=function(e,t,i){var r=e.labels,s=Jn,o,a,l;for(o in r)a=r[o]-t,a<0==!!i&&a&&s>(a=Math.abs(a))&&(l=o,s=a);return l},Dn=function(e,t,i){var r=e.vars,s=r[t],o=ct,a=e._ctx,l,c,u;if(s)return l=r[t+"Params"],c=r.callbackScope||e,i&&zr.length&&th(),a&&(ct=a),u=l?s.apply(c,l):s.call(c),ct=o,u},Wa=function(e){return Yr(e),e.scrollTrigger&&e.scrollTrigger.kill(!!dn),e.progress()<1&&Dn(e,"onInterrupt"),e},To,BC=[],zC=function(e){if(e)if(e=!e.name&&e.default||e,um()||e.headless){var t=e.name,i=gt(e),r=t&&!i&&e.init?function(){this._props=[]}:e,s={init:Wl,render:wm,add:gm,kill:G4,modifier:j4,rawVars:0},o={targetTest:0,get:0,getSetter:vm,aliases:{},register:0};if(la(),e!==r){if(On[t])return;ti(r,ti(nh(e,s),o)),Ws(r.prototype,Ws(s,nh(e,o))),On[r.prop=t]=r,e.targetTest&&(du.push(r),fm[t]=1),t=(t==="css"?"CSS":t.charAt(0).toUpperCase()+t.substr(1))+"Plugin"}bC(t,r),e.register&&e.register(Cn,r,En)}else BC.push(e)},Je=255,Ka={aqua:[0,Je,Je],lime:[0,Je,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,Je],navy:[0,0,128],white:[Je,Je,Je],olive:[128,128,0],yellow:[Je,Je,0],orange:[Je,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[Je,0,0],pink:[Je,192,203],cyan:[0,Je,Je],transparent:[Je,Je,Je,0]},of=function(e,t,i){return e+=e<0?1:e>1?-1:0,(e*6<1?t+(i-t)*e*6:e<.5?i:e*3<2?t+(i-t)*(2/3-e)*6:t)*Je+.5|0},jC=function(e,t,i){var r=e?ur(e)?[e>>16,e>>8&Je,e&Je]:0:Ka.black,s,o,a,l,c,u,h,f,d,_;if(!r){if(e.substr(-1)===","&&(e=e.substr(0,e.length-1)),Ka[e])r=Ka[e];else if(e.charAt(0)==="#"){if(e.length<6&&(s=e.charAt(1),o=e.charAt(2),a=e.charAt(3),e="#"+s+s+o+o+a+a+(e.length===5?e.charAt(4)+e.charAt(4):"")),e.length===9)return r=parseInt(e.substr(1,6),16),[r>>16,r>>8&Je,r&Je,parseInt(e.substr(7),16)/255];e=parseInt(e.substr(1),16),r=[e>>16,e>>8&Je,e&Je]}else if(e.substr(0,3)==="hsl"){if(r=_=e.match(zp),!t)l=+r[0]%360/360,c=+r[1]/100,u=+r[2]/100,o=u<=.5?u*(c+1):u+c-u*c,s=u*2-o,r.length>3&&(r[3]*=1),r[0]=of(l+1/3,s,o),r[1]=of(l,s,o),r[2]=of(l-1/3,s,o);else if(~e.indexOf("="))return r=e.match(vC),i&&r.length<4&&(r[3]=1),r}else r=e.match(zp)||Ka.transparent;r=r.map(Number)}return t&&!_&&(s=r[0]/Je,o=r[1]/Je,a=r[2]/Je,h=Math.max(s,o,a),f=Math.min(s,o,a),u=(h+f)/2,h===f?l=c=0:(d=h-f,c=u>.5?d/(2-h-f):d/(h+f),l=h===s?(o-a)/d+(o<a?6:0):h===o?(a-s)/d+2:(s-o)/d+4,l*=60),r[0]=~~(l+.5),r[1]=~~(c*100+.5),r[2]=~~(u*100+.5)),i&&r.length<4&&(r[3]=1),r},GC=function(e){var t=[],i=[],r=-1;return e.split(jr).forEach(function(s){var o=s.match(wo)||[];t.push.apply(t,o),i.push(r+=o.length+1)}),t.c=i,t},J0=function(e,t,i){var r="",s=(e+r).match(jr),o=t?"hsla(":"rgba(",a=0,l,c,u,h;if(!s)return e;if(s=s.map(function(f){return(f=jC(f,t,1))&&o+(t?f[0]+","+f[1]+"%,"+f[2]+"%,"+f[3]:f.join(","))+")"}),i&&(u=GC(e),l=i.c,l.join(r)!==u.c.join(r)))for(c=e.replace(jr,"1").split(wo),h=c.length-1;a<h;a++)r+=c[a]+(~l.indexOf(a)?s.shift()||o+"0,0,0,0)":(u.length?u:s.length?s:i).shift());if(!c)for(c=e.split(jr),h=c.length-1;a<h;a++)r+=c[a]+s[a];return r+c[h]},jr=function(){var n="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",e;for(e in Ka)n+="|"+e+"\\b";return new RegExp(n+")","gi")}(),R4=/hsl[a]?\(/,HC=function(e){var t=e.join(" "),i;if(jr.lastIndex=0,jr.test(t))return i=R4.test(t),e[1]=J0(e[1],i),e[0]=J0(e[0],i,GC(e[1])),!0},Yl,Nn=function(){var n=Date.now,e=500,t=33,i=n(),r=i,s=1e3/240,o=s,a=[],l,c,u,h,f,d,_=function p(g){var m=n()-r,T=g===!0,w,S,E,I;if((m>e||m<0)&&(i+=m-t),r+=m,E=r-i,w=E-o,(w>0||T)&&(I=++h.frame,f=E-h.time*1e3,h.time=E=E/1e3,o+=w+(w>=s?4:s-w),S=1),T||(l=c(p)),S)for(d=0;d<a.length;d++)a[d](E,f,I,g)};return h={time:0,frame:0,tick:function(){_(!0)},deltaRatio:function(g){return f/(1e3/(g||60))},wake:function(){EC&&(!jp&&um()&&(Ci=jp=window,hm=Ci.document||{},Bn.gsap=Cn,(Ci.gsapVersions||(Ci.gsapVersions=[])).push(Cn.version),SC(eh||Ci.GreenSockGlobals||!Ci.gsap&&Ci||{}),BC.forEach(zC)),u=typeof requestAnimationFrame<"u"&&requestAnimationFrame,l&&h.sleep(),c=u||function(g){return setTimeout(g,o-h.time*1e3+1|0)},Yl=1,_(2))},sleep:function(){(u?cancelAnimationFrame:clearTimeout)(l),Yl=0,c=Wl},lagSmoothing:function(g,m){e=g||1/0,t=Math.min(m||33,e)},fps:function(g){s=1e3/(g||240),o=h.time*1e3+s},add:function(g,m,T){var w=m?function(S,E,I,P){g(S,E,I,P),h.remove(w)}:g;return h.remove(g),a[T?"unshift":"push"](w),la(),w},remove:function(g,m){~(m=a.indexOf(g))&&a.splice(m,1)&&d>=m&&d--},_listeners:a},h}(),la=function(){return!Yl&&Nn.wake()},Pe={},P4=/^[\d.\-M][\d.\-,\s]/,O4=/["']/g,k4=function(e){for(var t={},i=e.substr(1,e.length-3).split(":"),r=i[0],s=1,o=i.length,a,l,c;s<o;s++)l=i[s],a=s!==o-1?l.lastIndexOf(","):l.length,c=l.substr(0,a),t[r]=isNaN(c)?c.replace(O4,"").trim():+c,r=l.substr(a+1).trim();return t},N4=function(e){var t=e.indexOf("(")+1,i=e.indexOf(")"),r=e.indexOf("(",t);return e.substring(t,~r&&r<i?e.indexOf(")",i+1):i)},M4=function(e){var t=(e+"").split("("),i=Pe[t[0]];return i&&t.length>1&&i.config?i.config.apply(null,~e.indexOf("{")?[k4(t[1])]:N4(e).split(",").map(xC)):Pe._CE&&P4.test(e)?Pe._CE("",e):i},qC=function(e){return function(t){return 1-e(1-t)}},WC=function n(e,t){for(var i=e._first,r;i;)i instanceof gn?n(i,t):i.vars.yoyoEase&&(!i._yoyo||!i._repeat)&&i._yoyo!==t&&(i.timeline?n(i.timeline,t):(r=i._ease,i._ease=i._yEase,i._yEase=r,i._yoyo=t)),i=i._next},Ns=function(e,t){return e&&(gt(e)?e:Pe[e]||M4(e))||t},no=function(e,t,i,r){i===void 0&&(i=function(l){return 1-t(1-l)}),r===void 0&&(r=function(l){return l<.5?t(l*2)/2:1-t((1-l)*2)/2});var s={easeIn:t,easeOut:i,easeInOut:r},o;return Tn(e,function(a){Pe[a]=Bn[a]=s,Pe[o=a.toLowerCase()]=i;for(var l in s)Pe[o+(l==="easeIn"?".in":l==="easeOut"?".out":".inOut")]=Pe[a+"."+l]=s[l]}),s},KC=function(e){return function(t){return t<.5?(1-e(1-t*2))/2:.5+e((t-.5)*2)/2}},af=function n(e,t,i){var r=t>=1?t:1,s=(i||(e?.3:.45))/(t<1?t:1),o=s/Bp*(Math.asin(1/r)||0),a=function(u){return u===1?1:r*Math.pow(2,-10*u)*l4((u-o)*s)+1},l=e==="out"?a:e==="in"?function(c){return 1-a(1-c)}:KC(a);return s=Bp/s,l.config=function(c,u){return n(e,c,u)},l},lf=function n(e,t){t===void 0&&(t=1.70158);var i=function(o){return o?--o*o*((t+1)*o+t)+1:0},r=e==="out"?i:e==="in"?function(s){return 1-i(1-s)}:KC(i);return r.config=function(s){return n(e,s)},r};Tn("Linear,Quad,Cubic,Quart,Quint,Strong",function(n,e){var t=e<5?e+1:e;no(n+",Power"+(t-1),e?function(i){return Math.pow(i,t)}:function(i){return i},function(i){return 1-Math.pow(1-i,t)},function(i){return i<.5?Math.pow(i*2,t)/2:1-Math.pow((1-i)*2,t)/2})});Pe.Linear.easeNone=Pe.none=Pe.Linear.easeIn;no("Elastic",af("in"),af("out"),af());(function(n,e){var t=1/e,i=2*t,r=2.5*t,s=function(a){return a<t?n*a*a:a<i?n*Math.pow(a-1.5/e,2)+.75:a<r?n*(a-=2.25/e)*a+.9375:n*Math.pow(a-2.625/e,2)+.984375};no("Bounce",function(o){return 1-s(1-o)},s)})(7.5625,2.75);no("Expo",function(n){return n?Math.pow(2,10*(n-1)):0});no("Circ",function(n){return-(mC(1-n*n)-1)});no("Sine",function(n){return n===1?1:-a4(n*s4)+1});no("Back",lf("in"),lf("out"),lf());Pe.SteppedEase=Pe.steps=Bn.SteppedEase={config:function(e,t){e===void 0&&(e=1);var i=1/e,r=e+(t?0:1),s=t?1:0,o=1-tt;return function(a){return((r*Cc(0,o,a)|0)+s)*i}}};sa.ease=Pe["quad.out"];Tn("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(n){return pm+=n+","+n+"Params,"});var YC=function(e,t){this.id=o4++,e._gsap=this,this.target=e,this.harness=t,this.get=t?t.get:CC,this.set=t?t.getSetter:vm},Xl=function(){function n(t){this.vars=t,this._delay=+t.delay||0,(this._repeat=t.repeat===1/0?-2:t.repeat||0)&&(this._rDelay=t.repeatDelay||0,this._yoyo=!!t.yoyo||!!t.yoyoEase),this._ts=1,aa(this,+t.duration,1,1),this.data=t.data,ct&&(this._ctx=ct,ct.data.push(this)),Yl||Nn.wake()}var e=n.prototype;return e.delay=function(i){return i||i===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+i-this._delay),this._delay=i,this):this._delay},e.duration=function(i){return arguments.length?this.totalDuration(this._repeat>0?i+(i+this._rDelay)*this._repeat:i):this.totalDuration()&&this._dur},e.totalDuration=function(i){return arguments.length?(this._dirty=0,aa(this,this._repeat<0?i:(i-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},e.totalTime=function(i,r){if(la(),!arguments.length)return this._tTime;var s=this._dp;if(s&&s.smoothChildTiming&&this._ts){for(od(this,i),!s._dp||s.parent||OC(s,this);s&&s.parent;)s.parent._time!==s._start+(s._ts>=0?s._tTime/s._ts:(s.totalDuration()-s._tTime)/-s._ts)&&s.totalTime(s._tTime,!0),s=s.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&i<this._tDur||this._ts<0&&i>0||!this._tDur&&!i)&&Oi(this._dp,this,this._start-this._delay)}return(this._tTime!==i||!this._dur&&!r||this._initted&&Math.abs(this._zTime)===tt||!i&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=i),AC(this,i,r)),this},e.time=function(i,r){return arguments.length?this.totalTime(Math.min(this.totalDuration(),i+Y0(this))%(this._dur+this._rDelay)||(i?this._dur:0),r):this._time},e.totalProgress=function(i,r){return arguments.length?this.totalTime(this.totalDuration()*i,r):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>0?1:0},e.progress=function(i,r){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-i:i)+Y0(this),r):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},e.iteration=function(i,r){var s=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(i-1)*s,r):this._repeat?oa(this._tTime,s)+1:1},e.timeScale=function(i,r){if(!arguments.length)return this._rts===-tt?0:this._rts;if(this._rts===i)return this;var s=this.parent&&this._ts?ih(this.parent._time,this):this._tTime;return this._rts=+i||0,this._ts=this._ps||i===-tt?0:this._rts,this.totalTime(Cc(-Math.abs(this._delay),this._tDur,s),r!==!1),sd(this),_4(this)},e.paused=function(i){return arguments.length?(this._ps!==i&&(this._ps=i,i?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(la(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==tt&&(this._tTime-=tt)))),this):this._ps},e.startTime=function(i){if(arguments.length){this._start=i;var r=this.parent||this._dp;return r&&(r._sort||!this.parent)&&Oi(r,this,i-this._delay),this}return this._start},e.endTime=function(i){return this._start+(wn(i)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},e.rawTime=function(i){var r=this.parent||this._dp;return r?i&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?ih(r.rawTime(i),this):this._tTime:this._tTime},e.revert=function(i){i===void 0&&(i=h4);var r=dn;return dn=i,(this._initted||this._startAt)&&(this.timeline&&this.timeline.revert(i),this.totalTime(-.01,i.suppressEvents)),this.data!=="nested"&&i.kill!==!1&&this.kill(),dn=r,this},e.globalTime=function(i){for(var r=this,s=arguments.length?i:r.rawTime();r;)s=r._start+s/(Math.abs(r._ts)||1),r=r._dp;return!this.parent&&this._sat?this._sat.globalTime(i):s},e.repeat=function(i){return arguments.length?(this._repeat=i===1/0?-2:i,X0(this)):this._repeat===-2?1/0:this._repeat},e.repeatDelay=function(i){if(arguments.length){var r=this._time;return this._rDelay=i,X0(this),r?this.time(r):this}return this._rDelay},e.yoyo=function(i){return arguments.length?(this._yoyo=i,this):this._yoyo},e.seek=function(i,r){return this.totalTime(Wn(this,i),wn(r))},e.restart=function(i,r){return this.play().totalTime(i?-this._delay:0,wn(r))},e.play=function(i,r){return i!=null&&this.seek(i,r),this.reversed(!1).paused(!1)},e.reverse=function(i,r){return i!=null&&this.seek(i||this.totalDuration(),r),this.reversed(!0).paused(!1)},e.pause=function(i,r){return i!=null&&this.seek(i,r),this.paused(!0)},e.resume=function(){return this.paused(!1)},e.reversed=function(i){return arguments.length?(!!i!==this.reversed()&&this.timeScale(-this._rts||(i?-tt:0)),this):this._rts<0},e.invalidate=function(){return this._initted=this._act=0,this._zTime=-tt,this},e.isActive=function(){var i=this.parent||this._dp,r=this._start,s;return!!(!i||this._ts&&this._initted&&i.isActive()&&(s=i.rawTime(!0))>=r&&s<this.endTime(!0)-tt)},e.eventCallback=function(i,r,s){var o=this.vars;return arguments.length>1?(r?(o[i]=r,s&&(o[i+"Params"]=s),i==="onUpdate"&&(this._onUpdate=r)):delete o[i],this):o[i]},e.then=function(i){var r=this;return new Promise(function(s){var o=gt(i)?i:RC,a=function(){var c=r.then;r.then=null,gt(o)&&(o=o(r))&&(o.then||o===r)&&(r.then=c),s(o),r.then=c};r._initted&&r.totalProgress()===1&&r._ts>=0||!r._tTime&&r._ts<0?a():r._prom=a})},e.kill=function(){Wa(this)},n}();ti(Xl.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-tt,_prom:0,_ps:!1,_rts:1});var gn=function(n){gC(e,n);function e(i,r){var s;return i===void 0&&(i={}),s=n.call(this,i)||this,s.labels={},s.smoothChildTiming=!!i.smoothChildTiming,s.autoRemoveChildren=!!i.autoRemoveChildren,s._sort=wn(i.sortChildren),ht&&Oi(i.parent||ht,Xi(s),r),i.reversed&&s.reverse(),i.paused&&s.paused(!0),i.scrollTrigger&&kC(Xi(s),i.scrollTrigger),s}var t=e.prototype;return t.to=function(r,s,o){return ml(0,arguments,this),this},t.from=function(r,s,o){return ml(1,arguments,this),this},t.fromTo=function(r,s,o,a){return ml(2,arguments,this),this},t.set=function(r,s,o){return s.duration=0,s.parent=this,gl(s).repeatDelay||(s.repeat=0),s.immediateRender=!!s.immediateRender,new xt(r,s,Wn(this,o),1),this},t.call=function(r,s,o){return Oi(this,xt.delayedCall(0,r,s),o)},t.staggerTo=function(r,s,o,a,l,c,u){return o.duration=s,o.stagger=o.stagger||a,o.onComplete=c,o.onCompleteParams=u,o.parent=this,new xt(r,o,Wn(this,l)),this},t.staggerFrom=function(r,s,o,a,l,c,u){return o.runBackwards=1,gl(o).immediateRender=wn(o.immediateRender),this.staggerTo(r,s,o,a,l,c,u)},t.staggerFromTo=function(r,s,o,a,l,c,u,h){return a.startAt=o,gl(a).immediateRender=wn(a.immediateRender),this.staggerTo(r,s,a,l,c,u,h)},t.render=function(r,s,o){var a=this._time,l=this._dirty?this.totalDuration():this._tDur,c=this._dur,u=r<=0?0:Lt(r),h=this._zTime<0!=r<0&&(this._initted||!c),f,d,_,p,g,m,T,w,S,E,I,P;if(this!==ht&&u>l&&r>=0&&(u=l),u!==this._tTime||o||h){if(a!==this._time&&c&&(u+=this._time-a,r+=this._time-a),f=u,S=this._start,w=this._ts,m=!w,h&&(c||(a=this._zTime),(r||!s)&&(this._zTime=r)),this._repeat){if(I=this._yoyo,g=c+this._rDelay,this._repeat<-1&&r<0)return this.totalTime(g*100+r,s,o);if(f=Lt(u%g),u===l?(p=this._repeat,f=c):(p=~~(u/g),p&&p===u/g&&(f=c,p--),f>c&&(f=c)),E=oa(this._tTime,g),!a&&this._tTime&&E!==p&&this._tTime-E*g-this._dur<=0&&(E=p),I&&p&1&&(f=c-f,P=1),p!==E&&!this._lock){var x=I&&E&1,A=x===(I&&p&1);if(p<E&&(x=!x),a=x?0:u%c?c:u,this._lock=1,this.render(a||(P?0:Lt(p*g)),s,!c)._lock=0,this._tTime=u,!s&&this.parent&&Dn(this,"onRepeat"),this.vars.repeatRefresh&&!P&&(this.invalidate()._lock=1),a&&a!==this._time||m!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(c=this._dur,l=this._tDur,A&&(this._lock=2,a=x?c:-1e-4,this.render(a,!0),this.vars.repeatRefresh&&!P&&this.invalidate()),this._lock=0,!this._ts&&!m)return this;WC(this,P)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(T=v4(this,Lt(a),Lt(f)),T&&(u-=f-(f=T._start))),this._tTime=u,this._time=f,this._act=!w,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=r,a=0),!a&&f&&!s&&!p&&(Dn(this,"onStart"),this._tTime!==u))return this;if(f>=a&&r>=0)for(d=this._first;d;){if(_=d._next,(d._act||f>=d._start)&&d._ts&&T!==d){if(d.parent!==this)return this.render(r,s,o);if(d.render(d._ts>0?(f-d._start)*d._ts:(d._dirty?d.totalDuration():d._tDur)+(f-d._start)*d._ts,s,o),f!==this._time||!this._ts&&!m){T=0,_&&(u+=this._zTime=-tt);break}}d=_}else{d=this._last;for(var k=r<0?r:f;d;){if(_=d._prev,(d._act||k<=d._end)&&d._ts&&T!==d){if(d.parent!==this)return this.render(r,s,o);if(d.render(d._ts>0?(k-d._start)*d._ts:(d._dirty?d.totalDuration():d._tDur)+(k-d._start)*d._ts,s,o||dn&&(d._initted||d._startAt)),f!==this._time||!this._ts&&!m){T=0,_&&(u+=this._zTime=k?-tt:tt);break}}d=_}}if(T&&!s&&(this.pause(),T.render(f>=a?0:-tt)._zTime=f>=a?1:-1,this._ts))return this._start=S,sd(this),this.render(r,s,o);this._onUpdate&&!s&&Dn(this,"onUpdate",!0),(u===l&&this._tTime>=this.totalDuration()||!u&&a)&&(S===this._start||Math.abs(w)!==Math.abs(this._ts))&&(this._lock||((r||!c)&&(u===l&&this._ts>0||!u&&this._ts<0)&&Yr(this,1),!s&&!(r<0&&!a)&&(u||a||!l)&&(Dn(this,u===l&&r>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(u<l&&this.timeScale()>0)&&this._prom())))}return this},t.add=function(r,s){var o=this;if(ur(s)||(s=Wn(this,s,r)),!(r instanceof Xl)){if(fn(r))return r.forEach(function(a){return o.add(a,s)}),this;if(Bt(r))return this.addLabel(r,s);if(gt(r))r=xt.delayedCall(0,r);else return this}return this!==r?Oi(this,r,s):this},t.getChildren=function(r,s,o,a){r===void 0&&(r=!0),s===void 0&&(s=!0),o===void 0&&(o=!0),a===void 0&&(a=-Jn);for(var l=[],c=this._first;c;)c._start>=a&&(c instanceof xt?s&&l.push(c):(o&&l.push(c),r&&l.push.apply(l,c.getChildren(!0,s,o)))),c=c._next;return l},t.getById=function(r){for(var s=this.getChildren(1,1,1),o=s.length;o--;)if(s[o].vars.id===r)return s[o]},t.remove=function(r){return Bt(r)?this.removeLabel(r):gt(r)?this.killTweensOf(r):(rd(this,r),r===this._recent&&(this._recent=this._last),ks(this))},t.totalTime=function(r,s){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=Lt(Nn.time-(this._ts>0?r/this._ts:(this.totalDuration()-r)/-this._ts))),n.prototype.totalTime.call(this,r,s),this._forcing=0,this):this._tTime},t.addLabel=function(r,s){return this.labels[r]=Wn(this,s),this},t.removeLabel=function(r){return delete this.labels[r],this},t.addPause=function(r,s,o){var a=xt.delayedCall(0,s||Wl,o);return a.data="isPause",this._hasPause=1,Oi(this,a,Wn(this,r))},t.removePause=function(r){var s=this._first;for(r=Wn(this,r);s;)s._start===r&&s.data==="isPause"&&Yr(s),s=s._next},t.killTweensOf=function(r,s,o){for(var a=this.getTweensOf(r,o),l=a.length;l--;)Nr!==a[l]&&a[l].kill(r,s);return this},t.getTweensOf=function(r,s){for(var o=[],a=Zn(r),l=this._first,c=ur(s),u;l;)l instanceof xt?d4(l._targets,a)&&(c?(!Nr||l._initted&&l._ts)&&l.globalTime(0)<=s&&l.globalTime(l.totalDuration())>s:!s||l.isActive())&&o.push(l):(u=l.getTweensOf(a,s)).length&&o.push.apply(o,u),l=l._next;return o},t.tweenTo=function(r,s){s=s||{};var o=this,a=Wn(o,r),l=s,c=l.startAt,u=l.onStart,h=l.onStartParams,f=l.immediateRender,d,_=xt.to(o,ti({ease:s.ease||"none",lazy:!1,immediateRender:!1,time:a,overwrite:"auto",duration:s.duration||Math.abs((a-(c&&"time"in c?c.time:o._time))/o.timeScale())||tt,onStart:function(){if(o.pause(),!d){var g=s.duration||Math.abs((a-(c&&"time"in c?c.time:o._time))/o.timeScale());_._dur!==g&&aa(_,g,0,1).render(_._time,!0,!0),d=1}u&&u.apply(_,h||[])}},s));return f?_.render(0):_},t.tweenFromTo=function(r,s,o){return this.tweenTo(s,ti({startAt:{time:Wn(this,r)}},o))},t.recent=function(){return this._recent},t.nextLabel=function(r){return r===void 0&&(r=this._time),Q0(this,Wn(this,r))},t.previousLabel=function(r){return r===void 0&&(r=this._time),Q0(this,Wn(this,r),1)},t.currentLabel=function(r){return arguments.length?this.seek(r,!0):this.previousLabel(this._time+tt)},t.shiftChildren=function(r,s,o){o===void 0&&(o=0);for(var a=this._first,l=this.labels,c;a;)a._start>=o&&(a._start+=r,a._end+=r),a=a._next;if(s)for(c in l)l[c]>=o&&(l[c]+=r);return ks(this)},t.invalidate=function(r){var s=this._first;for(this._lock=0;s;)s.invalidate(r),s=s._next;return n.prototype.invalidate.call(this,r)},t.clear=function(r){r===void 0&&(r=!0);for(var s=this._first,o;s;)o=s._next,this.remove(s),s=o;return this._dp&&(this._time=this._tTime=this._pTime=0),r&&(this.labels={}),ks(this)},t.totalDuration=function(r){var s=0,o=this,a=o._last,l=Jn,c,u,h;if(arguments.length)return o.timeScale((o._repeat<0?o.duration():o.totalDuration())/(o.reversed()?-r:r));if(o._dirty){for(h=o.parent;a;)c=a._prev,a._dirty&&a.totalDuration(),u=a._start,u>l&&o._sort&&a._ts&&!o._lock?(o._lock=1,Oi(o,a,u-a._delay,1)._lock=0):l=u,u<0&&a._ts&&(s-=u,(!h&&!o._dp||h&&h.smoothChildTiming)&&(o._start+=u/o._ts,o._time-=u,o._tTime-=u),o.shiftChildren(-u,!1,-1/0),l=0),a._end>s&&a._ts&&(s=a._end),a=c;aa(o,o===ht&&o._time>s?o._time:s,1,1),o._dirty=0}return o._tDur},e.updateRoot=function(r){if(ht._ts&&(AC(ht,ih(r,ht)),IC=Nn.frame),Nn.frame>=W0){W0+=Fn.autoSleep||120;var s=ht._first;if((!s||!s._ts)&&Fn.autoSleep&&Nn._listeners.length<2){for(;s&&!s._ts;)s=s._next;s||Nn.sleep()}}},e}(Xl);ti(gn.prototype,{_lock:0,_hasPause:0,_forcing:0});var D4=function(e,t,i,r,s,o,a){var l=new En(this._pt,e,t,0,1,tA,null,s),c=0,u=0,h,f,d,_,p,g,m,T;for(l.b=i,l.e=r,i+="",r+="",(m=~r.indexOf("random("))&&(r=Kl(r)),o&&(T=[i,r],o(T,e,t),i=T[0],r=T[1]),f=i.match(rf)||[];h=rf.exec(r);)_=h[0],p=r.substring(c,h.index),d?d=(d+1)%5:p.substr(-5)==="rgba("&&(d=1),_!==f[u++]&&(g=parseFloat(f[u-1])||0,l._pt={_next:l._pt,p:p||u===1?p:",",s:g,c:_.charAt(1)==="="?Fo(g,_)-g:parseFloat(_)-g,m:d&&d<4?Math.round:0},c=rf.lastIndex);return l.c=c<r.length?r.substring(c,r.length):"",l.fp=a,(wC.test(r)||m)&&(l.e=0),this._pt=l,l},gm=function(e,t,i,r,s,o,a,l,c,u){gt(r)&&(r=r(s||0,e,o));var h=e[t],f=i!=="get"?i:gt(h)?c?e[t.indexOf("set")||!gt(e["get"+t.substr(3)])?t:"get"+t.substr(3)](c):e[t]():h,d=gt(h)?c?$4:ZC:ym,_;if(Bt(r)&&(~r.indexOf("random(")&&(r=Kl(r)),r.charAt(1)==="="&&(_=Fo(f,r)+(ln(f)||0),(_||_===0)&&(r=_))),!u||f!==r||Xp)return!isNaN(f*r)&&r!==""?(_=new En(this._pt,e,t,+f||0,r-(f||0),typeof h=="boolean"?z4:eA,0,d),c&&(_.fp=c),a&&_.modifier(a,this,e),this._pt=_):(!h&&!(t in e)&&dm(t,r),D4.call(this,e,t,f,r,d,l||Fn.stringFilter,c))},L4=function(e,t,i,r,s){if(gt(e)&&(e=yl(e,s,t,i,r)),!ji(e)||e.style&&e.nodeType||fn(e)||yC(e))return Bt(e)?yl(e,s,t,i,r):e;var o={},a;for(a in e)o[a]=yl(e[a],s,t,i,r);return o},XC=function(e,t,i,r,s,o){var a,l,c,u;if(On[e]&&(a=new On[e]).init(s,a.rawVars?t[e]:L4(t[e],r,s,o,i),i,r,o)!==!1&&(i._pt=l=new En(i._pt,s,e,0,1,a.render,a,0,a.priority),i!==To))for(c=i._ptLookup[i._targets.indexOf(s)],u=a._props.length;u--;)c[a._props[u]]=l;return a},Nr,Xp,mm=function n(e,t,i){var r=e.vars,s=r.ease,o=r.startAt,a=r.immediateRender,l=r.lazy,c=r.onUpdate,u=r.runBackwards,h=r.yoyoEase,f=r.keyframes,d=r.autoRevert,_=e._dur,p=e._startAt,g=e._targets,m=e.parent,T=m&&m.data==="nested"?m.vars.targets:g,w=e._overwrite==="auto"&&!lm,S=e.timeline,E,I,P,x,A,k,D,W,N,de,fe,ne,Z;if(S&&(!f||!s)&&(s="none"),e._ease=Ns(s,sa.ease),e._yEase=h?qC(Ns(h===!0?s:h,sa.ease)):0,h&&e._yoyo&&!e._repeat&&(h=e._yEase,e._yEase=e._ease,e._ease=h),e._from=!S&&!!r.runBackwards,!S||f&&!r.stagger){if(W=g[0]?Os(g[0]).harness:0,ne=W&&r[W.prop],E=nh(r,fm),p&&(p._zTime<0&&p.progress(1),t<0&&u&&a&&!d?p.render(-1,!0):p.revert(u&&_?hu:u4),p._lazy=0),o){if(Yr(e._startAt=xt.set(g,ti({data:"isStart",overwrite:!1,parent:m,immediateRender:!0,lazy:!p&&wn(l),startAt:null,delay:0,onUpdate:c&&function(){return Dn(e,"onUpdate")},stagger:0},o))),e._startAt._dp=0,e._startAt._sat=e,t<0&&(dn||!a&&!d)&&e._startAt.revert(hu),a&&_&&t<=0&&i<=0){t&&(e._zTime=t);return}}else if(u&&_&&!p){if(t&&(a=!1),P=ti({overwrite:!1,data:"isFromStart",lazy:a&&!p&&wn(l),immediateRender:a,stagger:0,parent:m},E),ne&&(P[W.prop]=ne),Yr(e._startAt=xt.set(g,P)),e._startAt._dp=0,e._startAt._sat=e,t<0&&(dn?e._startAt.revert(hu):e._startAt.render(-1,!0)),e._zTime=t,!a)n(e._startAt,tt,tt);else if(!t)return}for(e._pt=e._ptCache=0,l=_&&wn(l)||l&&!_,I=0;I<g.length;I++){if(A=g[I],D=A._gsap||_m(g)[I]._gsap,e._ptLookup[I]=de={},Gp[D.id]&&zr.length&&th(),fe=T===g?I:T.indexOf(A),W&&(N=new W).init(A,ne||E,e,fe,T)!==!1&&(e._pt=x=new En(e._pt,A,N.name,0,1,N.render,N,0,N.priority),N._props.forEach(function(he){de[he]=x}),N.priority&&(k=1)),!W||ne)for(P in E)On[P]&&(N=XC(P,E,e,fe,A,T))?N.priority&&(k=1):de[P]=x=gm.call(e,A,P,"get",E[P],fe,T,0,r.stringFilter);e._op&&e._op[I]&&e.kill(A,e._op[I]),w&&e._pt&&(Nr=e,ht.killTweensOf(A,de,e.globalTime(t)),Z=!e.parent,Nr=0),e._pt&&l&&(Gp[D.id]=1)}k&&nA(e),e._onInit&&e._onInit(e)}e._onUpdate=c,e._initted=(!e._op||e._pt)&&!Z,f&&t<=0&&S.render(Jn,!0,!0)},V4=function(e,t,i,r,s,o,a,l){var c=(e._pt&&e._ptCache||(e._ptCache={}))[t],u,h,f,d;if(!c)for(c=e._ptCache[t]=[],f=e._ptLookup,d=e._targets.length;d--;){if(u=f[d][t],u&&u.d&&u.d._pt)for(u=u.d._pt;u&&u.p!==t&&u.fp!==t;)u=u._next;if(!u)return Xp=1,e.vars[t]="+=0",mm(e,a),Xp=0,l?ql(t+" not eligible for reset"):1;c.push(u)}for(d=c.length;d--;)h=c[d],u=h._pt||h,u.s=(r||r===0)&&!s?r:u.s+(r||0)+o*u.c,u.c=i-u.s,h.e&&(h.e=Tt(i)+ln(h.e)),h.b&&(h.b=u.s+ln(h.b))},F4=function(e,t){var i=e[0]?Os(e[0]).harness:0,r=i&&i.aliases,s,o,a,l;if(!r)return t;s=Ws({},t);for(o in r)if(o in s)for(l=r[o].split(","),a=l.length;a--;)s[l[a]]=s[o];return s},U4=function(e,t,i,r){var s=t.ease||r||"power1.inOut",o,a;if(fn(t))a=i[e]||(i[e]=[]),t.forEach(function(l,c){return a.push({t:c/(t.length-1)*100,v:l,e:s})});else for(o in t)a=i[o]||(i[o]=[]),o==="ease"||a.push({t:parseFloat(e),v:t[o],e:s})},yl=function(e,t,i,r,s){return gt(e)?e.call(t,i,r,s):Bt(e)&&~e.indexOf("random(")?Kl(e):e},QC=pm+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",JC={};Tn(QC+",id,stagger,delay,duration,paused,scrollTrigger",function(n){return JC[n]=1});var xt=function(n){gC(e,n);function e(i,r,s,o){var a;typeof r=="number"&&(s.duration=r,r=s,s=null),a=n.call(this,o?r:gl(r))||this;var l=a.vars,c=l.duration,u=l.delay,h=l.immediateRender,f=l.stagger,d=l.overwrite,_=l.keyframes,p=l.defaults,g=l.scrollTrigger,m=l.yoyoEase,T=r.parent||ht,w=(fn(i)||yC(i)?ur(i[0]):"length"in r)?[i]:Zn(i),S,E,I,P,x,A,k,D;if(a._targets=w.length?_m(w):ql("GSAP target "+i+" not found. https://gsap.com",!Fn.nullTargetWarn)||[],a._ptLookup=[],a._overwrite=d,_||f||Yc(c)||Yc(u)){if(r=a.vars,S=a.timeline=new gn({data:"nested",defaults:p||{},targets:T&&T.data==="nested"?T.vars.targets:w}),S.kill(),S.parent=S._dp=Xi(a),S._start=0,f||Yc(c)||Yc(u)){if(P=w.length,k=f&&LC(f),ji(f))for(x in f)~QC.indexOf(x)&&(D||(D={}),D[x]=f[x]);for(E=0;E<P;E++)I=nh(r,JC),I.stagger=0,m&&(I.yoyoEase=m),D&&Ws(I,D),A=w[E],I.duration=+yl(c,Xi(a),E,A,w),I.delay=(+yl(u,Xi(a),E,A,w)||0)-a._delay,!f&&P===1&&I.delay&&(a._delay=u=I.delay,a._start+=u,I.delay=0),S.to(A,I,k?k(E,A,w):0),S._ease=Pe.none;S.duration()?c=u=0:a.timeline=0}else if(_){gl(ti(S.vars.defaults,{ease:"none"})),S._ease=Ns(_.ease||r.ease||"none");var W=0,N,de,fe;if(fn(_))_.forEach(function(ne){return S.to(w,ne,">")}),S.duration();else{I={};for(x in _)x==="ease"||x==="easeEach"||U4(x,_[x],I,_.easeEach);for(x in I)for(N=I[x].sort(function(ne,Z){return ne.t-Z.t}),W=0,E=0;E<N.length;E++)de=N[E],fe={ease:de.e,duration:(de.t-(E?N[E-1].t:0))/100*c},fe[x]=de.v,S.to(w,fe,W),W+=fe.duration;S.duration()<c&&S.to({},{duration:c-S.duration()})}}c||a.duration(c=S.duration())}else a.timeline=0;return d===!0&&!lm&&(Nr=Xi(a),ht.killTweensOf(w),Nr=0),Oi(T,Xi(a),s),r.reversed&&a.reverse(),r.paused&&a.paused(!0),(h||!c&&!_&&a._start===Lt(T._time)&&wn(h)&&g4(Xi(a))&&T.data!=="nested")&&(a._tTime=-tt,a.render(Math.max(0,-u)||0)),g&&kC(Xi(a),g),a}var t=e.prototype;return t.render=function(r,s,o){var a=this._time,l=this._tDur,c=this._dur,u=r<0,h=r>l-tt&&!u?l:r<tt?0:r,f,d,_,p,g,m,T,w,S;if(!c)y4(this,r,s,o);else if(h!==this._tTime||!r||o||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==u){if(f=h,w=this.timeline,this._repeat){if(p=c+this._rDelay,this._repeat<-1&&u)return this.totalTime(p*100+r,s,o);if(f=Lt(h%p),h===l?(_=this._repeat,f=c):(_=~~(h/p),_&&_===Lt(h/p)&&(f=c,_--),f>c&&(f=c)),m=this._yoyo&&_&1,m&&(S=this._yEase,f=c-f),g=oa(this._tTime,p),f===a&&!o&&this._initted&&_===g)return this._tTime=h,this;_!==g&&(w&&this._yEase&&WC(w,m),this.vars.repeatRefresh&&!m&&!this._lock&&this._time!==p&&this._initted&&(this._lock=o=1,this.render(Lt(p*_),!0).invalidate()._lock=0))}if(!this._initted){if(NC(this,u?r:f,o,s,h))return this._tTime=0,this;if(a!==this._time&&!(o&&this.vars.repeatRefresh&&_!==g))return this;if(c!==this._dur)return this.render(r,s,o)}if(this._tTime=h,this._time=f,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=T=(S||this._ease)(f/c),this._from&&(this.ratio=T=1-T),f&&!a&&!s&&!_&&(Dn(this,"onStart"),this._tTime!==h))return this;for(d=this._pt;d;)d.r(T,d.d),d=d._next;w&&w.render(r<0?r:w._dur*w._ease(f/this._dur),s,o)||this._startAt&&(this._zTime=r),this._onUpdate&&!s&&(u&&Hp(this,r,s,o),Dn(this,"onUpdate")),this._repeat&&_!==g&&this.vars.onRepeat&&!s&&this.parent&&Dn(this,"onRepeat"),(h===this._tDur||!h)&&this._tTime===h&&(u&&!this._onUpdate&&Hp(this,r,!0,!0),(r||!c)&&(h===this._tDur&&this._ts>0||!h&&this._ts<0)&&Yr(this,1),!s&&!(u&&!a)&&(h||a||m)&&(Dn(this,h===l?"onComplete":"onReverseComplete",!0),this._prom&&!(h<l&&this.timeScale()>0)&&this._prom()))}return this},t.targets=function(){return this._targets},t.invalidate=function(r){return(!r||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(r),n.prototype.invalidate.call(this,r)},t.resetTo=function(r,s,o,a,l){Yl||Nn.wake(),this._ts||this.play();var c=Math.min(this._dur,(this._dp._time-this._start)*this._ts),u;return this._initted||mm(this,c),u=this._ease(c/this._dur),V4(this,r,s,o,a,u,c,l)?this.resetTo(r,s,o,a,1):(od(this,0),this.parent||PC(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},t.kill=function(r,s){if(s===void 0&&(s="all"),!r&&(!s||s==="all"))return this._lazy=this._pt=0,this.parent?Wa(this):this;if(this.timeline){var o=this.timeline.totalDuration();return this.timeline.killTweensOf(r,s,Nr&&Nr.vars.overwrite!==!0)._first||Wa(this),this.parent&&o!==this.timeline.totalDuration()&&aa(this,this._dur*this.timeline._tDur/o,0,1),this}var a=this._targets,l=r?Zn(r):a,c=this._ptLookup,u=this._pt,h,f,d,_,p,g,m;if((!s||s==="all")&&p4(a,l))return s==="all"&&(this._pt=0),Wa(this);for(h=this._op=this._op||[],s!=="all"&&(Bt(s)&&(p={},Tn(s,function(T){return p[T]=1}),s=p),s=F4(a,s)),m=a.length;m--;)if(~l.indexOf(a[m])){f=c[m],s==="all"?(h[m]=s,_=f,d={}):(d=h[m]=h[m]||{},_=s);for(p in _)g=f&&f[p],g&&((!("kill"in g.d)||g.d.kill(p)===!0)&&rd(this,g,"_pt"),delete f[p]),d!=="all"&&(d[p]=1)}return this._initted&&!this._pt&&u&&Wa(this),this},e.to=function(r,s){return new e(r,s,arguments[2])},e.from=function(r,s){return ml(1,arguments)},e.delayedCall=function(r,s,o,a){return new e(s,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:r,onComplete:s,onReverseComplete:s,onCompleteParams:o,onReverseCompleteParams:o,callbackScope:a})},e.fromTo=function(r,s,o){return ml(2,arguments)},e.set=function(r,s){return s.duration=0,s.repeatDelay||(s.repeat=0),new e(r,s)},e.killTweensOf=function(r,s,o){return ht.killTweensOf(r,s,o)},e}(Xl);ti(xt.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0});Tn("staggerTo,staggerFrom,staggerFromTo",function(n){xt[n]=function(){var e=new gn,t=Wp.call(arguments,0);return t.splice(n==="staggerFromTo"?5:4,0,0),e[n].apply(e,t)}});var ym=function(e,t,i){return e[t]=i},ZC=function(e,t,i){return e[t](i)},$4=function(e,t,i,r){return e[t](r.fp,i)},B4=function(e,t,i){return e.setAttribute(t,i)},vm=function(e,t){return gt(e[t])?ZC:cm(e[t])&&e.setAttribute?B4:ym},eA=function(e,t){return t.set(t.t,t.p,Math.round((t.s+t.c*e)*1e6)/1e6,t)},z4=function(e,t){return t.set(t.t,t.p,!!(t.s+t.c*e),t)},tA=function(e,t){var i=t._pt,r="";if(!e&&t.b)r=t.b;else if(e===1&&t.e)r=t.e;else{for(;i;)r=i.p+(i.m?i.m(i.s+i.c*e):Math.round((i.s+i.c*e)*1e4)/1e4)+r,i=i._next;r+=t.c}t.set(t.t,t.p,r,t)},wm=function(e,t){for(var i=t._pt;i;)i.r(e,i.d),i=i._next},j4=function(e,t,i,r){for(var s=this._pt,o;s;)o=s._next,s.p===r&&s.modifier(e,t,i),s=o},G4=function(e){for(var t=this._pt,i,r;t;)r=t._next,t.p===e&&!t.op||t.op===e?rd(this,t,"_pt"):t.dep||(i=1),t=r;return!i},H4=function(e,t,i,r){r.mSet(e,t,r.m.call(r.tween,i,r.mt),r)},nA=function(e){for(var t=e._pt,i,r,s,o;t;){for(i=t._next,r=s;r&&r.pr>t.pr;)r=r._next;(t._prev=r?r._prev:o)?t._prev._next=t:s=t,(t._next=r)?r._prev=t:o=t,t=i}e._pt=s},En=function(){function n(t,i,r,s,o,a,l,c,u){this.t=i,this.s=s,this.c=o,this.p=r,this.r=a||eA,this.d=l||this,this.set=c||ym,this.pr=u||0,this._next=t,t&&(t._prev=this)}var e=n.prototype;return e.modifier=function(i,r,s){this.mSet=this.mSet||this.set,this.set=H4,this.m=i,this.mt=s,this.tween=r},n}();Tn(pm+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(n){return fm[n]=1});Bn.TweenMax=Bn.TweenLite=xt;Bn.TimelineLite=Bn.TimelineMax=gn;ht=new gn({sortChildren:!1,defaults:sa,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0});Fn.stringFilter=HC;var Ms=[],fu={},q4=[],Z0=0,W4=0,cf=function(e){return(fu[e]||q4).map(function(t){return t()})},Qp=function(){var e=Date.now(),t=[];e-Z0>2&&(cf("matchMediaInit"),Ms.forEach(function(i){var r=i.queries,s=i.conditions,o,a,l,c;for(a in r)o=Ci.matchMedia(r[a]).matches,o&&(l=1),o!==s[a]&&(s[a]=o,c=1);c&&(i.revert(),l&&t.push(i))}),cf("matchMediaRevert"),t.forEach(function(i){return i.onMatch(i,function(r){return i.add(null,r)})}),Z0=e,cf("matchMedia"))},iA=function(){function n(t,i){this.selector=i&&Kp(i),this.data=[],this._r=[],this.isReverted=!1,this.id=W4++,t&&this.add(t)}var e=n.prototype;return e.add=function(i,r,s){gt(i)&&(s=r,r=i,i=gt);var o=this,a=function(){var c=ct,u=o.selector,h;return c&&c!==o&&c.data.push(o),s&&(o.selector=Kp(s)),ct=o,h=r.apply(o,arguments),gt(h)&&o._r.push(h),ct=c,o.selector=u,o.isReverted=!1,h};return o.last=a,i===gt?a(o,function(l){return o.add(null,l)}):i?o[i]=a:a},e.ignore=function(i){var r=ct;ct=null,i(this),ct=r},e.getTweens=function(){var i=[];return this.data.forEach(function(r){return r instanceof n?i.push.apply(i,r.getTweens()):r instanceof xt&&!(r.parent&&r.parent.data==="nested")&&i.push(r)}),i},e.clear=function(){this._r.length=this.data.length=0},e.kill=function(i,r){var s=this;if(i?function(){for(var a=s.getTweens(),l=s.data.length,c;l--;)c=s.data[l],c.data==="isFlip"&&(c.revert(),c.getChildren(!0,!0,!1).forEach(function(u){return a.splice(a.indexOf(u),1)}));for(a.map(function(u){return{g:u._dur||u._delay||u._sat&&!u._sat.vars.immediateRender?u.globalTime(0):-1/0,t:u}}).sort(function(u,h){return h.g-u.g||-1/0}).forEach(function(u){return u.t.revert(i)}),l=s.data.length;l--;)c=s.data[l],c instanceof gn?c.data!=="nested"&&(c.scrollTrigger&&c.scrollTrigger.revert(),c.kill()):!(c instanceof xt)&&c.revert&&c.revert(i);s._r.forEach(function(u){return u(i,s)}),s.isReverted=!0}():this.data.forEach(function(a){return a.kill&&a.kill()}),this.clear(),r)for(var o=Ms.length;o--;)Ms[o].id===this.id&&Ms.splice(o,1)},e.revert=function(i){this.kill(i||{})},n}(),K4=function(){function n(t){this.contexts=[],this.scope=t,ct&&ct.data.push(this)}var e=n.prototype;return e.add=function(i,r,s){ji(i)||(i={matches:i});var o=new iA(0,s||this.scope),a=o.conditions={},l,c,u;ct&&!o.selector&&(o.selector=ct.selector),this.contexts.push(o),r=o.add("onMatch",r),o.queries=i;for(c in i)c==="all"?u=1:(l=Ci.matchMedia(i[c]),l&&(Ms.indexOf(o)<0&&Ms.push(o),(a[c]=l.matches)&&(u=1),l.addListener?l.addListener(Qp):l.addEventListener("change",Qp)));return u&&r(o,function(h){return o.add(null,h)}),this},e.revert=function(i){this.kill(i||{})},e.kill=function(i){this.contexts.forEach(function(r){return r.kill(i,!0)})},n}(),rh={registerPlugin:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];t.forEach(function(r){return zC(r)})},timeline:function(e){return new gn(e)},getTweensOf:function(e,t){return ht.getTweensOf(e,t)},getProperty:function(e,t,i,r){Bt(e)&&(e=Zn(e)[0]);var s=Os(e||{}).get,o=i?RC:xC;return i==="native"&&(i=""),e&&(t?o((On[t]&&On[t].get||s)(e,t,i,r)):function(a,l,c){return o((On[a]&&On[a].get||s)(e,a,l,c))})},quickSetter:function(e,t,i){if(e=Zn(e),e.length>1){var r=e.map(function(u){return Cn.quickSetter(u,t,i)}),s=r.length;return function(u){for(var h=s;h--;)r[h](u)}}e=e[0]||{};var o=On[t],a=Os(e),l=a.harness&&(a.harness.aliases||{})[t]||t,c=o?function(u){var h=new o;To._pt=0,h.init(e,i?u+i:u,To,0,[e]),h.render(1,h),To._pt&&wm(1,To)}:a.set(e,l);return o?c:function(u){return c(e,l,i?u+i:u,a,1)}},quickTo:function(e,t,i){var r,s=Cn.to(e,Ws((r={},r[t]="+=0.1",r.paused=!0,r),i||{})),o=function(l,c,u){return s.resetTo(t,l,c,u)};return o.tween=s,o},isTweening:function(e){return ht.getTweensOf(e,!0).length>0},defaults:function(e){return e&&e.ease&&(e.ease=Ns(e.ease,sa.ease)),K0(sa,e||{})},config:function(e){return K0(Fn,e||{})},registerEffect:function(e){var t=e.name,i=e.effect,r=e.plugins,s=e.defaults,o=e.extendTimeline;(r||"").split(",").forEach(function(a){return a&&!On[a]&&!Bn[a]&&ql(t+" effect requires "+a+" plugin.")}),sf[t]=function(a,l,c){return i(Zn(a),ti(l||{},s),c)},o&&(gn.prototype[t]=function(a,l,c){return this.add(sf[t](a,ji(l)?l:(c=l)&&{},this),c)})},registerEase:function(e,t){Pe[e]=Ns(t)},parseEase:function(e,t){return arguments.length?Ns(e,t):Pe},getById:function(e){return ht.getById(e)},exportRoot:function(e,t){e===void 0&&(e={});var i=new gn(e),r,s;for(i.smoothChildTiming=wn(e.smoothChildTiming),ht.remove(i),i._dp=0,i._time=i._tTime=ht._time,r=ht._first;r;)s=r._next,(t||!(!r._dur&&r instanceof xt&&r.vars.onComplete===r._targets[0]))&&Oi(i,r,r._start-r._delay),r=s;return Oi(ht,i,0),i},context:function(e,t){return e?new iA(e,t):ct},matchMedia:function(e){return new K4(e)},matchMediaRefresh:function(){return Ms.forEach(function(e){var t=e.conditions,i,r;for(r in t)t[r]&&(t[r]=!1,i=1);i&&e.revert()})||Qp()},addEventListener:function(e,t){var i=fu[e]||(fu[e]=[]);~i.indexOf(t)||i.push(t)},removeEventListener:function(e,t){var i=fu[e],r=i&&i.indexOf(t);r>=0&&i.splice(r,1)},utils:{wrap:C4,wrapYoyo:A4,distribute:LC,random:FC,snap:VC,normalize:I4,getUnit:ln,clamp:T4,splitColor:jC,toArray:Zn,selector:Kp,mapRange:$C,pipe:S4,unitize:b4,interpolate:x4,shuffle:DC},install:SC,effects:sf,ticker:Nn,updateRoot:gn.updateRoot,plugins:On,globalTimeline:ht,core:{PropTween:En,globals:bC,Tween:xt,Timeline:gn,Animation:Xl,getCache:Os,_removeLinkedListItem:rd,reverting:function(){return dn},context:function(e){return e&&ct&&(ct.data.push(e),e._ctx=ct),ct},suppressOverwrites:function(e){return lm=e}}};Tn("to,from,fromTo,delayedCall,set,killTweensOf",function(n){return rh[n]=xt[n]});Nn.add(gn.updateRoot);To=rh.to({},{duration:0});var Y4=function(e,t){for(var i=e._pt;i&&i.p!==t&&i.op!==t&&i.fp!==t;)i=i._next;return i},X4=function(e,t){var i=e._targets,r,s,o;for(r in t)for(s=i.length;s--;)o=e._ptLookup[s][r],o&&(o=o.d)&&(o._pt&&(o=Y4(o,r)),o&&o.modifier&&o.modifier(t[r],e,i[s],r))},uf=function(e,t){return{name:e,rawVars:1,init:function(r,s,o){o._onInit=function(a){var l,c;if(Bt(s)&&(l={},Tn(s,function(u){return l[u]=1}),s=l),t){l={};for(c in s)l[c]=t(s[c]);s=l}X4(a,s)}}}},Cn=rh.registerPlugin({name:"attr",init:function(e,t,i,r,s){var o,a,l;this.tween=i;for(o in t)l=e.getAttribute(o)||"",a=this.add(e,"setAttribute",(l||0)+"",t[o],r,s,0,0,o),a.op=o,a.b=l,this._props.push(o)},render:function(e,t){for(var i=t._pt;i;)dn?i.set(i.t,i.p,i.b,i):i.r(e,i.d),i=i._next}},{name:"endArray",init:function(e,t){for(var i=t.length;i--;)this.add(e,i,e[i]||0,t[i],0,0,0,0,0,1)}},uf("roundProps",Yp),uf("modifiers"),uf("snap",VC))||rh;xt.version=gn.version=Cn.version="3.12.5";EC=1;um()&&la();Pe.Power0;Pe.Power1;Pe.Power2;Pe.Power3;Pe.Power4;Pe.Linear;Pe.Quad;Pe.Cubic;Pe.Quart;Pe.Quint;Pe.Strong;Pe.Elastic;Pe.Back;Pe.SteppedEase;Pe.Bounce;Pe.Sine;Pe.Expo;Pe.Circ;/*!
 * CSSPlugin 3.12.5
 * https://gsap.com
 *
 * Copyright 2008-2024, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var ew,Mr,Uo,Tm,Ss,tw,Em,Q4=function(){return typeof window<"u"},hr={},ps=180/Math.PI,$o=Math.PI/180,lo=Math.atan2,nw=1e8,Sm=/([A-Z])/g,J4=/(left|right|width|margin|padding|x)/i,Z4=/[\s,\(]\S/,Li={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},Jp=function(e,t){return t.set(t.t,t.p,Math.round((t.s+t.c*e)*1e4)/1e4+t.u,t)},e9=function(e,t){return t.set(t.t,t.p,e===1?t.e:Math.round((t.s+t.c*e)*1e4)/1e4+t.u,t)},t9=function(e,t){return t.set(t.t,t.p,e?Math.round((t.s+t.c*e)*1e4)/1e4+t.u:t.b,t)},n9=function(e,t){var i=t.s+t.c*e;t.set(t.t,t.p,~~(i+(i<0?-.5:.5))+t.u,t)},rA=function(e,t){return t.set(t.t,t.p,e?t.e:t.b,t)},sA=function(e,t){return t.set(t.t,t.p,e!==1?t.b:t.e,t)},i9=function(e,t,i){return e.style[t]=i},r9=function(e,t,i){return e.style.setProperty(t,i)},s9=function(e,t,i){return e._gsap[t]=i},o9=function(e,t,i){return e._gsap.scaleX=e._gsap.scaleY=i},a9=function(e,t,i,r,s){var o=e._gsap;o.scaleX=o.scaleY=i,o.renderTransform(s,o)},l9=function(e,t,i,r,s){var o=e._gsap;o[t]=i,o.renderTransform(s,o)},ft="transform",Sn=ft+"Origin",c9=function n(e,t){var i=this,r=this.target,s=r.style,o=r._gsap;if(e in hr&&s){if(this.tfm=this.tfm||{},e!=="transform")e=Li[e]||e,~e.indexOf(",")?e.split(",").forEach(function(a){return i.tfm[a]=Qi(r,a)}):this.tfm[e]=o.x?o[e]:Qi(r,e),e===Sn&&(this.tfm.zOrigin=o.zOrigin);else return Li.transform.split(",").forEach(function(a){return n.call(i,a,t)});if(this.props.indexOf(ft)>=0)return;o.svg&&(this.svgo=r.getAttribute("data-svg-origin"),this.props.push(Sn,t,"")),e=ft}(s||t)&&this.props.push(e,t,s[e])},oA=function(e){e.translate&&(e.removeProperty("translate"),e.removeProperty("scale"),e.removeProperty("rotate"))},u9=function(){var e=this.props,t=this.target,i=t.style,r=t._gsap,s,o;for(s=0;s<e.length;s+=3)e[s+1]?t[e[s]]=e[s+2]:e[s+2]?i[e[s]]=e[s+2]:i.removeProperty(e[s].substr(0,2)==="--"?e[s]:e[s].replace(Sm,"-$1").toLowerCase());if(this.tfm){for(o in this.tfm)r[o]=this.tfm[o];r.svg&&(r.renderTransform(),t.setAttribute("data-svg-origin",this.svgo||"")),s=Em(),(!s||!s.isStart)&&!i[ft]&&(oA(i),r.zOrigin&&i[Sn]&&(i[Sn]+=" "+r.zOrigin+"px",r.zOrigin=0,r.renderTransform()),r.uncache=1)}},aA=function(e,t){var i={target:e,props:[],revert:u9,save:c9};return e._gsap||Cn.core.getCache(e),t&&t.split(",").forEach(function(r){return i.save(r)}),i},lA,Zp=function(e,t){var i=Mr.createElementNS?Mr.createElementNS((t||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),e):Mr.createElement(e);return i&&i.style?i:Mr.createElement(e)},Fi=function n(e,t,i){var r=getComputedStyle(e);return r[t]||r.getPropertyValue(t.replace(Sm,"-$1").toLowerCase())||r.getPropertyValue(t)||!i&&n(e,ca(t)||t,1)||""},iw="O,Moz,ms,Ms,Webkit".split(","),ca=function(e,t,i){var r=t||Ss,s=r.style,o=5;if(e in s&&!i)return e;for(e=e.charAt(0).toUpperCase()+e.substr(1);o--&&!(iw[o]+e in s););return o<0?null:(o===3?"ms":o>=0?iw[o]:"")+e},e_=function(){Q4()&&window.document&&(ew=window,Mr=ew.document,Uo=Mr.documentElement,Ss=Zp("div")||{style:{}},Zp("div"),ft=ca(ft),Sn=ft+"Origin",Ss.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",lA=!!ca("perspective"),Em=Cn.core.reverting,Tm=1)},hf=function n(e){var t=Zp("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),i=this.parentNode,r=this.nextSibling,s=this.style.cssText,o;if(Uo.appendChild(t),t.appendChild(this),this.style.display="block",e)try{o=this.getBBox(),this._gsapBBox=this.getBBox,this.getBBox=n}catch{}else this._gsapBBox&&(o=this._gsapBBox());return i&&(r?i.insertBefore(this,r):i.appendChild(this)),Uo.removeChild(t),this.style.cssText=s,o},rw=function(e,t){for(var i=t.length;i--;)if(e.hasAttribute(t[i]))return e.getAttribute(t[i])},cA=function(e){var t;try{t=e.getBBox()}catch{t=hf.call(e,!0)}return t&&(t.width||t.height)||e.getBBox===hf||(t=hf.call(e,!0)),t&&!t.width&&!t.x&&!t.y?{x:+rw(e,["x","cx","x1"])||0,y:+rw(e,["y","cy","y1"])||0,width:0,height:0}:t},uA=function(e){return!!(e.getCTM&&(!e.parentNode||e.ownerSVGElement)&&cA(e))},Ks=function(e,t){if(t){var i=e.style,r;t in hr&&t!==Sn&&(t=ft),i.removeProperty?(r=t.substr(0,2),(r==="ms"||t.substr(0,6)==="webkit")&&(t="-"+t),i.removeProperty(r==="--"?t:t.replace(Sm,"-$1").toLowerCase())):i.removeAttribute(t)}},Dr=function(e,t,i,r,s,o){var a=new En(e._pt,t,i,0,1,o?sA:rA);return e._pt=a,a.b=r,a.e=s,e._props.push(i),a},sw={deg:1,rad:1,turn:1},h9={grid:1,flex:1},Xr=function n(e,t,i,r){var s=parseFloat(i)||0,o=(i+"").trim().substr((s+"").length)||"px",a=Ss.style,l=J4.test(t),c=e.tagName.toLowerCase()==="svg",u=(c?"client":"offset")+(l?"Width":"Height"),h=100,f=r==="px",d=r==="%",_,p,g,m;if(r===o||!s||sw[r]||sw[o])return s;if(o!=="px"&&!f&&(s=n(e,t,i,"px")),m=e.getCTM&&uA(e),(d||o==="%")&&(hr[t]||~t.indexOf("adius")))return _=m?e.getBBox()[l?"width":"height"]:e[u],Tt(d?s/_*h:s/100*_);if(a[l?"width":"height"]=h+(f?o:r),p=~t.indexOf("adius")||r==="em"&&e.appendChild&&!c?e:e.parentNode,m&&(p=(e.ownerSVGElement||{}).parentNode),(!p||p===Mr||!p.appendChild)&&(p=Mr.body),g=p._gsap,g&&d&&g.width&&l&&g.time===Nn.time&&!g.uncache)return Tt(s/g.width*h);if(d&&(t==="height"||t==="width")){var T=e.style[t];e.style[t]=h+r,_=e[u],T?e.style[t]=T:Ks(e,t)}else(d||o==="%")&&!h9[Fi(p,"display")]&&(a.position=Fi(e,"position")),p===e&&(a.position="static"),p.appendChild(Ss),_=Ss[u],p.removeChild(Ss),a.position="absolute";return l&&d&&(g=Os(p),g.time=Nn.time,g.width=p[u]),Tt(f?_*s/h:_&&s?h/_*s:0)},Qi=function(e,t,i,r){var s;return Tm||e_(),t in Li&&t!=="transform"&&(t=Li[t],~t.indexOf(",")&&(t=t.split(",")[0])),hr[t]&&t!=="transform"?(s=Jl(e,r),s=t!=="transformOrigin"?s[t]:s.svg?s.origin:oh(Fi(e,Sn))+" "+s.zOrigin+"px"):(s=e.style[t],(!s||s==="auto"||r||~(s+"").indexOf("calc("))&&(s=sh[t]&&sh[t](e,t,i)||Fi(e,t)||CC(e,t)||(t==="opacity"?1:0))),i&&!~(s+"").trim().indexOf(" ")?Xr(e,t,s,i)+i:s},d9=function(e,t,i,r){if(!i||i==="none"){var s=ca(t,e,1),o=s&&Fi(e,s,1);o&&o!==i?(t=s,i=o):t==="borderColor"&&(i=Fi(e,"borderTopColor"))}var a=new En(this._pt,e.style,t,0,1,tA),l=0,c=0,u,h,f,d,_,p,g,m,T,w,S,E;if(a.b=i,a.e=r,i+="",r+="",r==="auto"&&(p=e.style[t],e.style[t]=r,r=Fi(e,t)||r,p?e.style[t]=p:Ks(e,t)),u=[i,r],HC(u),i=u[0],r=u[1],f=i.match(wo)||[],E=r.match(wo)||[],E.length){for(;h=wo.exec(r);)g=h[0],T=r.substring(l,h.index),_?_=(_+1)%5:(T.substr(-5)==="rgba("||T.substr(-5)==="hsla(")&&(_=1),g!==(p=f[c++]||"")&&(d=parseFloat(p)||0,S=p.substr((d+"").length),g.charAt(1)==="="&&(g=Fo(d,g)+S),m=parseFloat(g),w=g.substr((m+"").length),l=wo.lastIndex-w.length,w||(w=w||Fn.units[t]||S,l===r.length&&(r+=w,a.e+=w)),S!==w&&(d=Xr(e,t,p,w)||0),a._pt={_next:a._pt,p:T||c===1?T:",",s:d,c:m-d,m:_&&_<4||t==="zIndex"?Math.round:0});a.c=l<r.length?r.substring(l,r.length):""}else a.r=t==="display"&&r==="none"?sA:rA;return wC.test(r)&&(a.e=0),this._pt=a,a},ow={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},f9=function(e){var t=e.split(" "),i=t[0],r=t[1]||"50%";return(i==="top"||i==="bottom"||r==="left"||r==="right")&&(e=i,i=r,r=e),t[0]=ow[i]||i,t[1]=ow[r]||r,t.join(" ")},p9=function(e,t){if(t.tween&&t.tween._time===t.tween._dur){var i=t.t,r=i.style,s=t.u,o=i._gsap,a,l,c;if(s==="all"||s===!0)r.cssText="",l=1;else for(s=s.split(","),c=s.length;--c>-1;)a=s[c],hr[a]&&(l=1,a=a==="transformOrigin"?Sn:ft),Ks(i,a);l&&(Ks(i,ft),o&&(o.svg&&i.removeAttribute("transform"),Jl(i,1),o.uncache=1,oA(r)))}},sh={clearProps:function(e,t,i,r,s){if(s.data!=="isFromStart"){var o=e._pt=new En(e._pt,t,i,0,0,p9);return o.u=r,o.pr=-10,o.tween=s,e._props.push(i),1}}},Ql=[1,0,0,1,0,0],hA={},dA=function(e){return e==="matrix(1, 0, 0, 1, 0, 0)"||e==="none"||!e},aw=function(e){var t=Fi(e,ft);return dA(t)?Ql:t.substr(7).match(vC).map(Tt)},bm=function(e,t){var i=e._gsap||Os(e),r=e.style,s=aw(e),o,a,l,c;return i.svg&&e.getAttribute("transform")?(l=e.transform.baseVal.consolidate().matrix,s=[l.a,l.b,l.c,l.d,l.e,l.f],s.join(",")==="1,0,0,1,0,0"?Ql:s):(s===Ql&&!e.offsetParent&&e!==Uo&&!i.svg&&(l=r.display,r.display="block",o=e.parentNode,(!o||!e.offsetParent)&&(c=1,a=e.nextElementSibling,Uo.appendChild(e)),s=aw(e),l?r.display=l:Ks(e,"display"),c&&(a?o.insertBefore(e,a):o?o.appendChild(e):Uo.removeChild(e))),t&&s.length>6?[s[0],s[1],s[4],s[5],s[12],s[13]]:s)},t_=function(e,t,i,r,s,o){var a=e._gsap,l=s||bm(e,!0),c=a.xOrigin||0,u=a.yOrigin||0,h=a.xOffset||0,f=a.yOffset||0,d=l[0],_=l[1],p=l[2],g=l[3],m=l[4],T=l[5],w=t.split(" "),S=parseFloat(w[0])||0,E=parseFloat(w[1])||0,I,P,x,A;i?l!==Ql&&(P=d*g-_*p)&&(x=S*(g/P)+E*(-p/P)+(p*T-g*m)/P,A=S*(-_/P)+E*(d/P)-(d*T-_*m)/P,S=x,E=A):(I=cA(e),S=I.x+(~w[0].indexOf("%")?S/100*I.width:S),E=I.y+(~(w[1]||w[0]).indexOf("%")?E/100*I.height:E)),r||r!==!1&&a.smooth?(m=S-c,T=E-u,a.xOffset=h+(m*d+T*p)-m,a.yOffset=f+(m*_+T*g)-T):a.xOffset=a.yOffset=0,a.xOrigin=S,a.yOrigin=E,a.smooth=!!r,a.origin=t,a.originIsAbsolute=!!i,e.style[Sn]="0px 0px",o&&(Dr(o,a,"xOrigin",c,S),Dr(o,a,"yOrigin",u,E),Dr(o,a,"xOffset",h,a.xOffset),Dr(o,a,"yOffset",f,a.yOffset)),e.setAttribute("data-svg-origin",S+" "+E)},Jl=function(e,t){var i=e._gsap||new YC(e);if("x"in i&&!t&&!i.uncache)return i;var r=e.style,s=i.scaleX<0,o="px",a="deg",l=getComputedStyle(e),c=Fi(e,Sn)||"0",u,h,f,d,_,p,g,m,T,w,S,E,I,P,x,A,k,D,W,N,de,fe,ne,Z,he,St,bt,Ee,_e,He,Ce,jt;return u=h=f=p=g=m=T=w=S=0,d=_=1,i.svg=!!(e.getCTM&&uA(e)),l.translate&&((l.translate!=="none"||l.scale!=="none"||l.rotate!=="none")&&(r[ft]=(l.translate!=="none"?"translate3d("+(l.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(l.rotate!=="none"?"rotate("+l.rotate+") ":"")+(l.scale!=="none"?"scale("+l.scale.split(" ").join(",")+") ":"")+(l[ft]!=="none"?l[ft]:"")),r.scale=r.rotate=r.translate="none"),P=bm(e,i.svg),i.svg&&(i.uncache?(he=e.getBBox(),c=i.xOrigin-he.x+"px "+(i.yOrigin-he.y)+"px",Z=""):Z=!t&&e.getAttribute("data-svg-origin"),t_(e,Z||c,!!Z||i.originIsAbsolute,i.smooth!==!1,P)),E=i.xOrigin||0,I=i.yOrigin||0,P!==Ql&&(D=P[0],W=P[1],N=P[2],de=P[3],u=fe=P[4],h=ne=P[5],P.length===6?(d=Math.sqrt(D*D+W*W),_=Math.sqrt(de*de+N*N),p=D||W?lo(W,D)*ps:0,T=N||de?lo(N,de)*ps+p:0,T&&(_*=Math.abs(Math.cos(T*$o))),i.svg&&(u-=E-(E*D+I*N),h-=I-(E*W+I*de))):(jt=P[6],He=P[7],bt=P[8],Ee=P[9],_e=P[10],Ce=P[11],u=P[12],h=P[13],f=P[14],x=lo(jt,_e),g=x*ps,x&&(A=Math.cos(-x),k=Math.sin(-x),Z=fe*A+bt*k,he=ne*A+Ee*k,St=jt*A+_e*k,bt=fe*-k+bt*A,Ee=ne*-k+Ee*A,_e=jt*-k+_e*A,Ce=He*-k+Ce*A,fe=Z,ne=he,jt=St),x=lo(-N,_e),m=x*ps,x&&(A=Math.cos(-x),k=Math.sin(-x),Z=D*A-bt*k,he=W*A-Ee*k,St=N*A-_e*k,Ce=de*k+Ce*A,D=Z,W=he,N=St),x=lo(W,D),p=x*ps,x&&(A=Math.cos(x),k=Math.sin(x),Z=D*A+W*k,he=fe*A+ne*k,W=W*A-D*k,ne=ne*A-fe*k,D=Z,fe=he),g&&Math.abs(g)+Math.abs(p)>359.9&&(g=p=0,m=180-m),d=Tt(Math.sqrt(D*D+W*W+N*N)),_=Tt(Math.sqrt(ne*ne+jt*jt)),x=lo(fe,ne),T=Math.abs(x)>2e-4?x*ps:0,S=Ce?1/(Ce<0?-Ce:Ce):0),i.svg&&(Z=e.getAttribute("transform"),i.forceCSS=e.setAttribute("transform","")||!dA(Fi(e,ft)),Z&&e.setAttribute("transform",Z))),Math.abs(T)>90&&Math.abs(T)<270&&(s?(d*=-1,T+=p<=0?180:-180,p+=p<=0?180:-180):(_*=-1,T+=T<=0?180:-180)),t=t||i.uncache,i.x=u-((i.xPercent=u&&(!t&&i.xPercent||(Math.round(e.offsetWidth/2)===Math.round(-u)?-50:0)))?e.offsetWidth*i.xPercent/100:0)+o,i.y=h-((i.yPercent=h&&(!t&&i.yPercent||(Math.round(e.offsetHeight/2)===Math.round(-h)?-50:0)))?e.offsetHeight*i.yPercent/100:0)+o,i.z=f+o,i.scaleX=Tt(d),i.scaleY=Tt(_),i.rotation=Tt(p)+a,i.rotationX=Tt(g)+a,i.rotationY=Tt(m)+a,i.skewX=T+a,i.skewY=w+a,i.transformPerspective=S+o,(i.zOrigin=parseFloat(c.split(" ")[2])||!t&&i.zOrigin||0)&&(r[Sn]=oh(c)),i.xOffset=i.yOffset=0,i.force3D=Fn.force3D,i.renderTransform=i.svg?g9:lA?fA:_9,i.uncache=0,i},oh=function(e){return(e=e.split(" "))[0]+" "+e[1]},df=function(e,t,i){var r=ln(t);return Tt(parseFloat(t)+parseFloat(Xr(e,"x",i+"px",r)))+r},_9=function(e,t){t.z="0px",t.rotationY=t.rotationX="0deg",t.force3D=0,fA(e,t)},ls="0deg",La="0px",cs=") ",fA=function(e,t){var i=t||this,r=i.xPercent,s=i.yPercent,o=i.x,a=i.y,l=i.z,c=i.rotation,u=i.rotationY,h=i.rotationX,f=i.skewX,d=i.skewY,_=i.scaleX,p=i.scaleY,g=i.transformPerspective,m=i.force3D,T=i.target,w=i.zOrigin,S="",E=m==="auto"&&e&&e!==1||m===!0;if(w&&(h!==ls||u!==ls)){var I=parseFloat(u)*$o,P=Math.sin(I),x=Math.cos(I),A;I=parseFloat(h)*$o,A=Math.cos(I),o=df(T,o,P*A*-w),a=df(T,a,-Math.sin(I)*-w),l=df(T,l,x*A*-w+w)}g!==La&&(S+="perspective("+g+cs),(r||s)&&(S+="translate("+r+"%, "+s+"%) "),(E||o!==La||a!==La||l!==La)&&(S+=l!==La||E?"translate3d("+o+", "+a+", "+l+") ":"translate("+o+", "+a+cs),c!==ls&&(S+="rotate("+c+cs),u!==ls&&(S+="rotateY("+u+cs),h!==ls&&(S+="rotateX("+h+cs),(f!==ls||d!==ls)&&(S+="skew("+f+", "+d+cs),(_!==1||p!==1)&&(S+="scale("+_+", "+p+cs),T.style[ft]=S||"translate(0, 0)"},g9=function(e,t){var i=t||this,r=i.xPercent,s=i.yPercent,o=i.x,a=i.y,l=i.rotation,c=i.skewX,u=i.skewY,h=i.scaleX,f=i.scaleY,d=i.target,_=i.xOrigin,p=i.yOrigin,g=i.xOffset,m=i.yOffset,T=i.forceCSS,w=parseFloat(o),S=parseFloat(a),E,I,P,x,A;l=parseFloat(l),c=parseFloat(c),u=parseFloat(u),u&&(u=parseFloat(u),c+=u,l+=u),l||c?(l*=$o,c*=$o,E=Math.cos(l)*h,I=Math.sin(l)*h,P=Math.sin(l-c)*-f,x=Math.cos(l-c)*f,c&&(u*=$o,A=Math.tan(c-u),A=Math.sqrt(1+A*A),P*=A,x*=A,u&&(A=Math.tan(u),A=Math.sqrt(1+A*A),E*=A,I*=A)),E=Tt(E),I=Tt(I),P=Tt(P),x=Tt(x)):(E=h,x=f,I=P=0),(w&&!~(o+"").indexOf("px")||S&&!~(a+"").indexOf("px"))&&(w=Xr(d,"x",o,"px"),S=Xr(d,"y",a,"px")),(_||p||g||m)&&(w=Tt(w+_-(_*E+p*P)+g),S=Tt(S+p-(_*I+p*x)+m)),(r||s)&&(A=d.getBBox(),w=Tt(w+r/100*A.width),S=Tt(S+s/100*A.height)),A="matrix("+E+","+I+","+P+","+x+","+w+","+S+")",d.setAttribute("transform",A),T&&(d.style[ft]=A)},m9=function(e,t,i,r,s){var o=360,a=Bt(s),l=parseFloat(s)*(a&&~s.indexOf("rad")?ps:1),c=l-r,u=r+c+"deg",h,f;return a&&(h=s.split("_")[1],h==="short"&&(c%=o,c!==c%(o/2)&&(c+=c<0?o:-o)),h==="cw"&&c<0?c=(c+o*nw)%o-~~(c/o)*o:h==="ccw"&&c>0&&(c=(c-o*nw)%o-~~(c/o)*o)),e._pt=f=new En(e._pt,t,i,r,c,e9),f.e=u,f.u="deg",e._props.push(i),f},lw=function(e,t){for(var i in t)e[i]=t[i];return e},y9=function(e,t,i){var r=lw({},i._gsap),s="perspective,force3D,transformOrigin,svgOrigin",o=i.style,a,l,c,u,h,f,d,_;r.svg?(c=i.getAttribute("transform"),i.setAttribute("transform",""),o[ft]=t,a=Jl(i,1),Ks(i,ft),i.setAttribute("transform",c)):(c=getComputedStyle(i)[ft],o[ft]=t,a=Jl(i,1),o[ft]=c);for(l in hr)c=r[l],u=a[l],c!==u&&s.indexOf(l)<0&&(d=ln(c),_=ln(u),h=d!==_?Xr(i,l,c,_):parseFloat(c),f=parseFloat(u),e._pt=new En(e._pt,a,l,h,f-h,Jp),e._pt.u=_||0,e._props.push(l));lw(a,r)};Tn("padding,margin,Width,Radius",function(n,e){var t="Top",i="Right",r="Bottom",s="Left",o=(e<3?[t,i,r,s]:[t+s,t+i,r+i,r+s]).map(function(a){return e<2?n+a:"border"+a+n});sh[e>1?"border"+n:n]=function(a,l,c,u,h){var f,d;if(arguments.length<4)return f=o.map(function(_){return Qi(a,_,c)}),d=f.join(" "),d.split(f[0]).length===5?f[0]:d;f=(u+"").split(" "),d={},o.forEach(function(_,p){return d[_]=f[p]=f[p]||f[(p-1)/2|0]}),a.init(l,d,h)}});var pA={name:"css",register:e_,targetTest:function(e){return e.style&&e.nodeType},init:function(e,t,i,r,s){var o=this._props,a=e.style,l=i.vars.startAt,c,u,h,f,d,_,p,g,m,T,w,S,E,I,P,x;Tm||e_(),this.styles=this.styles||aA(e),x=this.styles.props,this.tween=i;for(p in t)if(p!=="autoRound"&&(u=t[p],!(On[p]&&XC(p,t,i,r,e,s)))){if(d=typeof u,_=sh[p],d==="function"&&(u=u.call(i,r,e,s),d=typeof u),d==="string"&&~u.indexOf("random(")&&(u=Kl(u)),_)_(this,e,p,u,i)&&(P=1);else if(p.substr(0,2)==="--")c=(getComputedStyle(e).getPropertyValue(p)+"").trim(),u+="",jr.lastIndex=0,jr.test(c)||(g=ln(c),m=ln(u)),m?g!==m&&(c=Xr(e,p,c,m)+m):g&&(u+=g),this.add(a,"setProperty",c,u,r,s,0,0,p),o.push(p),x.push(p,0,a[p]);else if(d!=="undefined"){if(l&&p in l?(c=typeof l[p]=="function"?l[p].call(i,r,e,s):l[p],Bt(c)&&~c.indexOf("random(")&&(c=Kl(c)),ln(c+"")||c==="auto"||(c+=Fn.units[p]||ln(Qi(e,p))||""),(c+"").charAt(1)==="="&&(c=Qi(e,p))):c=Qi(e,p),f=parseFloat(c),T=d==="string"&&u.charAt(1)==="="&&u.substr(0,2),T&&(u=u.substr(2)),h=parseFloat(u),p in Li&&(p==="autoAlpha"&&(f===1&&Qi(e,"visibility")==="hidden"&&h&&(f=0),x.push("visibility",0,a.visibility),Dr(this,a,"visibility",f?"inherit":"hidden",h?"inherit":"hidden",!h)),p!=="scale"&&p!=="transform"&&(p=Li[p],~p.indexOf(",")&&(p=p.split(",")[0]))),w=p in hr,w){if(this.styles.save(p),S||(E=e._gsap,E.renderTransform&&!t.parseTransform||Jl(e,t.parseTransform),I=t.smoothOrigin!==!1&&E.smooth,S=this._pt=new En(this._pt,a,ft,0,1,E.renderTransform,E,0,-1),S.dep=1),p==="scale")this._pt=new En(this._pt,E,"scaleY",E.scaleY,(T?Fo(E.scaleY,T+h):h)-E.scaleY||0,Jp),this._pt.u=0,o.push("scaleY",p),p+="X";else if(p==="transformOrigin"){x.push(Sn,0,a[Sn]),u=f9(u),E.svg?t_(e,u,0,I,0,this):(m=parseFloat(u.split(" ")[2])||0,m!==E.zOrigin&&Dr(this,E,"zOrigin",E.zOrigin,m),Dr(this,a,p,oh(c),oh(u)));continue}else if(p==="svgOrigin"){t_(e,u,1,I,0,this);continue}else if(p in hA){m9(this,E,p,f,T?Fo(f,T+u):u);continue}else if(p==="smoothOrigin"){Dr(this,E,"smooth",E.smooth,u);continue}else if(p==="force3D"){E[p]=u;continue}else if(p==="transform"){y9(this,u,e);continue}}else p in a||(p=ca(p)||p);if(w||(h||h===0)&&(f||f===0)&&!Z4.test(u)&&p in a)g=(c+"").substr((f+"").length),h||(h=0),m=ln(u)||(p in Fn.units?Fn.units[p]:g),g!==m&&(f=Xr(e,p,c,m)),this._pt=new En(this._pt,w?E:a,p,f,(T?Fo(f,T+h):h)-f,!w&&(m==="px"||p==="zIndex")&&t.autoRound!==!1?n9:Jp),this._pt.u=m||0,g!==m&&m!=="%"&&(this._pt.b=c,this._pt.r=t9);else if(p in a)d9.call(this,e,p,c,T?T+u:u);else if(p in e)this.add(e,p,c||e[p],T?T+u:u,r,s);else if(p!=="parseTransform"){dm(p,u);continue}w||(p in a?x.push(p,0,a[p]):x.push(p,1,c||e[p])),o.push(p)}}P&&nA(this)},render:function(e,t){if(t.tween._time||!Em())for(var i=t._pt;i;)i.r(e,i.d),i=i._next;else t.styles.revert()},get:Qi,aliases:Li,getSetter:function(e,t,i){var r=Li[t];return r&&r.indexOf(",")<0&&(t=r),t in hr&&t!==Sn&&(e._gsap.x||Qi(e,"x"))?i&&tw===i?t==="scale"?o9:s9:(tw=i||{})&&(t==="scale"?a9:l9):e.style&&!cm(e.style[t])?i9:~t.indexOf("-")?r9:vm(e,t)},core:{_removeProperty:Ks,_getMatrix:bm}};Cn.utils.checkPrefix=ca;Cn.core.getStyleSaver=aA;(function(n,e,t,i){var r=Tn(n+","+e+","+t,function(s){hr[s]=1});Tn(e,function(s){Fn.units[s]="deg",hA[s]=1}),Li[r[13]]=n+","+e,Tn(i,function(s){var o=s.split(":");Li[o[1]]=r[o[0]]})})("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY");Tn("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(n){Fn.units[n]="px"});Cn.registerPlugin(pA);var n_=Cn.registerPlugin(pA)||Cn;n_.core.Tween;/*!
 * matrix 3.12.5
 * https://gsap.com
 *
 * Copyright 2008-2024, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var nr,Ds,Im,ad,Ya,pu,ah,vl,di="transform",i_=di+"Origin",_A,gA=function(e){var t=e.ownerDocument||e;for(!(di in e.style)&&("msTransform"in e.style)&&(di="msTransform",i_=di+"Origin");t.parentNode&&(t=t.parentNode););if(Ds=window,ah=new Ys,t){nr=t,Im=t.documentElement,ad=t.body,vl=nr.createElementNS("http://www.w3.org/2000/svg","g"),vl.style.transform="none";var i=t.createElement("div"),r=t.createElement("div"),s=t&&(t.body||t.firstElementChild);s&&s.appendChild&&(s.appendChild(i),i.appendChild(r),i.setAttribute("style","position:static;transform:translate3d(0,0,1px)"),_A=r.offsetParent!==i,s.removeChild(i))}return t},v9=function(e){for(var t,i;e&&e!==ad;)i=e._gsap,i&&i.uncache&&i.get(e,"x"),i&&!i.scaleX&&!i.scaleY&&i.renderTransform&&(i.scaleX=i.scaleY=1e-4,i.renderTransform(1,i),t?t.push(i):t=[i]),e=e.parentNode;return t},mA=[],yA=[],w9=function(){return Ds.pageYOffset||nr.scrollTop||Im.scrollTop||ad.scrollTop||0},T9=function(){return Ds.pageXOffset||nr.scrollLeft||Im.scrollLeft||ad.scrollLeft||0},Cm=function(e){return e.ownerSVGElement||((e.tagName+"").toLowerCase()==="svg"?e:null)},E9=function n(e){if(Ds.getComputedStyle(e).position==="fixed")return!0;if(e=e.parentNode,e&&e.nodeType===1)return n(e)},ff=function n(e,t){if(e.parentNode&&(nr||gA(e))){var i=Cm(e),r=i?i.getAttribute("xmlns")||"http://www.w3.org/2000/svg":"http://www.w3.org/1999/xhtml",s=i?t?"rect":"g":"div",o=t!==2?0:100,a=t===3?100:0,l="position:absolute;display:block;pointer-events:none;margin:0;padding:0;",c=nr.createElementNS?nr.createElementNS(r.replace(/^https/,"http"),s):nr.createElement(s);return t&&(i?(pu||(pu=n(e)),c.setAttribute("width",.01),c.setAttribute("height",.01),c.setAttribute("transform","translate("+o+","+a+")"),pu.appendChild(c)):(Ya||(Ya=n(e),Ya.style.cssText=l),c.style.cssText=l+"width:0.1px;height:0.1px;top:"+a+"px;left:"+o+"px",Ya.appendChild(c))),c}throw"Need document and parent."},S9=function(e){for(var t=new Ys,i=0;i<e.numberOfItems;i++)t.multiply(e.getItem(i).matrix);return t},b9=function(e){var t=e.getCTM(),i;return t||(i=e.style[di],e.style[di]="none",e.appendChild(vl),t=vl.getCTM(),e.removeChild(vl),i?e.style[di]=i:e.style.removeProperty(di.replace(/([A-Z])/g,"-$1").toLowerCase())),t||ah.clone()},I9=function(e,t){var i=Cm(e),r=e===i,s=i?mA:yA,o=e.parentNode,a,l,c,u,h,f;if(e===Ds)return e;if(s.length||s.push(ff(e,1),ff(e,2),ff(e,3)),a=i?pu:Ya,i)r?(c=b9(e),u=-c.e/c.a,h=-c.f/c.d,l=ah):e.getBBox?(c=e.getBBox(),l=e.transform?e.transform.baseVal:{},l=l.numberOfItems?l.numberOfItems>1?S9(l):l.getItem(0).matrix:ah,u=l.a*c.x+l.c*c.y,h=l.b*c.x+l.d*c.y):(l=new Ys,u=h=0),t&&e.tagName.toLowerCase()==="g"&&(u=h=0),(r?i:o).appendChild(a),a.setAttribute("transform","matrix("+l.a+","+l.b+","+l.c+","+l.d+","+(l.e+u)+","+(l.f+h)+")");else{if(u=h=0,_A)for(l=e.offsetParent,c=e;c&&(c=c.parentNode)&&c!==l&&c.parentNode;)(Ds.getComputedStyle(c)[di]+"").length>4&&(u=c.offsetLeft,h=c.offsetTop,c=0);if(f=Ds.getComputedStyle(e),f.position!=="absolute"&&f.position!=="fixed")for(l=e.offsetParent;o&&o!==l;)u+=o.scrollLeft||0,h+=o.scrollTop||0,o=o.parentNode;c=a.style,c.top=e.offsetTop-h+"px",c.left=e.offsetLeft-u+"px",c[di]=f[di],c[i_]=f[i_],c.position=f.position==="fixed"?"fixed":"absolute",e.parentNode.appendChild(a)}return a},pf=function(e,t,i,r,s,o,a){return e.a=t,e.b=i,e.c=r,e.d=s,e.e=o,e.f=a,e},Ys=function(){function n(t,i,r,s,o,a){t===void 0&&(t=1),i===void 0&&(i=0),r===void 0&&(r=0),s===void 0&&(s=1),o===void 0&&(o=0),a===void 0&&(a=0),pf(this,t,i,r,s,o,a)}var e=n.prototype;return e.inverse=function(){var i=this.a,r=this.b,s=this.c,o=this.d,a=this.e,l=this.f,c=i*o-r*s||1e-10;return pf(this,o/c,-r/c,-s/c,i/c,(s*l-o*a)/c,-(i*l-r*a)/c)},e.multiply=function(i){var r=this.a,s=this.b,o=this.c,a=this.d,l=this.e,c=this.f,u=i.a,h=i.c,f=i.b,d=i.d,_=i.e,p=i.f;return pf(this,u*r+f*o,u*s+f*a,h*r+d*o,h*s+d*a,l+_*r+p*o,c+_*s+p*a)},e.clone=function(){return new n(this.a,this.b,this.c,this.d,this.e,this.f)},e.equals=function(i){var r=this.a,s=this.b,o=this.c,a=this.d,l=this.e,c=this.f;return r===i.a&&s===i.b&&o===i.c&&a===i.d&&l===i.e&&c===i.f},e.apply=function(i,r){r===void 0&&(r={});var s=i.x,o=i.y,a=this.a,l=this.b,c=this.c,u=this.d,h=this.e,f=this.f;return r.x=s*a+o*c+h||0,r.y=s*l+o*u+f||0,r},n}();function gs(n,e,t,i){if(!n||!n.parentNode||(nr||gA(n)).documentElement===n)return new Ys;var r=v9(n),s=Cm(n),o=s?mA:yA,a=I9(n,t),l=o[0].getBoundingClientRect(),c=o[1].getBoundingClientRect(),u=o[2].getBoundingClientRect(),h=a.parentNode,f=!i&&E9(n),d=new Ys((c.left-l.left)/100,(c.top-l.top)/100,(u.left-l.left)/100,(u.top-l.top)/100,l.left+(f?0:T9()),l.top+(f?0:w9()));if(h.removeChild(a),r)for(l=r.length;l--;)c=r[l],c.scaleX=c.scaleY=0,c.renderTransform(1,c);return e?d.inverse():d}function cw(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function C9(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,n.__proto__=e}var xe,Ze,Mn,gi,ir,_f,Ji,r_,Xa,Lr,vA,s_,Zl,Am,Qa,ri,Ja,_u,wA,o_,lh=0,TA=function(){return typeof window<"u"},EA=function(){return xe||TA()&&(xe=window.gsap)&&xe.registerPlugin&&xe},xr=function(e){return typeof e=="function"},wl=function(e){return typeof e=="object"},oi=function(e){return typeof e>"u"},gu=function(){return!1},Tl="transform",a_="transformOrigin",Er=function(e){return Math.round(e*1e4)/1e4},Va=Array.isArray,Xc=function(e,t){var i=Mn.createElementNS?Mn.createElementNS((t||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),e):Mn.createElement(e);return i.style?i:Mn.createElement(e)},uw=180/Math.PI,us=1e20,A9=new Ys,Sr=Date.now||function(){return new Date().getTime()},Ls=[],Bo={},x9=0,R9=/^(?:a|input|textarea|button|select)$/i,hw=0,co={},Yi={},SA=function(e,t){var i={},r;for(r in e)i[r]=t?e[r]*t:e[r];return i},P9=function(e,t){for(var i in t)i in e||(e[i]=t[i]);return e},dw=function n(e,t){for(var i=e.length,r;i--;)t?e[i].style.touchAction=t:e[i].style.removeProperty("touch-action"),r=e[i].children,r&&r.length&&n(r,t)},bA=function(){return Ls.forEach(function(e){return e()})},O9=function(e){Ls.push(e),Ls.length===1&&xe.ticker.add(bA)},fw=function(){return!Ls.length&&xe.ticker.remove(bA)},pw=function(e){for(var t=Ls.length;t--;)Ls[t]===e&&Ls.splice(t,1);xe.to(fw,{overwrite:!0,delay:15,duration:0,onComplete:fw,data:"_draggable"})},k9=function(e,t){for(var i in t)i in e||(e[i]=t[i]);return e},kt=function(e,t,i,r){if(e.addEventListener){var s=Zl[t];r=r||(vA?{passive:!1}:null),e.addEventListener(s||t,i,r),s&&t!==s&&e.addEventListener(t,i,r)}},It=function(e,t,i,r){if(e.removeEventListener){var s=Zl[t];e.removeEventListener(s||t,i,r),s&&t!==s&&e.removeEventListener(t,i,r)}},Hn=function(e){e.preventDefault&&e.preventDefault(),e.preventManipulation&&e.preventManipulation()},N9=function(e,t){for(var i=e.length;i--;)if(e[i].identifier===t)return!0},M9=function n(e){Am=e.touches&&lh<e.touches.length,It(e.target,"touchend",n)},_w=function(e){Am=e.touches&&lh<e.touches.length,kt(e.target,"touchend",M9)},zo=function(e){return Ze.pageYOffset||e.scrollTop||e.documentElement.scrollTop||e.body.scrollTop||0},jo=function(e){return Ze.pageXOffset||e.scrollLeft||e.documentElement.scrollLeft||e.body.scrollLeft||0},gw=function n(e,t){kt(e,"scroll",t),ua(e.parentNode)||n(e.parentNode,t)},mw=function n(e,t){It(e,"scroll",t),ua(e.parentNode)||n(e.parentNode,t)},ua=function(e){return!e||e===gi||e.nodeType===9||e===Mn.body||e===Ze||!e.nodeType||!e.parentNode},yw=function(e,t){var i=t==="x"?"Width":"Height",r="scroll"+i,s="client"+i;return Math.max(0,ua(e)?Math.max(gi[r],ir[r])-(Ze["inner"+i]||gi[s]||ir[s]):e[r]-e[s])},gf=function n(e,t){var i=yw(e,"x"),r=yw(e,"y");ua(e)?e=Yi:n(e.parentNode,t),e._gsMaxScrollX=i,e._gsMaxScrollY=r,t||(e._gsScrollX=e.scrollLeft||0,e._gsScrollY=e.scrollTop||0)},mf=function(e,t,i){var r=e.style;r&&(oi(r[t])&&(t=Xa(t,e)||t),i==null?r.removeProperty&&r.removeProperty(t.replace(/([A-Z])/g,"-$1").toLowerCase()):r[t]=i)},ec=function(e){return Ze.getComputedStyle(e instanceof Element?e:e.host||(e.parentNode||{}).host||e)},hs={},uo=function(e){if(e===Ze)return hs.left=hs.top=0,hs.width=hs.right=gi.clientWidth||e.innerWidth||ir.clientWidth||0,hs.height=hs.bottom=(e.innerHeight||0)-20<gi.clientHeight?gi.clientHeight:e.innerHeight||ir.clientHeight||0,hs;var t=e.ownerDocument||Mn,i=oi(e.pageX)?!e.nodeType&&!oi(e.left)&&!oi(e.top)?e:Lr(e)[0].getBoundingClientRect():{left:e.pageX-jo(t),top:e.pageY-zo(t),right:e.pageX-jo(t)+1,bottom:e.pageY-zo(t)+1};return oi(i.right)&&!oi(i.width)?(i.right=i.left+i.width,i.bottom=i.top+i.height):oi(i.width)&&(i={width:i.right-i.left,height:i.bottom-i.top,right:i.right,left:i.left,bottom:i.bottom,top:i.top}),i},wt=function(e,t,i){var r=e.vars,s=r[i],o=e._listeners[t],a;return xr(s)&&(a=s.apply(r.callbackScope||e,r[i+"Params"]||[e.pointerEvent])),o&&e.dispatchEvent(t)===!1&&(a=!1),a},vw=function(e,t){var i=Lr(e)[0],r,s,o;return!i.nodeType&&i!==Ze?oi(e.left)?(s=e.min||e.minX||e.minRotation||0,r=e.min||e.minY||0,{left:s,top:r,width:(e.max||e.maxX||e.maxRotation||0)-s,height:(e.max||e.maxY||0)-r}):(o={x:0,y:0},{left:e.left-o.x,top:e.top-o.y,width:e.width,height:e.height}):D9(i,t)},qn={},D9=function(e,t){t=Lr(t)[0];var i=e.getBBox&&e.ownerSVGElement,r=e.ownerDocument||Mn,s,o,a,l,c,u,h,f,d,_,p,g,m;if(e===Ze)a=zo(r),s=jo(r),o=s+(r.documentElement.clientWidth||e.innerWidth||r.body.clientWidth||0),l=a+((e.innerHeight||0)-20<r.documentElement.clientHeight?r.documentElement.clientHeight:e.innerHeight||r.body.clientHeight||0);else{if(t===Ze||oi(t))return e.getBoundingClientRect();s=a=0,i?(_=e.getBBox(),p=_.width,g=_.height):(e.viewBox&&(_=e.viewBox.baseVal)&&(s=_.x||0,a=_.y||0,p=_.width,g=_.height),p||(m=ec(e),_=m.boxSizing==="border-box",p=(parseFloat(m.width)||e.clientWidth||0)+(_?0:parseFloat(m.borderLeftWidth)+parseFloat(m.borderRightWidth)),g=(parseFloat(m.height)||e.clientHeight||0)+(_?0:parseFloat(m.borderTopWidth)+parseFloat(m.borderBottomWidth)))),o=p,l=g}return e===t?{left:s,top:a,width:o-s,height:l-a}:(c=gs(t,!0).multiply(gs(e)),u=c.apply({x:s,y:a}),h=c.apply({x:o,y:a}),f=c.apply({x:o,y:l}),d=c.apply({x:s,y:l}),s=Math.min(u.x,h.x,f.x,d.x),a=Math.min(u.y,h.y,f.y,d.y),{left:s,top:a,width:Math.max(u.x,h.x,f.x,d.x)-s,height:Math.max(u.y,h.y,f.y,d.y)-a})},yf=function(e,t,i,r,s,o){var a={},l,c,u;if(t)if(s!==1&&t instanceof Array){if(a.end=l=[],u=t.length,wl(t[0]))for(c=0;c<u;c++)l[c]=SA(t[c],s);else for(c=0;c<u;c++)l[c]=t[c]*s;i+=1.1,r-=1.1}else xr(t)?a.end=function(h){var f=t.call(e,h),d,_;if(s!==1)if(wl(f)){d={};for(_ in f)d[_]=f[_]*s;f=d}else f*=s;return f}:a.end=t;return(i||i===0)&&(a.max=i),(r||r===0)&&(a.min=r),o&&(a.velocity=0),a},L9=function n(e){var t;return!e||!e.getAttribute||e===ir?!1:(t=e.getAttribute("data-clickable"))==="true"||t!=="false"&&(R9.test(e.nodeName+"")||e.getAttribute("contentEditable")==="true")?!0:n(e.parentNode)},Qc=function(e,t){for(var i=e.length,r;i--;)r=e[i],r.ondragstart=r.onselectstart=t?null:gu,xe.set(r,{lazy:!0,userSelect:t?"text":"none"})},V9=function n(e){if(ec(e).position==="fixed")return!0;if(e=e.parentNode,e&&e.nodeType===1)return n(e)},IA,l_,F9=function(e,t){e=xe.utils.toArray(e)[0],t=t||{};var i=document.createElement("div"),r=i.style,s=e.firstChild,o=0,a=0,l=e.scrollTop,c=e.scrollLeft,u=e.scrollWidth,h=e.scrollHeight,f=0,d=0,_=0,p,g,m,T,w,S;IA&&t.force3D!==!1?(w="translate3d(",S="px,0px)"):Tl&&(w="translate(",S="px)"),this.scrollTop=function(E,I){if(!arguments.length)return-this.top();this.top(-E,I)},this.scrollLeft=function(E,I){if(!arguments.length)return-this.left();this.left(-E,I)},this.left=function(E,I){if(!arguments.length)return-(e.scrollLeft+a);var P=e.scrollLeft-c,x=a;if((P>2||P<-2)&&!I){c=e.scrollLeft,xe.killTweensOf(this,{left:1,scrollLeft:1}),this.left(-c),t.onKill&&t.onKill();return}E=-E,E<0?(a=E-.5|0,E=0):E>d?(a=E-d|0,E=d):a=0,(a||x)&&(this._skip||(r[Tl]=w+-a+"px,"+-o+S),a+f>=0&&(r.paddingRight=a+f+"px")),e.scrollLeft=E|0,c=e.scrollLeft},this.top=function(E,I){if(!arguments.length)return-(e.scrollTop+o);var P=e.scrollTop-l,x=o;if((P>2||P<-2)&&!I){l=e.scrollTop,xe.killTweensOf(this,{top:1,scrollTop:1}),this.top(-l),t.onKill&&t.onKill();return}E=-E,E<0?(o=E-.5|0,E=0):E>_?(o=E-_|0,E=_):o=0,(o||x)&&(this._skip||(r[Tl]=w+-a+"px,"+-o+S)),e.scrollTop=E|0,l=e.scrollTop},this.maxScrollTop=function(){return _},this.maxScrollLeft=function(){return d},this.disable=function(){for(s=i.firstChild;s;)T=s.nextSibling,e.appendChild(s),s=T;e===i.parentNode&&e.removeChild(i)},this.enable=function(){if(s=e.firstChild,s!==i){for(;s;)T=s.nextSibling,i.appendChild(s),s=T;e.appendChild(i),this.calibrate()}},this.calibrate=function(E){var I=e.clientWidth===p,P,x,A;l=e.scrollTop,c=e.scrollLeft,!(I&&e.clientHeight===g&&i.offsetHeight===m&&u===e.scrollWidth&&h===e.scrollHeight&&!E)&&((o||a)&&(x=this.left(),A=this.top(),this.left(-e.scrollLeft),this.top(-e.scrollTop)),P=ec(e),(!I||E)&&(r.display="block",r.width="auto",r.paddingRight="0px",f=Math.max(0,e.scrollWidth-e.clientWidth),f&&(f+=parseFloat(P.paddingLeft)+(l_?parseFloat(P.paddingRight):0))),r.display="inline-block",r.position="relative",r.overflow="visible",r.verticalAlign="top",r.boxSizing="content-box",r.width="100%",r.paddingRight=f+"px",l_&&(r.paddingBottom=P.paddingBottom),p=e.clientWidth,g=e.clientHeight,u=e.scrollWidth,h=e.scrollHeight,d=e.scrollWidth-p,_=e.scrollHeight-g,m=i.offsetHeight,r.display="block",(x||A)&&(this.left(x),this.top(A)))},this.content=i,this.element=e,this._skip=!1,this.enable()},vf=function(e){if(TA()&&document.body){var t=window&&window.navigator;Ze=window,Mn=document,gi=Mn.documentElement,ir=Mn.body,_f=Xc("div"),_u=!!window.PointerEvent,Ji=Xc("div"),Ji.style.cssText="visibility:hidden;height:1px;top:-1px;pointer-events:none;position:relative;clear:both;cursor:grab",Ja=Ji.style.cursor==="grab"?"grab":"move",Qa=t&&t.userAgent.toLowerCase().indexOf("android")!==-1,s_="ontouchstart"in gi&&"orientation"in Ze||t&&(t.MaxTouchPoints>0||t.msMaxTouchPoints>0),l_=function(){var i=Xc("div"),r=Xc("div"),s=r.style,o=ir,a;return s.display="inline-block",s.position="relative",i.style.cssText="width:90px;height:40px;padding:10px;overflow:auto;visibility:hidden",i.appendChild(r),o.appendChild(i),a=r.offsetHeight+18>i.scrollHeight,o.removeChild(i),a}(),Zl=function(i){for(var r=i.split(","),s=("onpointerdown"in _f?"pointerdown,pointermove,pointerup,pointercancel":"onmspointerdown"in _f?"MSPointerDown,MSPointerMove,MSPointerUp,MSPointerCancel":i).split(","),o={},a=4;--a>-1;)o[r[a]]=s[a],o[s[a]]=r[a];try{gi.addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){vA=1}}))}catch{}return o}("touchstart,touchmove,touchend,touchcancel"),kt(Mn,"touchcancel",gu),kt(Ze,"touchmove",gu),ir&&ir.addEventListener("touchstart",gu),kt(Mn,"contextmenu",function(){for(var i in Bo)Bo[i].isPressed&&Bo[i].endDrag()}),xe=r_=EA()}xe?(ri=xe.plugins.inertia,wA=xe.core.context||function(){},Xa=xe.utils.checkPrefix,Tl=Xa(Tl),a_=Xa(a_),Lr=xe.utils.toArray,o_=xe.core.getStyleSaver,IA=!!Xa("perspective")):e&&console.warn("Please gsap.registerPlugin(Draggable)")},U9=function(){function n(t){this._listeners={},this.target=t||this}var e=n.prototype;return e.addEventListener=function(i,r){var s=this._listeners[i]||(this._listeners[i]=[]);~s.indexOf(r)||s.push(r)},e.removeEventListener=function(i,r){var s=this._listeners[i],o=s&&s.indexOf(r);o>=0&&s.splice(o,1)},e.dispatchEvent=function(i){var r=this,s;return(this._listeners[i]||[]).forEach(function(o){return o.call(r,{type:i,target:r.target})===!1&&(s=!1)}),s},n}(),ha=function(n){C9(e,n);function e(t,i){var r;r=n.call(this)||this,r_||vf(1),t=Lr(t)[0],r.styles=o_&&o_(t,"transform,left,top"),ri||(ri=xe.plugins.inertia),r.vars=i=SA(i||{}),r.target=t,r.x=r.y=r.rotation=0,r.dragResistance=parseFloat(i.dragResistance)||0,r.edgeResistance=isNaN(i.edgeResistance)?1:parseFloat(i.edgeResistance)||0,r.lockAxis=i.lockAxis,r.autoScroll=i.autoScroll||0,r.lockedAxis=null,r.allowEventDefault=!!i.allowEventDefault,xe.getProperty(t,"x");var s=(i.type||"x,y").toLowerCase(),o=~s.indexOf("x")||~s.indexOf("y"),a=s.indexOf("rotation")!==-1,l=a?"rotation":o?"x":"left",c=o?"y":"top",u=!!(~s.indexOf("x")||~s.indexOf("left")||s==="scroll"),h=!!(~s.indexOf("y")||~s.indexOf("top")||s==="scroll"),f=i.minimumMovement||2,d=cw(r),_=Lr(i.trigger||i.handle||t),p={},g=0,m=!1,T=i.autoScrollMarginTop||40,w=i.autoScrollMarginRight||40,S=i.autoScrollMarginBottom||40,E=i.autoScrollMarginLeft||40,I=i.clickableTest||L9,P=0,x=t._gsap||xe.core.getCache(t),A=V9(t),k=function(b,F){return parseFloat(x.get(t,b,F))},D=t.ownerDocument||Mn,W,N,de,fe,ne,Z,he,St,bt,Ee,_e,He,Ce,jt,qe,M,j,K,te,Se,Fe,y,v,C,L,O,$,Y,z,q,V,ee,ae,oe=function(b){return Hn(b),b.stopImmediatePropagation&&b.stopImmediatePropagation(),!1},le=function ue(b){if(d.autoScroll&&d.isDragging&&(m||j)){var F=t,R=d.autoScroll*15,B,J,ie,be,ce,Ye,Oe,Xe;for(m=!1,Yi.scrollTop=Ze.pageYOffset!=null?Ze.pageYOffset:D.documentElement.scrollTop!=null?D.documentElement.scrollTop:D.body.scrollTop,Yi.scrollLeft=Ze.pageXOffset!=null?Ze.pageXOffset:D.documentElement.scrollLeft!=null?D.documentElement.scrollLeft:D.body.scrollLeft,be=d.pointerX-Yi.scrollLeft,ce=d.pointerY-Yi.scrollTop;F&&!J;)J=ua(F.parentNode),B=J?Yi:F.parentNode,ie=J?{bottom:Math.max(gi.clientHeight,Ze.innerHeight||0),right:Math.max(gi.clientWidth,Ze.innerWidth||0),left:0,top:0}:B.getBoundingClientRect(),Ye=Oe=0,h&&(Xe=B._gsMaxScrollY-B.scrollTop,Xe<0?Oe=Xe:ce>ie.bottom-S&&Xe?(m=!0,Oe=Math.min(Xe,R*(1-Math.max(0,ie.bottom-ce)/S)|0)):ce<ie.top+T&&B.scrollTop&&(m=!0,Oe=-Math.min(B.scrollTop,R*(1-Math.max(0,ce-ie.top)/T)|0)),Oe&&(B.scrollTop+=Oe)),u&&(Xe=B._gsMaxScrollX-B.scrollLeft,Xe<0?Ye=Xe:be>ie.right-w&&Xe?(m=!0,Ye=Math.min(Xe,R*(1-Math.max(0,ie.right-be)/w)|0)):be<ie.left+E&&B.scrollLeft&&(m=!0,Ye=-Math.min(B.scrollLeft,R*(1-Math.max(0,be-ie.left)/E)|0)),Ye&&(B.scrollLeft+=Ye)),J&&(Ye||Oe)&&(Ze.scrollTo(B.scrollLeft,B.scrollTop),Ca(d.pointerX+Ye,d.pointerY+Oe)),F=B}if(j){var yt=d.x,Qt=d.y;a?(d.deltaX=yt-parseFloat(x.rotation),d.rotation=yt,x.rotation=yt+"deg",x.renderTransform(1,x)):N?(h&&(d.deltaY=Qt-N.top(),N.top(Qt)),u&&(d.deltaX=yt-N.left(),N.left(yt))):o?(h&&(d.deltaY=Qt-parseFloat(x.y),x.y=Qt+"px"),u&&(d.deltaX=yt-parseFloat(x.x),x.x=yt+"px"),x.renderTransform(1,x)):(h&&(d.deltaY=Qt-parseFloat(t.style.top||0),t.style.top=Qt+"px"),u&&(d.deltaX=yt-parseFloat(t.style.left||0),t.style.left=yt+"px")),St&&!b&&!Y&&(Y=!0,wt(d,"drag","onDrag")===!1&&(u&&(d.x-=d.deltaX),h&&(d.y-=d.deltaY),ue(!0)),Y=!1)}j=!1},ye=function(b,F){var R=d.x,B=d.y,J,ie;t._gsap||(x=xe.core.getCache(t)),x.uncache&&xe.getProperty(t,"x"),o?(d.x=parseFloat(x.x),d.y=parseFloat(x.y)):a?d.x=d.rotation=parseFloat(x.rotation):N?(d.y=N.top(),d.x=N.left()):(d.y=parseFloat(t.style.top||(ie=ec(t))&&ie.top)||0,d.x=parseFloat(t.style.left||(ie||{}).left)||0),(te||Se||Fe)&&!F&&(d.isDragging||d.isThrowing)&&(Fe&&(co.x=d.x,co.y=d.y,J=Fe(co),J.x!==d.x&&(d.x=J.x,j=!0),J.y!==d.y&&(d.y=J.y,j=!0)),te&&(J=te(d.x),J!==d.x&&(d.x=J,a&&(d.rotation=J),j=!0)),Se&&(J=Se(d.y),J!==d.y&&(d.y=J),j=!0)),j&&le(!0),b||(d.deltaX=d.x-R,d.deltaY=d.y-B,wt(d,"throwupdate","onThrowUpdate"))},Ue=function(b,F,R,B){return F==null&&(F=-us),R==null&&(R=us),xr(b)?function(J){var ie=d.isPressed?1-d.edgeResistance:1;return b.call(d,(J>R?R+(J-R)*ie:J<F?F+(J-F)*ie:J)*B)*B}:Va(b)?function(J){for(var ie=b.length,be=0,ce=us,Ye,Oe;--ie>-1;)Ye=b[ie],Oe=Ye-J,Oe<0&&(Oe=-Oe),Oe<ce&&Ye>=F&&Ye<=R&&(be=ie,ce=Oe);return b[be]}:isNaN(b)?function(J){return J}:function(){return b*B}},et=function(b,F,R,B,J,ie,be){return ie=ie&&ie<us?ie*ie:us,xr(b)?function(ce){var Ye=d.isPressed?1-d.edgeResistance:1,Oe=ce.x,Xe=ce.y,yt,Qt,qi;return ce.x=Oe=Oe>R?R+(Oe-R)*Ye:Oe<F?F+(Oe-F)*Ye:Oe,ce.y=Xe=Xe>J?J+(Xe-J)*Ye:Xe<B?B+(Xe-B)*Ye:Xe,yt=b.call(d,ce),yt!==ce&&(ce.x=yt.x,ce.y=yt.y),be!==1&&(ce.x*=be,ce.y*=be),ie<us&&(Qt=ce.x-Oe,qi=ce.y-Xe,Qt*Qt+qi*qi>ie&&(ce.x=Oe,ce.y=Xe)),ce}:Va(b)?function(ce){for(var Ye=b.length,Oe=0,Xe=us,yt,Qt,qi,Gn;--Ye>-1;)qi=b[Ye],yt=qi.x-ce.x,Qt=qi.y-ce.y,Gn=yt*yt+Qt*Qt,Gn<Xe&&(Oe=Ye,Xe=Gn);return Xe<=ie?b[Oe]:ce}:function(ce){return ce}},_t=function(){var b,F,R,B;he=!1,N?(N.calibrate(),d.minX=_e=-N.maxScrollLeft(),d.minY=Ce=-N.maxScrollTop(),d.maxX=Ee=d.maxY=He=0,he=!0):i.bounds&&(b=vw(i.bounds,t.parentNode),a?(d.minX=_e=b.left,d.maxX=Ee=b.left+b.width,d.minY=Ce=d.maxY=He=0):!oi(i.bounds.maxX)||!oi(i.bounds.maxY)?(b=i.bounds,d.minX=_e=b.minX,d.minY=Ce=b.minY,d.maxX=Ee=b.maxX,d.maxY=He=b.maxY):(F=vw(t,t.parentNode),d.minX=_e=Math.round(k(l,"px")+b.left-F.left),d.minY=Ce=Math.round(k(c,"px")+b.top-F.top),d.maxX=Ee=Math.round(_e+(b.width-F.width)),d.maxY=He=Math.round(Ce+(b.height-F.height))),_e>Ee&&(d.minX=Ee,d.maxX=Ee=_e,_e=d.minX),Ce>He&&(d.minY=He,d.maxY=He=Ce,Ce=d.minY),a&&(d.minRotation=_e,d.maxRotation=Ee),he=!0),i.liveSnap&&(R=i.liveSnap===!0?i.snap||{}:i.liveSnap,B=Va(R)||xr(R),a?(te=Ue(B?R:R.rotation,_e,Ee,1),Se=null):R.points?Fe=et(B?R:R.points,_e,Ee,Ce,He,R.radius,N?-1:1):(u&&(te=Ue(B?R:R.x||R.left||R.scrollLeft,_e,Ee,N?-1:1)),h&&(Se=Ue(B?R:R.y||R.top||R.scrollTop,Ce,He,N?-1:1))))},xn=function(){d.isThrowing=!1,wt(d,"throwcomplete","onThrowComplete")},_r=function(){d.isThrowing=!1},io=function(b,F){var R,B,J,ie;b&&ri?(b===!0&&(R=i.snap||i.liveSnap||{},B=Va(R)||xr(R),b={resistance:(i.throwResistance||i.resistance||1e3)/(a?10:1)},a?b.rotation=yf(d,B?R:R.rotation,Ee,_e,1,F):(u&&(b[l]=yf(d,B?R:R.points||R.x||R.left,Ee,_e,N?-1:1,F||d.lockedAxis==="x")),h&&(b[c]=yf(d,B?R:R.points||R.y||R.top,He,Ce,N?-1:1,F||d.lockedAxis==="y")),(R.points||Va(R)&&wl(R[0]))&&(b.linkedProps=l+","+c,b.radius=R.radius))),d.isThrowing=!0,ie=isNaN(i.overshootTolerance)?i.edgeResistance===1?0:1-d.edgeResistance+.2:i.overshootTolerance,b.duration||(b.duration={max:Math.max(i.minDuration||0,"maxDuration"in i?i.maxDuration:2),min:isNaN(i.minDuration)?ie===0||wl(b)&&b.resistance>1e3?0:.5:i.minDuration,overshoot:ie}),d.tween=J=xe.to(N||t,{inertia:b,data:"_draggable",inherit:!1,onComplete:xn,onInterrupt:_r,onUpdate:i.fastMode?wt:ye,onUpdateParams:i.fastMode?[d,"onthrowupdate","onThrowUpdate"]:R&&R.radius?[!1,!0]:[]}),i.fastMode||(N&&(N._skip=!0),J.render(1e9,!0,!0),ye(!0,!0),d.endX=d.x,d.endY=d.y,a&&(d.endRotation=d.x),J.play(0),ye(!0,!0),N&&(N._skip=!1))):he&&d.applyBounds()},gr=function(b){var F=C,R;C=gs(t.parentNode,!0),b&&d.isPressed&&!C.equals(F||new Ys)&&(R=F.inverse().apply({x:de,y:fe}),C.apply(R,R),de=R.x,fe=R.y),C.equals(A9)&&(C=null)},rs=function(){var b=1-d.edgeResistance,F=A?jo(D):0,R=A?zo(D):0,B,J,ie;o&&(x.x=k(l,"px")+"px",x.y=k(c,"px")+"px",x.renderTransform()),gr(!1),qn.x=d.pointerX-F,qn.y=d.pointerY-R,C&&C.apply(qn,qn),de=qn.x,fe=qn.y,j&&(Ca(d.pointerX,d.pointerY),le(!0)),ee=gs(t),N?(_t(),Z=N.top(),ne=N.left()):(Ot()?(ye(!0,!0),_t()):d.applyBounds(),a?(B=t.ownerSVGElement?[x.xOrigin-t.getBBox().x,x.yOrigin-t.getBBox().y]:(ec(t)[a_]||"0 0").split(" "),M=d.rotationOrigin=gs(t).apply({x:parseFloat(B[0])||0,y:parseFloat(B[1])||0}),ye(!0,!0),J=d.pointerX-M.x-F,ie=M.y-d.pointerY+R,ne=d.x,Z=d.y=Math.atan2(ie,J)*uw):(Z=k(c,"px"),ne=k(l,"px"))),he&&b&&(ne>Ee?ne=Ee+(ne-Ee)/b:ne<_e&&(ne=_e-(_e-ne)/b),a||(Z>He?Z=He+(Z-He)/b:Z<Ce&&(Z=Ce-(Ce-Z)/b))),d.startX=ne=Er(ne),d.startY=Z=Er(Z)},Ot=function(){return d.tween&&d.tween.isActive()},jn=function(){Ji.parentNode&&!Ot()&&!d.isDragging&&Ji.parentNode.removeChild(Ji)},mr=function(b,F){var R;if(!W||d.isPressed||!b||(b.type==="mousedown"||b.type==="pointerdown")&&!F&&Sr()-P<30&&Zl[d.pointerEvent.type]){V&&b&&W&&Hn(b);return}if(L=Ot(),ae=!1,d.pointerEvent=b,Zl[b.type]?(v=~b.type.indexOf("touch")?b.currentTarget||b.target:D,kt(v,"touchend",ni),kt(v,"touchmove",ss),kt(v,"touchcancel",ni),kt(D,"touchstart",_w)):(v=null,kt(D,"mousemove",ss)),$=null,(!_u||!v)&&(kt(D,"mouseup",ni),b&&b.target&&kt(b.target,"mouseup",ni)),y=I.call(d,b.target)&&i.dragClickables===!1&&!F,y){kt(b.target,"change",ni),wt(d,"pressInit","onPressInit"),wt(d,"press","onPress"),Qc(_,!0),V=!1;return}if(O=!v||u===h||d.vars.allowNativeTouchScrolling===!1||d.vars.allowContextMenu&&b&&(b.ctrlKey||b.which>2)?!1:u?"y":"x",V=!O&&!d.allowEventDefault,V&&(Hn(b),kt(Ze,"touchforcechange",Hn)),b.changedTouches?(b=jt=b.changedTouches[0],qe=b.identifier):b.pointerId?qe=b.pointerId:jt=qe=null,lh++,O9(le),fe=d.pointerY=b.pageY,de=d.pointerX=b.pageX,wt(d,"pressInit","onPressInit"),(O||d.autoScroll)&&gf(t.parentNode),t.parentNode&&d.autoScroll&&!N&&!a&&t.parentNode._gsMaxScrollX&&!Ji.parentNode&&!t.getBBox&&(Ji.style.width=t.parentNode.scrollWidth+"px",t.parentNode.appendChild(Ji)),rs(),d.tween&&d.tween.kill(),d.isThrowing=!1,xe.killTweensOf(N||t,p,!0),N&&xe.killTweensOf(t,{scrollTo:1},!0),d.tween=d.lockedAxis=null,(i.zIndexBoost||!a&&!N&&i.zIndexBoost!==!1)&&(t.style.zIndex=e.zIndex++),d.isPressed=!0,St=!!(i.onDrag||d._listeners.drag),bt=!!(i.onMove||d._listeners.move),i.cursor!==!1||i.activeCursor)for(R=_.length;--R>-1;)xe.set(_[R],{cursor:i.activeCursor||i.cursor||(Ja==="grab"?"grabbing":Ja)});wt(d,"press","onPress")},ss=function(b){var F=b,R,B,J,ie,be,ce;if(!W||Am||!d.isPressed||!b){V&&b&&W&&Hn(b);return}if(d.pointerEvent=b,R=b.changedTouches,R){if(b=R[0],b!==jt&&b.identifier!==qe){for(ie=R.length;--ie>-1&&(b=R[ie]).identifier!==qe&&b.target!==t;);if(ie<0)return}}else if(b.pointerId&&qe&&b.pointerId!==qe)return;if(v&&O&&!$&&(qn.x=b.pageX-(A?jo(D):0),qn.y=b.pageY-(A?zo(D):0),C&&C.apply(qn,qn),B=qn.x,J=qn.y,be=Math.abs(B-de),ce=Math.abs(J-fe),(be!==ce&&(be>f||ce>f)||Qa&&O===$)&&($=be>ce&&u?"x":"y",O&&$!==O&&kt(Ze,"touchforcechange",Hn),d.vars.lockAxisOnTouchScroll!==!1&&u&&h&&(d.lockedAxis=$==="x"?"y":"x",xr(d.vars.onLockAxis)&&d.vars.onLockAxis.call(d,F)),Qa&&O===$))){ni(F);return}!d.allowEventDefault&&(!O||$&&O!==$)&&F.cancelable!==!1?(Hn(F),V=!0):V&&(V=!1),d.autoScroll&&(m=!0),Ca(b.pageX,b.pageY,bt)},Ca=function(b,F,R){var B=1-d.dragResistance,J=1-d.edgeResistance,ie=d.pointerX,be=d.pointerY,ce=Z,Ye=d.x,Oe=d.y,Xe=d.endX,yt=d.endY,Qt=d.endRotation,qi=j,Gn,yr,Gt,vt,ld,ii;d.pointerX=b,d.pointerY=F,A&&(b-=jo(D),F-=zo(D)),a?(vt=Math.atan2(M.y-F,b-M.x)*uw,ld=d.y-vt,ld>180?(Z-=360,d.y=vt):ld<-180&&(Z+=360,d.y=vt),d.x!==ne||Math.abs(Z-vt)>f?(d.y=vt,Gt=ne+(Z-vt)*B):Gt=ne):(C&&(ii=b*C.a+F*C.c+C.e,F=b*C.b+F*C.d+C.f,b=ii),yr=F-fe,Gn=b-de,yr<f&&yr>-f&&(yr=0),Gn<f&&Gn>-f&&(Gn=0),(d.lockAxis||d.lockedAxis)&&(Gn||yr)&&(ii=d.lockedAxis,ii||(d.lockedAxis=ii=u&&Math.abs(Gn)>Math.abs(yr)?"y":h?"x":null,ii&&xr(d.vars.onLockAxis)&&d.vars.onLockAxis.call(d,d.pointerEvent)),ii==="y"?yr=0:ii==="x"&&(Gn=0)),Gt=Er(ne+Gn*B),vt=Er(Z+yr*B)),(te||Se||Fe)&&(d.x!==Gt||d.y!==vt&&!a)&&(Fe&&(co.x=Gt,co.y=vt,ii=Fe(co),Gt=Er(ii.x),vt=Er(ii.y)),te&&(Gt=Er(te(Gt))),Se&&(vt=Er(Se(vt)))),he&&(Gt>Ee?Gt=Ee+Math.round((Gt-Ee)*J):Gt<_e&&(Gt=_e+Math.round((Gt-_e)*J)),a||(vt>He?vt=Math.round(He+(vt-He)*J):vt<Ce&&(vt=Math.round(Ce+(vt-Ce)*J)))),(d.x!==Gt||d.y!==vt&&!a)&&(a?(d.endRotation=d.x=d.endX=Gt,j=!0):(h&&(d.y=d.endY=vt,j=!0),u&&(d.x=d.endX=Gt,j=!0)),!R||wt(d,"move","onMove")!==!1?!d.isDragging&&d.isPressed&&(d.isDragging=ae=!0,wt(d,"dragstart","onDragStart")):(d.pointerX=ie,d.pointerY=be,Z=ce,d.x=Ye,d.y=Oe,d.endX=Xe,d.endY=yt,d.endRotation=Qt,j=qi))},ni=function ue(b,F){if(!W||!d.isPressed||b&&qe!=null&&!F&&(b.pointerId&&b.pointerId!==qe&&b.target!==t||b.changedTouches&&!N9(b.changedTouches,qe))){V&&b&&W&&Hn(b);return}d.isPressed=!1;var R=b,B=d.isDragging,J=d.vars.allowContextMenu&&b&&(b.ctrlKey||b.which>2),ie=xe.delayedCall(.001,jn),be,ce,Ye,Oe,Xe;if(v?(It(v,"touchend",ue),It(v,"touchmove",ss),It(v,"touchcancel",ue),It(D,"touchstart",_w)):It(D,"mousemove",ss),It(Ze,"touchforcechange",Hn),(!_u||!v)&&(It(D,"mouseup",ue),b&&b.target&&It(b.target,"mouseup",ue)),j=!1,B&&(g=hw=Sr(),d.isDragging=!1),pw(le),y&&!J){b&&(It(b.target,"change",ue),d.pointerEvent=R),Qc(_,!1),wt(d,"release","onRelease"),wt(d,"click","onClick"),y=!1;return}for(ce=_.length;--ce>-1;)mf(_[ce],"cursor",i.cursor||(i.cursor!==!1?Ja:null));if(lh--,b){if(be=b.changedTouches,be&&(b=be[0],b!==jt&&b.identifier!==qe)){for(ce=be.length;--ce>-1&&(b=be[ce]).identifier!==qe&&b.target!==t;);if(ce<0&&!F)return}d.pointerEvent=R,d.pointerX=b.pageX,d.pointerY=b.pageY}return J&&R?(Hn(R),V=!0,wt(d,"release","onRelease")):R&&!B?(V=!1,L&&(i.snap||i.bounds)&&io(i.inertia||i.throwProps),wt(d,"release","onRelease"),(!Qa||R.type!=="touchmove")&&R.type.indexOf("cancel")===-1&&(wt(d,"click","onClick"),Sr()-P<300&&wt(d,"doubleclick","onDoubleClick"),Oe=R.target||t,P=Sr(),Xe=function(){P!==z&&d.enabled()&&!d.isPressed&&!R.defaultPrevented&&(Oe.click?Oe.click():D.createEvent&&(Ye=D.createEvent("MouseEvents"),Ye.initMouseEvent("click",!0,!0,Ze,1,d.pointerEvent.screenX,d.pointerEvent.screenY,d.pointerX,d.pointerY,!1,!1,!1,!1,0,null),Oe.dispatchEvent(Ye)))},!Qa&&!R.defaultPrevented&&xe.delayedCall(.05,Xe))):(io(i.inertia||i.throwProps),!d.allowEventDefault&&R&&(i.dragClickables!==!1||!I.call(d,R.target))&&B&&(!O||$&&O===$)&&R.cancelable!==!1?(V=!0,Hn(R)):V=!1,wt(d,"release","onRelease")),Ot()&&ie.duration(d.tween.duration()),B&&wt(d,"dragend","onDragEnd"),!0},Ac=function(b){if(b&&d.isDragging&&!N){var F=b.target||t.parentNode,R=F.scrollLeft-F._gsScrollX,B=F.scrollTop-F._gsScrollY;(R||B)&&(C?(de-=R*C.a+B*C.c,fe-=B*C.d+R*C.b):(de-=R,fe-=B),F._gsScrollX+=R,F._gsScrollY+=B,Ca(d.pointerX,d.pointerY))}},Rm=function(b){var F=Sr(),R=F-P<100,B=F-g<50,J=R&&z===P,ie=d.pointerEvent&&d.pointerEvent.defaultPrevented,be=R&&q===P,ce=b.isTrusted||b.isTrusted==null&&R&&J;if((J||B&&d.vars.suppressClickOnDrag!==!1)&&b.stopImmediatePropagation&&b.stopImmediatePropagation(),R&&!(d.pointerEvent&&d.pointerEvent.defaultPrevented)&&(!J||ce&&!be)){ce&&J&&(q=P),z=P;return}(d.isPressed||B||R)&&(!ce||!b.detail||!R||ie)&&Hn(b),!R&&!B&&!ae&&(b&&b.target&&(d.pointerEvent=b),wt(d,"click","onClick"))},Pm=function(b){return C?{x:b.x*C.a+b.y*C.c+C.e,y:b.x*C.b+b.y*C.d+C.f}:{x:b.x,y:b.y}};return K=e.get(t),K&&K.kill(),r.startDrag=function(ue,b){var F,R,B,J;mr(ue||d.pointerEvent,!0),b&&!d.hitTest(ue||d.pointerEvent)&&(F=uo(ue||d.pointerEvent),R=uo(t),B=Pm({x:F.left+F.width/2,y:F.top+F.height/2}),J=Pm({x:R.left+R.width/2,y:R.top+R.height/2}),de-=B.x-J.x,fe-=B.y-J.y),d.isDragging||(d.isDragging=ae=!0,wt(d,"dragstart","onDragStart"))},r.drag=ss,r.endDrag=function(ue){return ni(ue||d.pointerEvent,!0)},r.timeSinceDrag=function(){return d.isDragging?0:(Sr()-g)/1e3},r.timeSinceClick=function(){return(Sr()-P)/1e3},r.hitTest=function(ue,b){return e.hitTest(d.target,ue,b)},r.getDirection=function(ue,b){var F=ue==="velocity"&&ri?ue:wl(ue)&&!a?"element":"start",R,B,J,ie,be,ce;return F==="element"&&(be=uo(d.target),ce=uo(ue)),R=F==="start"?d.x-ne:F==="velocity"?ri.getVelocity(t,l):be.left+be.width/2-(ce.left+ce.width/2),a?R<0?"counter-clockwise":"clockwise":(b=b||2,B=F==="start"?d.y-Z:F==="velocity"?ri.getVelocity(t,c):be.top+be.height/2-(ce.top+ce.height/2),J=Math.abs(R/B),ie=J<1/b?"":R<0?"left":"right",J<b&&(ie!==""&&(ie+="-"),ie+=B<0?"up":"down"),ie)},r.applyBounds=function(ue,b){var F,R,B,J,ie,be;if(ue&&i.bounds!==ue)return i.bounds=ue,d.update(!0,b);if(ye(!0),_t(),he&&!Ot()){if(F=d.x,R=d.y,F>Ee?F=Ee:F<_e&&(F=_e),R>He?R=He:R<Ce&&(R=Ce),(d.x!==F||d.y!==R)&&(B=!0,d.x=d.endX=F,a?d.endRotation=F:d.y=d.endY=R,j=!0,le(!0),d.autoScroll&&!d.isDragging))for(gf(t.parentNode),J=t,Yi.scrollTop=Ze.pageYOffset!=null?Ze.pageYOffset:D.documentElement.scrollTop!=null?D.documentElement.scrollTop:D.body.scrollTop,Yi.scrollLeft=Ze.pageXOffset!=null?Ze.pageXOffset:D.documentElement.scrollLeft!=null?D.documentElement.scrollLeft:D.body.scrollLeft;J&&!be;)be=ua(J.parentNode),ie=be?Yi:J.parentNode,h&&ie.scrollTop>ie._gsMaxScrollY&&(ie.scrollTop=ie._gsMaxScrollY),u&&ie.scrollLeft>ie._gsMaxScrollX&&(ie.scrollLeft=ie._gsMaxScrollX),J=ie;d.isThrowing&&(B||d.endX>Ee||d.endX<_e||d.endY>He||d.endY<Ce)&&io(i.inertia||i.throwProps,B)}return d},r.update=function(ue,b,F){if(b&&d.isPressed){var R=gs(t),B=ee.apply({x:d.x-ne,y:d.y-Z}),J=gs(t.parentNode,!0);J.apply({x:R.e-B.x,y:R.f-B.y},B),d.x-=B.x-J.e,d.y-=B.y-J.f,le(!0),rs()}var ie=d.x,be=d.y;return gr(!b),ue?d.applyBounds():(j&&F&&le(!0),ye(!0)),b&&(Ca(d.pointerX,d.pointerY),j&&le(!0)),d.isPressed&&!b&&(u&&Math.abs(ie-d.x)>.01||h&&Math.abs(be-d.y)>.01&&!a)&&rs(),d.autoScroll&&(gf(t.parentNode,d.isDragging),m=d.isDragging,le(!0),mw(t,Ac),gw(t,Ac)),d},r.enable=function(ue){var b={lazy:!0},F,R,B;if(i.cursor!==!1&&(b.cursor=i.cursor||Ja),xe.utils.checkPrefix("touchCallout")&&(b.touchCallout="none"),ue!=="soft"){for(dw(_,u===h?"none":i.allowNativeTouchScrolling&&t.scrollHeight===t.clientHeight==(t.scrollWidth===t.clientHeight)||i.allowEventDefault?"manipulation":u?"pan-y":"pan-x"),R=_.length;--R>-1;)B=_[R],_u||kt(B,"mousedown",mr),kt(B,"touchstart",mr),kt(B,"click",Rm,!0),xe.set(B,b),B.getBBox&&B.ownerSVGElement&&u!==h&&xe.set(B.ownerSVGElement,{touchAction:i.allowNativeTouchScrolling||i.allowEventDefault?"manipulation":u?"pan-y":"pan-x"}),i.allowContextMenu||kt(B,"contextmenu",oe);Qc(_,!1)}return gw(t,Ac),W=!0,ri&&ue!=="soft"&&ri.track(N||t,o?"x,y":a?"rotation":"top,left"),t._gsDragID=F="d"+x9++,Bo[F]=d,N&&(N.enable(),N.element._gsDragID=F),(i.bounds||a)&&rs(),i.bounds&&d.applyBounds(),d},r.disable=function(ue){for(var b=d.isDragging,F=_.length,R;--F>-1;)mf(_[F],"cursor",null);if(ue!=="soft"){for(dw(_,null),F=_.length;--F>-1;)R=_[F],mf(R,"touchCallout",null),It(R,"mousedown",mr),It(R,"touchstart",mr),It(R,"click",Rm,!0),It(R,"contextmenu",oe);Qc(_,!0),v&&(It(v,"touchcancel",ni),It(v,"touchend",ni),It(v,"touchmove",ss)),It(D,"mouseup",ni),It(D,"mousemove",ss)}return mw(t,Ac),W=!1,ri&&ue!=="soft"&&(ri.untrack(N||t,o?"x,y":a?"rotation":"top,left"),d.tween&&d.tween.kill()),N&&N.disable(),pw(le),d.isDragging=d.isPressed=y=!1,b&&wt(d,"dragend","onDragEnd"),d},r.enabled=function(ue,b){return arguments.length?ue?d.enable(b):d.disable(b):W},r.kill=function(){return d.isThrowing=!1,d.tween&&d.tween.kill(),d.disable(),xe.set(_,{clearProps:"userSelect"}),delete Bo[t._gsDragID],d},r.revert=function(){this.kill(),this.styles&&this.styles.revert()},~s.indexOf("scroll")&&(N=r.scrollProxy=new F9(t,P9({onKill:function(){d.isPressed&&ni(null)}},i)),t.style.overflowY=h&&!s_?"auto":"hidden",t.style.overflowX=u&&!s_?"auto":"hidden",t=N.content),a?p.rotation=1:(u&&(p[l]=1),h&&(p[c]=1)),x.force3D="force3D"in i?i.force3D:!0,wA(cw(r)),r.enable(),r}return e.register=function(i){xe=i,vf()},e.create=function(i,r){return r_||vf(!0),Lr(i).map(function(s){return new e(s,r)})},e.get=function(i){return Bo[(Lr(i)[0]||{})._gsDragID]},e.timeSinceDrag=function(){return(Sr()-hw)/1e3},e.hitTest=function(i,r,s){if(i===r)return!1;var o=uo(i),a=uo(r),l=o.top,c=o.left,u=o.right,h=o.bottom,f=o.width,d=o.height,_=a.left>u||a.right<c||a.top>h||a.bottom<l,p,g,m;return _||!s?!_:(m=(s+"").indexOf("%")!==-1,s=parseFloat(s)||0,p={left:Math.max(c,a.left),top:Math.max(l,a.top)},p.width=Math.min(u,a.right)-p.left,p.height=Math.min(h,a.bottom)-p.top,p.width<0||p.height<0?!1:m?(s*=.01,g=p.width*p.height,g>=f*d*s||g>=a.width*a.height*s):p.width>s&&p.height>s)},e}(U9);k9(ha.prototype,{pointerX:0,pointerY:0,startX:0,startY:0,deltaX:0,deltaY:0,isDragging:!1,isPressed:!1});ha.zIndex=1e3;ha.version="3.12.5";EA()&&xe.registerPlugin(ha);const $9="/museum-rock/img/svg/exhibitions-close.svg",B9={props:{block:Object}},CA=n=>(Zr("data-v-a87b29ce"),n=n(),es(),n),z9={class:"exhibitions-gallery__item"},j9=["src"],G9={class:"exhibitions-gallery__item-mask"},H9=CA(()=>H("img",{src:$9,alt:"Крест",class:"exhibitions-gallery__item-close"},null,-1)),q9={class:"exhibitions-gallery__item-text"},W9={class:"exhibitions-gallery__item-title"},K9={class:"exhibitions-gallery__item-description"},Y9=CA(()=>H("span",null,"Подробнее",-1));function X9(n,e,t,i,r,s){const o=ot("router-link");return Ie(),at("div",z9,[H("img",{src:`${t.block.image}`,alt:"Категория экспонатов"},null,8,j9),H("div",G9,[H9,H("div",q9,[H("h3",W9,rr(t.block.title),1),H("p",K9,rr(t.block.description),1),je(o,{to:`/exhibitions/categories/${t.block.id}`,class:"exhibitions-gallery__item-button"},{default:li(()=>[Y9]),_:1},8,["to"])])])])}const Q9=pt(B9,[["render",X9],["__scopeId","data-v-a87b29ce"]]),J9={components:{MyLoader:iC,ExhibitionsGalleryBlock:Q9},data(){return{timesToRepeat:16,draggableInstance:null,itemActiveElement:null}},methods:{...sm({fetchExhibitions:"exhibitions/fetchExhibitions"}),createDraggable(){this.draggableInstance=ha.create(".exhibitions-gallery__list",{bounds:document.querySelector(".exhibitions-gallery"),inertia:!0})[0]},destroyDraggable(){this.draggableInstance&&this.draggableInstance.destroy()},centerItem(n){if(this.itemActiveElement){if(this.$refs.draggableContainer!==null&&this.$refs.draggableContainer!==void 0){const e=this.$refs.draggableSection;this.$refs.draggableContainer.children[n].classList.remove("exhibitions-gallery__item-active"),e.classList.remove("exhibitions-gallery-active"),this.draggableInstance.enabled(!0),this.itemActiveElement=null}}else{const e=this.$refs.draggableSection,t=this.$refs.draggableContainer,i=t.children[n];this.itemActiveElement=i;const r=i.getBoundingClientRect(),s=window.innerWidth/2,o=window.innerHeight/2;i.classList.add("exhibitions-gallery__item-active"),e.classList.add("exhibitions-gallery-active");const a=this.draggableInstance.x-(r.left-s)-r.width/2,l=this.draggableInstance.y-(r.top-o)-r.height/2;requestAnimationFrame(()=>{n_.to(t,{x:a,y:l,duration:.5})}),this.draggableInstance.enabled(!1)}}},mounted(){this.fetchExhibitions(),this.$nextTick(()=>{n_.registerPlugin(ha),this.createDraggable()})},beforeDestroy(){this.destroyDraggable()},computed:{...rm({isLoading:n=>n.exhibitions.isLoading,exhibitions:n=>n.exhibitions.exhibitions}),multipliedItems(){let n=[];for(let e=0;e<this.timesToRepeat;e++)n=n.concat(this.exhibitions);return n}}},Z9=n=>(Zr("data-v-21a90f5a"),n=n(),es(),n),ez={ref:"draggableSection",class:"exhibitions-gallery"},tz={class:"exhibitions-gallery__title"},nz=Z9(()=>H("span",null,"Все экспонаты",-1));function iz(n,e,t,i,r,s){const o=ot("my-loader"),a=ot("exhibitions-gallery-block"),l=ot("router-link");return Ie(),at("section",ez,[H("h1",tz,[vh(" Музей камня "),H("span",{class:fi(["exhibitions-gallery__loading",{loading:n.isLoading}])},[je(o)],2)]),H("div",{ref:"draggableContainer",class:fi(["exhibitions-gallery__list",{loading:n.isLoading}])},[(Ie(!0),at(qt,null,nc(s.multipliedItems,(c,u)=>(Ie(),Un(a,{key:c.id,onClick:h=>s.centerItem(u),block:c},null,8,["onClick","block"]))),128))],2),H("div",{class:fi(["exhibitions-gallery__button",{loading:n.isLoading}])},[n.exhibitions[0]?(Ie(),Un(l,{key:0,to:`/exhibitions/categories/${n.exhibitions[0].id}`,class:"exhibitions-gallery__button-item"},{default:li(()=>[nz]),_:1},8,["to"])):Ho("",!0)],2)],512)}const rz=pt(J9,[["render",iz],["__scopeId","data-v-21a90f5a"]]),sz={components:{ExhibitionsGallery:rz}};function oz(n,e,t,i,r,s){const o=ot("exhibitions-gallery");return Ie(),Un(o)}const az=pt(sz,[["render",oz]]),lz={data(){return{activeSection:0}},methods:{toggleSection(n){n===this.activeSection?this.activeSection=0:this.activeSection=n}}},xm=n=>(Zr("data-v-3b5947d7"),n=n(),es(),n),cz={class:"hero"},uz={class:"hero__inner"},hz={class:"hero__wrapper"},dz={class:"hero__master"},fz=vT('<div class="hero__section" data-v-3b5947d7><div style="width:1100px;margin:0px auto;position:relative;" data-v-3b5947d7><div class="hero__info" data-v-3b5947d7><div data-v-3b5947d7><svg width="80" height="64" viewBox="0 0 152 138" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-3b5947d7><path d="M91.98 39.04H.53v98.31h31.62V66.57h28.21v70.78h31.62V66.57h28.22v70.78h31.64V66.47l-14.68-27.43H91.98ZM132.12 28.34 117.44.92H.95v27.53h131.17v-.1Z" fill="#4F4898" data-v-3b5947d7></path></svg></div><p data-v-3b5947d7><span data-v-3b5947d7>Креативное пространство, которое объединяет культурные события города, кофейню, галерею современного искусства и шоурум с изделиями красноярских производителей в одном месте.</span></p></div></div></div>',1),pz=xm(()=>H("div",{style:{width:"1100px",margin:"0px auto",position:"relative"}},[H("div",{class:"hero__info"},[H("h3",null,[H("span",null,"Галерея")]),H("p",null," Выставочное пространство, где мы показываем современное искусство и другие кретивные направления. Экспозиции обновляются раз в месяц. Работы доступны к приобретению. "),H("a",{href:"/gallery"},"Перейти")])],-1)),_z=[pz],gz=xm(()=>H("div",{style:{width:"1100px",margin:"0px auto",position:"relative"}},[H("div",{class:"hero__info"},[H("h3",null,[H("span",null,"Онлайн шоурум")]),H("p",null," Здесь представлены товары, созданные мастерами Красноярского края. Знакомьтесь с брендами и приобретайте онлайн. "),H("a",{href:"/showroom"},"Перейти")])],-1)),mz=[gz],yz=xm(()=>H("div",{style:{width:"1100px",margin:"0px auto",position:"relative"}},[H("div",{class:"hero__info"},[H("h3",null,[H("span",null,"Оффлайн шоурум")]),H("p",null," Пространство, где можно найти эксклюзивные вещи красноярских производителей, выбрать особенный подарок или порадовать себя сибирскими брендами высокого уровня. ")])],-1)),vz=[yz];function wz(n,e,t,i,r,s){return Ie(),at("section",cz,[H("div",uz,[H("div",hz,[H("div",dz,[fz,H("div",{class:fi(["hero__section",{"hero__section-active":r.activeSection===1,"hero__section-previous":r.activeSection!==1&&r.activeSection!==0}]),onClick:e[0]||(e[0]=o=>s.toggleSection(1))},_z,2),H("div",{class:fi(["hero__section",{"hero__section-active":r.activeSection===2,"hero__section-previous":r.activeSection==3}]),onClick:e[1]||(e[1]=o=>s.toggleSection(2))},mz,2),H("div",{class:fi(["hero__section",{"hero__section-active":r.activeSection===3}]),onClick:e[2]||(e[2]=o=>s.toggleSection(3))},vz,2)])])])])}const Tz=pt(lz,[["render",wz],["__scopeId","data-v-3b5947d7"]]),Ez={components:{HeadSection:Tz}};function Sz(n,e,t,i,r,s){const o=ot("head-section");return Ie(),Un(o)}const bz=pt(Ez,[["render",Sz]]),Iz={};function Cz(n,e,t,i,r,s){return Ie(),at("div",null,"123")}const Az=pt(Iz,[["render",Cz]]),xz={components:{PeopleItem:Az}};function Rz(n,e,t,i,r,s){const o=ot("people-item");return Ie(),Un(o)}const Pz=pt(xz,[["render",Rz]]),Oz={components:{PeopleList:Pz}};function kz(n,e,t,i,r,s){const o=ot("people-list");return Ie(),Un(o)}const Nz=pt(Oz,[["render",kz]]),Mz={components:{PeopleSection:Nz}};function Dz(n,e,t,i,r,s){const o=ot("people-section");return Ie(),Un(o)}const Lz=pt(Mz,[["render",Dz]]),Vz={data(){return{}},props:{year:Object,index:Number},methods:{}},Fz={class:"timeline-item grid"},Uz={key:0,class:"timeline-item__cap"},$z={class:"timeline-item__block"},Bz={class:"timeline-item__year"},zz={class:"timeline-item__title"},jz={class:"timeline-item__description"};function Gz(n,e,t,i,r,s){return Ie(),at("div",Fz,[t.index%2?(Ie(),at("div",Uz)):Ho("",!0),H("div",$z,[H("div",Bz,rr(t.year.year),1),H("h3",zz,rr(t.year.title),1),H("p",jz,rr(t.year.description),1)])])}const Hz=pt(Vz,[["render",Gz],["__scopeId","data-v-91f5db57"]]),qz={components:{TimelineItem:Hz},data(){return{years:[{year:1942,title:"Начало истории",description:"История завода началась во время Великой Отечественной войны. Началось производство продукции для фронта: пленка была нужна для аэрофотосъемки в разведывательных целях и для составления карт местности."},{year:1952,title:"Фотографическая бумага",description:"С 1952 года фабрика стала выпускать только фотографическую бумагу, полностью отойдя от военного производства."},{year:1976,title:"Красноярский зав",description:"Фабрику переименовали в Красноярский завод светочувствительных материалов «Квант»."},{year:1976,title:"Красноярский зав",description:"Фабрику переименовали в Красноярский завод светочувствительных материалов «Квант»."},{year:1976,title:"Красноярский зав",description:"Фабрику переименовали в Красноярский завод светочувствительных материалов «Квант»."}]}}},Wz=n=>(Zr("data-v-8a3cfe85"),n=n(),es(),n),Kz={class:"timeline"},Yz={class:"container"},Xz={class:"timeline__inner"},Qz=Wz(()=>H("div",{class:"timeline__stick"},null,-1));function Jz(n,e,t,i,r,s){const o=ot("timeline-item");return Ie(),at("section",Kz,[H("div",Yz,[H("div",Xz,[(Ie(!0),at(qt,null,nc(r.years,(a,l)=>(Ie(),Un(o,{key:l,year:a,index:l},null,8,["year","index"]))),128)),Qz])])])}const Zz=pt(qz,[["render",Jz],["__scopeId","data-v-8a3cfe85"]]),e6={components:{TimelineSection:Zz}};function t6(n,e,t,i,r,s){const o=ot("timeline-section");return Ie(),Un(o)}const n6=pt(e6,[["render",t6]]),i6=[{path:"/",component:bz,name:"Home"},{path:"/exhibitions",component:az},{path:"/exhibitions/categories",component:KU,children:[{path:":id",component:s$}]},{path:"/people",component:Lz},{path:"/timeline",component:n6},{path:"/afisha",component:r4}],AA=G2({history:v2("/museum-rock"),routes:i6});AA.beforeEach((n,e,t)=>{n.matched.length===0?t({name:"Home"}):t()});const r6={state:()=>({exhibitions:[],isLoading:!0}),mutations:{setLoading(n,e){n.isLoading=e},setExhibitions(n,e){n.exhibitions=e}},actions:{fetchExhibitions({commit:n}){const e=fI(jI,"exhibitions");iF(e,t=>{const i=t.docs.map(r=>{const s=r.data();let o=[];return s.items&&(o=s.items.map((a,l)=>({...a,id:l+1}))),{...s,id:parseInt(r.id),items:o}});n("setExhibitions",i),setTimeout(()=>{n("setLoading",!1)},800)})}},namespaced:!0},s6=UU({modules:{exhibitions:r6}}),o6=zx(EU);o6.use(MF,{firebaseApp:zI}).use(AA).use(s6).mount("#app");
